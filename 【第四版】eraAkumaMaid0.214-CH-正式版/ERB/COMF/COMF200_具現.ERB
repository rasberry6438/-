@COM200
;具現
CALL PRINT_TRAIN_NAME(SELECTCOM)

CALL TRAIN_MESSAGE_B

SIF REFUSE_CHECK()
	RETURN 0

STR:前回指令 = %STR:今回指令%

RETURN 1


@FLAG_COM200, ARG


@SOURCE_COM200, ARG


@TRAIN_MESSAGE_COM200
#DIM LCOUNT
#DIM SELECT_COUNT
#DIM ACTOR

PRINTFORML 要怎么做呢？

VARSET LOCAL
SELECT_COUNT = 0
FOR LCOUNT, 1, CHARANUM
	SELECTCASE LCOUNT
	CASE MASTER, TARGET, ASSI
		SIF STATE("撃沈", LCOUNT)
			CONTINUE
		SIF LCOUNT != MASTER && DITEMTYPE:LCOUNT:TNUM("具現")
			CONTINUE

		IF TALENT:LCOUNT:扶她
			PRINTFORML  [ {SELECT_COUNT}] 將%CALLNAME:LCOUNT%的陰莖縮回
			LOCAL:SELECT_COUNT = LCOUNT
			SELECT_COUNT += 1
		ELSEIF TALENT:LCOUNT:女性
			PRINTFORML  [ {SELECT_COUNT}] 讓%CALLNAME:LCOUNT%生長出陰莖
			LOCAL:SELECT_COUNT = LCOUNT
			SELECT_COUNT += 1
		ENDIF
	ENDSELECT
NEXT
PRINTFORML [100] 返回

CALL INPUT_SELECT, SELECT_COUNT, 100

SELECTCASE RESULT
CASE 100
	TFLAG:指令中止 = 1
	RETURN 0
CASEELSE
	ACTOR = LOCAL:RESULT

	IF STATE("具現", ACTOR)
		CALL REMOVE_STATE, ACTOR, "具現"
		PRINTFORMW %CALLNAME:ACTOR%因具現的能力而生長出來的陰莖消失了……
	ELSEIF STATE("阴茎陰核化", ACTOR)
		CALL REMOVE_STATE, ACTOR, "阴茎陰核化"
		PRINTFORMW %CALLNAME:ACTOR%因具現的能力而萎縮成陰蒂的陰莖復活了！
	ELSEIF TALENT:ACTOR:扶她
		CALL ADD_STATE, ACTOR, "阴茎陰核化"
		PRINTFORMW 在具現的作用下、%CALLNAME:ACTOR%挺立的陰莖漸漸萎縮下來、變成了可愛的陰蒂……
		CALL SETFLAG, "阴茎陰核化フラグ", ACTOR
	ELSE
		CALL ADD_STATE, ACTOR, "具現"
		PRINTFORM 在%CALLNAME:ACTOR%的股間、
		SELECTCASE SIZE("阴茎", ACTOR)
		CASE IS >= 3
			PRINTFORM 有著過分兇惡的大小的
		CASE 2
			PRINTFORM 有著令人心馳神盪的雄偉的
		ENDSELECT
		PRINTFORMW 陰莖以相當兇猛的氣勢生長出來了！

		CALL SETFLAG, "具現化ＯＮフラグ", ACTOR
		CALL RECORD_SP_EXP, ACTOR
	ENDIF
ENDSELECT
