;-------------------------------------------------
;画像をスプライト化する関数群。現在は使われていない
;-------------------------------------------------
;第一製作者　ブリート
;-------------------------------------------------

@MADEFACE_CUTOUT
#DIM DYNAMIC LCOUNT
#DIM DYNAMIC MEMO_TARGET

;画像ID1000ですでに作成済みか確認する
GCREATE 1000, 1, 1
SIF RESULT == 0
	RETURN 0

MEMO_TARGET = TARGET

FOR LCOUNT, 1, 200

	;角色が定義されてるか確認
	SIF EXISTCSV(LCOUNT) == 0
		CONTINUE

	;ダミー作成
	ADDCHARA LCOUNT
	TARGET = CHARANUM - 1
	CFLAG:颜绘 = 1

	;服を着せる
	IF CFLAG:夜型
		CALL SET_COORDINATE, "便装"
	ELSE
		CALL SET_COORDINATE, "制服"
	ENDIF

	;画像ID1000～に颜绘パネルを作成する
	;EXTSTR(EXTSTR(MAIDFACE(TARGET, 1), "", ","), "+")はMAIDFACE(TARGET, 1)から背景指定と、
	;末尾の,より右のサイズやマウスオーバーテ接吻トなどを省いたもの(いわゆる{FPOS},{FSIZE},{FSIZE},{0},{MEMO_value},%MEMO_title%/を除く)
	;例えばフェリなら 4直髪長銀+7a普通+9微笑+11眯眯眼左+11眯眯眼右+13領帶西装茶色+16斜刘海銀+18通常眉灰色 のようなものが返ってくる
	CALL OVERLAY_GCREATE, 1000 + LCOUNT, @"0背景黄色枠有+%EXTSTR(EXTSTR(MAIDFACE(TARGET, 1), "", ","), "+")%"

	;スプライト名をつける
	SPRITECREATE @"颜绘パネル{LCOUNT}", 1000 + LCOUNT
	;角色の削除
	DELCHARA CHARANUM - 1
NEXT

TARGET = MEMO_TARGET

RETURN 1
