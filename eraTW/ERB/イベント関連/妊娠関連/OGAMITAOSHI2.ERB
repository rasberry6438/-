@CHK_HININ_LOVE_2(ARG)
#FUNCTION
LOCAL = 0
SIF TALENT:ARG:恋人
	LOCAL += 500
;愛情経験

LOCAL += EXP:ARG:愛情経験 / 2

;好感度
SELECTCASE CFLAG:ARG:好感度
CASE 0 TO 499
	LOCAL -= 100
CASE 500 TO 999
	LOCAL += 50
CASE 1000 TO 2999
	LOCAL += 80
CASEELSE
	LOCAL += CFLAG:ARG:好感度 / 20
ENDSELECT

LOCAL += ABL:ARG:親密 * 25
LOCAL += ABL:ARG:従順 * 25
LOCAL += ABL:ARG:奉仕精神 * 10

LOCAL += FLAG:催眠強度

RETURNF LOCAL

@CHK_HININ_REASON_2(ARG,ARGS)
#FUNCTION
#DIM 理性判定値
VARSET LOCAL

LOCAL:3 += GETPALAMLV(PALAM:欲情,25) * (10 + TALENT:ARG:快感応答 * 4)
LOCAL:3 += GETPALAMLV(PALAM:恭順,25) * (10 - TALENT:ARG:態度 * 3)
LOCAL:3 += GETPALAMLV(PALAM:好意,25) * 10

LOCAL:5 += ABL:ARG:膣射中毒 * 30
LOCAL:5 += ABL:ARG:欲望 * (10 + TALENT:ARG:快感応答 * 3)
LOCAL:5 += MARK:ARG:快楽刻印 * 30
LOCAL:5 += MARK:ARG:不埒刻印 * 10
LOCAL:5 += MARK:ARG:苦痛刻印 * 10
LOCAL:5 -= MARK:ARG:反発刻印 * 100


理性判定値 = 800 - LOCAL:3 * LOCAL:5 / 300
理性判定値 -= FLAG:催眠強度 * 5

SIF ESTRUS_CYCLE(ARG) == 150
	理性判定値 += 1000

IF TCVAR:ARG:発情 && TALENT:ARG:動物耳 && CFLAG:ARG:900 == 7
	理性判定値 -= 500
ELSEIF TCVAR:ARG:催情薬 || IsHeat(ARG)
	理性判定値 -= 200
ENDIF
SIF IsInsenceValid(ARG)
	理性判定値 -= 50

IF TALENT:ARG:傲嬌
	IF TALENT:ARG:恋慕
		理性判定値 = 理性判定値 * 2 / 3
	ELSE
		理性判定値 = 理性判定値 * 3 / 2
	ENDIF
ENDIF

;信賴度
IF CFLAG:ARG:信賴度 < 100
	理性判定値 *= 4
ELSEIF CFLAG:ARG:信賴度 < 300
	理性判定値 *= 2
ELSEIF CFLAG:ARG:信賴度 < 500
	理性判定値 *= 5 / 3
ELSEIF CFLAG:ARG:信賴度 < 1000
	理性判定値 *= 6 / 5
ELSE
	理性判定値 *= 3 / 5
ENDIF

;カウンターだとここで素質処理しておく
IF ARGS == "COUNTER"
	SIF TALENT:ARG:抵抗
		理性判定値 += 200
	IF TALENT:ARG:自尊心 == -1
		理性判定値  = 理性判定値 * 9 / 10
	ELSEIF TALENT:ARG:自尊心 == 1
		理性判定値 = 理性判定値 * 6 / 5
	ENDIF
	SIF OTOKOGIRAI(ARG)
		理性判定値 = 理性判定値 * 3 / 2
	SIF TALENT:ARG:貞操 == 1
		理性判定値 = 理性判定値 * 6 / 5
	SIF TALENT:MASTER:謎之魅力
		理性判定値 = 理性判定値 * 2 / 5
	SIF TALENT:ARG:倒錯的
		理性判定値 = 理性判定値 * 4 / 5
	IF TALENT:ARG:難以越過的底線
		SELECTCASE EXP:ARG:愛情経験
			CASE IS >= 500
				理性判定値 = 理性判定値 / 3
			CASE IS >= 300
				理性判定値 = 理性判定値 * 11 / 10
			CASE IS >= 100
				理性判定値 = 理性判定値 * 5 / 4
			CASEELSE
				理性判定値 = 理性判定値 * 3 / 2
		ENDSELECT
	ENDIF
	IF TALENT:ARG:傲嬌
		IF TALENT:ARG:恋慕
			理性判定値 = 理性判定値 / 2
		ELSEIF TALENT:ARG:思慕
			理性判定値 = 理性判定値 * 2 / 3
		ELSE
			理性判定値 = 理性判定値 * 3 / 2
		ENDIF
	ENDIF
ENDIF


理性判定値 = MAX(理性判定値,0)
RETURNF 理性判定値

@OGAMITAOSHI2(ARG)
#DIM 理性判定値
#DIM 好意判定値
#DIM 好意表示
VARSET LOCAL


PRINTFORMW %NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%的心中

好意判定値 = CHK_HININ_LOVE_2(ARG) 
CALL SHOW_LOVEPOWER(好意判定値)

WAIT
理性判定値 = CHK_HININ_REASON_2(ARG)

CALL SHOW_REASONWALL(理性判定値)
IF TALENT:MASTER:容姿 == -1
	CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%看到%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%的醜脸突然感到一阵恶心……",C_RED,1,1)
	理性判定値 = 理性判定値 * 11 / 10
	CALL SHOW_REASONWALL(理性判定値)
ENDIF
IF TALENT:MASTER:容姿 == 1
	CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%俊美的脸庞让%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%有一种想给他生个孩子的冲动……",C_PINK,1,1)
	理性判定値 = 理性判定値 * 4 / 5
	CALL SHOW_REASONWALL(理性判定値)
ENDIF
IF TALENT:MASTER:謎之魅力 
CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%、因%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%的謎之魅力感覺理性有些蒸発……",C_PINK,1,1) 
	理性判定値 = 理性判定値 * 2 / 5
	CALL SHOW_REASONWALL(理性判定値)
ENDIF
IF TALENT:MASTER:魅惑
	CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%被%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%魅惑了！",C_PINK,1,1)
	理性判定値 = 理性判定値 * 2 / 5
	CALL SHOW_REASONWALL(理性判定値)
ENDIF
IF TALENT:ARG:自尊心 == -1
	理性判定値  = 理性判定値 * 9 / 10
CALL COLORMESSAGE(@"缺乏自尊的%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%、没想到自己会被追求",C_PINK,1,1)
	CALL SHOW_REASONWALL(理性判定値)
ENDIF
IF TALENT:ARG:自尊心 == 1
	理性判定値 = 理性判定値 * 6 / 5
    CALL COLORMESSAGE(@"架子很大的%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%、不想讓自己表現的太過廉價",C_RED,1,1)
	CALL SHOW_REASONWALL(理性判定値)
ENDIF
IF TALENT:ARG:痛覚 == -1
	理性判定値  = 理性判定値 * 9 / 10
	CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%的内心做好了承受痛苦的准备……",C_PINK,1,1)
	CALL SHOW_REASONWALL(理性判定値)
ENDIF
IF TALENT:ARG:痛覚 == 1
	理性判定値 = 理性判定値 * 6 / 5
	CALL COLORMESSAGE(@"怕痛的%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%一想到接下来要做什么有些犹豫……",C_RED,1,1)
	CALL SHOW_REASONWALL(理性判定値)
ENDIF
IF TALENT:ARG:貞操 == 1
	理性判定値 = 理性判定値 * 6 / 5
    CALL COLORMESSAGE(@"非常重視贞操的%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%、在改変觀念之前沒那麼容易就接受的……",C_RED,1,1)
	CALL SHOW_REASONWALL(理性判定値)
ENDIF
IF TALENT:ARG:性的兴趣 == 1
	理性判定値  = 理性判定値 * 3 / 5
	CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%的内心对真正的性爱抱有好奇心",C_PINK,1,1)
	CALL SHOW_REASONWALL(理性判定値)
ENDIF
IF TALENT:ARG:性的兴趣 == -1
	理性判定値 = 理性判定値 * 6 / 5
	CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%的内心保守，还没彻底放开",C_RED,1,1)
	CALL SHOW_REASONWALL(理性判定値)
ENDIF
IF TALENT:ARG:羞恥心 == 1
	理性判定値 = 理性判定値 * 6 / 5
	CALL COLORMESSAGE(@"面对%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%的求爱%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%、害羞了起来……",C_RED,1,1)
	CALL SHOW_REASONWALL(理性判定値)
ENDIF
IF OTOKOGIRAI(ARG)
	理性判定値 = 理性判定値 * 3 / 2
	IF TALENT:ARG:性別嗜好 == 3
        CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%対他人抱有同樣的忌避感情……",C_RED,1,1)
    ELSEIF TALENT:ARG:性別嗜好 == 1
        CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%対男性抱有同樣的忌避感情……",C_RED,1,1)
	ENDIF
	CALL SHOW_REASONWALL(理性判定値)
ENDIF
IF TALENT:ARG:倒錯的
    CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%、対真正的性交感到了倒錯的魅力……",C_PINK,1,1)
	理性判定値 = 理性判定値 * 4 / 5
	CALL SHOW_REASONWALL(理性判定値)
ENDIF
IF TALENT:ARG:応答 == 1
	CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%突然傲慢的把头扭到一边……",C_RED,1,1)
	理性判定値 = 理性判定値 * 11 / 10
	CALL SHOW_REASONWALL(理性判定値)
ENDIF
IF TALENT:ARG:献身的
	CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%热情的求爱激发了%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%的献身精神……！",C_PINK,1,1)
	理性判定値 = 理性判定値 * 4 / 5
	CALL SHOW_REASONWALL(理性判定値)
ENDIF
IF TALENT:ARG:精愛味覚
	CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%阴茎散发的精臭味让%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%吞咽着口水……！",C_PINK,1,1)
	理性判定値 = 理性判定値 * 3 / 5
	CALL SHOW_REASONWALL(理性判定値)
ENDIF
	IF TALENT:MASTER:形状 > 0
		IF TALENT:MASTER:禁断的知識 == 1
			IF TALENT:MASTER:形状 < 3
				CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%看着%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%小小的下体",C_RED,1,1)
				CALL COLORMESSAGE(@"露出了很失望的样子",C_RED,1,1)
				CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%努力让小兄弟旋转了起来！",C_PINK,1,1)
				CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%惊奇不已！",C_PINK,1,1)
			ELSEIF TALENT:MASTER:形状 == 4
				CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%看到%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%的下体在发亮",C_CREAM,1,1)
				CALL COLORMESSAGE(@"认为%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%是个奇怪的人",C_RED,1,1)
				CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%让小兄弟不断闪烁五颜六色的光",C_GREEN,1,1)
				CALL COLORMESSAGE(@"卟呤卟呤",C_ORANGE,1,1)
				CALL COLORMESSAGE(@"卟呤卟呤",C_YELLOW,1,1)
				CALL COLORMESSAGE(@"卟呤卟呤",C_AQUA,1,1)
				CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%被迷惑了！",C_PINK,1,1)
			ELSEIF TALENT:MASTER:形状 == 5
				CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%看着%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%疙里疙瘩的下体",C_RED,1,1)
				CALL COLORMESSAGE(@"对%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%感到很害怕",C_RED,1,1)
				CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%让小兄弟像震动棒一样震动",C_PINK,1,1)
				CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%被吸引了！",C_PINK,1,1)
			ELSEIF TALENT:MASTER:形状 == 6
				CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%瞄到%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%像大象鼻子一样耷拉着的粗大下体",C_RED,1,1)
				CALL COLORMESSAGE(@"认为%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%硬不起来",C_RED,1,1)
				CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%让小兄弟挺立起来",C_PINK,1,1)
				CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%兴奋不已！",C_PINK,1,1)
			ELSEIF TALENT:MASTER:形状 == 10
				CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%被%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%馬一样的阴茎吓到",C_RED,1,1)
				CALL COLORMESSAGE(@"大到实在是有些害怕",C_RED,1,1)
				CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%用阴茎在%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%脸上甩来甩去",C_PINK,1,1)
				CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%有些屈服了",C_PINK,1,1)
			ENDIF
		理性判定値 = 理性判定値 * 4 / 5
		CALL SHOW_REASONWALL(理性判定値)
		ELSE
			IF TALENT:MASTER:形状 < 3
				CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%看着%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%小小的下体",C_RED,1,1)
				CALL COLORMESSAGE(@"露出了很失望的样子",C_RED,1,1)
			ELSEIF TALENT:MASTER:形状 == 4
				CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%看到%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%的下体在发亮",C_CREAM,1,1)
				CALL COLORMESSAGE(@"认为%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%是个奇怪的人",C_RED,1,1)
			ELSEIF TALENT:MASTER:形状 == 5
				CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%看着%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%疙里疙瘩的下体",C_RED,1,1)
				CALL COLORMESSAGE(@"对%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%感到很害怕",C_RED,1,1)
			ELSEIF TALENT:MASTER:形状 == 6
				CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%瞄到%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%像大象鼻子一样耷拉着的粗大下体",C_RED,1,1)
				CALL COLORMESSAGE(@"认为%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%硬不起来",C_RED,1,1)
			ELSEIF TALENT:MASTER:形状 == 10
				CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%被%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%馬一样的阴茎吓到",C_RED,1,1)
				CALL COLORMESSAGE(@"大到实在是有些害怕",C_RED,1,1)
			ELSE
			ENDIF
		理性判定値 = 理性判定値 * 11 / 10
		CALL SHOW_REASONWALL(理性判定値)
		ENDIF
ENDIF
IF TALENT:ARG:難以越過的底線
	SELECTCASE EXP:ARG:愛情経験
		CASE IS >= 500
            CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%、已經就快要完全接受%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%了……！",C_PINK,1,1)
			理性判定値 = 理性判定値 / 3
		CASE IS >= 300
            CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%、雖然是面対%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%但還是有些抵抗……",C_RED,1,1)
			理性判定値 = 理性判定値 * 11 / 10
		CASE IS >= 100
            CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%、即使是和親密的対象也保持著一定距離……",C_RED,1,1)
			理性判定値 = 理性判定値 * 5 / 4
		CASEELSE
            CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%不希望他人过于接近自己......",C_PINK,1,1)
			理性判定値 = 理性判定値 *  3 / 2
	ENDSELECT
	CALL SHOW_REASONWALL(理性判定値)
ENDIF
IF TALENT:ARG:傲嬌
	IF TALENT:ARG:恋慕
		理性判定値 = 理性判定値 / 2
        CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%撒嬌求歡！",C_PINK,1,1)
	ELSEIF TALENT:ARG:思慕
		理性判定値 = 理性判定値 * 2 / 3
        CALL COLORMESSAGE(@"傲嬌的%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%稍微表現得坦率了一點點……",C_PINK,1,1)
	ELSE
		理性判定値 = 理性判定値 * 3 / 2
		CALL COLORMESSAGE(@"傲嬌的%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%傲起来了……",C_RED,1,1)
	ENDIF
	CALL SHOW_REASONWALL(理性判定値)
ENDIF
IF TALENT:ARG:反発抑制
	CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%被%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%催眠…幸福感使她缓缓张开了双腿…！",C_P_PURPLE,1,1)
	理性判定値 = 理性判定値 * 4 / 5
	CALL SHOW_REASONWALL(理性判定値)
ENDIF
IF TALENT:ARG:合意誤認
	CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%在%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%脑海里灌输了不存在的记忆…%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%疑惑并动摇着…",C_P_PURPLE,1,1)
	理性判定値 = 理性判定値 * 4 / 5
	CALL SHOW_REASONWALL(理性判定値)
ENDIF
IF FLAG:催眠強度 > 5
	IF FLAG:催眠強度 > 95
		理性判定値 = 理性判定値 * 1 / 20
		CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%超常发挥的催眠术直接对%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%的人格进行了改写！",C_P_PURPLE,1,1)
		CALL SHOW_REASONWALL(理性判定値)
	ELSEIF FLAG:催眠強度 > 74
		理性判定値 = 理性判定値 * 3 / 10
		CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%成功的催眠术让%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%对%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%说的任何甜言蜜语都深信不疑……",C_P_PURPLE,1,1)
		CALL SHOW_REASONWALL(理性判定値)
	ELSEIF FLAG:催眠強度 > 49
		理性判定値 = 理性判定値 * 1 / 3
		CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%的深层催眠使%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%对%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%几乎言听计从……",C_P_PURPLE,1,1)
		CALL SHOW_REASONWALL(理性判定値)
	ELSEIF FLAG:催眠強度 > 24
		理性判定値 = 理性判定値 * 2 / 5
		CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%的催眠术让%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%认同了错误的常识……",C_P_PURPLE,1,1)
		CALL SHOW_REASONWALL(理性判定値)
	ELSE
		理性判定値 = 理性判定値 * 9 / 20
		CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%的浅层催眠让%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%更容易接受他了……",C_P_PURPLE,1,1)
		CALL SHOW_REASONWALL(理性判定値)
	ENDIF
ENDIF

WAIT
IF CHK_HININ_LOVE_2(ARG) > 理性判定値
		PRINTFORMW 
		TCVAR:ARG:外に出すから = 1
		;CALL KOJO_MESSAGE_SEND("EVENT",18,TARGET,6,0)
		PRINTW 同意在阴道外射精就可以不带套做!
ELSE
    PRINTFORML    %NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%婉言拒绝了
	;CALL KOJO_MESSAGE_SEND("EVENT",18,TARGET,2,0)
    CALL ASK_YN("尊重对方意愿","再努力一把")
	IF RESULT == 0
		TCVAR:ARG:挿入拒絶 = 1
		RETURN -1
	ELSE
	;口のうまさと相手次第では粘ればどうにかなる
		LOCAL = (4 - TALENT:ARG:応答 - TALENT:ARG:胆量 - TALENT:ARG:態度) * (ABL:MASTER:話術技能 * 5 + 3 * CFLAG:ARG:指出缺点)
		LOCAL:2 = 理性判定値 * (100 - LOCAL) / 100
		CALL SHOW_REASONWALL(LOCAL:2)
		IF CHK_HININ_LOVE_2(ARG) > LOCAL:2
            PRINTFORMW %NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%凭借口才说服了%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%
            TCVAR:ARG:外に出すから = 1
            ;CALL KOJO_MESSAGE_SEND("EVENT",18,TARGET,6,0)
            PRINTW 同意在阴道外射精就可以不带套做!
        ELSE
            CALL KOJO_MESSAGE_SEND("EVENT",18,TARGET,3,0)
            PRINTFORMW 被%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%狠狠责骂了一顿...
			CFLAG:ARG:指出缺点 += 1
			CALL ENDUFUFU(ARG)
			CALL GET_ANGRY(ARG)
			MARK:ARG:反発刻印 = MIN(MARK:ARG:反発刻印 + 1, 3)
			TFLAG:106 = 0
			TCVAR:ARG:挿入拒絶 = 1
			RETURN -1
		ENDIF
	ENDIF
ENDIF

; @SHOW_REASONWALL(理性判定値, UNIT = 100)
; #DIM 理性判定値
; #DIM UNIT

; PRINTFORM 理性之壁%" " * STRLENS(CALLNAME:MASTER)%:
; SETCOLOR 255,255,0
; LOCAL = MAX(理性判定値 / UNIT,1)
; PRINTFORM %"★" * LOCAL%
; RESETCOLOR
; SIF 理性判定値 % UNIT > (UNIT / 2)
; 	PRINTL ★
; PRINTW

; @SHOW_LOVEPOWER(好意判定値, UNIT = 100, ARGS)
; #DIM 好意判定値
; #DIM 好意表示
; #DIM UNIT
; IF ARGS == ""
; 	PRINTFORM 对%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%的好感:
; ELSE
; 	PRINTFORM %ARGS%
; ENDIF
; 好意表示 = MAX(好意判定値 / UNIT,0)
; ;LOCALS:1 = %GETFONT()%
; ;SETFONT "Times New Roman"
; LOCAL = GETCOLOR()
; PRINTFORM %UNICODE(0x2764) * MAX((好意表示 / 10000 -1),0)%
; RESETCOLOR
; SETCOLOR 255,51,153
; SIF 好意表示 >=10000
; 	PRINTFORM %UNICODE(0x2764) * (9999)%%UNICODE(0x2764)%

; PRINTFORM %UNICODE(0x2764) * (好意表示 % 10000)%
; SETCOLOR LOCAL

; SIF 好意判定値 % UNIT > (UNIT / 2)
; 	PRINTFORML %UNICODE(0x2764)%
; SETFONT LOCALS:1
; PRINTW