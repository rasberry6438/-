;※※※※※※※※※※※※※※※※※※※※※※※※※※
;"EVENT"系イベント
;※※※※※※※※※※※※※※※※※※※※※※※※※※
@惩罚_310
IF CFLAG:49:現在位置==CFLAG:MASTER:現在位置
	PRINTFORML 「真是自寻死路啊」
	PRINTFORMW 「做了那种过分的事情还胆敢出现在我眼前」
	PRINTFORML 「被凌辱的羞愤，就让你亲自体会一下吧」
	PRINTFORMDW   头上宛如挨了一记闷棍，%CALLNAME:MASTER%失去了意识…
	BASE:MASTER:体力 = 0
	IF !GETBIT(TALENT:MASTER:性別 , 0)
		SETBIT TALENT:MASTER:性別 , 0
	ENDIF
	FOR LOCAL,14,65
		IF LOCAL <=17||LOCAL >=60
			EXP:MASTER:LOCAL +=20+RAND:50
		ENDIF
	NEXT
	TIME+=1440
	CFLAG:49:1504=504
	MARK:49:反発刻印=MIN(MARK:49:反発刻印+2,3)
	MARK:49:反発取得履歴=MIN(MARK:49:反発取得履歴+2,3)	
ENDIF

@惩罚_514
#DIM 角色
IF CFLAG:現在位置==CFLAG:MASTER:現在位置
	PRINTFORML 「果然是你干的啊」
	PRINTFORML 「对恋做了那么出格的事情，还想得到宽恕吗？」
	PRINTFORMW 「既然敢做，那就要敢当」
	PRINTFORMDL   %CALLNAME:MASTER%被触手死死缠住，动弹不得；
	PRINTFORMDW   被押到地灵殿门口，钉在了高处的一个凸起上。
	PRINTFORMDW   完全无法挣脱，%CALLNAME:MASTER%就这样一直被挂了一整天。
	PRINTFORMDL   其间还看见那个天狗记者来拍了好几张照片，是想取笑%CALLNAME:MASTER%的惨样吗？
	PRINTFORMDL   …后来%CALLNAME:MASTER%发现，从那以后总是有人在背后指指点点；
	PRINTFORMDW   发生了什么呀。
	FOR 角色,1,CHARANUM
		CFLAG:角色:好感度=MAX(CFLAG:角色:好感度-100,0)
		CFLAG:角色:信賴度=MAX(CFLAG:角色:信賴度-50,0)
		ABL:角色:親密=MAX(ABL:角色:親密-2,0)
		MARK:角色:反発刻印=MIN(MARK:角色:反発刻印+1,3)
		MARK:角色:反発取得履歴=MIN(MARK:角色:反発取得履歴+1,3)
	NEXT
	BASE:MASTER:体力 = 0
	BASE:MASTER:気力 = 0
	TIME+=1440
	MARK:38:反発刻印=MIN(MARK:38:反発刻印+1,3)
	MARK:38:反発取得履歴=MIN(MARK:38:反発取得履歴+1,3)
	CFLAG:38:1504=504
ENDIF
;==================================================
;部屋で遭遇
;==================================================
@M_KOJO_NK_EVENT_K49_1(ARG,ARG:1)
#DIM CONST 无自觉姦=1504
;口上主はTARGET
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	IF (EXP:睡眠姦経験+EXP:時姦経験>0 && !CFLAG:无自觉姦) && !GETBIT(CFLAG:既成事實 , 1)
		CALL 惩罚_310
	ELSEIF (EXP:38:睡眠姦経験+EXP:38:時姦経験>0 && !CFLAG:38:无自觉姦) && !GETBIT(CFLAG:38:既成事實 , 1)
		CALL 惩罚_514
	ENDIF
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;MASTERが入ってきた
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		CALL M_KOJO_NK_EVENT_K49_1_1
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;TARGETが入ってきた
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		CALL M_KOJO_NK_EVENT_K49_1_1
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;TARGETが風呂に入ってきて一緒に入る
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;TARGETが風呂に入ってきて出て行った
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;TARGETが風呂に入ってきて追い出された
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 5
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;外出先で遭遇した
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 6
		PRINTFORML 
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;他キャラと约会中に遭遇した
	;ARG:1にデート相手
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 7
		PRINTFORML 
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;MAIN_MAP上で一日最初の挨拶
	;注、このあと通常の遭遇口上、ARG==1 OR ARG==2に接続します
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 8
		PRINTFORML 
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;外出先で一日最初の挨拶
	;ARG:1にデート相手、ARG:1が0の場合は非デート
	;注、このあと通常の外出先で遭遇した口上、ARG==6 OR ARG==7に接続します
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 9
		;ARG:1と约会中
		IF ARG:1
		;一人で外出
		ELSE
		ENDIF
		PRINTFORML 
		RETURN 1
	ENDIF
ENDIF
RETURN 1

@M_KOJO_NK_EVENT_K49_1_1

IF TARGET==49 && 关系_310()>0
	PRINTFORML 「是你啊」
	PRINTFORMDW   觉简单地打了个招呼。
ENDIF

;==================================================
;移動時すれちがい
;==================================================
@M_KOJO_NK_EVENT_K49_4(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	IF 关系_310()==0
		PRINTFORMDW   觉看到%CALLNAME:MASTER%出现在视野，马上扭过头去。
	ELSE
		;-------------------------------------------------
		;小分岐
		;-------------------------------------------------
		;立ち止まった
		;この後遭遇口上に接続
		;記入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1 && ARG == 1
			PRINTFORML 「嗯？有何贵干呢」
			PRINTFORMDW   觉抬眼看了%CALLNAME:MASTER%一会，就移开了视线。
			RETURN 1
		ENDIF
		;-------------------------------------------------
		;軽く会釈して通り過ぎた
		;記入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1 && ARG == 2
			PRINTFORML 「这样啊…」
			PRINTFORML 「快去忙你的吧」
			PRINTFORMDW   觉挥手告别。
			RETURN 1
		ENDIF
		;-------------------------------------------------
		;無視して通り過ぎた
		;記入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1 && ARG == 3
			PRINTFORMDW   觉没有任何反应，装作没看见%CALLNAME:MASTER%。
			RETURN 1
		ENDIF
	;その他
	;PRINTFORML 
	ENDIF 
ENDIF
RETURN 1

;==================================================
;浴場で遭遇
;==================================================
@M_KOJO_NK_EVENT_K49_11(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;追い出された
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;目が合った（追い出されない）
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML
		RETURN 1
	ENDIF
	;その他
	PRINTFORML  
ENDIF
RETURN 1

;==================================================
;帰宅時
;==================================================
@M_KOJO_NK_EVENT_K49_20(ARG,ARG:1)
;口上主はLOCALS or RESULT
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 0
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;通常帰宅
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		IF CFLAG:诶嘿嘿
			;诶嘿嘿中に眠くて帰る
			PRINTFORML 
		ELSE
			PRINTFORML 
		ENDIF
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;约会中帰宅
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		IF CFLAG:诶嘿嘿
			IF CFLAG:衰弱
				;诶嘿嘿中に疲れて帰る
				PRINTFORML 
			ELSE
				;诶嘿嘿中に眠くて帰る
				PRINTFORML 
			ENDIF
		ELSE
			PRINTFORML 
		ENDIF
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;玄関先でお見送り（キャラの自宅位置、またはキャラの部屋でデート終了）
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORML 
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;デート終了時に部屋に来ないかと誘う（～から部屋に来ないかと誘われた）
	;（来訪キャラのみ,自宅が無いキャラでも発生します）
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		PRINTFORML 
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;部屋に来ないか→「行く」を選択（～に誘われるまま、【MASTER】は【TARGET】の部屋へと向かった……）
	;（これが発生すると十中八九押し倒されます）
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 5
		PRINTFORML 
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;部屋に来ないか→「やめとく」を選択（～は心なしか寂しそうだ……）
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 6
		PRINTFORML 
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;今夜は帰りたくないと言い出す（～は今夜は帰りたくないと言い出した…）
	;（来訪キャラの帰宅時に欲求不満と欲望が高いと発生）
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 7
		PRINTFORML 
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;今夜は帰りたくない→「泊める」を選択（～は【MASTERの自室】に泊まっていくことになりました）
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 8
		PRINTFORML 
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;今夜は帰りたくない→「泊めない」を選択、または家主が居る（【MASTER】は丁重に断った）
	;（家主が居る＝MASTERの私室に他のキャラの私室を設定している）
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 9
		PRINTFORML 
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;疲れて帰宅（疲れきった～は帰って行きました）
	;（～は疲れ切っている→（入り口）まで送るよ でも発生）
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 10
		IF CFLAG:诶嘿嘿
			;诶嘿嘿中に疲れて帰る
			PRINTFORML 
		ELSE
			PRINTFORML 
		ENDIF
		RETURN 1
	ENDIF
ENDIF
RETURN 1

;==================================================
;浴場連れだし
;==================================================
@M_KOJO_NK_EVENT_K49_23(ARG,ARG:1)
;口上主はLOCAL
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;断られた
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;一緒に入ってくれた
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		RETURN 1
	ENDIF
	;その他
	PRINTFORML  
ENDIF
RETURN 1

;==================================================
;相手からデートのお誘い
;==================================================
@M_KOJO_NK_EVENT_K49_27(ARG,ARG:1)
;口上主はLOCAL
;ARG:1は目的地
;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------
IF LOCAL
	SELECTCASE ARG
		;-------------------------------------------------
		CASE 0
		;誘い文句
		;記入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			RETURN 1
		ENDIF
		;-------------------------------------------------
		CASE 1
		;受けた
		;記入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			RETURN 1
		ENDIF
		;-------------------------------------------------
		CASE 2
		;断った
		;記入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			RETURN 1
		ENDIF
		;-------------------------------------------------
		CASE 3
		;部屋に誘われた
		;記入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			RETURN 1
		ENDIF
		;-------------------------------------------------
		CASE 4
		;部屋に誘われたのを受けた
		;記入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			RETURN 1
		ENDIF
		;-------------------------------------------------
		CASE 5
		;部屋に誘われたのを断った
		;記入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			RETURN 1
		ENDIF
	ENDSELECT
ENDIF
RETURN 1