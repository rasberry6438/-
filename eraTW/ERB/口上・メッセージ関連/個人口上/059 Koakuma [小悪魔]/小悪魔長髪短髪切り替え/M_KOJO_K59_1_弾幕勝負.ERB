;==================================================
;弾幕勝負
;==================================================
;
@M_KOJO_長短髪_MESSAGE_COM_K59_DANMAKU(ARGS, 相手残機)
#DIM 相手残機
;全体の流れ
;①【戦闘前】→②骰子ロールとプレイヤー選択肢、ハンデをつけた場合は【ハンデ口上】→③対応スキルが発動した場合【スキル口上】→④被弾判定、角色が被弾したなら【被弾口上】→
;どちらかの残機が0になっていなければ②に返回→⑤【戦闘後口上】

;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	SIF FLAG:口上色
		TRYCALLFORM M_KOJO_長短髪_COLOR_K{NO:TARGET}
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;戦闘前
	HANDICAP_FIXED = 0
	HANDICAP_RAND = 0
	;ハンデをつけることができ、数値が大きいほど你が不利になる　数値が負なら你が有利に
	;角色の能力に関わらずクッソ強くしたり弱くしたりできる
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "戦闘前"
		PRINTFORML 「要和我弹幕战斗?可以是可以」
		;ここから、能力で各台詞に分岐。ってイメージ。
		;小悪魔より戦闘技能が高い。もしくは小悪魔に勝利済み
		IF ABL:戦闘能力 < ABL:MASTER:戦闘能力 || CFLAG:TARGET:弾幕勝負勝利 == 1
			PRINTFORMW 「嗯，说实话，我觉得我没有胜算……不过，随意一点，不用手下留情」
		;小悪魔より戦闘技能が低い。小悪魔に勝利済みの場合は発生しない。あと、話としてはここだけ「本気」ではなく「手は抜かない」って表現なのがポイント
		ELSEIF ABL:戦闘能力 > ABL:MASTER:戦闘能力
			PRINTFORML 「但是，说不定就算我戴着眼罩坐着，我也能赢呢?」
			PRINTFORMW 「嘛，就算那样，我也不会给你任何优势的。我要上了」
		;これは戦闘技能が小悪魔と同格
		ELSE
			PRINTFORMW 「既然要打的话、就认真一点吧」
		ENDIF
		;ここから共通
		PRINTFORMW 「那么、開始吧…准备、一决…」
		PRINTL [0] 勝負!
		SIF MESSKIP()
		INPUT
		PRINTFORML 「胜负!」
		PRINTFORMW %NICKNAME:59%和%CALLNAME:MASTER%同时、摆出了战斗姿态
		;你が個性あるというか、ｼｬｧﾍﾞｯﾀｧｧｧｧｧｧｧ!!ってなる事は個人的な趣味でも避けてたのだが、決闘前に声を揃えてとか憧れるし…
		RETURN 0
	ENDIF
	;-------------------------------------------------
	;ハンデ
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "ハンデ"
		;ハンデつけなかったら表示されないので無記入でよい
		PRINTFORML 
		RETURN 0
	ENDIF
	;-------------------------------------------------
	;戦闘中TARGET被弾時口上
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "被弾" 
		;別に一律で「やられたー」だけでもいいよ
		SELECTCASE 相手残機
			;残り残機3が表示されるのは【洽覧深識】持ちのみ
			CASE 3
				
				;小悪魔より戦闘力が低い場合。って分岐が可能だったら。満たした場合は上の台詞ではなくこっちに
				;本気を出すとか言うけど、「油断してたから喰らったかな…?」って話なので、パワーUPはしない
				IF ABL:戦闘能力 > ABL:MASTER:戦闘能力
					PRINTFORMW 「侥幸!?不对、太大意了吗…?」
					PRINTFORMW 「看来应该给予相应的敬意。要稍微、认真起来了!」
				ELSE
					PRINTFORMW 「被打中了。嘛啊、这是当然的事情」
				ENDIF
			CASE 2
				PRINTFORMW 「还没有、结束!」
			CASE 1
				IF ABL:戦闘能力 < ABL:MASTER:戦闘能力
					PRINTFORMW 「果然不行啊…不，不到最后…我不会放弃的!」
				ELSE
					;HIPのyou。別にパワーUPは(ry
					PRINTFORMW 「我居然被打到这种地步…这样的话、就像恶魔一样上了!」
				ENDIF
			CASE 0
				PRINTFORMW 「不女…子!」
		ENDSELECT
	ENDIF
	;-------------------------------------------------
	;戦闘中
	;TARGETの【残忍酷薄】発動時
	;ARGはTARGETの残機
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "残忍酷薄"
		
	ENDIF
	;-------------------------------------------------
	;戦闘中
	;TARGETの【乾坤一擲】発動時
	;ARGはTARGETの残機
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "乾坤一擲"
		
	ENDIF
	;-------------------------------------------------
	;戦闘中
	;TARGETの【怪力乱神】発動時
	;ARGはTARGETの残機
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "怪力乱神"
		
	ENDIF
	
	;-------------------------------------------------
	;戦闘後
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "戦闘後" 
		PRINTFORML 
		;残り残機4が表示されうるのは【洽覧深識】持ちのみ
		;残機が1以上なら你の負け、0の場合は你の勝利
		SELECTCASE 相手残機
			CASE 4
				;小悪魔より戦闘力が低い場合。って分岐が可能だったら。満たした場合はこっちに
				IF ABL:戦闘能力 > ABL:MASTER:戦闘能力
					PRINTFORMW 「呼唔、辛苦了。我觉得干得挺好、以后也继续提升实力吧!」
				;小悪魔は同格以上で一本も取れない場合、你がわざと負けたという認識をする
				ELSE
					PRINTFORMW 「等等!?一下都没有打到、真的有认真在打吗!?没有放海吧!?」
				ENDIF
			CASE 3
				PRINTFORMW 「呼唔、很好的运动。辛苦了」
			CASE 2
				PRINTFORMW 「呼唔…很棒的一场战斗。继续保持的话、下次也很期待啊」
			CASE 1
				PRINTFORMW 「哈啊…哈啊…虽然很厉害、但是%NICKNAME:59%酱的胜利!太開心了!」
			CASE 0
				;小悪魔より戦闘技能が高い。もしくは小悪魔に勝利済み
				IF ABL:戦闘能力 < ABL:MASTER:戦闘能力 || CFLAG:TARGET:弾幕勝負勝利 == 1
					PRINTFORML 「虽然是输了、但也是预料之中的结果…%MASTERNAME:59%很强啊」
					PRINTFORMW 「啊、但是怎么样?我也稍微能赶上%MASTERNAME:59%吗?」
				;小悪魔より戦闘技能が低い。小悪魔に勝利済みの場合は発生しない。好感度か何かに特別BONUSあってもいいかも
				ELSEIF ABL:戦闘能力 > ABL:MASTER:戦闘能力
					PRINTFORMW 「输…了…?我…这个…实力差…下…?」
					PRINTFORMW 「好厉害…!太厉害了%MASTERNAME:59%!下次战斗的时候、我也可能会输诶!」
				;同格勝利
				ELSE
					PRINTFORML 「呼嘿嘿、输掉了…很强啊、%MASTERNAME:59%」
				ENDIF
		ENDSELECT
	ENDIF
RESETCOLOR
ENDIF
RETURN 1

