;==================================================
;弾幕勝負
;==================================================
;
@M_KOJO_早苗追加_MESSAGE_COM_K31_DANMAKU(ARGS, 相手残機)
#DIM 相手残機
;全体の流れ
;①【戦闘前】→②骰子ロールとプレイヤー選択肢、ハンデをつけた場合は【ハンデ口上】→③対応スキルが発動した場合【スキル口上】→④被弾判定、角色が被弾したなら【被弾口上】→
;どちらかの残機が0になっていなければ②に返回→⑤【戦闘後口上】

;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	SIF FLAG:口上色
		TRYCALLFORM M_KOJO_早苗追加_COLOR_K{NO:TARGET}
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;戦闘前
	HANDICAP_FIXED = 0
	HANDICAP_RAND = 0
	IF CFLAG:31:1001 == 4
		HANDICAP_FIXED = 200
	ELSE
		;什麼也不做
	ENDIF
	;ハンデをつけることができ、数値が大きいほど你が不利になる　数値が負なら你が有利に
	;角色の能力に関わらずクッソ強くしたり弱くしたりできる
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "戦闘前"
	
		CALL K31_特殊会話フラグの確認と出力("弾幕勝負")
		SIF RESULT
			RETURN 0
		
		PRINTFORML 「是要弾幕勝負吗？没问题…但是，如果你受伤了我可不负责哦？因为我很强的！」
		PRINTFORML 「如果你准备好了，那就接受挑战吧！请做好心理准备！」
		
		RETURN 0
	ENDIF
	;-------------------------------------------------
	;ハンデ
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "ハンデ"
		;ハンデつけなかったら表示されないので無記入でよい
		PRINTFORML ※これはイベント戦闘です
		RETURN 0
	ENDIF
	;-------------------------------------------------
	;戦闘中TARGET被弾時口上
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "被弾" 
		;別に一律で「やられたー」だけでもいいよ
		SELECTCASE 相手残機
			;残り残機3が表示されるのは【洽覧深識】持ちのみ
			CASE 3
				PRINTFORML 
			CASE 2
				PRINTFORML 「掉以轻心了……！」
			CASE 1
				PRINTFORML 「这、这怎么可能……！」
			CASE 0
				PRINTFORML 「我怎么可能输……」
		ENDSELECT
	ENDIF
	;-------------------------------------------------
	;戦闘中
	;TARGETの【残忍酷薄】発動時
	;ARGはTARGETの残機
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "残忍酷薄"
		
	ENDIF
	;-------------------------------------------------
	;戦闘中
	;TARGETの【乾坤一擲】発動時
	;ARGはTARGETの残機
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "乾坤一擲"
		
	ENDIF
	;-------------------------------------------------
	;戦闘中
	;TARGETの【怪力乱神】発動時
	;ARGはTARGETの残機
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "怪力乱神"
		
	ENDIF
	
	;-------------------------------------------------
	;戦闘後
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "戦闘後" 
		PRINTFORML 
		;残り残機4が表示されうるのは【洽覧深識】持ちのみ
		;残機が1以上なら你の負け、0の場合は你の勝利
		
		IF 相手残機 == 0 && CFLAG:31:1411 == 1
			;まさかの勝利
			CFLAG:31:1412 = 1
		ENDIF
		CALL K31_特殊会話フラグの確認と出力("弾幕勝負")
		
		SELECTCASE 相手残機
			CASE 4
				PRINTFORML 
			CASE 3
				PRINTFORML 「呼呼、我随时都可以再当你的对手哦」
			CASE 2
				PRINTFORML 「稍微有些掉以轻心了、不过你还差的远呢♪」
			CASE 1
				PRINTFORML 「啊、真危险……你很强呢、%CALLNAME:MASTER%先生…」
			CASE 0
				PRINTFORML 「我竟然输了……看来还需要更加努力锻炼才行……」
				CALL K31_MASTER逆転刻印取得チェック("削除")
		ENDSELECT
	ENDIF
RESETCOLOR
ENDIF
RETURN 1

