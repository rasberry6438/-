;==================================================
;弾幕勝負
;==================================================
;
@M_KOJO_NK_MESSAGE_COM_K38_DANMAKU(ARGS, 相手残機)
#DIM 相手残機
;全体の流れ
;①【戦闘前】→②ダイスロールとプレイヤー選択肢、ハンデをつけた場合は【ハンデ口上】→③対応スキルが発動した場合【スキル口上】→④被弾判定、キャラが被弾したなら【被弾口上】→
;どちらかの残機が0になっていなければ②に戻る→⑤【戦闘後口上】

;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	SIF FLAG:口上色
		TRYCALLFORM M_KOJO_NK_COLOR_K{NO:TARGET}
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;戦闘前
	HANDICAP_FIXED = 0
	HANDICAP_RAND = 0
	;ハンデをつけることができ、数値が大きいほどあなたが不利になる　数値が負ならあなたが有利に
	;キャラの能力に関わらずクッソ強くしたり弱くしたりできる
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "戦闘前"
		IF !CFLAG:弾幕勝負勝利
			PRINTFORML 「哈欸？想和我弹幕对战吗？」
			PRINTFORML 「可以呀，你的挑战，我接受了呢」
			PRINTFORML 「无意识中潜藏的弹幕可是连姐姐都没见过的呢！」
			PRINTFORML 「%CALLNAME:MASTER%能不被击中吗？」
		ELSE
			PRINTFORML 「这一次我可不会再留情了！」
			PRINTFORMDW   少女还在对被%CALLNAME:MASTER%击败的经历耿耿于怀。
			RETURN 0
		ENDIF
	ENDIF

	;-------------------------------------------------
	;ハンデ
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "ハンデ"
		;ハンデつけなかったら表示されないので無記入でよい
		PRINTFORML 
		RETURN 0
	ENDIF
	;-------------------------------------------------
	;戦闘中TARGET被弾時口上
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "被弾" 
		;別に一律で「やられたー」だけでもいいよ
		SELECTCASE 相手残機
			;残り残機3が表示されるのは【洽覧深識】持ちのみ
			;CASE 3
			;	PRINTFORML 
			CASE 2
				PRINTFORML 「呀啊！」
				PRINTFORML 「这次只是意外！」
				PRINTFORML 「心符「没我之爱」！」
			CASE 1
				PRINTFORML 「哇欸！」
				PRINTFORML 「绝对不会败给你的！」
				PRINTFORML 「见识下生命的记忆吧！」
				PRINTFORML 「「胎儿之梦」！」
			CASE 0
				PRINTFORML 「呜啊！」
				PRINTFORML 「居然…最后一个残机也交出去了吗…」
		ENDSELECT
	ENDIF
	;-------------------------------------------------
	;戦闘中
	;TARGETの【残忍酷薄】発動時
	;ARGはTARGETの残機
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "残忍酷薄"
		PRINTFORML 「符卡封印！」
		PRINTFORML 「下次中弹，可是会附带损失掉的哦」
		PRINTFORML 「做好准备吧」
	ENDIF
	;-------------------------------------------------
	;戦闘中
	;TARGETの【乾坤一擲】発動時
	;ARGはTARGETの残機
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "乾坤一擲"
		
	ENDIF
	;-------------------------------------------------
	;戦闘中
	;TARGETの【怪力乱神】発動時
	;ARGはTARGETの残機
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "怪力乱神"
		
	ENDIF
	
	;-------------------------------------------------
	;戦闘後
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "戦闘後" 
		PRINTFORML 
		;残り残機4が表示されうるのは【洽覧深識】持ちのみ
		;残機が1以上ならあなたの負け、0の場合はあなたの勝利
		SELECTCASE 相手残機
			;CASE 4
			;	PRINTFORML 
			CASE 3
				PRINTFORML 「对不起啦——」
				PRINTFORML 「轻而易举就胜利了呢」
			CASE 2
				PRINTFORML 「哎呀——」
				PRINTFORML 「好不尽兴呢——」
			CASE 1
				PRINTFORML 「喂——喂——」
				PRINTFORML 「现在我跨过你的尸体，正向未来前进哦」
			CASE 0
				IF CFLAG:弾幕勝負勝利
					SELECTCASE RAND:3
					CASE 0
						PRINTFORML 「	唔呣呣，不能坏了弹幕规则呢」
						PRINTFORML 「不然给你打电话哦？」
					CASEELSE			
						PRINTFORML 「哇欸？意外地比起上次强呀」
						PRINTFORML 「有些轻敌了呢」
					ENDSELECT
				ELSE
					PRINTFORML 「哇啊啊——绝对是犯规了吧？！」
					PRINTFORML 「怎么可能…」
					PRINTFORMDW   少女无法接受落败的事实。
				ENDIF
		ENDSELECT
	ENDIF
RESETCOLOR
ENDIF
RETURN 1

