;-----------------------------------------------------------
;遠距離移動の設定
;ARG     目的地
;ARG:1   現在地
;RETURN  次の目的地
;-----------------------------------------------------------
@SKIP_MOVE_4(ARG, ARG:1)
#DIM 現在的位置
;現在位置取得
IF ARG:1
	現在的位置 = ARG:1
ELSE
	現在的位置 = CFLAG:MASTER:現在位置
ENDIF

;目的地に直接移動できる場合そこに移動
SIF CAN_MOVE(現在的位置, ARG) & 1
	RETURN ARG

;袋小路から行ける場所は固定なので、そこを目指す
SELECTCASE 現在的位置
CASE P406来客用廁所
	RETURN P403待合室
CASE P418厠, P430地下室
	RETURN P407廊下
CASE P420風呂
	RETURN P419脱衣所
CASE P424庫房
	RETURN P409走廊
CASE P427倉庫, P428二階空的部屋
	RETURN P426二階廊下
CASE P431兎的洞穴, P432影狼的家
	RETURN P433斜角的竹林
CASE P437梅蒂欣的家
	RETURN P436無名之丘
CASE P439拉瓦爾的家
	RETURN P438太陽花田
CASE P441温泉
	RETURN P434迷失的小道
CASE P451胡桃私室, P452艾麗私室
	RETURN P450玄関
CASE P453用餐房間, P454浴室, P455廁所, P456倉庫, P460空的部屋
	RETURN P465大堂
CASE P457夢月私室, P459幻月私室
	RETURN P458廊下
CASE P464露台
	RETURN P463幽香私室
ENDSELECT

;直接移動できない場合、1つ近い位置を暫定目的地に設定し直してループ
;基本的に最短で行けるコースを設定する
;現在地によってコースが変わることも考慮して対応する
SELECTCASE ARG
	CASE P401永遠亭入口
		SELECTCASE 現在的位置
		CASE P415大廳 TO P417廚房, P421庭, P422後院
			RETURN P405配药室
		CASE P404診察室 TO P430地下室
			RETURN P403待合室
		CASE P431兎的洞穴, P432影狼的家, P442空的小屋, P443米斯蒂亜的家, P444夜雀的小攤
			RETURN P433斜角的竹林
		CASEELSE
			RETURN P435井戸
		ENDSELECT
	CASE P403待合室
		SELECTCASE 現在的位置
		CASE P405配药室, P417廚房, P422後院
			RETURN P404診察室
		CASE P408中廊下 TO P430地下室
			RETURN P407廊下
		CASEELSE
			RETURN P401永遠亭入口
		ENDSELECT
	CASE P404診察室
		SELECTCASE 現在的位置
		CASE P417廚房, P422後院, P416居間, P415大廳, P421庭
			RETURN P405配药室
		CASEELSE
			RETURN P403待合室
		ENDSELECT
	CASE P405配药室
		SELECTCASE 現在的位置
		CASE P421庭
			RETURN P422後院
		CASE P408中廊下 TO P416居間, P424庫房
			RETURN P417廚房
		CASE P403待合室, P406来客用廁所, P407廊下, P418厠 TO P420風呂, P426二階廊下 TO P430地下室
			RETURN P404診察室
		CASEELSE
			RETURN P401永遠亭入口
		ENDSELECT
	CASE P406来客用廁所
		RETURN P403待合室
	CASE P407廊下
		SELECTCASE 現在的位置
		CASE P420風呂
			RETURN P419脱衣所
		CASE P427倉庫, P428二階空的部屋
			RETURN P426二階廊下
		CASE P421庭, P422後院, P424庫房
			RETURN P409走廊
		CASE P410帝私室 TO P417廚房
			RETURN P408中廊下
		CASEELSE
			RETURN P403待合室
		ENDSELECT
	CASE P408中廊下
		SELECTCASE 現在的位置
		CASE P417廚房, P422後院, P405配药室, P424庫房
			RETURN P416居間
		CASEELSE
			RETURN P407廊下
		ENDSELECT
	CASE P409走廊
		SELECTCASE 現在的位置
		CASE P417廚房, P415大廳, P405配药室
			RETURN P416居間
		CASE P422後院
			RETURN P421庭
		CASEELSE
			RETURN P407廊下
		ENDSELECT
	CASE P410帝私室, P411鈴仙私室
		RETURN P408中廊下
	CASE P412空的部屋, P413永琳私室, P414輝夜私室
		SELECTCASE 現在的位置
		CASE P421庭, P422後院, P427倉庫
			RETURN P409走廊
		CASEELSE
			RETURN P408中廊下
		ENDSELECT
	CASE P415大廳
		SELECTCASE 現在的位置
		CASE P409走廊, P424庫房, P421庭
			RETURN P416居間
		CASE P403待合室, P407廊下, P410帝私室 TO P414輝夜私室, P418厠 TO P420風呂, P426二階廊下 TO P430地下室
			RETURN P408中廊下
		CASEELSE
			RETURN P417廚房
		ENDSELECT
	CASE P416居間
		SELECTCASE 現在的位置
		CASE P424庫房, P421庭
			RETURN P409走廊
		CASE P403待合室, P407廊下, P410帝私室 TO P414輝夜私室, P418厠 TO P420風呂, P426二階廊下 TO P430地下室
			RETURN P408中廊下
		CASEELSE
			RETURN P417廚房
		ENDSELECT
	CASE P417廚房
		SELECTCASE 現在的位置
		CASE P421庭
			RETURN P422後院
		CASE P407廊下 TO P420風呂, P424庫房 TO P430地下室
			RETURN P416居間
		CASEELSE
			RETURN P405配药室
		ENDSELECT
	CASE P418厠, P419脱衣所
		RETURN P407廊下
	CASE P420風呂
		RETURN P419脱衣所
	CASE P421庭
		SELECTCASE 現在的位置
		CASE P403待合室, P404診察室, P406来客用廁所 TO P416居間, P418厠 TO P420風呂, P424庫房 TO P430地下室
			RETURN P409走廊
		CASEELSE
			RETURN P422後院
		ENDSELECT
	CASE P422後院
		SELECTCASE 現在的位置
		CASE P408中廊下, P410帝私室 TO P416居間
			RETURN P417廚房
		CASE P407廊下, P409走廊, P418厠 TO P420風呂, P424庫房 TO P430地下室
			RETURN P421庭
		CASEELSE
			RETURN P405配药室
		ENDSELECT
	CASE P424庫房
		RETURN P409走廊
	CASE P426二階廊下, P430地下室
		RETURN P407廊下
	CASE P427倉庫, P428二階空的部屋
		RETURN P426二階廊下

	CASE P431兎的洞穴, P432影狼的家
		RETURN P433斜角的竹林
	CASE P433斜角的竹林
		SELECTCASE 現在的位置
		CASE P440廃屋, P441温泉, P445妹紅的家 TO P447竹林入口
			RETURN P434迷失的小道
		CASEELSE
			RETURN P401永遠亭入口
		ENDSELECT
	CASE P434迷失的小道
		SELECTCASE 現在的位置
		CASE P431兎的洞穴, P432影狼的家, P442空的小屋 TO P444夜雀的小攤
			RETURN P433斜角的竹林
		CASEELSE
			RETURN P435井戸
		ENDSELECT
	CASE P435井戸
		SELECTCASE 現在的位置
		CASE P403待合室 TO P430地下室
			RETURN P401永遠亭入口
		CASE P437梅蒂欣的家, P438太陽花田, P439拉瓦爾的家, P450玄関 TO P466庭
			RETURN P436無名之丘
		CASE P431兎的洞穴, P432影狼的家, P442空的小屋 TO P444夜雀的小攤
			RETURN P433斜角的竹林
		CASEELSE
			RETURN P434迷失的小道
		ENDSELECT
	CASE P436無名之丘
		SELECTCASE 現在的位置
		CASE P439拉瓦爾的家, P450玄関 TO P466庭
			RETURN P438太陽花田
		CASEELSE
			RETURN P435井戸
		ENDSELECT
	CASE P437梅蒂欣的家
		RETURN P436無名之丘
	CASE P438太陽花田
		SELECTCASE 現在的位置
		CASE P451胡桃私室 TO P461生活間, P463幽香私室 TO P465大堂
			RETURN P450玄関
		CASE P462陽台
			RETURN P466庭
		CASEELSE
			RETURN P436無名之丘
		ENDSELECT
	CASE P439拉瓦爾的家
		RETURN P438太陽花田
	CASE P440廃屋, P441温泉
		RETURN P434迷失的小道
	CASE P442空的小屋, P443米斯蒂亜的家
		SELECTCASE 現在的位置
		CASE P446祠, P447竹林入口
			RETURN P444夜雀的小攤
		CASEELSE
			RETURN P433斜角的竹林
		ENDSELECT
	CASE P444夜雀的小攤
		SELECTCASE 現在的位置
		CASE P440廃屋, P445妹紅的家
			RETURN P447竹林入口
		CASEELSE
			RETURN P433斜角的竹林
		ENDSELECT
	CASE P445妹紅的家
		SELECTCASE 現在的位置
		CASE P444夜雀的小攤, P440廃屋, P446祠, P443米斯蒂亜的家
			RETURN P447竹林入口
		CASEELSE
			RETURN P434迷失的小道
		ENDSELECT
	CASE P446祠
		SELECTCASE 現在的位置
		CASE P443米斯蒂亜的家, P442空的小屋
			RETURN P444夜雀的小攤
		CASE P440廃屋, P445妹紅的家
			RETURN P447竹林入口
		CASEELSE
			RETURN P434迷失的小道
		ENDSELECT
	CASE P447竹林入口
		SELECTCASE 現在的位置
		CASE P443米斯蒂亜的家, P442空的小屋
			RETURN P444夜雀的小攤
		CASEELSE
			RETURN P434迷失的小道
		ENDSELECT

	CASE P450玄関
		SELECTCASE 現在的位置
		CASE P453用餐房間 TO P464露台
			RETURN P465大堂
		CASEELSE
			RETURN P438太陽花田
		ENDSELECT
	CASE P451胡桃私室, P452艾麗私室
		RETURN P450玄関
	CASE P453用餐房間, P454浴室, P455廁所, P456倉庫, P460空的部屋
		RETURN P465大堂
	CASE P457夢月私室, P459幻月私室
		RETURN P458廊下
	CASE P458廊下
		SELECTCASE 現在的位置
		CASE P464露台
			RETURN P463幽香私室
		CASE P462陽台, P466庭
			RETURN P461生活間
		CASEELSE
			RETURN P465大堂
		ENDSELECT
	CASE P461生活間
		SELECTCASE 現在的位置
		CASE P457夢月私室, P459幻月私室, P463幽香私室, P464露台
			RETURN P458廊下
		CASE P466庭
			RETURN P462陽台
		CASEELSE
			RETURN P465大堂
		ENDSELECT
	CASE P462陽台
		SELECTCASE 現在的位置
		CASE P453用餐房間 TO P460空的部屋, P463幽香私室 TO P465大堂
			RETURN P461生活間
		CASEELSE
			RETURN P466庭
		ENDSELECT
	CASE P463幽香私室
		RETURN P458廊下
	CASE P464露台
		RETURN P463幽香私室
	CASE P465大堂
		SELECTCASE 現在的位置
		CASE P462陽台
			RETURN P461生活間
		CASE P457夢月私室, P459幻月私室, P463幽香私室, P464露台
			RETURN P458廊下
		CASEELSE
			RETURN P450玄関
		ENDSELECT
	CASE P466庭
		SELECTCASE 現在的位置
		CASE P451胡桃私室 TO P456倉庫, P460空的部屋
			RETURN P450玄関
		CASE P457夢月私室 TO P459幻月私室, P461生活間 TO P464露台
			RETURN P462陽台
		CASEELSE
			RETURN P438太陽花田
		ENDSELECT
ENDSELECT