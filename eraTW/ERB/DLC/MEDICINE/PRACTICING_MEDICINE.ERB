@PRACTICING_MEDICINE

PRINTL 此页面为临时使用，后续会进行改良。
PRINTL

IF IS_A_DOCTOR == 0
	PRINTL 想要成为医生吗？
	PRINTL
	PRINTL [1]是      [0]再想想
	PRINTL
	INPUT
	IF RESULT == 1
		PRINTL 你成为了医生！
		IS_A_DOCTOR = 1
	ENDIF
ELSEIF IS_A_DOCTOR == 1
	PRINTL 还要继续当医生吗？
	PRINTL
	PRINTL [1]是的      [0]不想了
	INPUT
	IF RESULT == 0
		PRINTL 你不再是医生了！
		IS_A_DOCTOR = 0
	ENDIF
ENDIF
PRINTW

;主角睡觉，医疗业务结算，为明日正常营业重置变量。
@MEDICAL_BUSINESS_SETTLEMENT

;记录今日是否营业
;SIF OPEN_TODAY == 0
;	NUMBER_OF_STOPPAGES ++

;依据近期营业次数进行奖励，暂时没有处罚。
IF OPEN_TODAY == 1 && IS_A_DOCTOR == 1
	PRINTFORML %NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%的医馆今天照常营业了呢。
	PRINTL
	PRINTFORMW %NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)% 名望 + 5
	POPULARITY += 5
ELSEIF OPEN_TODAY == 0 && IS_A_DOCTOR == 1
	PRINTFORMW %NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%的医馆今天处于闭门歇业的状态。
ENDIF


;重置营业标志，放行明日开业。
OPEN_TODAY = 0

;重置今日问诊，修正近期问诊。
FOR LOCAL, 1, CHARANUM
	BASE:LOCAL:今日问诊 = 0
	SIF BASE:LOCAL:近期问诊 > 0
		BASE:LOCAL:近期问诊 --
	;病症随时间自然消失，防止出现无法处理的‘不治之症’。
	IF BASE:LOCAL:患病 > 0
		BASE:LOCAL:患病 --
		IF BASE:LOCAL:患病 < 1
			PRINTFORML %NAME_OUTPUT_TRANSLATION("CALLNAME", LOCAL)%的【%STR:(BASE:LOCAL:症状类型)%】症状消失了。
			VARSET BASE:LOCAL:40, 0, 40, 86
		ENDIF
	ENDIF
NEXT

;修正超过设定外数值的名望和仁义
SIF POPULARITY > 1000
	POPULARITY = 1000
	
SIF POPULARITY < -500
	POPULARITY = -500
	
SIF BENEVOLENCE > 1000
	BENEVOLENCE = 1000
	
SIF BENEVOLENCE < -500
	BENEVOLENCE = -500



@COM452
CALL Madical_user_interface

@COM_ABLE452
IF CFLAG:MASTER:現在位置 != CFLAG:MASTER:初期位置
	RETURN 0
ELSEIF !TFLAG:100
	RETURN 0
ELSEIF CFLAG:诶嘿嘿 == 2
	RETURN 0
ELSEIF  IS_A_DOCTOR != 1
	RETURN 0
ELSE
	RETURN 1
ENDIF


	