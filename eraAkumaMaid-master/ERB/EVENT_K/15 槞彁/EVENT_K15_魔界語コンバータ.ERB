@K15_STRL(ARGS)
CALL K15_STR(ARGS)
PRINTL

@K15_STRW(ARGS)
CALL K15_STR(ARGS)
WAIT

@K15_STRFW(ARGS)
CALL K15_STR(ARGS)
FORCEWAIT

@K15_STR(ARGS)
	#DIM LCOUNT
	#DIMS ResultHtml
	#DIM TagCount
	#DIMS DYNAMIC Memo
	#DIMS DYNAMIC MEMO_RESULTS,100

	CALL PRINT_STRL(ARGS)
	LOCALS = %HTML_GETPRINTEDSTR(0)%
	CLEARLINE 1
	HTML_TAGSPLIT LOCALS
	TagCount = RESULT
	
	FOR LCOUNT, 0, TagCount
		MEMO_RESULTS:LCOUNT = %RESULTS:LCOUNT%
	NEXT


	FOR LCOUNT, 0, TagCount
		IF SUBSTRING(MEMO_RESULTS:LCOUNT, 0, 6) == "</nobr"
			PRINT 
			;ResultHtml += MEMO_RESULTS:LCOUNT
		ELSEIF SUBSTRING(MEMO_RESULTS:LCOUNT, 0, 2) == "</"
			ResultHtml += MEMO_RESULTS:LCOUNT
		ELSEIF SUBSTRING(MEMO_RESULTS:LCOUNT, 0, 5) == "<nobr"
			PRINT
			;ResultHtml += MEMO_RESULTS:LCOUNT
		ELSEIF SUBSTRING(MEMO_RESULTS:LCOUNT, 0, 7) == "<button"
			ResultHtml += MEMO_RESULTS:LCOUNT
		ELSEIF SUBSTRING(MEMO_RESULTS:LCOUNT, 0, 10) == "<nonbutton"
			ResultHtml += MEMO_RESULTS:LCOUNT
		ELSEIF SUBSTRING(MEMO_RESULTS:LCOUNT, 0, 3) == "<br"
			ResultHtml += MEMO_RESULTS:LCOUNT
		ELSEIF SUBSTRING(MEMO_RESULTS:LCOUNT, 0, 5) == "<font"
			ResultHtml += MEMO_RESULTS:LCOUNT
		ELSEIF SUBSTRING(MEMO_RESULTS:LCOUNT, 0, 2) == "<b"
			ResultHtml += MEMO_RESULTS:LCOUNT
		ELSEIF SUBSTRING(MEMO_RESULTS:LCOUNT, 0, 2) == "<i"
			ResultHtml += MEMO_RESULTS:LCOUNT
		ELSEIF SUBSTRING(MEMO_RESULTS:LCOUNT, 0, 2) == "<u"
			ResultHtml += MEMO_RESULTS:LCOUNT
		ELSEIF SUBSTRING(MEMO_RESULTS:LCOUNT, 0, 2) == "<p"
			ResultHtml += MEMO_RESULTS:LCOUNT
		ELSEIF SUBSTRING(MEMO_RESULTS:LCOUNT, 0, 2) == "<s"
			ResultHtml += MEMO_RESULTS:LCOUNT
		ELSEIF SUBSTRING(MEMO_RESULTS:LCOUNT, 0, 4) == "<img"
			ResultHtml += MEMO_RESULTS:LCOUNT
		ELSEIF SUBSTRING(MEMO_RESULTS:LCOUNT, 0, 6) == "<shape"
			ResultHtml += MEMO_RESULTS:LCOUNT
		ELSEIF SUBSTRING(MEMO_RESULTS:LCOUNT, 0, 4) == "<!--"
			ResultHtml += MEMO_RESULTS:LCOUNT
		ELSE
			Memo = %MEMO_RESULTS:LCOUNT%
			REPLACE Memo, @"&amp;", @"&"
			Memo =  %RESULTS%
			REPLACE Memo, @"&gt;", @">"
			Memo =  %RESULTS%
			REPLACE Memo, @"&lt;", @"<"
			Memo =  %RESULTS%
			REPLACE Memo, @"&quot;", @"’"
			Memo =  %RESULTS%
			REPLACE Memo, @"&apos;", @"'"
			Memo =  %RESULTS%
			;この二つ是ったいなんぞや
				REPLACE Memo, @"&#nn;",@"" 
				Memo =  %RESULTS%
				REPLACE Memo, @"&#xnn;", @""
				Memo =  %RESULTS%
			;PRINTFORML ELSE %MEMO_RESULTS:LCOUNT%
			
			ResultHtml = K15_CyrillicConverter(Memo)
		ENDIF
	NEXT
	HTML_PRINT ResultHtml

;-------------------------------------------------
;槞彁のキリル文字変換装置の実験
;-------------------------------------------------
@K15_CyrillicConverter(Text)
	#FUNCTIONS 
	#DIMS Text
	REPLACE Text, "Chtobi", "Чтобы"
	Text =  %RESULTS%
	REPLACE Text, "chtobi", "чтобы"
	Text =  %RESULTS%
	REPLACE Text, "Chtobi", "Чтобы"
	Text =  %RESULTS%
	REPLACE Text, "chtobi", "чтобы"
	Text =  %RESULTS%
	REPLACE Text, "ishod", "исход"
	Text =  %RESULTS%
	REPLACE Text, "otsif", "оциф"
	Text =  %RESULTS%
	REPLACE Text, "otsin", "оцин"
	Text =  %RESULTS%
	REPLACE Text, "otsed", "оцед"
	Text =  %RESULTS%
	REPLACE Text, "otsen", "оцен"
	Text =  %RESULTS%
	REPLACE Text, "otsep", "оцеп"
	Text =  %RESULTS%
	REPLACE Text, "Shto ", "Что "
	Text =  %RESULTS%
	REPLACE Text, "shto ", "что "
	Text =  %RESULTS%
	REPLACE Text, "tsia ", "тся "
	Text =  %RESULTS%
	REPLACE Text, "tsia.", "тся."
	Text =  %RESULTS%
	REPLACE Text, "tsia,", "тся,"
	Text =  %RESULTS%
	REPLACE Text, "tsja ", "тся "
	Text =  %RESULTS%
	REPLACE Text, "tsja.", "тся."
	Text =  %RESULTS%
	REPLACE Text, "tsja,", "тся,"
	Text =  %RESULTS%
	REPLACE Text, "shch", "щ"
	Text =  %RESULTS%
	REPLACE Text, "tsya", "тся"
	Text =  %RESULTS%
	REPLACE Text, "tsa ", "тся "
	Text =  %RESULTS%
	REPLACE Text, "tsa.", "тся."
	Text =  %RESULTS%
	REPLACE Text, "tsa,", "тся,"
	Text =  %RESULTS%
	REPLACE Text, "Eto ", "Это "
	Text =  %RESULTS%
	REPLACE Text, "eto ", "это "
	Text =  %RESULTS%
	REPLACE Text, "tst", "тст"
	Text =  %RESULTS%
	REPLACE Text, "bi ", "бы "
	Text =  %RESULTS%
	REPLACE Text, "sch", "щ"
	Text =  %RESULTS%
	REPLACE Text, "yi", "ый"
	Text =  %RESULTS%
	REPLACE Text, "ii", "ий"
	Text =  %RESULTS%
	REPLACE Text, "oi", "ой"
	Text =  %RESULTS%
	REPLACE Text, "ei", "ей"
	Text =  %RESULTS%
	REPLACE Text, "Ot", "От"
	Text =  %RESULTS%
	REPLACE Text, "ot", "от"
	Text =  %RESULTS%
	REPLACE Text, "i^", "й"
	Text =  %RESULTS%
	REPLACE Text, "e'", "э"
	Text =  %RESULTS%
	REPLACE Text, "zh", "ж"
	Text =  %RESULTS%
	REPLACE Text, "kh", "х"
	Text =  %RESULTS%
	REPLACE Text, "ts", "ц"
	Text =  %RESULTS%
	REPLACE Text, "ch", "ч"
	Text =  %RESULTS%
	REPLACE Text, "sh", "ш"
	Text =  %RESULTS%
	REPLACE Text, "yu", "ю"
	Text =  %RESULTS%
	REPLACE Text, "ya", "я"
	Text =  %RESULTS%
	REPLACE Text, "ye", "е"
	Text =  %RESULTS%
	REPLACE Text, "yo", "ё"
	Text =  %RESULTS%
	REPLACE Text, "ia", "я"
	Text =  %RESULTS%
	REPLACE Text, "iu", "ю"
	Text =  %RESULTS%
	REPLACE Text, "io", "ё"
	Text =  %RESULTS%
	REPLACE Text, "''", "ъ"
	Text =  %RESULTS%
	REPLACE Text, "q", "ы"
	Text =  %RESULTS%
	REPLACE Text, "e", "е"
	Text =  %RESULTS%
	REPLACE Text, "z", "з"
	Text =  %RESULTS%
	REPLACE Text, "k", "к"
	Text =  %RESULTS%
	REPLACE Text, "l", "л"
	Text =  %RESULTS%
	REPLACE Text, "m", "м"
	Text =  %RESULTS%
	REPLACE Text, "n", "н"
	Text =  %RESULTS%
	REPLACE Text, "o", "о"
	Text =  %RESULTS%
	REPLACE Text, "p", "п"
	Text =  %RESULTS%
	REPLACE Text, "r", "р"
	Text =  %RESULTS%
	REPLACE Text, "s", "с"
	Text =  %RESULTS%
	REPLACE Text, "t", "т"
	Text =  %RESULTS%
	REPLACE Text, "u", "у"
	Text =  %RESULTS%
	REPLACE Text, "f", "ф"
	Text =  %RESULTS%
	REPLACE Text, "h", "х"
	Text =  %RESULTS%
	REPLACE Text, "g", "г"
	Text =  %RESULTS%
	REPLACE Text, "a", "а"
	Text =  %RESULTS%
	REPLACE Text, "b", "б"
	Text =  %RESULTS%
	REPLACE Text, "v", "в"
	Text =  %RESULTS%
	REPLACE Text, "w", "в"
	Text =  %RESULTS%
	REPLACE Text, "z", "з"
	Text =  %RESULTS%
	REPLACE Text, "i", "и"
	Text =  %RESULTS%
	REPLACE Text, "'", "ь"
	Text =  %RESULTS%
	REPLACE Text, "c", "ц"
	Text =  %RESULTS%
	REPLACE Text, "d", "д"
	Text =  %RESULTS%
	REPLACE Text, "j", "ж"
	Text =  %RESULTS%
	REPLACE Text, "y", "й"
	Text =  %RESULTS%
	REPLACE Text, "x", "ь"
	Text =  %RESULTS%
	REPLACE Text, "A","А"
	Text = %RESULTS%
	REPLACE Text, "B","Б"
	Text = %RESULTS%
	REPLACE Text, "C","Ц"
	Text = %RESULTS%
	REPLACE Text, "D","Д"
	Text = %RESULTS%
	REPLACE Text, "E","Е"
	Text = %RESULTS%
	REPLACE Text, "F","Ф"
	Text = %RESULTS%
	REPLACE Text, "G","Г"
	Text = %RESULTS%
	REPLACE Text, "H","Х"
	Text = %RESULTS%
	REPLACE Text, "I","И"
	Text = %RESULTS%
	REPLACE Text, "J","Ж"
	Text = %RESULTS%
	REPLACE Text, "K","К"
	Text = %RESULTS%
	REPLACE Text, "L","Л"
	Text = %RESULTS%
	REPLACE Text, "M","М"
	Text = %RESULTS%
	REPLACE Text, "N","Н"
	Text = %RESULTS%
	REPLACE Text, "O","О"
	Text = %RESULTS%
	REPLACE Text, "P","П"
	Text = %RESULTS%
	REPLACE Text, "Q","Ы"
	Text = %RESULTS%
	REPLACE Text, "R","Р"
	Text = %RESULTS%
	REPLACE Text, "S","С"
	Text = %RESULTS%
	REPLACE Text, "T","Т"
	Text = %RESULTS%
	REPLACE Text, "U","У"
	Text = %RESULTS%
	REPLACE Text, "V","В"
	Text = %RESULTS%
	REPLACE Text, "W","В"
	Text = %RESULTS%
	REPLACE Text, "X","Ь"
	Text = %RESULTS%
	REPLACE Text, "Y","Й"
	Text = %RESULTS%
	REPLACE Text, "Z","З"
	Text = %RESULTS%


	RETURNF Text