;-------------------------------------------------
;手指刺激蜜穴
;愛撫系コマンド、レベル1
;-------------------------------------------------
@RAPE_COMNAME2
#FUNCTIONS
TSTR:コマンド名受渡 = 手指刺激蜜穴



;===================================================
;コマンドタイプ
;===================================================
@RAPE_COMTYPE_2
#FUNCTION
TFLAG:コマンドタイプ受渡 = RAPE_COMTYPE("Ｖ系")


@RAPE_COM_TOOLTIP_2
LOCALS = <br>■手指刺激蜜穴<br>
LOCALS += "强行将手指插入抗拒对象的阴道进行爱抚的指令。<br>对处女实施时将伴随剧烈痛楚。"
LOCALS += "<br>强奸指令类型：Ｖ系<br>获取来源：快Ｖ・暴露・接触・痛苦"
LOCALS += "<br>专属经验值：无<br>"
TSTR:ツールチップ受渡 = %LOCALS%

@RAPE_COM2
;-------------------------------------------------
;ソース追加処理
;-------------------------------------------------

IF !TALENT:処女
	CALL SOURCE_CALC_快Ｖ(TARGET, PLAYER, 120)
ELSE
	CALL SOURCE_CALC_快Ｖ(TARGET, PLAYER, 30)
ENDIF
SIF TALENT:PLAYER:器用な指
	CALL SOURCE_CALC_快Ｖ(TARGET, PLAYER, 50)
CALL SOURCE_CALC_露出(TARGET, PLAYER, 120)
CALL SOURCE_CALC_接触(TARGET, PLAYER, 150)

;苦痛
LOCAL = 40 * PAIN_CHECK_V(TARGET) / 1000
SIF TALENT:処女
	TIMES LOCAL , 1.50

CALL SOURCE_CALC_苦痛(TARGET, PLAYER, LOCAL)

;下タイツがある場合は破く。
IF TEQUIP:下タイツあり == 1
	TEQUIP:下タイツ破れ = 1
	RFLAG:コマンド結果受渡し変数 = 1
ENDIF
;前張りがあったら剥がす
IF TEQUIP:下半身下着あり == 2
	TEQUIP:下半身下着あり = 0
	RFLAG:コマンド結果受渡し変数２ = 1
ENDIF
;-------------------------------------------------
;経験の処理
;-------------------------------------------------
;同性愛　レズなら戻り値1ゲイなら戻り値2
IF HETEROSEX(TARGET,PLAYER)
	EXP:同性愛経験 += 1
	EXP:PLAYER:同性愛経験 += 1
ENDIF

RETURN 1

;-------------------------------------------------
;実行判定
;-------------------------------------------------

@RAPE_COM_ABLE2
;実行判定
;一括管理
SIF GLOBAL_RAPE_COMABLE(3)
	RETURN RESULT
;Vがない場合駄目
SIF TALENT:TARGET:Ｖ感度 == -2
	RETURN 0
SIF GETBIT(TALENT:TARGET:性別, 0) == 0
	RETURN 0

;下半身着衣
;前鎧、めくれない服があると無理
SIF TEQUIP:下腹部前鎧あり
	RETURN 0
SIF TEQUIP:下半身服あり && (!TEQUIP:スカートめくり可 && !TEQUIP:ずらし可)
	RETURN 0

;指を何かに使ってる・届かないなら無理
SIF TEQUIP:PLAYER:指
	RETURN 0
;膣を何かに使ってる・届かないなら無理
SIF TEQUIP:TARGET:膣
	RETURN 0

;オートコマンド中の制限
IF FLAG:オートコマンド判定中フラグ
	SIF EXP:TARGET:Ｖ経験 == 0
		RETURN 0
ENDIF
RETURN 1

;-------------------------------------------------
;実行時メッセージ
;-------------------------------------------------

@RAPE_MESSAGE_COM2
;下半身着衣
PRINTFORM %CALLNAME:PLAYER%

SIF TEQUIP:下半身服あり
		PRINTFORM 将手%TEXTR("强行探入/粗暴伸进")%衣物内侧

SIF RFLAG:コマンド結果受渡し変数 == 1
		PRINTFORM 暴力%TEXTR("撕破/扯裂")%连裤袜强行暴露

SIF RFLAG:コマンド結果受渡し変数２ == 1
		PRINTFORM 撕掉阴贴强行暴露

PRINTFORM %CALLNAME:TARGET%的

;潤滑LV4以上。とてもつごうのいいかいしゃく
SIF PALAM:潤滑 >= PALAMLV:4
	PRINTFORM 虽正在被强奸却因%TEXTR("期待/情欲")%湿润的

;処女
IF TALENT:処女 == 1
	IF TALENT:TARGET:恋人持ち == 1
		;恋人持ち
		PRINTFORM 连%TEXTR("恋人都未曾进入的/恋人也未触碰的/为恋人保留的全新")%
	ELSEIF TALENT:TARGET:恋人持ち == -1
		;想い人あり
		PRINTFORM 尚未献给心上人
	ELSE
		PRINTFORM 从未%TEXTR("允许任何人进入的/知晓男性滋味的")%
	ENDIF
ELSE
	IF TALENT:TARGET:恋人持ち == 2
		;人妻
		PRINTFORM 本应属于配偶的
	ELSEIF TALENT:TARGET:恋人持ち == 1
		;恋人持ち
		PRINTFORM 本应属于恋人的
	ELSEIF TALENT:TARGET:恋人持ち == -1
		;想い人あり
		PRINTFORM 本应属于心上人的
	ENDIF
ENDIF

;冠詞群
SIF 知識素質:TARGET:高貴 >= 1
	PRINTFORM 高贵的
IF アイドル判定(TARGET)
	PRINTFORM 偶像
ELSEIF TALENT:種族 == 4
	PRINTFORM 哈文族
ELSEIF TALENT:体格 <= -1
	PRINTFORM 紧致
ENDIF
SIF CFLAG:TARGET:発情期フラグ < 0
	PRINTFORM 发情
IF TALENT:TARGET:恋人持ち == 2
	PRINTFORM 人妻
ELSEIF BASE:年齢 <= 13 || TALENT:年齢層 == 10
	PRINTFORM %TEXTR("小鬼/孩童")%
ELSEIF TALENT:処女 == 1
	PRINTFORM 処女
ENDIF
PRINTFORM 蜜穴
;↑全部乗せで「高贵的紧致发情ガキ蜜穴」

PRINTFORML 缓缓插入手指…
PRINTL
IF CFLAG:TARGET:睡眠
	PRINTFORML 发出沉睡鼻息的%CALLNAME:TARGET%，即便在睡梦中也因不速之客的侵入而微微颤抖着…
ELSEIF TALENT:処女 == 1
	PRINTFORML %CALLNAME:TARGET%因不速之客的侵入感全身僵硬，痛苦摇头哀求怜悯…
ELSE
	PRINTFORML %CALLNAME:TARGET%虽摇头抗拒却紧贴%CALLNAME:PLAYER%，插入的手指正不断抽搐收缩…
ENDIF

