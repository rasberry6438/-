
@アイテム個別文章表示_魔力药水(ARGS)
IF ARGS == "値段"
	詳細文文字列受け渡し変数 = 卢比
	RETURN 6000
ENDIF

LOCALS = 
LOCALS += @"■魔力药水　　　持有数:{DT_CELL_GET("所持アイテムデータベース", 0, "魔力药水")}<br>"
LOCALS += "用于恢复魔力的普通药水。<br>"
LOCALS += "饮用后可恢复中等量ＭＰ。<br>"
LOCALS += "虽是通用品但因需求量大价格略高。<br>"
LOCALS += "<br>"
LOCALS += "【效果】<br>"
LOCALS += "我方单体ＭＰ恢复[３００]。<br>"

詳細文文字列受け渡し変数 = %LOCALS%

@アイテム使用先表示_魔力药水
CALL 汎用使用先表示("味方単体")

@アイテム効果処理_魔力药水(ARG)
;ARG = 隊列の何番目か

IF !BATTLE_STATE:ARG:キャラ登録番号
	RETURN 0
ENDIF

IF DT_CELL_GET("所持アイテムデータベース", 0, "魔力药水") < 1
	PRINTW 没有该物品
	RETURN 0
ENDIF

IF BATTLE_STATE:ARG:最大ＭＰ == BATTLE_STATE:ARG:ＭＰ
	PRINTW ＭＰ已满
	RETURN 0
ENDIF

IF BATTLE_STATE:ARG:最大ＭＰ - BATTLE_STATE:ARG:ＭＰ < 300
	PRINTFORMW %CALLNAME:(BATTLE_STATE:ARG:キャラ登録番号)%的ＭＰ恢复了{BATTLE_STATE:ARG:最大ＭＰ - BATTLE_STATE:ARG:ＭＰ}
ELSE
	PRINTFORMW %CALLNAME:(BATTLE_STATE:ARG:キャラ登録番号)%的ＭＰ恢复了300
ENDIF

BATTLE_STATE:ARG:ＭＰ = MIN(BATTLE_STATE:ARG:ＭＰ + 300, BATTLE_STATE:ARG:最大ＭＰ)

RETURN 1
