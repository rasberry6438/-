

@ダンジョン初期処理_名前を亡くした遺跡
;ダンジョン構造の読み込み
;0でない時、そのマスは存在する
#DIM 深度
#DIM 分岐

ダンジョンサブタイトル = ANCIENT RUINS
ダンジョンマス画像URL_伏せ状態 = 壁_遺跡
ダンジョン現在位置:0 = 0
ダンジョン現在位置:1 = 4
ダンジョン背景画像 = 背景_遺跡

;スタート地点は必ず存在
;初期からオープン済みなので3を入れる
;ビット0：存在するか　ビット1：移動できるか　ビット2：マスをオープンするか（ビット１をONにしないと無意味）　ビット3：入れないがオープンする場合に使用
;ビット4以降：自由枠。主に宝箱の開閉やイベント達成フラグなどに使用
IF GETVAR(@"ダンジョン構造配列_%ダンジョン名%:0:4") == 0
	SETVAR @"ダンジョン構造配列_%ダンジョン名%:0:4", 3
ENDIF

FOR 深度, 1, 100
	LOCAL = 0
	FOR 分岐, 0, 9
		IF GETVAR(@"ダンジョン構造配列_%ダンジョン名%:{深度}:{分岐}")
			;既にマス情報が入ってるなら飛ばす
			LOCAL = 1
			CONTINUE
		ELSEIF ENUMFUNCBEGINSWITH(@"ダンジョンマス情報_%ダンジョン名%_{深度}_{分岐}")
			LOCAL = 1
			SETVAR @"ダンジョン構造配列_%ダンジョン名%:深度:分岐", 1
		ENDIF
	NEXT
	IF LOCAL
		ダンジョン最大深度 = 深度
	ENDIF
NEXT

@ダンジョン解説文_名前を亡くした遺跡

詳細文文字列受け渡し変数 = 
詳細文文字列受け渡し変数 += "存在于露玛希群岛的古代遗迹，推测建造于霸空战争前后。<br>"
詳細文文字列受け渡し変数 += "内部栖息着魔像与菌菇人等魔物，鲜少有人造访。<br>"
詳細文文字列受け渡し変数 += "偶尔会有哥布林试图将此遗迹作为据点入侵。<br>"
詳細文文字列受け渡し変数 += "可在此获取古代米、扁豆等特殊素材。<br>"

;推奨レベルを返す
RETURN 8



@敵討伐後処理_ダンジョン固有_名前を亡くした遺跡(討伐エネミー数)
;ダンジョン内で戦闘した後に呼ばれる関数、主にダンジョンごとのドロップアイテム取得に使用
;まだ敵データはリセットしていないので敵BATTLE_STATEで色々情報は取得可能
#DIM 討伐エネミー数
#DIM ドロップ確率
#DIMS ドロップアイテム

ドロップ確率 = 10 * 討伐エネミー数
ドロップアイテム = 壁画残片
CALL ドロップ判定処理(ドロップ確率, ドロップアイテム)

ドロップ確率 = 5 * 討伐エネミー数
ドロップアイテム = 古代米
CALL ドロップ判定処理(ドロップ確率, ドロップアイテム)

ドロップ確率 = 10 * 討伐エネミー数
ドロップアイテム = 扁豆
CALL ドロップ判定処理(ドロップ確率, ドロップアイテム)

ドロップ確率 = 5 * 討伐エネミー数
ドロップアイテム = 星晶碎片
CALL ドロップ判定処理(ドロップ確率, ドロップアイテム)

ドロップ確率 = 1 * 討伐エネミー数
ドロップアイテム = 赤铜古纹
CALL ドロップ判定処理(ドロップ確率, ドロップアイテム)

;---------------------------------------------------------------------
;マップ構造
;---------------------------------------------------------------------
;四角形に配置された４つのマップを巡り、ミニイベをクリアしてゆぐゆぐの信頼度を稼ぐ
;稼ぎ終わったら最初のマップから隠された道が開き、ゆぐゆぐがいる場所に行けるようになる
;ボスは一番奥のマップにおり、ゆぐゆぐルートが開く前に接敵する
;---------------------------------------------------------------------
@ダンジョンマス情報_名前を亡くした遺跡_0_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 0
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "1_4")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = %CALLNAME:PLAYER%踏入无名遗迹。
			WSTR:(K++) = 据星晶兽艾拉所言，此处栖息着被称为创世树的星晶兽。
			WSTR:(K++) = 虽心怀仁慈却不善交际，不会在未获信任者面前现形。
			WSTR:(K++) = COLOR_FFD900_若能尊重并爱护草木生灵，或许能获得信任。
			WSTR:(K++) = 虽可请苍之少女或星晶兽友人引荐，但若%CALLNAME:PLAYER%未获认可仍难对话。
			WSTR:(K++) = 先循正途环绕遗迹探索吧。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ELSE
			IF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:22:5, 4)
				KSTR:(K++) = 通往星晶兽居所的道路已然开启。
			ELSE
				KSTR:(K++) = 环绕遗迹展开探索。
			ENDIF
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_1_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 1
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "2_3")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "2_5")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "2_4")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 遗迹古老沧桑，部分区域已被植物侵蚀甚至坍塌。
			WSTR:(K++) = 但碎石瓦砾清理有序，地面仍坚实可靠。
			WSTR:(K++) = 周遭弥漫着浓郁的土属性魔力，栖居魔物应多为土属性。
			WSTR:(K++) = COLOR_FFD900_让同伴佩戴耳饰转为风属性将更有利作战。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ELSE
			KSTR:(K++) = 土属性魔力异常浓郁，魔物应多为土属性。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_2_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 2
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "3_1")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "3_2")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 深入遗迹，见巨型人形雕塑巍然矗立。
			WSTR:(K++) = 保存相对完好，除表面细微裂痕外未见损伤。
			WSTR:(K++) = 粗犷设计保留岩石肌理，栩栩如生似将觉醒。
			WSTR:(K++) = ……不，确实开始活动了！此乃守护遗迹的魔像！
			CALL メッセージ欄表示用関数(,,,0)

			敵BATTLE_STATE_STR:3:エネミー名 = Lv10_魔像
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 成功击溃魔像。
				WSTR:(K++) = 然碎裂残骸正逐渐聚拢试图复原。
				WSTR:(K++) = 想必只要周遭魔力尚存便会无限再生。
				WSTR:(K++) = 趁再生间隙穿越通道继续前进。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:3:エネミー名 = Lv10_魔像
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_3_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 3
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "5_0")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 遗迹廊道偶见壁画遗存。
			WSTR:(K++) = 描绘持械人群与可怖怪物交战场面。
			WSTR:(K++) = 闻此遗迹建于霸空战争时期，壁画应记录当年战事。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ELSE
			KSTR:(K++) = 通道墙壁残留壁画痕迹。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_5_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 5
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 行至遗迹仓库区域。
			WSTR:(K++) = 虽仅存破铜烂铁，却寻得珍贵磁器陶壶。
			WSTR:(K++) = 古代遗物若转售古董商可获约10,000卢比。
			KSTR:(K++) = 然壶中已有松鼠筑巢。_PAGE
			KSTR:(K++) = %CALLNAME:PLAYER%选择……
			KSTR:(K++) = BUTTON_[赶走松鼠拿走壶]
			KSTR:(K++) = BUTTON_[放弃取壶保留巢穴]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[赶走松鼠拿走壶]"
					CALL 口上変数初期化
					WSTR:(K++) = 嘘赶松鼠取出巢穴，稍作清理。
					WSTR:(K++) = 度假村运营资金多多益善，归程后委托杂货店转售收藏家吧。
					WSTR:(K++) = %CALLNAME:PLAYER%获得了10,000卢比！
					CALL メッセージ欄表示用関数(,,,0)
					MONEY += 10000
				CASE "[放弃取壶保留巢穴]"
					CALL 口上変数初期化
					WSTR:(K++) = 虽需资金，亦不忍毁巢。
					WSTR:(K++) = 将此壶原样留存。
					SETBIT ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4
					ゆぐゆぐ信頼度_名前を亡くした遺跡 += 10
					CALL メッセージ欄表示用関数(,,,0)
				CASEELSE
					CLEARLINE 1
					REUSELASTLINE  
					GOTO LOOP_MESSAGE
			ENDSELECT
			CALL 口上変数初期化
		ELSE
			IF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4)
				;リスを見逃したルート
				KSTR:(K++) = 陶壶已成小动物家园。
			ELSE
				;壺を拾ったルート
				KSTR:(K++) = 已经没有什么值钱的东西了。
			ENDIF
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_3_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 3
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "5_2")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "4_3")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			WSTR:(K++) = 幽暗的甬道中横陈着几具哥布林尸体。
			WSTR:(K++) = 全副武装的模样与寻常遗迹住民大相径庭。
			WSTR:(K++) = 魔物滋长虽令人头疼，但若能驱逐哥布林，或许能向星晶兽卖个人情。
			WSTR:(K++) = 遇之则斩。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ELSE
			KSTR:(K++) = 哥布林残骸散落在地。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_5_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 5
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		IF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4)
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
		ELSE
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4)
			;ポーション入手済み
			KSTR:(K++) = 没有特别在意的东西了。
			CALL メッセージ欄表示用関数(,,,0)
		ELSEIF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 斑驳的遗迹墙根处丛生着奇异植物。
			CALL 知識技能所持者検索("錬金知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				WSTR:(K++) = %CALLNAME:LOCAL%眸光微动，认出这是配制药水的原料。
				WSTR:(K++) = 在不破坏生态的前提下适量采集并加工。
				WSTR:(K++) = 成功制得３瓶药水！
				SETBIT ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4
				CALL アイテム増減汎用処理("治疗药水", 3)
			ELSE
				WSTR:(K++) = 未知植物恐含毒素，沾染必生祸端。
				WSTR:(K++) = 若有炼金术知识或可解析其中奥秘。
				WSTR:(K++) = 且按下疑虑继续前行。
			ENDIF
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ELSE
			KSTR:(K++) = 诡异植被依然丛生。
			KSTR:(K++) = 掌握炼金术知识或能参透玄机。
			CALL 知識技能所持者検索("錬金知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				WSTR:(K++) = %CALLNAME:LOCAL%眸光微动，认出这是配制药水的原料。
				WSTR:(K++) = 在不破坏生态的前提下适量采集并加工。
				WSTR:(K++) = 成功制得３瓶药水！
				SETBIT ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4
				CALL アイテム増減汎用処理("治疗药水", 3)
				CALL メッセージ欄表示用関数(,,,0)
				CALL 口上変数初期化
			ENDIF
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_7_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 7
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 随着深入遗迹，建筑结构愈发保存完好。
			WSTR:(K++) = 此刻起不仅魔物环伺，更有机关暗藏。
			WSTR:(K++) = 掌握_COLOR_FFD900_魔法知识_或_COLOR_FFD900_机械知识_可安全推进。
			WSTR:(K++) = 亦可遇险撤退择日再探，谨慎为上。
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(8, 7)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 8
		ダンジョン現在位置:1 = 7
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_4_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 4
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "6_3")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 菌类生物在遗迹角落悄然繁衍。
			WSTR:(K++) = 当%CALLNAME:PLAYER%试图寻觅食用菌时，竟发现高逾人顶的巨型蘑菇！
			WSTR:(K++) = 菌盖骤然活化，张牙舞爪地扑袭而来！
			CALL メッセージ欄表示用関数(,,,0)

			敵BATTLE_STATE_STR:0:エネミー名 = Lv9_菌菇人
			敵BATTLE_STATE_STR:2:エネミー名 = Lv9_菌菇人
			CALL 雑魚敵遭遇汎用処理
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			敵BATTLE_STATE_STR:0:エネミー名 = Lv9_菌菇人
			敵BATTLE_STATE_STR:2:エネミー名 = Lv9_菌菇人
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_6_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 6
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "7_1")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 再现霸空战争主题壁画。
			WSTR:(K++) = 若修缮为观光景点或具价值.……
			WSTR:(K++) = 然惊扰星晶兽栖所风险过高。
			WSTR:(K++) = 继续专注探索。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 廊道排列霸空战争时期壁画。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT



@ダンジョンマス情報_名前を亡くした遺跡_2_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 2
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		SIF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "7_4")
	CASE "マスイベント"
		;奥へと続く扉
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4)
			;既に扉が開いている
			KSTR:(K++) = 巨型门扉已然洞开。
			CALL メッセージ欄表示用関数(,,,0)
		ELSEIF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:22:5, 4)
			;ボス倒した
			IF 初来訪マス判定用フラグ
				;最初に訪れた時
				WSTR:(K++) = 巍然矗立于眼前的，是一扇巨大的门扉。
				WSTR:(K++) = 指尖轻触门扇的瞬间，它便无声地自行开启了。
			ELSE
				WSTR:(K++) = 当触碰那扇尘封已久的门扉时，沉寂无声中它悄然敞开。
			ENDIF
			WSTR:(K++) = 宛若受引导般深入探索。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			CALL 接続ルート全開放処理(マス深度, マス分岐)
			SETBIT ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4
		ELSE
			IF 初来訪マス判定用フラグ
				;最初に訪れた時
				WSTR:(K++) = 巍然矗立于眼前的，是一扇巨大的门扉。
				WSTR:(K++) = 推拉皆纹丝不动恐存机关。
				WSTR:(K++) = 先探索别的地点吧。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 口上変数初期化
			ELSE
				KSTR:(K++) = 巨大的门似乎没有打开。
				CALL メッセージ欄表示用関数(,,,0)
			ENDIF
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_2_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 2
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "3_7")
	CASE "マスイベント"
		;こっちは過去に遺跡作った人たちの居住区画
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 沿着比其他通道稍显狭窄的甬道前行。
			WSTR:(K++) = 排列着几间摆放着石制床榻般物件的房间。
			WSTR:(K++) = 或许是昔日遗迹居民的生活区域吧。
			WSTR:(K++) = 四下查看了一番，但似乎早已被洗劫一空，没什么值钱物件了。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 似乎是遗迹居民曾经的生活区域。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_3_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 3
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "4_6")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "5_7")
	CASE "マスイベント"
		;ゴブリンいるぞー話
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 越是深入，遗迹墙壁上类似新近划痕的痕迹愈发密集。
			CALL 知識技能所持者検索("魔物知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				WSTR:(K++) = ……！
				WSTR:(K++) = %CALLNAME:LOCAL%一眼看出这些痕迹和哥布林标记领地时留下的爪痕如出一辙。
				WSTR:(K++) = 重新警戒四周后，果然在附近发现了哥布林聚集的踪迹。
				KSTR:(K++) = %CALLNAME:PLAYER%一行先发制人发动奇袭，毫发无损地击退了哥布林！_PAGE
				WSTR:(K++) = 哥布林身上似乎携带着某种宝石般的物体。
				WSTR:(K++) = %CALLNAME:PLAYER%一行获得了涡琥珀。
				CALL 素材入手処理("涡琥珀", 1)
			ELSE
				WSTR:(K++) = ……！
				WSTR:(K++) = %CALLNAME:PLAYER%一行刚要继续前进，就遭到了哥布林的伏击！
				WSTR:(K++) = 虽然勉强取胜，但队伍遭受了不小的损伤……
				WSTR:(K++) = 看来墙壁上的痕迹正是哥布林宣示领地时留下的标记。
				WSTR:(K++) = 若队伍里有了解魔物知识的同伴，或许就能避开这场灾祸了……
				CALL メッセージ欄表示用関数(,,,0)
				CALL 口上変数初期化
				WSTR:(K++) = 全员ＨＰ减少１００点。
				FOR LOCAL, 0, 4
					SIF BATTLE_STATE:LOCAL:キャラ登録番号 < 1
						CONTINUE
					SIF BATTLE_STATE:LOCAL:ＨＰ < 1
						CONTINUE
					BATTLE_STATE:LOCAL:ＨＰ = MAX(BATTLE_STATE:LOCAL:ＨＰ - 100, 1)
				NEXT
			ENDIF
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 遗迹墙壁上残留着新近的划痕状痕迹。
			KSTR:(K++) = 哥布林们已经不见踪影。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_名前を亡くした遺跡_4_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 4
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "5_5")
	CASE "マスイベント"
		;遺跡の石材置き場
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 踏入稍显宽敞的厅室，映入眼帘的是风化严重的石材堆。
			WSTR:(K++) = 从尚存形状的物件中，依稀可辨石板与石像的轮廓。
			WSTR:(K++) = 这里曾是制作遗迹装饰品的工坊吗？
			WSTR:(K++) = 无论如何，这些石材风化得太过严重，已无完整形态可言。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 堆积着风化严重的破碎石材。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_5_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 5
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
	CASE "マスイベント"
		;砕けた石材に混じって宝石が落ちてる
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 深处的房间同样散落着风化严重的石材。
			WSTR:(K++) = ……？　在碎砾堆中发现了一抹微光。
			WSTR:(K++) = 这大概是宝石原石吧，拿去贩卖应该能换些钱财。
			WSTR:(K++) = %CALLNAME:PLAYER%将宝石揣入怀中，打算回城后变卖。
			WSTR:(K++) = %CALLNAME:PLAYER%获得了10,000卢比！
			MONEY += 10000
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 没什么值得注意的东西。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_5_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 5
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "6_8")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "6_6")
	CASE "マスイベント"
		;ゴブリン部隊
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4) == 0
			IF 初来訪マス判定用フラグ
				;最初に訪れた時
				WSTR:(K++) = 前方传来金属摩擦的声响。
				WSTR:(K++) = 隐蔽身形窥探，发现全副武装的哥布林部队正持剑握盾严阵以待。
				WSTR:(K++) = 它们警惕地巡视着四周，想要不交战就突破此地怕是难如登天。
				WSTR:(K++) = 你们整备好武装，与哥布林展开了激战。
			ELSE
				;まだ倒してない
				WSTR:(K++) = 你们再次与哥布林展开战斗。
			ENDIF
			CALL メッセージ欄表示用関数(,,,0)

			敵BATTLE_STATE_STR:0:エネミー名 = Lv8_哥布林士兵
			敵BATTLE_STATE_STR:2:エネミー名 = Lv8_哥布林士兵
			敵BATTLE_STATE_STR:1:エネミー名 = Lv8_哥布林盾卫
			敵BATTLE_STATE_STR:3:エネミー名 = Lv8_哥布林盾卫
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ進行
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:0:エネミー名 = Lv8_哥布林士兵
			敵BATTLE_STATE_STR:2:エネミー名 = Lv8_哥布林士兵
			敵BATTLE_STATE_STR:1:エネミー名 = Lv8_哥布林盾卫
			敵BATTLE_STATE_STR:3:エネミー名 = Lv8_哥布林盾卫
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_名前を亡くした遺跡_6_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 6
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		IF ダンジョン内一時変数:0 == 0
			ダンジョンマス画像URL_重ね表示 = えっちハート
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		;えっちイベ
		CALL 口上変数初期化
		SETBIT ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 2
		IF ダンジョン内一時変数:0
		ELSE
			CALL ダンジョンハプニング基本処理()
			IF RESULT
				ダンジョン内一時変数:0 = 1
			ENDIF
			CALL 口上変数初期化
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_6_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 6
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
	CASE "マスイベント"
		;25-0へ
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 通道上残留着大量哥布林部队的痕迹。
			WSTR:(K++) = 它们是想把这座遗迹划为领地吧，这样的话某处应该会有族群首领。
			WSTR:(K++) = 恐怕前方会有更多战斗，务必谨慎前行。
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(25, 0)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 25
		ダンジョン現在位置:1 = 0
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_名前を亡くした遺跡_7_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 7
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
	CASE "マスイベント"
		;33-4へ
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(33, 4)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 33
		ダンジョン現在位置:1 = 4
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_名前を亡くした遺跡_8_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 8
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "9_5")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "10_6")
	CASE "マスイベント"
		;7_1へ
		CALL 口上変数初期化
		ダンジョン現在位置:0 = 7
		ダンジョン現在位置:1 = 1
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_名前を亡くした遺跡_9_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 9
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "10_3")
	CASE "マスイベント"
		;エネミーゴブリン
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 深入遗迹时，发现哥布林正在摆弄墙上的机关。
			WSTR:(K++) = 虽不知其目的，但最好在它们搞鬼前解决掉。
			WSTR:(K++) = 你们架起武器，展开战斗。
			CALL メッセージ欄表示用関数(,,,0)

			敵BATTLE_STATE_STR:0:エネミー名 = Lv8_哥布林陷阱师
			敵BATTLE_STATE_STR:2:エネミー名 = Lv8_哥布林陷阱师
			CALL 雑魚敵遭遇汎用処理
			CALL 接続ルート全開放処理(マス深度, マス分岐)
			CALL 口上変数初期化
			WSTR:(K++) = 这类哥布林似乎专门负责设置陷阱。
			WSTR:(K++) = 会改造遗迹原有陷阱为己所用，或是布置自制陷阱。
			WSTR:(K++) = 虽比普通哥布林孱弱，但陷阱威力不容小觑。
			WSTR:(K++) = 优先解决它们能减少损失。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ELSE
			敵BATTLE_STATE_STR:0:エネミー名 = Lv8_哥布林陷阱师
			敵BATTLE_STATE_STR:2:エネミー名 = Lv8_哥布林陷阱师
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_名前を亡くした遺跡_10_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 10
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		IF ダンジョン内一時変数:1
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
		ELSE
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱
		ENDIF
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "12_0")
	CASE "マスイベント"
		;りんごの木
		;プレゼントアイテムりんご入手
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 遗迹外围被茂密植被覆盖。
			WSTR:(K++) = %CALLNAME:PLAYER%在其中发现了野生苹果树。
			KSTR:(K++) = 枝头正挂着熟透的果实，摘一个带走好了。_PAGE
			WSTR:(K++) = %CALLNAME:PLAYER%一行获得了苹果！
			CALL 素材入手処理("苹果", 1)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			CALL 接続ルート全開放処理(マス深度, マス分岐)
			WSTR:(K++) = 这棵树或许受到土之星晶兽影响，生长速度异常迅猛。
			WSTR:(K++) = 次日之后又会结出新果实吧。
			WSTR:(K++) = 需要苹果时可以常来采摘。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			ダンジョン内一時変数:1 = 1
		ELSEIF ダンジョン内一時変数:1 == 0
			;翌日以降
			WSTR:(K++) = 苹果树再次结出了果实。
			KSTR:(K++) = %CALLNAME:PLAYER%伸手摘下一颗果实。_PAGE
			WSTR:(K++) = %CALLNAME:PLAYER%一行获得了苹果！
			CALL 素材入手処理("苹果", 1)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			ダンジョン内一時変数:1 = 1
		ELSE
			KSTR:(K++) = 树上尚未结果。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_10_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 10
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "12_2")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "12_3")
	CASE "マスイベント"
		;罠、機械知識
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 遗迹墙壁有可疑凸起，像是开启暗门的机关。
			CALL 知識技能所持者検索("機械知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				WSTR:(K++) = %CALLNAME:LOCAL%简单检查凸起周围，发现了与机关联动的陷阱。
				WSTR:(K++) = 陷阱部分异常崭新，应是哥布林后来加装的。
				KSTR:(K++) = %CALLNAME:LOCAL%娴熟地解除陷阱，回收了所用材料。_PAGE
				WSTR:(K++) = %CALLNAME:PLAYER%一行获得了３颗火之宝珠！
				CALL 素材入手処理("火之宝珠", 3)
			ELSE
				WSTR:(K++) = 触动机关后，火焰陷阱向你们袭来！
				WSTR:(K++) = 全员ＨＰ减少１００点。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 口上変数初期化
				FOR LOCAL, 0, 4
					SIF BATTLE_STATE:LOCAL:キャラ登録番号 < 1
						CONTINUE
					SIF BATTLE_STATE:LOCAL:ＨＰ < 1
						CONTINUE
					BATTLE_STATE:LOCAL:ＨＰ = MAX(BATTLE_STATE:LOCAL:ＨＰ - 100, 1)
				NEXT
				WSTR:(K++) = 看来哥布林改造了遗迹原有机关。
				WSTR:(K++) = 若有机械知识或许能避开陷阱。
				WSTR:(K++) = 为安全起见，这扇门就保持开启状态吧…
			ENDIF
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 设有自动门扉机关。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_10_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 10
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "11_5")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "11_7")
	CASE "マスイベント"
		;分かれ道、イベントなし
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 通道墙壁残留着霸空战争时代的壁画。
			WSTR:(K++) = ……难得的是，除了壁画还有文字记载。虽是古文字但尚能解读。
			WSTR:(K++) = 「找出欢愉之兽。那是能独自毁灭天空的存在。切莫松懈，务必歼灭」
			WSTR:(K++) = %CALLNAME:PLAYER%将这段文字凿去。
			WSTR:(K++) = 而后背对壁画，继续探索。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ELSE
			KSTR:(K++) = 残留着霸空战争时代的壁画。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_名前を亡くした遺跡_11_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 11
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "13_5")
	CASE "マスイベント"
		;エネミー
		;ゴブリン部隊
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4) == 0
			IF 初来訪マス判定用フラグ
				;最初に訪れた時
				WSTR:(K++) = 前行时发现正在搜寻某物的哥布林群。
				WSTR:(K++) = 总觉得它们比其他哥布林更干净整洁……
				WSTR:(K++) = 附近难道有泉水？
				WSTR:(K++) = 无论如何都妨碍探索，你们与哥布林展开战斗。
			ELSE
				;まだ倒してない
				WSTR:(K++) = 你们再次与哥布林展开战斗。
			ENDIF
			CALL メッセージ欄表示用関数(,,,0)

			敵BATTLE_STATE_STR:4:エネミー名 = Lv8_哥布林士兵
			敵BATTLE_STATE_STR:3:エネミー名 = Lv8_哥布林士兵
			敵BATTLE_STATE_STR:0:エネミー名 = Lv8_哥布林陷阱师
			敵BATTLE_STATE_STR:2:エネミー名 = Lv8_哥布林陷阱师
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ進行
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:4:エネミー名 = Lv8_哥布林士兵
			敵BATTLE_STATE_STR:3:エネミー名 = Lv8_哥布林士兵
			敵BATTLE_STATE_STR:0:エネミー名 = Lv8_哥布林陷阱师
			敵BATTLE_STATE_STR:2:エネミー名 = Lv8_哥布林陷阱师
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_11_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 11
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "13_7")
	CASE "マスイベント"
		;鍵が掛かってる
		;機械知識か魔法知識で解錠可能
		IF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = %CALLNAME:PLAYER%一行沿通道前行，来到一扇紧锁的门扉前。
			CALL 知識技能所持者検索("機械知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				WSTR:(K++) = %CALLNAME:LOCAL%观察锁具结构，用随身工具三下五除二撬开了门锁。
				WSTR:(K++) = 看来是哥布林安装的劣质锁头。
				KSTR:(K++) = 但特意上锁究竟想隐藏什么呢？
				KSTR:(K++) = 继续前进一探究竟。
				SETBIT ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4
				CALL 接続ルート全開放処理(マス深度, マス分岐)
			ELSE
				CALL 知識技能所持者検索("魔法知識", 1)
				LOCAL = RESULT
				IF LOCAL > -1
					WSTR:(K++) = %CALLNAME:LOCAL%施展开锁魔法解除了门禁。
					WSTR:(K++) = 看来是哥布林安装的劣质锁头。
					KSTR:(K++) = 但特意上锁究竟想隐藏什么呢？
					KSTR:(K++) = 继续前进一探究竟。
					SETBIT ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4
					CALL 接続ルート全開放処理(マス深度, マス分岐)
				ELSE
					WSTR:(K++) = 既无钥匙又不想破门而入。
					WSTR:(K++) = 若有机械或魔法知识或许能开启……
					WSTR:(K++) = 暂且搁置，改道探索其他区域。
				ENDIF
			ENDIF
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ELSE
			KSTR:(K++) = 门扉已然洞开。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_名前を亡くした遺跡_12_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 12
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
	CASE "マスイベント"
		;ゆぐゆぐ好感度イベント
		;小鳥を巣に戻す
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 绕行至遗迹外围时，听见啾啾鸟鸣。
			WSTR:(K++) = 循声望去，发现被强风吹落的鸟巢躺在地上。
			WSTR:(K++) = 细看竟是「尤巴梅」的巢穴。
			KSTR:(K++) = 尤巴梅巢作为高级珍馐，转手至少价值万枚卢比。PAGE
			KSTR:(K++) = %CALLNAME:PLAYER%选择……
			KSTR:(K++) = BUTTON_[反正会筑新巢。带走鸟巢]
			KSTR:(K++) = BUTTON_[夺人住所于心不忍。归还鸟巢]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[反正会筑新巢。带走鸟巢]"
					CALL 口上変数初期化
					WSTR:(K++) = %CALLNAME:PLAYER%拾起鸟巢塞进行囊。
					WSTR:(K++) = 尤巴梅哀鸣一声振翅远去。
					WSTR:(K++) = 度假村运营资金多多益善，归程后委托杂货店转售收藏家吧。
					WSTR:(K++) = %CALLNAME:PLAYER%获得了10,000卢比！
					CALL メッセージ欄表示用関数(,,,0)
					MONEY += 10000
				CASE "[夺人住所于心不忍。归还鸟巢]"
					CALL 口上変数初期化
					WSTR:(K++) = %CALLNAME:PLAYER%缓缓靠近尤巴梅，将鸟巢放回原处。
					WSTR:(K++) = 尤巴梅欢快啼鸣，在修复的巢中惬意休憩。
					WSTR:(K++) = 小插曲过后继续遗迹探索。
					SETBIT ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4
					ゆぐゆぐ信頼度_名前を亡くした遺跡 += 10
					CALL メッセージ欄表示用関数(,,,0)
				CASEELSE
					CLEARLINE 1
					REUSELASTLINE  
					GOTO LOOP_MESSAGE
			ENDSELECT
			CALL 口上変数初期化
		ELSE
			IF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4)
				;リスを見逃したルート
				KSTR:(K++) = 尤巴梅正发出清冽的鸣叫声。
			ELSE
				;壺を拾ったルート
				KSTR:(K++) = 已经没有什么值钱的东西了。
			ENDIF
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_12_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 12
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "10_1")
	CASE "マスイベント"
		;遺跡の穴からちょっと外に出る感じ
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 坍塌的遗迹墙壁形成通往外界的路径。
			WSTR:(K++) = 径直前行可深入遗迹，但绕道探索或许另有收获。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ELSE
			KSTR:(K++) = 存在通往外界的路径。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_12_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 12
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "13_3")
	CASE "マスイベント"
		;壁画、eraに似てる絵があるきがする
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 遗迹通道依旧布满浮雕壁画。
			WSTR:(K++) = 描绘星晶兽掀起暴风驱散空之民的场景，手持光剑对抗巨兽的英雄身姿…
			KSTR:(K++) = 虽不明细节，遥想当年战事仍令人心潮澎湃。_PAGE
			WSTR:(K++) = 其中一幅壁画绘有幼女模样的人物。
			WSTR:(K++) = 此女令周遭沉浸欢愉，借收集之力引发种种天灾。
			WSTR:(K++) = ……似曾相识的能力。%CALLNAME:PLAYER%背对壁画离开通道。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ELSE
			KSTR:(K++) = 留存着描绘霸空战争的壁画。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_名前を亡くした遺跡_13_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 13
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "15_3")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "15_5")
	CASE "マスイベント"
		;分かれ道
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			SETBIT ダンジョン構造配列_名前を亡くした遺跡:15:3, 3
			CALL 画面再描画
			WSTR:(K++) = 前行时感受到前方传来强烈威压！！
			WSTR:(K++) = 显然有与遗迹层级不符的强敌蛰伏于此…
			KSTR:(K++) = 除非你对自己的能力非常有信心，否则最好还是远离。_PAGE
			WSTR:(K++) = 若无_COLOR_%カラーパレット_HTML("真っ赤")%_Lv25左右_的实力，最好莫要接近。_PAGE
			WSTR:(K++) = 所幸另有道路通往遗迹深处。先往彼处探索为妙。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ELSEIF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:15:3, 4)
			;強敵撃破後
			KSTR:(K++) = 强敌已被讨伐。
		ELSE
			KSTR:(K++) = 感知到强敌气息……若无_COLOR_%カラーパレット_HTML("真っ赤")%_Lv25左右_的实力，最好莫要接近。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_13_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 13
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "13_6")
	CASE "マスイベント"
		;なんもない通路
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 狭窄通道上散落着哥布林们随意丢弃的行李。
			WSTR:(K++) = 说是行李其实都是些破烂，没什么值钱物件。
			WSTR:(K++) = 但既然具备整理物资的智能，意味着有统率哥布林的领袖存在。
			WSTR:(K++) = 只要击溃那个首领，就能驱散整个哥布林族群。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ELSE
			KSTR:(K++) = 狭窄通道上散落着哥布林们随意丢弃的行李。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_13_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 13
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		IF ダンジョン内一時変数:2 == 0
			ダンジョンマス画像URL_重ね表示 = 回復アビ
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		;回復の泉
		IF ダンジョン内一時変数:2
		ELSE
			KSTR:(K++) = 遗迹某处房间涌动着清冽泉水。遗迹某处房间涌动着清冽泉水。
			KSTR:(K++) = 要稍作休整吗？
			KSTR:(K++) = （全队状态恢复・效果持续至离开迷宫）
			KSTR:(K++) = BUTTON_[确定]
			KSTR:(K++) = BUTTON_[取消]
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[确定]"
					KSTR:(K++) = 你们在遗迹房间充分休整，恢复了体力！
					CALL メッセージ欄表示用関数()
					ダンジョン内一時変数:2 = 1
					FOR LOCAL, 0, 4
						IF BATTLE_STATE:LOCAL:キャラ登録番号 < 1
							BREAK
						ENDIF
						BATTLE_STATE:LOCAL:ＨＰ = BATTLE_STATE:LOCAL:最大ＨＰ
						BATTLE_STATE:LOCAL:ＭＰ = BATTLE_STATE:LOCAL:最大ＭＰ
					NEXT
				CASE "[取消]"
					KSTR:(K++) = 尚未疲惫到需要休息，继续前进吧。
					CALL メッセージ欄表示用関数()
				CASEELSE
					CLEARLINE 1
					REUSELASTLINE  
					GOTO LOOP_MESSAGE
			ENDSELECT
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_13_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 13
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
	CASE "マスイベント"
		;魔石の鉱脈
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 门扉后方是地板塌陷的房间。
			WSTR:(K++) = 地下被挖掘出洞穴，岩层正泛着朦胧微光。
			WSTR:(K++) = 这是魔石矿脉。哥布林上锁正是为了用这些魔石增强魔力。
			WSTR:(K++) = 挑些大小合适的带走。
			WSTR:(K++) = %CALLNAME:PLAYER%一行获得了５颗魔石！
			CALL アイテム増減汎用処理("魔石", 5)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ELSE
			KSTR:(K++) = 已无值得注意的物件。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT



@ダンジョンマス情報_名前を亡くした遺跡_15_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 15
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
	CASE "マスイベント"
		;戦わなくてもいい強敵
		;Lv20くらいを想定
		IF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4) == 0
			CALL 強敵マス確認
			SIF RESULT == 1
				RETURN 0
			WSTR:(K++) = %CALLNAME:PLAYER%一行面前浮现巨大化的蘑菇魔物。
			WSTR:(K++) = 诡异发光的瞳孔纹路，恍若真实眼眸凝视着你们。
			WSTR:(K++) = 魔物剧烈震颤身躯，向%CALLNAME:PLAYER%一行袭来！
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			敵BATTLE_STATE_STR:0:エネミー名 = Lv25_瞳菇
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時
				SETBIT ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4
				WSTR:(K++) = %CALLNAME:PLAYER%一行成功讨伐了强敌！
				WSTR:(K++) = 从强敌处获得若干饰品与财宝。
				WSTR:(K++) = 从瞳菇处获得「魅惑噬咬之戒」！
				WSTR:(K++) = 从瞳菇处获得「诱惑耳坠」！
				WSTR:(K++) = 从瞳菇处获得50,000卢比！
				MONEY += 50000
				CALL 汎用指輪取得処理("魅惑吞噬之戒", 3)
				CALL 汎用耳飾り取得処理("诱惑耳饰")
				CALL メッセージ欄表示用関数(,,,0)
				CALL 口上変数初期化
			ELSEIF RESULT == -1
				;逃走時
				WSTR:(K++) = %CALLNAME:PLAYER%一行勉强从强敌手中逃脱。
				WSTR:(K++) = 下次变强些再来挑战吧…
				CALL メッセージ欄表示用関数(,,,0)
				CALL 口上変数初期化
			ENDIF
		ELSE
			KSTR:(K++) = 强敌早已被讨伐。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_15_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 15
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
	CASE "マスイベント"
		;16-0へ
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 通道上架设着粗制路障。
			WSTR:(K++) = 虽是轻易可毁的破烂，但具备构筑阵地的概念说明存在高阶哥布林。
			WSTR:(K++) = 虽不至于出现哥布林王那种级别，提高警惕总没错。
			WSTR:(K++) = 谨慎前行。
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(16, 0)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 16
		ダンジョン現在位置:1 = 0
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_名前を亡くした遺跡_16_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 16
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "18_1")
	CASE "マスイベント"
		;15-5へ
		CALL 口上変数初期化
		ダンジョン現在位置:0 = 15
		ダンジョン現在位置:1 = 5
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_16_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 16
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
	CASE "マスイベント"
		;31-1へ
		CALL 口上変数初期化
		ダンジョン現在位置:0 = 31
		ダンジョン現在位置:1 = 1
		CALL 接続ルート全開放処理(31, 1)
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_名前を亡くした遺跡_17_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 17
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		IF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = エネミーアイコン
		ENDIF
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "17_5")
	CASE "マスイベント"
		;ゴブリン拠点発見、潰す場合は連戦
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4)
			KSTR:(K++) = 已无哥布林踪迹。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			WSTR:(K++) = 在遗迹中发现宽阔的圆形厅室。
			WSTR:(K++) = 墙壁可见精致浮雕，或许曾是礼拜场所。
			WSTR:(K++) = 但如今已被哥布林占据。
			KSTR:(K++) = 兽皮与食物散落各处，俨然被当作自家据点使用。_PAGE
			WSTR:(K++) = 若能驱逐此处的哥布林，与首领交战时便无后顾之忧。
			WSTR:(K++) = 但敌众我寡，开战将面临车轮战。
			KSTR:(K++) = 要与魔物群开战吗？（三连战）
			KSTR:(K++) = BUTTON_[确定]
			KSTR:(K++) = BUTTON_[取消]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[确定]"
					敵BATTLE_STATE_STR:1:エネミー名 = Lv8_哥布林士兵
					敵BATTLE_STATE_STR:2:エネミー名 = Lv8_哥布林士兵
					敵BATTLE_STATE_STR:3:エネミー名 = Lv8_哥布林士兵
					CALL 雑魚敵遭遇汎用処理
					IF RESULT == 0
						敵BATTLE_STATE_STR:1:エネミー名 = Lv8_哥布林士兵
						敵BATTLE_STATE_STR:2:エネミー名 = Lv8_哥布林陷阱师
						敵BATTLE_STATE_STR:5:エネミー名 = Lv8_哥布林士兵
						CALL 雑魚敵遭遇汎用処理
						IF RESULT == 0
							敵BATTLE_STATE_STR:1:エネミー名 = Lv8_哥布林盾卫
							敵BATTLE_STATE_STR:2:エネミー名 = Lv8_哥布林陷阱师
							敵BATTLE_STATE_STR:3:エネミー名 = Lv8_哥布林盾卫
							敵BATTLE_STATE_STR:4:エネミー名 = Lv8_哥布林陷阱师
							敵BATTLE_STATE_STR:5:エネミー名 = Lv8_哥布林盾卫
							CALL 雑魚敵遭遇汎用処理
							IF RESULT == 0
								SETBIT ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4
								CALL 接続ルート全開放処理(マス深度, マス分岐)
								CALL 口上変数初期化
								WSTR:(K++) = 你们成功驱逐哥布林，占领了据点。
								KSTR:(K++) = 残党四散逃往遗迹外围。想必不会再回来了。
								CALL メッセージ欄表示用関数()
							ENDIF
						ENDIF
					ENDIF
					CALL 口上変数初期化
				CASE "[取消]"
					CALL 口上変数初期化
				CASEELSE
					CLEARLINE 1
					REUSELASTLINE  
					GOTO LOOP_MESSAGE
			ENDSELECT

		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_17_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 17
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
	CASE "マスイベント"
		;ゴブリンの物資
		;どっかから奪ってきた指輪と耳飾り発見
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 探索哥布林据点深处时发现了储存食物等物资的仓库。
			WSTR:(K++) = 虽然大部分都是派不上用场的破烂……
			WSTR:(K++) = ……但找到几件可用的装备。收下吧。
			WSTR:(K++) = %CALLNAME:PLAYER%一行获得了伟勋之戒・力。
			WSTR:(K++) = %CALLNAME:PLAYER%一行获得了疾风耳饰。
			CALL 汎用指輪取得処理("伟勋之戒・力", 2)
			CALL 汎用耳飾り取得処理("疾风耳饰")
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ELSE
			KSTR:(K++) = 已无值得注意的物件。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_名前を亡くした遺跡_18_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 18
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "20_0")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "19_2")
	CASE "マスイベント"
		;分かれ道
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 道路在此分岔。
			WSTR:(K++) = 根据遗迹结构判断，下方道路通往深处。
			WSTR:(K++) = 但能感知到前方有大量哥布林气息。
			WSTR:(K++) = 若体力不支最好先休整再前进。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ELSE
			KSTR:(K++) = 道路在此分岔。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_18_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 18
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
	CASE "接続先"
	CASE "マスイベント"
		;瓦礫に潰されて上手く動けないゴーレム
		;助けてあげるとゆぐゆぐ好感度＋
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 窥视通道旁房间，发现天花板坍塌被瓦砾掩埋。
			WSTR:(K++) = 碎石堆下倒伏着魔像。
			WSTR:(K++) = 虽未损坏，但似乎被重压困住无法行动。
			KSTR:(K++) = 若搬开瓦砾或许能恢复行动……PAGE
			KSTR:(K++) = %CALLNAME:PLAYER%选择……
			KSTR:(K++) = BUTTON_[被袭击就危险了。维持现状]
			KSTR:(K++) = BUTTON_[搬开瓦砾解救魔像]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[被袭击就危险了。维持现状]"
					CALL 口上変数初期化
					WSTR:(K++) = 魔像乃强敌，能维持现状再好不过。
					WSTR:(K++) = %CALLNAME:PLAYER%一行保持原状离开房间。
					CALL メッセージ欄表示用関数(,,,0)
				CASE "[搬开瓦砾解救魔像]"
					CALL 口上変数初期化
					WSTR:(K++) = %CALLNAME:PLAYER%一行费力搬开瓦砾解放了魔像。
					WSTR:(K++) = 重获自由的魔像缓缓起身，静静注视着你们。
					WSTR:(K++) = 似乎没有攻击意图。
					WSTR:(K++) = 既然不主动攻击便无战斗必要。你们挥手告别继续探索。
					SETBIT ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4
					ゆぐゆぐ信頼度_名前を亡くした遺跡 += 10
					CALL メッセージ欄表示用関数(,,,0)
				CASEELSE
					CLEARLINE 1
					REUSELASTLINE  
					GOTO LOOP_MESSAGE
			ENDSELECT
			CALL 口上変数初期化
		ELSE
			IF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4)
				;ゴーレムを助けた
				KSTR:(K++) = 魔像正静静注视着你们。
			ELSE
				;ゴーレムを放置した
				KSTR:(K++) = 魔像仍倒伏在瓦砾之下。
			ENDIF
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_18_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 18
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "18_6")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "16_8")
	CASE "マスイベント"
		;ゴブリンの死体とゴーレムの破片
		;罠、魔物知識
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 通道散落着魔像残骸与哥布林尸体。
			CALL 知識技能所持者検索("魔物知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				WSTR:(K++) = %CALLNAME:LOCAL%提议暂时回避，众人决定静观其变。
				WSTR:(K++) = …………片刻后，其他哥布林前来回收同伴尸体。
				KSTR:(K++) = 魔像残骸突然爆炸将活着的哥布林炸飞！_PAGE
				WSTR:(K++) = 据说魔像在濒临崩溃时会将自己转化为陷阱。
				WSTR:(K++) = %CALLNAME:PLAYER%一行警惕着继续探索。
			ELSE
				WSTR:(K++) = %CALLNAME:PLAYER%一行靠近时魔像残骸突然爆炸！！
				WSTR:(K++) = 全员ＨＰ减少１５０点！
				CALL メッセージ欄表示用関数(,,,0)
				CALL 口上変数初期化
				FOR LOCAL, 0, 4
					SIF BATTLE_STATE:LOCAL:キャラ登録番号 < 1
						CONTINUE
					BATTLE_STATE:LOCAL:ＨＰ = MAX(BATTLE_STATE:LOCAL:ＨＰ - 150, 0)
				NEXT
				WSTR:(K++) = 看来受损魔像用最后力量将自己化作陷阱。
				WSTR:(K++) = 若有魔物知识或许能察觉危险……
				WSTR:(K++) = %CALLNAME:PLAYER%一行感叹着麻烦特性继续前进。
			ENDIF
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 通道已无残留物。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_名前を亡くした遺跡_19_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 19
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "20_4")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "17_4")
	CASE "マスイベント"
		;ゴブリン
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4) == 0
			IF 初来訪マス判定用フラグ
				;最初に訪れた時
				WSTR:(K++) = 或许因深入遗迹，哥布林数量明显增多。
				WSTR:(K++) = 持盾哥布林掩护同伴尤为棘手。
				WSTR:(K++) = 若有全体攻击技能或能无视防御的技能会更有利。
				WSTR:(K++) = 如此思忖着，你们与眼前的哥布林展开战斗。
			ELSE
				;まだ倒してない
				WSTR:(K++) = 你们再次与哥布林展开战斗。
			ENDIF
			CALL メッセージ欄表示用関数(,,,0)

			敵BATTLE_STATE_STR:1:エネミー名 = Lv8_哥布林盾卫
			敵BATTLE_STATE_STR:3:エネミー名 = Lv8_哥布林盾卫
			敵BATTLE_STATE_STR:5:エネミー名 = Lv8_哥布林盾卫
			敵BATTLE_STATE_STR:2:エネミー名 = Lv8_哥布林陷阱师
			敵BATTLE_STATE_STR:4:エネミー名 = Lv8_哥布林陷阱师
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ進行
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:1:エネミー名 = Lv8_哥布林盾卫
			敵BATTLE_STATE_STR:3:エネミー名 = Lv8_哥布林盾卫
			敵BATTLE_STATE_STR:5:エネミー名 = Lv8_哥布林盾卫
			敵BATTLE_STATE_STR:2:エネミー名 = Lv8_哥布林陷阱师
			敵BATTLE_STATE_STR:4:エネミー名 = Lv8_哥布林陷阱师
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_19_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 19
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "21_8")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "18_7")
	CASE "マスイベント"
		;ゴブリン部隊
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4) == 0
			IF 初来訪マス判定用フラグ
				;最初に訪れた時
				WSTR:(K++) = 或许因深入遗迹，哥布林数量明显增多。
				WSTR:(K++) = 持盾哥布林掩护同伴尤为棘手。
				WSTR:(K++) = 若有全体攻击技能或能无视防御的技能会更有利。
				WSTR:(K++) = 如此思忖着，你们与眼前的哥布林展开战斗。
			ELSE
				;まだ倒してない
				WSTR:(K++) = 你们再次与哥布林展开战斗。
			ENDIF
			CALL メッセージ欄表示用関数(,,,0)

			敵BATTLE_STATE_STR:1:エネミー名 = Lv8_哥布林盾卫
			敵BATTLE_STATE_STR:3:エネミー名 = Lv8_哥布林盾卫
			敵BATTLE_STATE_STR:5:エネミー名 = Lv8_哥布林盾卫
			敵BATTLE_STATE_STR:2:エネミー名 = Lv8_哥布林陷阱师
			敵BATTLE_STATE_STR:4:エネミー名 = Lv8_哥布林陷阱师
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ進行
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:1:エネミー名 = Lv8_哥布林盾卫
			敵BATTLE_STATE_STR:3:エネミー名 = Lv8_哥布林盾卫
			敵BATTLE_STATE_STR:5:エネミー名 = Lv8_哥布林盾卫
			敵BATTLE_STATE_STR:2:エネミー名 = Lv8_哥布林陷阱师
			敵BATTLE_STATE_STR:4:エネミー名 = Lv8_哥布林陷阱师
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_名前を亡くした遺跡_20_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 20
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
	CASE "マスイベント"
		;弱気なゴブリン
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 沿着狭窄岔路前行时，发现形迹可疑的哥布林。
			WSTR:(K++) = 它未持武器，背后行囊塞满各种破烂。
			KSTR:(K++) = 发现你们身影后，哥布林惊慌逃窜。_PAGE
			WSTR:(K++) = 那家伙究竟怎么回事？
			WSTR:(K++) = ……逃跑时似乎遗落了物品。
			WSTR:(K++) = %CALLNAME:PLAYER%一行获得了通俗娱乐读物。
			CALL 素材入手処理("通俗娱乐读物", 1)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ELSE
			KSTR:(K++) = 已无值得注意的物件。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_20_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 20
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "21_5")
	CASE "マスイベント"
		;ゴブリンとマイコニドが戦っている
		;奇襲すれば全滅出来る
		;ゴブリンだけ倒すとマイコニドからお礼のきのこがもらえる
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 前方传来打斗声……
			WSTR:(K++) = 暗中窥探发现哥布林正与菌菇人交战。
			WSTR:(K++) = 菌菇人身后护着幼小同族。似乎在保护孩童。
			KSTR:(K++) = 双方激战正酣。此刻突袭可无损歼灭两方。PAGE
			KSTR:(K++) = %CALLNAME:PLAYER%选择……
			KSTR:(K++) = BUTTON_[坐收渔利。全数歼灭]
			KSTR:(K++) = BUTTON_[护子之情可敬。仗义援助菌菇人]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[坐收渔利。全数歼灭]"
					CALL 口上変数初期化
					WSTR:(K++) = 留下活口恐成后患。
					WSTR:(K++) = %CALLNAME:PLAYER%一行发动突袭，将双方尽数剿灭。
					WSTR:(K++) = 幼年菌菇人虽逃脱，只要不敌对便无妨。
					CALL メッセージ欄表示用関数(,,,0)
				CASE "[护子之情可敬。仗义援助菌菇人]"
					CALL 口上変数初期化
					WSTR:(K++) = %CALLNAME:PLAYER%一行从哥布林后方奇袭，与菌菇人形成夹击之势。
					WSTR:(K++) = 混乱的哥布林未及抵抗便全军覆没。
					KSTR:(K++) = 幸存的菌菇人警戒片刻，确认无恶意后
					WSTR:(K++) = 如鞠躬般深深弯下菌盖。
					KSTR:(K++) = 为表谢意，它们献上数枚菌菇。_PAGE
					WSTR:(K++) = 这是人类聚落常见的食用菌。恭敬不如从命。
					WSTR:(K++) = %CALLNAME:PLAYER%获得了３个美味菌菇！
					CALL 素材入手処理("美味菌菇", 3)
					SETBIT ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4
					ゆぐゆぐ信頼度_名前を亡くした遺跡 += 10
					CALL メッセージ欄表示用関数(,,,0)
				CASEELSE
					CLEARLINE 1
					REUSELASTLINE  
					GOTO LOOP_MESSAGE
			ENDSELECT
			CALL 口上変数初期化
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			IF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4)
				;マイコニドを助けた
				KSTR:(K++) = 菌菇人们目送着你们离去。
			ELSE
				;全滅させた
				KSTR:(K++) = 残留着激烈战斗的痕迹。
			ENDIF
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_名前を亡くした遺跡_21_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 21
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "22_5")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "19_6")
	CASE "マスイベント"
		;強敵がいるけど行く？みたいな前フリとザコ敵
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4) == 0
			IF 初来訪マス判定用フラグ
				;最初に訪れた時
				WSTR:(K++) = 哥布林们如路障般横向列阵。
				WSTR:(K++) = 毫无移动迹象，仿佛在守护深处的存在。
				WSTR:(K++) = 想必它们的首领就在后方。
				WSTR:(K++) = 不突破此阵便无法前进。你们与眼前的哥布林展开激战。
			ELSE
				;まだ倒してない
				WSTR:(K++) = 你们再次与哥布林展开战斗。
			ENDIF
			CALL メッセージ欄表示用関数(,,,0)

			敵BATTLE_STATE_STR:1:エネミー名 = Lv8_哥布林盾卫
			敵BATTLE_STATE_STR:3:エネミー名 = Lv8_哥布林士兵
			敵BATTLE_STATE_STR:5:エネミー名 = Lv8_哥布林盾卫
			敵BATTLE_STATE_STR:7:エネミー名 = Lv8_哥布林士兵
			敵BATTLE_STATE_STR:9:エネミー名 = Lv8_哥布林盾卫
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ進行
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:1:エネミー名 = Lv8_哥布林盾卫
			敵BATTLE_STATE_STR:3:エネミー名 = Lv8_哥布林士兵
			敵BATTLE_STATE_STR:5:エネミー名 = Lv8_哥布林盾卫
			敵BATTLE_STATE_STR:7:エネミー名 = Lv8_哥布林士兵
			敵BATTLE_STATE_STR:9:エネミー名 = Lv8_哥布林盾卫
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_21_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 21
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
	CASE "接続先"
	CASE "マスイベント"
		;壁画発見
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 你们再度与哥布林军团展开厮杀。
			WSTR:(K++) = 留存着霸空战争时代的壁画。
			WSTR:(K++) = ……%CALLNAME:PLAYER%一行观摩壁画，加深了战斗造诣！
			WSTR:(K++) = %CALLNAME:PLAYER%一行获得了1000点经验值！
			FOR LOCAL, 0, 4
				SIF BATTLE_STATE:LOCAL:キャラ登録番号 < 1
					CONTINUE
				基礎BATTLE_STATE:(BATTLE_STATE:LOCAL:キャラ登録番号):蓄積EXP += 1000
				CALL レベルアップ処理(BATTLE_STATE:LOCAL:キャラ登録番号)
			NEXT
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ELSE
			KSTR:(K++) = 你们再度与哥布林军团展开厮杀。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_名前を亡くした遺跡_22_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 22
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		IF ダンジョン内一時変数:4 == 0
			ダンジョンマス画像URL_重ね表示 = エネミーアイコン_赤
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		;ゴブリンジェネラル
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4) == 0
			CALL 強敵マス確認
			SIF RESULT == 1
				RETURN 0
			IF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 5) == 0
				WSTR:(K++) = %CALLNAME:PLAYER%一行抵达遗迹深处时，身披粗犷铠甲的哥布林正率部严阵以待。
				WSTR:(K++) = 较普通哥布林更为魁梧的它，用狰狞目光瞪视着%CALLNAME:PLAYER%。
				WSTR:(K++) = 「妨碍我们占领遗迹的，就是你们吧」
				KSTR:(K++) = 「为何阻挠？这座岛本无人烟。不过是只怯懦星晶兽栖居的废墟罢了」_PAGE
				WSTR:(K++) = %CALLNAME:PLAYER%表示与那星晶兽有约在先，驱逐你们或许能卖个人情。
				WSTR:(K++) = 「原来如此，这般自私。果然是人类作风」
				WSTR:(K++) = 擅自霸占他人居所难道不算自私？
				WSTR:(K++) = 「非也，此乃哥布林之道。强者有权攫取一切」
				WSTR:(K++) = 「所以人类啊！若想驱逐我等，就用力量证明吧！」
				WSTR:(K++) = 铠甲哥布林架起巨剑，率领部下向你们发起挑战！
				SETBIT ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 5
			ELSE
				WSTR:(K++) = 「又来找死吗人类」
				WSTR:(K++) = 「来多少次都一样！定要打得你们满地找牙！」
			ENDIF
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:2:エネミー名 = Lv14_哥布林将军
			敵BATTLE_STATE_STR:0:エネミー名 = Lv8_哥布林士兵
			敵BATTLE_STATE_STR:1:エネミー名 = Lv8_哥布林士兵
			敵BATTLE_STATE_STR:6:エネミー名 = Lv8_哥布林士兵
			敵BATTLE_STATE_STR:7:エネミー名 = Lv8_哥布林士兵
			CALL BATTLE_MAIN_LOOP
			IF RESULT == 0
				;勝利時
				ダンジョン表示モード = マップ画面
				CALL 口上変数初期化
				WSTR:(K++) = %CALLNAME:PLAYER%成功讨伐哥布林将军！！
				LOCAL = RAND:5
				SELECTCASE LOCAL
					CASE 0
						WSTR:(K++) = 从哥布林将军处获得「伟勋之戒・重」！
						CALL 汎用指輪取得処理("伟勋之戒・重", 1)
					CASE 1
						WSTR:(K++) = 从哥布林将军处获得「伟勋之戒・速」！
						CALL 汎用指輪取得処理("伟勋之戒・速", 1)
					CASE 2
						WSTR:(K++) = 从哥布林将军处获得「伟勋之戒・壁」！
						CALL 汎用指輪取得処理("伟勋之戒・壁", 1)
					CASE 3
						WSTR:(K++) = 从哥布林将军处获得「伟勋之戒・愈」！
						CALL 汎用指輪取得処理("伟勋之戒・愈", 1)
					CASE 4
						WSTR:(K++) = 从哥布林将军处获得「伟勋之戒・力」！
						CALL 汎用指輪取得処理("伟勋之戒・力", 1)
				ENDSELECT
				WSTR:(K++) = 从哥布林将军处获得「猛禽耳饰」！
				CALL 汎用耳飾り取得処理("猛禽耳饰")
				CALL メッセージ欄表示用関数()
				探索中全体カウント:追加信頼度 += 1000
				SETBIT ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4
				ダンジョン内一時変数:4 = 1
				CALL 口上変数初期化
				WSTR:(K++) = 「……败北了吗。那就遵循力量法则，撤离遗迹吧」
				WSTR:(K++) = 「人类，我记住你的脸了」
				WSTR:(K++) = 「这笔债，迟早要讨回来」
				KSTR:(K++) = 哥布林将军整顿部队，撤出了遗迹……_PAGE
				WSTR:(K++) = ……遗迹某处传来机关启动的声响。
				WSTR:(K++) = COLOR_%カラーパレット_HTML("真っ赤")%_或许触发了某种机制。
				WSTR:(K++) = 最好返回已探索区域确认变化。
				ゆぐゆぐ信頼度_名前を亡くした遺跡 += 30
				CALL メッセージ欄表示用関数(,,,0)
			ELSEIF RESULT == 1
				;全滅時
				ダンジョン表示モード = マップ画面
				CALL 口上変数初期化
				KSTR:(K++) = %CALLNAME:PLAYER%带着力竭的同伴们艰难脱险…
				CALL メッセージ欄表示用関数()
				ダンジョン終了状況 = 全滅
			ELSEIF RESULT == -1
				;逃走時
				ダンジョン表示モード = マップ画面
			ENDIF
			CALL 口上変数初期化
		ELSE
			IF ダンジョン内一時変数:4 == 0
				KSTR:(K++) = 要重温与哥布林将军交战的记忆吗？
				KSTR:(K++) = （与BOSS再战）
				KSTR:(K++) = BUTTON_[确定]
				KSTR:(K++) = BUTTON_[取消]
				CALL メッセージ欄表示用関数(,,,0)
				$LOOP_MESSAGE2
				INPUTS
				SELECTCASE RESULTS
					CASE "[确定]"
						敵BATTLE_STATE_STR:2:エネミー名 = Lv14_哥布林将军
						敵BATTLE_STATE_STR:0:エネミー名 = Lv8_哥布林士兵
						敵BATTLE_STATE_STR:1:エネミー名 = Lv8_哥布林士兵
						敵BATTLE_STATE_STR:6:エネミー名 = Lv8_哥布林士兵
						敵BATTLE_STATE_STR:7:エネミー名 = Lv8_哥布林士兵
						CALL BATTLE_MAIN_LOOP
						IF RESULT == 0
							;勝利時
							ダンジョン表示モード = マップ画面
							CALL 口上変数初期化
							WSTR:(K++) = %CALLNAME:PLAYER%成功讨伐哥布林将军！！
							LOCAL = RAND:5
							SELECTCASE LOCAL
								CASE 0
									WSTR:(K++) = 从哥布林将军处获得「伟勋之戒・重」！
									CALL 汎用指輪取得処理("伟勋之戒・重", 1)
								CASE 1
									WSTR:(K++) = 从哥布林将军处获得「伟勋之戒・速」！
									CALL 汎用指輪取得処理("伟勋之戒・速", 1)
								CASE 2
									WSTR:(K++) = 从哥布林将军处获得「伟勋之戒・壁」！
									CALL 汎用指輪取得処理("伟勋之戒・壁", 1)
								CASE 3
									WSTR:(K++) = 从哥布林将军处获得「伟勋之戒・愈」！
									CALL 汎用指輪取得処理("伟勋之戒・愈", 1)
								CASE 4
									WSTR:(K++) = 从哥布林将军处获得「伟勋之戒・力」！
									CALL 汎用指輪取得処理("伟勋之戒・力", 1)
							ENDSELECT
							CALL メッセージ欄表示用関数()
							ダンジョン内一時変数:4 = 1
							探索中全体カウント:追加信頼度 += 1000
						ELSEIF RESULT == 1
							;全滅時
							ダンジョン表示モード = マップ画面
							CALL 口上変数初期化
							KSTR:(K++) = %CALLNAME:PLAYER%带着力竭的同伴们艰难脱险…
							CALL メッセージ欄表示用関数()
							ダンジョン終了状況 = 全滅
						ELSEIF RESULT == -1
							;逃走時
							ダンジョン表示モード = マップ画面
						ENDIF
						CALL 口上変数初期化
					CASE "[取消]"
						CALL 口上変数初期化
					CASEELSE
						CLEARLINE 1
						REUSELASTLINE  
						GOTO LOOP_MESSAGE2
				ENDSELECT
			ENDIF
		ENDIF
ENDSELECT




@ダンジョンマス情報_名前を亡くした遺跡_25_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 25
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "26_1")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "26_3")
	CASE "マスイベント"
		CALL 口上変数初期化
		ダンジョン現在位置:0 = 6
		ダンジョン現在位置:1 = 8
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_名前を亡くした遺跡_26_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 26
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "27_1")
	CASE "マスイベント"
		;ゴブリン部隊
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4) == 0
			IF 初来訪マス判定用フラグ
				;最初に訪れた時
				WSTR:(K++) = 发现哥布林狩猎野兽筹备食物的身影。
				WSTR:(K++) = 这支补给部队不仅猎兽，还采集了大量菌菇与果实。
				WSTR:(K++) = 难以避开四处觅食的哥布林。清剿前进吧。
			ELSE
				;まだ倒してない
				WSTR:(K++) = 你们再次与哥布林展开战斗。
			ENDIF
			CALL メッセージ欄表示用関数(,,,0)

			敵BATTLE_STATE_STR:1:エネミー名 = Lv8_哥布林士兵
			敵BATTLE_STATE_STR:3:エネミー名 = Lv8_哥布林盾卫
			敵BATTLE_STATE_STR:5:エネミー名 = Lv8_哥布林士兵
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ進行
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:1:エネミー名 = Lv8_哥布林士兵
			敵BATTLE_STATE_STR:3:エネミー名 = Lv8_哥布林盾卫
			敵BATTLE_STATE_STR:5:エネミー名 = Lv8_哥布林士兵
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_26_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 26
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "27_5")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 你们再次与哥布林军团展开激战。
			WSTR:(K++) = 或许是哥布林与原生魔物交战的证明？
			WSTR:(K++) = ……不对，地上散落着断箭。此前并未遭遇哥布林弓手。
			WSTR:(K++) = 前方可能有其他势力存在。谨慎前行。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ELSE
			KSTR:(K++) = 散落着断裂的箭矢。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_名前を亡くした遺跡_27_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 27
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "27_2")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "29_0")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 这片疑似居住区的区域房间众多，却鲜有家具残留。
			WSTR:(K++) = 不知是原主撤离时带走，还是遭盗掘者洗劫。
			WSTR:(K++) = 无论如何，空荡景象令人唏嘘。土之星晶兽为何栖身于此？
			WSTR:(K++) = 怀想历史长河，%CALLNAME:PLAYER%一行继续深入。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ELSE
			KSTR:(K++) = 空无一物。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_27_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 27
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		IF ダンジョン内一時変数:3 == 0
			ダンジョンマス画像URL_重ね表示 = えっちハート
		ENDIF
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "28_3")
	CASE "マスイベント"
		;えっちイベ
		CALL 口上変数初期化
		SETBIT ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 2
		IF ダンジョン内一時変数:3
		ELSE
			CALL ダンジョンハプニング基本処理()
			IF RESULT
				ダンジョン内一時変数:3 = 1
			ENDIF
			CALL 口上変数初期化
		ENDIF
		CALL 接続ルート全開放処理(マス深度, マス分岐)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_27_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 27
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "28_6")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "29_5")
	CASE "マスイベント"
		;ゴブリン部隊
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4) == 0
			IF 初来訪マス判定用フラグ
				;最初に訪れた時
				WSTR:(K++) = 前行时发现正在搜寻某物的哥布林群。
				WSTR:(K++) = 偷听哥布林对话发现它们不断叫嚷着「雌性！雌性！」。
				WSTR:(K++) = 难道附近有雌性哥布林？
				WSTR:(K++) = 无论如何都妨碍探索，你们与哥布林展开战斗。
			ELSE
				;まだ倒してない
				WSTR:(K++) = 你们再次与哥布林展开战斗。
			ENDIF
			CALL メッセージ欄表示用関数(,,,0)

			敵BATTLE_STATE_STR:4:エネミー名 = Lv8_哥布林士兵
			敵BATTLE_STATE_STR:3:エネミー名 = Lv8_哥布林士兵
			敵BATTLE_STATE_STR:0:エネミー名 = Lv8_哥布林陷阱师
			敵BATTLE_STATE_STR:2:エネミー名 = Lv8_哥布林陷阱师
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ進行
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:4:エネミー名 = Lv8_哥布林士兵
			敵BATTLE_STATE_STR:3:エネミー名 = Lv8_哥布林士兵
			敵BATTLE_STATE_STR:0:エネミー名 = Lv8_哥布林陷阱师
			敵BATTLE_STATE_STR:2:エネミー名 = Lv8_哥布林陷阱师
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_名前を亡くした遺跡_28_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 28
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "29_2")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 此区域风化严重，遗迹损毁加剧。
			WSTR:(K++) = 地砖剥落露出土层尚可忍受，地面塌陷形成的巨坑却危机四伏。
			WSTR:(K++) = 若是陷阱尚可防备，因地面崩塌受伤就太蠢了。谨慎前行。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ELSE
			KSTR:(K++) = 因严重风化，遗迹损毁加剧。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_28_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 28
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "29_6")
	CASE "マスイベント"
		;魔法罠
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = %CALLNAME:PLAYER%一行沿通道前行时，脚下突然浮现魔法阵！
			CALL 知識技能所持者検索("魔法知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				WSTR:(K++) = %CALLNAME:LOCAL%瞬间释放魔力抵消了法阵效果。
				WSTR:(K++) = 看来此处被施加了「恍惚魔法」。
				KSTR:(K++) = 若中招将会大量损耗魔力。_PAGE
			ELSE
				WSTR:(K++) = 魔法阵发动了「恍惚魔法」！
				WSTR:(K++) = 为抵抗效果，全体队员ＭＰ减少５０点。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 口上変数初期化
				FOR LOCAL, 0, 4
					SIF BATTLE_STATE:LOCAL:キャラ登録番号 < 1
						CONTINUE
					BATTLE_STATE:LOCAL:ＭＰ = MAX(BATTLE_STATE:LOCAL:ＭＰ - 50, 0)
				NEXT
			ENDIF
			WSTR:(K++) = 此等魔法阵绝非低级哥布林手笔。
			WSTR:(K++) = 倒像是为驱逐哥布林而设的防御机制。
			WSTR:(K++) = 前方或许有施法者存在。整备后再前进。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 接続ルート全開放処理(マス深度, マス分岐)
			CALL 口上変数初期化
		ELSE
			KSTR:(K++) = 魔法阵已失效。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_名前を亡くした遺跡_29_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 29
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
	CASE "マスイベント"
		;ゴブリン部隊に襲われる獣たち
		;倒すとゆぐゆぐ好感度UP
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4) == 0
			IF 初来訪マス判定用フラグ
				;最初に訪れた時
				WSTR:(K++) = 遗迹房间内有追逐野兽的哥布林群。
				WSTR:(K++) = 野兽似乎在此筑巢，正威吓着试图驱赶入侵者。
				WSTR:(K++) = 无论如何哥布林都是障碍。你们展开战斗。
			ELSE
				;まだ倒してない
				WSTR:(K++) = 哥布林们正在烤肉准备用餐。
				WSTR:(K++) = 你们再次与哥布林展开战斗。
			ENDIF
			CALL メッセージ欄表示用関数(,,,0)

			敵BATTLE_STATE_STR:1:エネミー名 = Lv8_哥布林士兵
			敵BATTLE_STATE_STR:3:エネミー名 = Lv8_哥布林士兵
			敵BATTLE_STATE_STR:4:エネミー名 = Lv8_哥布林陷阱师
			敵BATTLE_STATE_STR:6:エネミー名 = Lv8_哥布林陷阱师
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ進行
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4
				IF 初来訪マス判定用フラグ
					;初来訪の時に勝利したなら信頼度＋
					ゆぐゆぐ信頼度_名前を亡くした遺跡 += 10
				ENDIF
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:1:エネミー名 = Lv8_哥布林士兵
			敵BATTLE_STATE_STR:3:エネミー名 = Lv8_哥布林士兵
			敵BATTLE_STATE_STR:4:エネミー名 = Lv8_哥布林陷阱师
			敵BATTLE_STATE_STR:6:エネミー名 = Lv8_哥布林陷阱师
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_29_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 29
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
	CASE "マスイベント"
		;向こう側になんかあるけどこっから行けないなー的な
		;30-2を表示だけする
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			IF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:30:2, 2)
				WSTR:(K++) = 正如对面所见，房间这侧空无一物。
				WSTR:(K++) = 继续探索吧。
			ELSE
				WSTR:(K++) = 踏入房间发现中央完全塌陷。
				WSTR:(K++) = 深渊般的巨坑疑似连通地下洞窟，根本望不见底。
				KSTR:(K++) = 想要直接跨越几无可能。_PAGE
				WSTR:(K++) = 但塌陷区对面可见保存完好的雕像与陶器……
				WSTR:(K++) = 或许正因塌方才免遭盗掘。改道迂回探索吧。
				SETBIT ダンジョン構造配列_名前を亡くした遺跡:30:2, 3
			ENDIF
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ELSE
			KSTR:(K++) = 房间中央完全塌陷。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_29_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 29
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
	CASE "マスイベント"
		;プレゼントアイテム
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 通道尽头有通往地下的阶梯。
			WSTR:(K++) = 拾级而下进入小室，莫名觉得比上层阴凉许多。
			KSTR:(K++) = 墙角孤零零立着密封严实的木桶……_PAGE
			WSTR:(K++) = ……似是远古时期酿造的陈酒。
			WSTR:(K++) = 毫无腐败气息，定是完美熟成的顶级葡萄酒。
			WSTR:(K++) = 任其在此腐朽太过暴殄天物。带走珍藏吧。
			WSTR:(K++) = %CALLNAME:PLAYER%一行获得了百年陈酿葡萄酒。
			CALL 素材入手処理("百年陈酿葡萄酒", 1)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ELSE
			KSTR:(K++) = 已无值得注意的物件。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_名前を亡くした遺跡_29_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 29
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
	CASE "接続先"
	CASE "マスイベント"
		;フィーナとミニゴブ登場
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			;立ち絵リソース記録に必要な画像のリソースを生成する
			CALLF 顔グラ表示用文字列関数(キャラ検索("[哥布林猎人]菲娜"),100,,,1,1)
			LOCALS = %立ち絵リソース記録%
			;最初に訪れた時
			WSTR:(K++) = 踏入尽头的房间时，突然有箭矢从深处射来！
			WSTR:(K++) = %CALLNAME:(BATTLE_STATE:0:キャラ登録番号)%弹开箭矢的瞬间，传来惊讶的呼声。
			WSTR:(K++) = 「哎呀，抱歉！我还以为是哥布林闯进来了……」
			WSTR:(K++) = 苦笑着的少女从房间深处走出致歉。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「我是哥布林猎人菲娜」
			WSTR:(K++) = 「本来是来讨伐盘踞遗迹的哥布林……但出了点意外状况」
			CALL メッセージ欄表示用関数(LOCALS,"菲娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 自称菲娜的少女身后躲着个孩童。
			WSTR:(K++) = 绿色法袍与镶嵌宝石的法杖昭示着魔法师身份。
			WSTR:(K++) = 乍看像人类，但耳朵纤长尖锐。
			WSTR:(K++) = 怎么看都像是雌性哥布林……
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「这孩子叫迷你哥布」
			WSTR:(K++) = 「这里的哥布林头目想强娶她当压寨夫人」
			WSTR:(K++) = 「对这么小的孩子下手很过分吧？」
			WSTR:(K++) = 「所以我就……把她拐跑啦☆」
			CALL メッセージ欄表示用関数(LOCALS,"菲娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 身为哥布林猎人这算合格吗？
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「迷你哥布还是没做过坏事的孩子所以无罪！」
			WSTR:(K++) = 「再说她自己也不情愿」
			CALL メッセージ欄表示用関数(LOCALS,"菲娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 看向迷你哥布，她正紧紧抓着菲娜的衣角。
			WSTR:(K++) = 暂且不论菲娜的说辞，孩子依赖她是事实。
			WSTR:(K++) = 既然如此就该护送她们撤离。
			WSTR:(K++) = %CALLNAME:PLAYER%提议将二人护送出遗迹。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「欸？其实我正想拜托你们……」
			WSTR:(K++) = 「可以吗？虽然帮大忙了，但你们也有任务吧？」
			CALL メッセージ欄表示用関数(LOCALS,"菲娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = %CALLNAME:PLAYER%递出宣传单表示并非无偿。
			WSTR:(K++) = 印着度假村广告与岛屿坐标的传单。
			WSTR:(K++) = 条件是来我们度假村游玩，顺便帮忙宣传。
			WSTR:(K++) = 闻言菲娜噗嗤笑出声。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「哈哈哈！这种时候还搞宣传……！」
			WSTR:(K++) = 似乎戳中笑点，她欢快笑了一阵
			WSTR:(K++) = 「OKOK，包在我身上！会推荐给熟人，我自己也去玩」
			WSTR:(K++) = 「天才菲娜可是信守承诺的哥布林猎人哦！」
			CALL メッセージ欄表示用関数(LOCALS,"菲娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 达成协议后，%CALLNAME:PLAYER%一行护送两人撤出遗迹。
			WSTR:(K++) = 她们将乘私人快艇前往邻近岛屿。
			KSTR:(K++) = %CALLNAME:PLAYER%目送她们离去，重返遗迹探索。_PAGE
			WSTR:(K++) = [哥布林猎人]菲娜开始造访度假村了！
			WSTR:(K++) = [纯真兽人]迷你哥布开始造访度假村了！
			CFLAG:(GETCHARA(122)):招待不可フラグ = 0
			CFLAG:(GETCHARA(123)):招待不可フラグ = 0
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ELSE
			KSTR:(K++) = 已空无一人。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_名前を亡くした遺跡_30_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 30
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			IF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:29:2, 2)
				;向こう側からこっちを見た事がある
				WSTR:(K++) = %CALLNAME:PLAYER%一行迂回绕行至巨坑对岸。
				KSTR:(K++) = 正如所见，此处保存着大量古代雕像与陶器。_PAGE
			ELSE
				WSTR:(K++) = 踏入房间时，中央地面已然塌陷形成巨坑。
				WSTR:(K++) = 直接跨越几无可能。
				KSTR:(K++) = 室内保存着众多古代雕像与陶器。_PAGE
				SETBIT ダンジョン構造配列_名前を亡くした遺跡:29:2, 3
			ENDIF
			WSTR:(K++) = 虽无法全部带走……但调查中发现佩戴耳饰的雕像。
			KSTR:(K++) = 魔力虽已耗尽，仍能感知驱邪之力。
			WSTR:(K++) = 带回充能后应可再度使用。
			WSTR:(K++) = %CALLNAME:PLAYER%一行获得了退魔耳饰。
			CALL 汎用耳飾り取得処理("退魔耳饰")
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ELSE
			KSTR:(K++) = 已无值得注意的物件。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_名前を亡くした遺跡_31_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 31
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "30_2")
	CASE "マスイベント"
		;16-8へ
		CALL 口上変数初期化
		ダンジョン現在位置:0 = 16
		ダンジョン現在位置:1 = 8
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_名前を亡くした遺跡_33_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 33
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "36_4")
	CASE "マスイベント"
		;7-4へ
		CALL 口上変数初期化
		ダンジョン現在位置:0 = 7
		ダンジョン現在位置:1 = 4
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_名前を亡くした遺跡_36_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 36
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_遺跡
	CASE "接続先"
	CASE "マスイベント"
		;ゆぐゆぐ救出、ダンジョンクリア
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ
			;立ち絵リソース記録に必要な画像のリソースを生成する
			CALLF 顔グラ表示用文字列関数(キャラ検索("[创世树守卫]尤格多拉希尔"),100,,,1,1)
			LOCALS = %立ち絵リソース記録%
			;最初に訪れた時
			WSTR:(K++) = 穿过封闭的遗迹通道，来到穹顶状巨型厅室。
			WSTR:(K++) = 阳光倾泻的明亮厅堂中央，沉睡着巨型女性。
			WSTR:(K++) = 她便是星晶兽吗？正为其非现实感震撼时，眼前突然凝聚光芒！
			WSTR:(K++) = 光团收缩至人类尺寸，幻化成与巨女相同样貌的女性。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「────」
			CALL メッセージ欄表示用関数(LOCALS,"从光中出现的女性",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 女性似乎无法言语，喉间发出独特音律。
			WSTR:(K++) = 然而%CALLNAME:PLAYER%似乎能听懂她在说什么……难道这也是和星晶兽艾拉契约的效果……？
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 女性自称星晶兽尤格多拉希尔。
			WSTR:(K++) = 并对驱逐哥布林之事表达谢意。
			WSTR:(K++) = 继而询问来访缘由。
			CALL メッセージ欄表示用関数(LOCALS,"星晶兽尤格多拉希尔",,0)
			CALL 口上変数初期化
			IF 温泉作成許可フラグ == 0
				WSTR:(K++) = %CALLNAME:PLAYER%向星晶兽说明缘由。
				WSTR:(K++) = 为度假村引进温泉设施，需借助星晶兽之力。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 口上変数初期化
				WSTR:(K++) = 尤克特拉希尔面露好奇，颔首应允。
				WSTR:(K++) = 继而与%CALLNAME:PLAYER%并肩而立，示意启程。
				WSTR:(K++) = 似要携分身同往度假村。
				CALL メッセージ欄表示用関数(LOCALS,"星晶兽尤格多拉希尔",,0)
				CALL 口上変数初期化
				WSTR:(K++) = 既获协助自当从速。
				KSTR:(K++) = %CALLNAME:PLAYER%即刻带领星晶兽尤格多拉希尔返回度假村。_PAGE
				WSTR:(K++) = [创世树守卫]尤格多拉希尔开始造访度假村了！
				WSTR:(K++) = 解锁设施改造「温泉系列扩建」！
				WSTR:(K++) = 道具店新增「土之魔石」！
				WSTR:(K++) = 已通关无名遗迹，即将返程。
				温泉作成許可フラグ = 1
				CALL イベント完了フラグ汎用処理("【条件確認】温泉を作るために")
				CALL メッセージ欄表示用関数(,,,0)
			ELSE
				WSTR:(K++) = %CALLNAME:PLAYER%向星晶兽说明缘由。
				WSTR:(K++) = 坦言为筹建温泉前来取经。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 口上変数初期化
				WSTR:(K++) = 尤格多拉希尔若有所思，会意点头。
				WSTR:(K++) = 「────」
				WSTR:(K++) = 随着她的低语，地面轰然震动！
				CALL メッセージ欄表示用関数(LOCALS,"星晶兽尤格多拉希尔",,0)
				CALL 口上変数初期化
				WSTR:(K++) = 裂缝深处可见滚烫泉水涌动。
				WSTR:(K++) = 竟是自由操控泉脉之术！此技正合温泉运营！
				WSTR:(K++) = %CALLNAME:PLAYER%习得温泉引流秘法！
				WSTR:(K++) = 温泉设施接待上限＋１０！
				CALL 滞在可能キャラ数再計算
				CALL メッセージ欄表示用関数(,,,0)
				CALL 口上変数初期化
				WSTR:(K++) = 「────」
				WSTR:(K++) = 尤格多拉希尔再次传达意念。
				WSTR:(K++) = 似乎对度假岛颇感兴趣。
				CALL メッセージ欄表示用関数(LOCALS,"星晶兽尤格多拉希尔",,0)
				CALL 口上変数初期化
				WSTR:(K++) = 星晶兽亦是贵宾。
				WSTR:(K++) = %CALLNAME:PLAYER%告知尤格多拉希尔坐标，表示随时欢迎。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 口上変数初期化
				WSTR:(K++) = 「────♪」
				WSTR:(K++) = 她显然欣喜。想必不久便会造访。
				WSTR:(K++) = [创世树守卫]尤格多拉希尔开始造访度假村了！
				CALL メッセージ欄表示用関数(LOCALS,"星晶兽尤格多拉希尔",,0)
				CALL 口上変数初期化
				WSTR:(K++) = %CALLNAME:PLAYER%与尤格多拉希尔道别，离开遗迹。
				WSTR:(K++) = 已通关无名遗迹，即将返程。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 口上変数初期化
			ENDIF
			LOCAL = GETCHARA(124)
			CFLAG:LOCAL:招待不可フラグ = 0
			CFLAG:LOCAL:信頼度 = ゆぐゆぐ信頼度_名前を亡くした遺跡 * 200
			CALL FAVOR_LvUPCheck(LOCAL)
			CALL 口上変数初期化
			ダンジョン終了状況 = 討伐達成
			ダンジョンクリアフラグ_名前を亡くした遺跡 = 1
		ELSE
			KSTR:(K++) = 星晶兽尤格多拉希尔本体仍在沉眠。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT
