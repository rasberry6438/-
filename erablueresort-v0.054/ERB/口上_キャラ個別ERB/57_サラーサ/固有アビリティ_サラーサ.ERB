
@固有アビ_57_1(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIM 効果数値
#DIM 効果成功率
#DIMS アビ名

;本来切り替えるべきではあるのだが、切り替わると紛らわしい気がしたので
;いいとこどりで
;1アビは斧


;味方攻撃UP、++で命中UP
IF 基礎BATTLE_STATE:キャラ番号:Lv >= 25
	アビ名 = ヴォーパルレイジ+
	消費ＭＰ = 80
	効果数値 = 400
	効果成功率 = 100
ELSE
	アビ名 = ヴォーパルレイジ
	消費ＭＰ = 50
	効果数値 = 250
	効果成功率 = 100
ENDIF



SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}
		詳細文文字列受け渡し変数 += @"<br>敵単体に［攻撃力✕{効果数値}％］の自属性ダメージを与える。"
		詳細文文字列受け渡し変数 += @"<br>自身に［回復力✕{効果数値 / 2}％］のＨＰ回復を与える。"
		RETURN 消費ＭＰ
	CASE "アビ効果"
		CALL アビ対象選択テンプレート_敵単体
		アビ汎用変数:効果割合 = 効果数値
		CALL アビテンプレート_ダメージ処理_自属性

		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_自己のみ
		アビ汎用変数:効果割合 = 効果数値 / 2
		CALL アビテンプレート_回復処理_MAXでも回復

ENDSELECT
RETURN RESULT


;剣カウンターの方で
@固有アビ_57_2(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIM 効果数値
#DIM 効果成功率
#DIMS アビ名
#DIM 攻撃対象一時退避

;本来切り替えるべきではあるのだが、切り替わると紛らわしい気がしたので
;いいとこどりで



;味方攻撃UP、++で命中UP
IF 基礎BATTLE_STATE:キャラ番号:Lv >= 50
	アビ名 = ベルセルクフォージ++
	消費ＭＰ = 100
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 25
	アビ名 = ベルセルクフォージ+
	消費ＭＰ = 100
ELSE
	アビ名 = ベルセルクフォージ
	消費ＭＰ = 100
ENDIF



SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}
		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 50
			詳細文文字列受け渡し変数 += "<br>自身に［30％］（Ｃ枠・1ターン）の追撃効果を与える。"
			詳細文文字列受け渡し変数 += "<br>敵単体に［攻撃力✕133％］の通常攻撃を2回行う。"
			詳細文文字列受け渡し変数 += "<br>この攻撃の間、［100％］のTA率上昇効果を与える。"
		ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 25
			詳細文文字列受け渡し変数 += "<br>敵単体に［攻撃力✕133％］の通常攻撃を2回行う。"
			詳細文文字列受け渡し変数 += "<br>この攻撃の間、［33％］のTA率上昇効果を与える。"
		ELSE
			詳細文文字列受け渡し変数 += "<br>敵単体に通常攻撃を2回行う。"
			詳細文文字列受け渡し変数 += "<br>この攻撃の間、［33％］のTA率上昇効果を与える。"
		ENDIF
		RETURN 消費ＭＰ
	CASE "アビ効果"

		CALL アビ対象選択テンプレート_敵単体
		攻撃対象一時退避 = アビテンプレート用_対象保存:0

		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 50
			CALL アビ汎用変数文字列リセット
			CALL アビ対象選択テンプレート_自己のみ
			アビ汎用変数:効果割合 = 30
			アビ汎用文字列:バフ・デバフ枠 = 追撃C
			アビ汎用文字列:バフ・デバフ対象能力 = 追撃
			アビ汎用変数:持続ターン = 1
			CALL アビテンプレート_有利効果_バフ効果セット
		ENDIF
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_指定(攻撃対象一時退避)
		
		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 50
			アビ汎用変数:効果割合 = 133
			アビ汎用変数:TA率補正値 = 100
		ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 25
			アビ汎用変数:効果割合 = 133
			アビ汎用変数:TA率補正値 = 33
		ELSE
			アビ汎用変数:効果割合 = 100
			アビ汎用変数:TA率補正値 = 33
		ENDIF
		CALL アビテンプレート_通常攻撃処理
		CALL アビテンプレート_通常攻撃処理
ENDSELECT
RETURN RESULT

@固有アビ_57_3(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIM 効果数値
#DIM 効果成功率
#DIMS アビ名

;超越時の瀕死3回行動はできなくはなさそうだけどいったん忘れる　CTつけていいならできるか

;味方攻撃UP、++で命中UP
IF 基礎BATTLE_STATE:キャラ番号:Lv >= 50
	アビ名 = グラウンドゼロ++
	消費ＭＰ = 120
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 25
	アビ名 = グラウンドゼロ+
	消費ＭＰ = 80
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 13
	アビ名 = グラウンドゼロ
	消費ＭＰ = 80
ELSE
	アビ名 = 
ENDIF



SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}
		詳細文文字列受け渡し変数 += @"<br>自身に［ＨＰの99％］のＨＰ減少を与える。"
		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 50
			詳細文文字列受け渡し変数 += @"<br>敵全体に［減少したＨＰ✕3］の無属性ダメージを与える。"
		ELSE
			詳細文文字列受け渡し変数 += @"<br>敵全体に［減少したＨＰ］の無属性ダメージを与える。"
		ENDIF
		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 25
			詳細文文字列受け渡し変数 += @"<br>［25％］（Ｂ枠・3ターン）の防御力減少効果を与える。成功率90％。"
		ENDIF
		詳細文文字列受け渡し変数 += @"<br>自身に［333］（通常枠）のバリア効果を与える。"
		RETURN 消費ＭＰ
	CASE "アビ効果"
		LOCAL = キャラ隊列検索(キャラ番号)

		;99％の取得(ダメージ)
		LOCAL:1 = BATTLE_STATE:LOCAL:ＨＰ * 99 / 100
		
				

		IF LOCAL:1 > 0
			;自傷ダメージ
			CALL アビ対象選択テンプレート_自己のみ
			アビ汎用変数:効果量 = LOCAL:1
			アビ汎用変数:命中率補正値 = 100
			CALL アビテンプレート_ダメージ処理_無属性

			CALL アビ汎用変数文字列リセット
			;敵全体に自傷ダメージと同値を与える
			CALL アビ対象選択テンプレート_敵全体
			アビ汎用変数:命中率補正値 = 100
			アビ汎用変数:効果量 = LOCAL:1
			IF 基礎BATTLE_STATE:キャラ番号:Lv >= 50
				アビ汎用変数:効果量 *= 3
			ENDIF
			CALL アビテンプレート_ダメージ処理_無属性
		
			IF 基礎BATTLE_STATE:キャラ番号:Lv >= 25
				CALL アビ汎用変数文字列リセット
				CALL アビ対象選択テンプレート_敵全体
				アビ汎用変数:効果割合 = 25
				アビ汎用文字列:バフ・デバフ枠 = 防御力B
				アビ汎用文字列:バフ・デバフ対象能力 = 防御力
				アビ汎用変数:持続ターン = 3
				アビ汎用変数:基礎成功確率 = 90
				CALL アビテンプレート_不利効果_デバフ効果セット
			ENDIF
		ENDIF

		;333バリア
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_自己のみ
		アビ汎用文字列:バフ・デバフ枠 = バリア
		アビ汎用文字列:バフ・デバフ対象能力 = バリア
		アビ汎用変数:効果量 = 333
		CALL アビテンプレート_有利効果_バフ効果セット

ENDSELECT
RETURN RESULT


