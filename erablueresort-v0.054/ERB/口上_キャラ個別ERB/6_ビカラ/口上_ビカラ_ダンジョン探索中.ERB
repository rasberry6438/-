;--------------------------------------------------
;ダンジョン探索中に条件を満たしていた時表示される文章
;--------------------------------------------------
;・使い方
;「6」をキャラクター番号に置換し、それぞれの関数に処理を入れる
;--------------------------------------------------

;--------------------------------------------------
;「仲間と会話」ボタン押下時
;簡単に何度も見られるので、条件分岐やランダム化で複数パターンの登録を推奨
;--------------------------------------------------
@KOJO_DUNGEON_仲間と会話_6(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

IF 陥落チェック(対象キャラ)
	IF CSTR:対象キャラ:スタイル管理文字列 == ""
		SELECTCASE RAND:5
			CASE 0
				KSTR:(K++) = 「さぁ、ぼくと一緒に行こう！ ゆ～とぴあが待っているよ！」
			CASE 1
				KSTR:(K++) = 「きみと一緒なら何だってできそうだよ！」
			CASE 2
				WSTR:(K++) = 「ラッキー！ クッキー！ ビッキー！」
				KSTR:(K++) = 「ふふっ、もう知ってるよね？ そう！ 元気が出る合言葉さ！」
			CASE 3
				KSTR:(K++) = 「いつだって、一緒にいようね！」
			CASE 4
				KSTR:(K++) = 「も、もうこれで、あたしも陽キャと言っていいかも…！ ……い、いいよね？」
		ENDSELECT
	ELSE
		SELECTCASE RAND:5
			CASE 0
				KSTR:(K++) = 「えへ、えへへへ…」
			CASE 1
				KSTR:(K++) = 「こ…今後とも、なにとぞ」
			CASE 2
				KSTR:(K++) = 「あ、あたしが…いいのかな…？」
			CASE 3
				KSTR:(K++) = 「ちょっとはせ、成長しました…よね」
			CASE 4
				KSTR:(K++) = 「%CALLNAME:MASTER%さんっ…見守っててください…！」
		ENDSELECT
	ENDIF
ELSE
	IF CSTR:対象キャラ:スタイル管理文字列 == ""
		SELECTCASE RAND:5
			CASE 0
				KSTR:(K++) = 「盛り上がってる～？」
			CASE 1
				KSTR:(K++) = 「ぼくと握手したいでしょ？」
			CASE 2
				KSTR:(K++) = 「リゾートって楽しいね！ 毎日がパーティーみたい！」
			CASE 3
				KSTR:(K++) = 「かしこみかしこみ～♪」
			CASE 4
				KSTR:(K++) = （早く帰りたいな……）
		ENDSELECT
	ELSE
		SELECTCASE RAND:5
			CASE 0
				KSTR:(K++) = 「なんであたしが……」
			CASE 1
				KSTR:(K++) = 「大丈夫です……」（ゲボ吐きそう…）
			CASE 2
				KSTR:(K++) = 「あたし…先に帰っても……あ、なんでもないです…」
			CASE 3
				KSTR:(K++) = 「全空最弱なんです…悲しいことに……」
			CASE 4
				KSTR:(K++) = 「%CALLNAME:MASTER%さんは陽トピアの方ですね…」
		ENDSELECT
	ENDIF
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ,,0)

;--------------------------------------------------
;戦闘中特定タイミングで表示される文章
;--------------------------------------------------
;固有スキル発動時
;「（キャラ名）の（アビ名）！」よりも前に表示される
;汎用アビや衣装アビだと発動しないので注意
;--------------------------------------------------
@KOJO_DUNGEON_固有アビ発動時_6_1(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ

;YYYYを固有アビ関数の「@固有アビ_6_YYYY」のYYYYと同じに変更する
;使用したアビリティの名前は「使用アビ名」に入ってくる
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

IF 陥落チェック(対象キャラ)
	IF CSTR:対象キャラ:スタイル管理文字列 == ""
		KSTR:(K++) = 「ぼくの見せ場だね！」
	ELSE
		KSTR:(K++) = 「どどどっ、どうすれば！？」
	ENDIF
ELSE
	IF CSTR:対象キャラ:スタイル管理文字列 == ""
		KSTR:(K++) = 「悪い子にはおしおきだ！」
	ELSE
		KSTR:(K++) = 「どどどっ、どうすれば！？」
	ENDIF
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

@KOJO_DUNGEON_固有アビ発動時_6_2(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ

;YYYYを固有アビ関数の「@固有アビ_6_YYYY」のYYYYと同じに変更する
;使用したアビリティの名前は「使用アビ名」に入ってくる
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

IF 陥落チェック(対象キャラ)
	IF CSTR:対象キャラ:スタイル管理文字列 == ""
		IF 使用アビ名 == "エキセントリックパレード"
			KSTR:(K++) = 「笑顔を忘れないで！」
		ELSE
			KSTR:(K++) = 「行こう！ ゆ～とぴあへ！」
		ENDIF
	ELSE
		KSTR:(K++) = 「せめてチーズがあったら……」
	ENDIF
ELSE
	IF CSTR:対象キャラ:スタイル管理文字列 == ""
		KSTR:(K++) = 「さぁ、盛り上がっていこう！」
	ELSE
		KSTR:(K++) = 「せめてチーズがあったら……」
	ENDIF
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

@KOJO_DUNGEON_固有アビ発動時_6_3(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ

;YYYYを固有アビ関数の「@固有アビ_6_YYYY」のYYYYと同じに変更する
;使用したアビリティの名前は「使用アビ名」に入ってくる
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

IF 陥落チェック(対象キャラ)
	IF CSTR:対象キャラ:スタイル管理文字列 == ""
		KSTR:(K++) = 「みんなで遊ぼうよ！」
	ELSE
		KSTR:(K++) = 「戦いとかやめませんか……？」
	ENDIF
ELSE
	IF CSTR:対象キャラ:スタイル管理文字列 == ""
		KSTR:(K++) = 「安心して、ぼくがついてる！」
	ELSE
		KSTR:(K++) = 「戦いとかやめませんか……？」
	ENDIF
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

@KOJO_DUNGEON_固有アビ発動時_6_4(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ

;YYYYを固有アビ関数の「@固有アビ_6_YYYY」のYYYYと同じに変更する
;使用したアビリティの名前は「使用アビ名」に入ってくる
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

IF CSTR:対象キャラ:スタイル管理文字列 == ""
	KSTR:(K++) = 「心が躍るね！」
ELSE
	KSTR:(K++) = 「ほんと無理なんですけどっ…！」
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;奥義発動時
;「（キャラ名）の奥義：（奥義名）！」よりも前に表示される
;--------------------------------------------------
@KOJO_DUNGEON_奥義発動時_6(対象キャラ, 使用奥義名)
#DIMS 使用奥義名
#DIM 対象キャラ

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

IF CSTR:対象キャラ:スタイル管理文字列 == "" && LOCAL > -1
	KSTR:(K++) = 「さぁ、ショータイムだ！」

	NSTR:(K++) = ++++
	切り替え名前:0 = %CALLNAME:(対象キャラ)%
	切り替え顔グラリソース:0 = 探索用_{LOCAL}_顔

	KSTR:(K++) = 「待ってたの……♪」
ELSEIF 陥落チェック(対象キャラ) && 基礎BATTLE_STATE:対象キャラ:Lv >= 70
	IF CSTR:対象キャラ:スタイル管理文字列 == ""
		KSTR:(K++) = 「さぁ踊ろうか！ 思いっきりはしゃいじゃおっかな！」
	ELSE
		KSTR:(K++) = 「ハハッ！ これでバッチリ！」
	ENDIF
ELSE
	IF CSTR:対象キャラ:スタイル管理文字列 == ""
		KSTR:(K++) = 「これがぼくのとっておき！」
	ELSE
		KSTR:(K++) = 「ハハッ！ これでバッチリ！」
	ENDIF
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ,,0)

;--------------------------------------------------
;チェンバースト発動時
;「チェインバースト！」（フルチェイン！）よりも前に表示される
;該当キャラが起点になった時（＝ターンで最初に奥義を撃った）にしか呼ばれないので注意
;--------------------------------------------------
@KOJO_DUNGEON_チェンバ発動時_6(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

SIF CSTR:対象キャラ:スタイル管理文字列 == ""
	KSTR:(K++) = 「ふふっ！」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;トドメ時
;行動の結果（◯◯は倒れた！など）の後に表示される
;複数攻撃時は一人でも倒していれば表示される
;--------------------------------------------------
;口上用トドメフラグ には倒した敵の数が入っている
;口上用技名保存 には奥義名・アビ名が入っている
;       通常攻撃の場合は「通常攻撃」、チェンバの場合は「チェインバースト」が入っている
@KOJO_DUNGEON_トドメ時_6(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

IF 陥落チェック(対象キャラ)
	IF CSTR:対象キャラ:スタイル管理文字列 == ""
		KSTR:(K++) = 「すごいだろう？」
	ELSE
		KSTR:(K++) = 「まぐれです～…」
	ENDIF
ELSE
	IF CSTR:対象キャラ:スタイル管理文字列 == ""
		KSTR:(K++) = 「ばぁ～い♪」
	ELSE
		KSTR:(K++) = 「まぐれです～…」
	ENDIF
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

; ;--------------------------------------------------
; ;味方から回復を受けた時
; ;「（キャラ名）のＨＰが」の直後に表示される
; ;複数人回復した場合、ランダムで一人の分が表示される
; ;--------------------------------------------------
; ;（現在未実装）
; @KOJO_DUNGEON_被回復時_6(対象キャラ)
; #DIM 対象キャラ
; CALL 口上変数初期化
; LOCAL = GETCHARA(6)
; LOCAL:1 = キャラ隊列検索(LOCAL)

; ;回復した側のキャラは「BATTLE_STATE:戦闘行動キャラ:キャラ登録番号」で6が
; ;「戦闘行動キャラ」で隊列番号が取れる

; KSTR:(K++) = 

; CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;戦闘勝利時
;ルピやEXPの取得よりも前に表示される
;--------------------------------------------------
@KOJO_DUNGEON_戦闘勝利時_6(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

IF 陥落チェック(対象キャラ)
	IF CSTR:対象キャラ:スタイル管理文字列 == ""
		KSTR:(K++) = 「さぁ、祝勝会をしようよ！」
	ELSE
		KSTR:(K++) = 「ど、どやぁ……」
	ENDIF
ELSE
	IF CSTR:対象キャラ:スタイル管理文字列 == ""
		KSTR:(K++) = 「いぇいっ！ ぼくの実力、見てくれた？」
	ELSE
		KSTR:(K++) = 「ど、どやぁ……」
	ENDIF
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;全滅時
;--------------------------------------------------
@KOJO_DUNGEON_全滅時_6(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

IF 陥落チェック(対象キャラ)
	IF CSTR:対象キャラ:スタイル管理文字列 == ""
		KSTR:(K++) = 「おっとっと……」
	ELSE
		KSTR:(K++) = 「な゛に゛も゛で゛き゛ま゛せ゛ん゛で゛し゛た゛あ゛ぁ゛～～………」
	ENDIF
ELSE
	IF CSTR:対象キャラ:スタイル管理文字列 == ""
		KSTR:(K++) = 「こ…困った…なぁ……」
	ELSE
		KSTR:(K++) = 「な゛に゛も゛で゛き゛ま゛せ゛ん゛で゛し゛た゛あ゛ぁ゛～～………」
	ENDIF
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;逃走時
;--------------------------------------------------
;@KOJO_DUNGEON_逃走時_6(対象キャラ)
;#DIM 対象キャラ
;CALL メッセージ欄表示用関数(,,,0)
;CALL 口上変数初期化
;LOCAL = キャラ隊列検索(対象キャラ)
;
;KSTR:(K++) = 
;
;CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)
