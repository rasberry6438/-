
@固有奥義_414(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 奥義威力
#DIMS 奥義名
#DIM 効果数値, 1

IF 陥落チェック(キャラ番号) && 基礎BATTLE_STATE:キャラ番号:Lv >= 70
	奥義名 = リープハフトヴァイス+
	奥義威力 = 450
ELSE
	奥義名 = リープハフトヴァイス
	奥義威力 = 400
ENDIF

SELECTCASE ARGS
	CASE "奥義名"
		TSTR:コマンド名受渡 = %奥義名%
	CASE "奥義説明文"
		詳細文文字列受け渡し変数 = 奥義威力：{奥義威力}％<br>味方全体の奥義ゲージＵＰ(10％)/雪氷の叡智が発動
		詳細文文字列受け渡し変数 += "<br>◆白銀の威光効果中、2回発動　"
		RETURN 奥義威力
	CASE "奥義前効果"
		IF バフ番号取得_枠("白銀の威光", 戦闘行動キャラ) > -1
			CALL アビ対象選択テンプレート_自己のみ
			アビ汎用文字列:バフ・デバフ枠 = 奥義再発動
			アビ汎用文字列:バフ・デバフ対象能力 = 奥義再発動
			アビ汎用変数:持続回数 = 1
			アビ汎用変数:消去不可オプション = 1
			アビ汎用変数:特殊表示オプション = -1
			CALL アビテンプレート_有利効果_バフ効果セット
		ENDIF
	CASE "奥義追加効果"
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_味方全体_生者のみ
		アビ汎用変数:効果量 = 10
		CALL アビテンプレート_有利効果_奥義ゲージUP
		
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_敵全体_生者のみ
		アビ汎用文字列:バフ・デバフ枠 = 攻撃力_累積
		アビ汎用文字列:バフ・デバフ対象能力 = 攻撃力
		アビ汎用変数:効果割合 = 10
		アビ汎用変数:累積上限_割合 = 40
		アビ汎用変数:持続ターン = 4
		アビ汎用変数:基礎成功確率 = 100
		CALL アビテンプレート_不利効果_デバフ効果セット
		
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_敵全体_生者のみ
		アビ汎用文字列:バフ・デバフ枠 = 防御力_累積
		アビ汎用文字列:バフ・デバフ対象能力 = 防御力
		アビ汎用変数:効果割合 = 10
		アビ汎用変数:累積上限_割合 = 40
		アビ汎用変数:持続ターン = 4
		アビ汎用変数:基礎成功確率 = 100
		CALL アビテンプレート_不利効果_デバフ効果セット
		
		FOR LOCAL, 10, 20
			IF デバフ番号取得_枠("氷結", LOCAL) > -1
				CALL アビ汎用変数文字列リセット
				CALL アビ対象選択テンプレート_敵全体_生者のみ
				アビ汎用変数:効果量 = 1
				CALL アビテンプレート_不利効果_バフ消去
			ENDIF
		NEXT
		
		;奥義で付与した氷結にふぃるちゃんのサポアビが反応しちゃうという原作にない挙動をしてしまうので泣く泣く封印
		;CALL アビ汎用変数文字列リセット
		;CALL アビ対象選択テンプレート_敵全体_生者のみ
		;アビ汎用文字列:バフ・デバフ枠 = 氷結
		;アビ汎用文字列:バフ・デバフ対象能力 = 氷結
		;CALL バフ込み数値算出("攻撃力")
		;アビ汎用変数:効果量 = RESULT * 効果数値:0 / 100
		;アビ汎用変数:持続ターン = 3
		;アビ汎用変数:基礎成功確率 = 100
		;CALL アビテンプレート_不利効果_デバフ効果セット
ENDSELECT
