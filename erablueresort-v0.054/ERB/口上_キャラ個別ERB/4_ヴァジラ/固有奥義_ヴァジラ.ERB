
@固有奥義_4(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 奥義威力
#DIMS 奥義名

;レベルなどの条件で奥義を強化する場合、奥義名の文字列を条件分岐で変化させる
; IF 基礎BATTLE_STATE:キャラ番号:Lv >= 強化されるレベル
; 	奥義名 = （任意の奥義の名前・強化後）
; 	奥義威力 = （奥義威力の数値・強化後）
; ELSE
	奥義名 = 金牙神然
	奥義威力 = 500
; ENDIF

SELECTCASE ARGS
	CASE "奥義名"
		TSTR:コマンド名受渡 = %奥義名%
	CASE "奥義説明文"
		詳細文文字列受け渡し変数 = 奥义威力：{奥義威力}％<br>赋予我方全体仁义八行效果［独立槽/不可驱散］持续６回合。
		詳細文文字列受け渡し変数 += @"<br>已经拥有相同效果的情况下，获得额外效果。"
		詳細文文字列受け渡し変数 += @"<br>初次：攻击力[30％]　第２次：防御力[30％]　第３次：奥义槽上升量［10％］"
		詳細文文字列受け渡し変数 += @"<br>第４次：奥义伤害修正[30％]　第５次：造成伤害［10％］　之后：更新持续时间"
		RETURN 奥義威力
	CASE "奥義追加効果"
		LOCAL:1 = 戦闘行動キャラ
		FOR LOCAL, 0, 4
			SIF BATTLE_STATE:LOCAL:キャラ登録番号 < 1
				CONTINUE
			SIF BATTLE_STATE:LOCAL:ＨＰ < 1
				CONTINUE
			戦闘行動キャラ = LOCAL
			CALL 仁義八行バフ更新処理
		NEXT
		戦闘行動キャラ = LOCAL:1
ENDSELECT



@仁義八行バフ更新処理
#DIM バフ番号

CALL アビ対象選択テンプレート_指定(戦闘行動キャラ)
バフ番号 = バフ番号取得_枠("仁義八行_攻撃力", 戦闘行動キャラ)
IF バフ番号 > -1
	DT_CELL_SET "戦闘効果データベース", バフ番号, "持続ターン", 6
	バフ番号 = バフ番号取得_枠("仁義八行_防御力", 戦闘行動キャラ)
	IF バフ番号 > -1
		DT_CELL_SET "戦闘効果データベース", バフ番号, "持続ターン", 6
		バフ番号 = バフ番号取得_枠("仁義八行_奥義ゲージ上昇率", 戦闘行動キャラ)
		IF バフ番号 > -1
			DT_CELL_SET "戦闘効果データベース", バフ番号, "持続ターン", 6
			バフ番号 = バフ番号取得_枠("仁義八行_奥義ダメージ補正", 戦闘行動キャラ)
			IF バフ番号 > -1
				DT_CELL_SET "戦闘効果データベース", バフ番号, "持続ターン", 6
				バフ番号 = バフ番号取得_枠("仁義八行_与ダメ増加", 戦闘行動キャラ)
				IF バフ番号 > -1
					DT_CELL_SET "戦闘効果データベース", バフ番号, "持続ターン", 6
				ELSE
					CALL アビ汎用変数文字列リセット
					アビ汎用変数:効果割合 = 10
					アビ汎用文字列:バフ・デバフ枠 = 仁義八行_与ダメ増加
					アビ汎用文字列:バフ・デバフ対象能力 = 与ダメージ
					アビ汎用変数:持続ターン = 6
					CALL アビテンプレート_有利効果_バフ効果セット
				ENDIF
			ELSE
				CALL アビ汎用変数文字列リセット
				アビ汎用変数:効果割合 = 30
				アビ汎用文字列:バフ・デバフ枠 = 仁義八行_奥義ダメージ補正
				アビ汎用文字列:バフ・デバフ対象能力 = ダメージ補正_奥義ダメージ
				アビ汎用変数:持続ターン = 6
				CALL アビテンプレート_有利効果_バフ効果セット
			ENDIF
		ELSE
			CALL アビ汎用変数文字列リセット
			アビ汎用変数:効果量 = 10
			アビ汎用文字列:バフ・デバフ枠 = 仁義八行_ゲージ上昇効率
			アビ汎用文字列:バフ・デバフ対象能力 = ゲージ上昇効率
			アビ汎用変数:持続ターン = 6
			CALL アビテンプレート_有利効果_バフ効果セット
		ENDIF
	ELSE
		CALL アビ汎用変数文字列リセット
		アビ汎用変数:効果割合 = 30
		アビ汎用文字列:バフ・デバフ枠 = 仁義八行_防御力
		アビ汎用文字列:バフ・デバフ対象能力 = 防御力
		アビ汎用変数:持続ターン = 6
		CALL アビテンプレート_有利効果_バフ効果セット
	ENDIF
ELSE
	CALL アビ汎用変数文字列リセット
	アビ汎用変数:効果割合 = 30
	アビ汎用文字列:バフ・デバフ枠 = 仁義八行_攻撃力
	アビ汎用文字列:バフ・デバフ対象能力 = 攻撃力
	アビ汎用変数:持続ターン = 6
	CALL アビテンプレート_有利効果_バフ効果セット
ENDIF
