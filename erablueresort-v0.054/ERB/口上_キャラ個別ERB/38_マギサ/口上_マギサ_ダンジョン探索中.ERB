;--------------------------------------------------
;ダンジョン探索中に条件を満たしていた時表示される文章
;--------------------------------------------------
;・使い方
;「1」をキャラクター番号に置換し、それぞれの関数に処理を入れる
;--------------------------------------------------

;--------------------------------------------------
;「仲間と会話」ボタン押下時
;簡単に何度も見られるので、条件分岐やランダム化で複数パターンの登録を推奨
;--------------------------------------------------
@KOJO_DUNGEON_仲間と会話_38(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
LOCAL:1 = キャラ隊列検索(対象キャラ)
IF PLAYER == MASTER
	;相手があなたの時
	IF TALENT:対象キャラ:恋慕
		SELECTCASE RAND:6
			CASE 0
				WSTR:(K++) = 「……嗯，胸口这边有点歪了呢……」
				KSTR:(K++) = 「我说%CALLNAME:MASTER%，可以稍微帮我整理下衣服吗？」
			CASE 1
				WSTR:(K++) = 「我并不讨厌旅行或者冒险呢。呵呵，毕竟也因此遇见了你嘛」
				KSTR:(K++) = 「要让我见识一下你帅气的一面哦？」
			CASE 2
				WSTR:(K++) = 「唔嗯……没什么，就是最近肩膀有些僵硬呢……你好像有什么话想说？」
				KSTR:(K++) = 「不过，要是你愿意帮我按摩的话就原谅你。你看，那边刚好有个不错的地方——」
			CASE 3
				WSTR:(K++) = 「稍微休息一下好吗？你一直都在拼命工作对吧？不放松一下可不行哦」
				KSTR:(K++) = 「话说回来，那边好像有个适合两人独处的地方……」
			CASE 4
				WSTR:(K++) = 「护送就拜托你了哦」
				KSTR:(K++) = 「视线可不许移开哦？」
			CASE 5
				WSTR:(K++) = 「小心脚下吗？谢谢你这么关心我♪」
				KSTR:(K++) = 「不过嘛，无论发生什么，你都绝对会来救我的对吧？就算不用预知我也知道哦。」
		ENDSELECT
	ELSE
		SELECTCASE RAND:6
			CASE 0
				WSTR:(K++) = 「呵呵呵，一切都在魔女的预知之中哦」
				KSTR:(K++) = 　玛姬莎意有所指地微笑着。
			CASE 1
				WSTR:(K++) = 「我并不讨厌旅行或者冒险呢。呵呵，毕竟也因此遇见了你嘛」
				KSTR:(K++) = 「要让我见识一下你帅气的一面哦？」
			CASE 2
				WSTR:(K++) = 「唔嗯……没什么，就是最近肩膀有些僵硬呢……你好像有什么话想说？」
				KSTR:(K++) = 「不过，要是你愿意帮我按摩的话就原谅你。――开玩笑的啦，开玩笑♪」
			CASE 3
				WSTR:(K++) = 「我说，稍微休息一下吧？」
				KSTR:(K++) = 「你一直都在拼命工作，稍微偷下懒也不会遭天谴的啦」
			CASE 4
				WSTR:(K++) = 「护送就拜托你了哦」
				KSTR:(K++) = 「视线可不许移开哦？」
			CASE 5
				WSTR:(K++) = 「小心脚下吗？谢谢你这么关心我♪」
				KSTR:(K++) = 「……不过仔细想想，你这该不会是性骚扰吧？」
		ENDSELECT
	ENDIF
ENDIF
CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ,,0)
;--------------------------------------------------
;固有スキル発動時
;「（キャラ名）の（アビ名）！」よりも前に表示される
;汎用アビや衣装アビだと発動しないので注意
;--------------------------------------------------
;イラプション
@KOJO_DUNGEON_固有アビ発動時_38_1(対象キャラ, 使用アビ名)
#DIM 対象キャラ
#DIMS 使用アビ名
CALL 口上変数初期化

LOCAL = キャラ隊列検索(対象キャラ)

STRDATA KSTR:(K++)
	DATA 「做好失去一切的觉悟了吗？」
	DATA 「还不错吧？」
	DATA 「这可是魔女的招数哦！」
ENDDATA

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;ウォール
@KOJO_DUNGEON_固有アビ発動時_38_2(対象キャラ, 使用アビ名)
#DIM 対象キャラ
#DIMS 使用アビ名
CALL 口上変数初期化

LOCAL = キャラ隊列検索(対象キャラ)

STRDATA KSTR:(K++)
	DATA 「来吧，尽情享受吧♪」
	DATA 「放心吧，我会守护你们的」
	DATA 「交给我吧！」
ENDDATA

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;ヴァルプルギス
@KOJO_DUNGEON_固有アビ発動時_38_3(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ
CALL 口上変数初期化

LOCAL = キャラ隊列検索(対象キャラ)

STRDATA KSTR:(K++)
	DATA 「这是我的拿手好戏！」
	DATA 「我不会让你吃亏的」
	DATA 「让你大吃一惊吧」
ENDDATA

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;サンクション
@KOJO_DUNGEON_固有アビ発動時_38_4(対象キャラ, 使用アビ名)
#DIM 対象キャラ
#DIMS 使用アビ名
CALL 口上変数初期化

LOCAL = キャラ隊列検索(対象キャラ)

STRDATA KSTR:(K++)
	DATA 「现身吧——魔神摩拉克斯！」
	DATA 「之后就交给我吧♪」
	DATA 「就算惊得瘫倒在地我也不管哦！」
	DATA 「拜托你了哦，小摩♪」
ENDDATA
CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;リベレイション
;「解放」の意。要はモーさんをお帰り願う
@KOJO_DUNGEON_固有アビ発動時_38_5(対象キャラ, 使用アビ名)
#DIM 対象キャラ
#DIMS 使用アビ名
CALL 口上変数初期化

LOCAL = キャラ隊列検索(対象キャラ)

STRDATA KSTR:(K++)
	DATA 「谢啦，小摩♪」
	DATA 「来点火热的怎么样？」
	DATA 「好了，接下来是收尾工作了哦！」
	DATA 「来吧，让你见识下足以融化一切的魔法！」
ENDDATA
CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)
;--------------------------------------------------
;奥義発動時
;「（キャラ名）の奥義：（奥義名）！」よりも前に表示される
;--------------------------------------------------
@KOJO_DUNGEON_奥義発動時_38(対象キャラ, 使用奥義名)
#DIM 対象キャラ
#DIMS 使用奥義名
CALL 口上変数初期化

LOCAL = キャラ隊列検索(対象キャラ)
;燃え立つ星が天より墜ちてくる……！
SELECTCASE RAND:3
	CASE 0
		KSTR:(K++) = 「这就是魔法的精髓！」
	CASE 1
		WSTR:(K++) = 「你的未来，将不会到来……」
	CASE 2
		WSTR:(K++) = 「好好见识一下吧，这真正的魔法！」
	ENDSELECT

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)
CALL 口上変数初期化
;--------------------------------------------------
;チェンバースト発動時
;「チェインバースト！」（フルチェイン！）よりも前に表示される
;該当キャラが起点になった時（＝ターンで最初に奥義を撃った）にしか呼ばれないので注意
;--------------------------------------------------
@KOJO_DUNGEON_チェンバ発動時_38(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

LOCAL = キャラ隊列検索(対象キャラ)
SELECTCASE RAND:3
	CASE 0
		KSTR:(K++) = 「好，出发吧！」
	CASE 1
		WSTR:(K++) = 「就特别为你服务一下吧！啊哈哈！」
	CASE 2
		WSTR:(K++) = 「突如其来的高潮时刻！」
ENDSELECT

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)
LOCAL:2 = GETCHARA(37)
IF キャラ隊列検索(LOCAL:2) > -1
	NSTR:(K++) = ++++
	切り替え名前:0 = %CALLNAME:(LOCAL:2)%
	切り替え顔グラリソース:0 = 探索用_{キャラ隊列検索(LOCAL:2)}_顔

	KSTR:(K++) = 「看来你也预见到了呢，玛姬莎？」

	NSTR:(K++) = ++++
	切り替え名前:1 = %CALLNAME:対象キャラ%
	切り替え顔グラリソース:1 = 探索用_{LOCAL}_顔
	
	KSTR:(K++) = 「没错，阿露露。这就是高潮了！」
ENDIF
;--------------------------------------------------
;トドメ時
;行動の結果（◯◯は倒れた！など）の後に表示される
;複数攻撃時は一人でも倒していれば表示される
;--------------------------------------------------
;口上用トドメフラグ には倒した敵の数が入っている
;口上用技名保存 には奥義名・アビ名が入っている
;       通常攻撃の場合は「通常攻撃」、チェンバの場合は「チェインバースト」が入っている
@KOJO_DUNGEON_トドメ時_38(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

LOCAL = キャラ隊列検索(対象キャラ)
SELECTCASE RAND:4
	CASE 0
		KSTR:(K++) = 「状态不错哦♪」
	CASE 1
		KSTR:(K++) = 「结局早已注定」
	CASE 2
		KSTR:(K++) = 「呵呵呵，感觉真是棒极了♪」
	CASE 3
		KSTR:(K++) = 「乖乖待着别乱动」
ENDSELECT

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)
;--------------------------------------------------
;味方から回復を受けた時
;「（キャラ名）のＨＰが」の直後に表示される
;複数人回復した場合、ランダムで一人の分が表示される
;--------------------------------------------------
@KOJO_DUNGEON_被回復時_38(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

LOCAL = キャラ隊列検索(対象キャラ)

;回復した側のキャラは「BATTLE_STATE:戦闘行動キャラ:キャラ登録番号」でキャラ番号が
;「戦闘行動キャラ」で隊列番号が取れる

KSTR:(K++) = 「谢谢你♪」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)
;--------------------------------------------------
;戦闘勝利時
;ルピやEXPの取得よりも前に表示される
;--------------------------------------------------
@KOJO_DUNGEON_戦闘勝利時_38(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化

LOCAL = キャラ隊列検索(対象キャラ)
IF 陥落チェック_性的(対象キャラ)
		KSTR:(K++) = 「唔嗯……身体有点发热了呢_H_」
	ELSE
SELECTCASE RAND:3
	CASE 0
		KSTR:(K++) = 「辛苦了。待会给你奖励♪」
	CASE 1
		KSTR:(K++) = 「真不尽兴……身体都开始躁动不安了呢」
	CASE 2
		KSTR:(K++) = 「真不愧是你。我都快要迷上你了」
ENDSELECT
ENDIF
CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)


;--------------------------------------------------
;全滅時
;--------------------------------------------------
@KOJO_DUNGEON_全滅時_38(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

IF 陥落チェック(対象キャラ)
	KSTR:(K++) = 「对不起，%CALLNAME:MASTER%……」
ELSE
	SELECTCASE RAND:2
	CASE 0
		KSTR:(K++) = 「骗人……的吧……开什么玩笑……？」
	CASE 1
		WSTR:(K++) = 「这种未来……不可能……」
ENDSELECT
ENDIF
CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)
;--------------------------------------------------
;逃走時
;--------------------------------------------------
@KOJO_DUNGEON_逃走時_38(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化

LOCAL = キャラ隊列検索(対象キャラ)

IF 陥落チェック(対象キャラ)
	KSTR:(K++) = 「小摩，快带大家逃走！」
ELSE
	SELECTCASE RAND:2
	CASE 0
		KSTR:(K++) = 「袍子都裂开了啦……」
	CASE 1
		WSTR:(K++) = 「哎呀呀，真是没办法呢」
ENDSELECT
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)
CALL 口上変数初期化

;--------------------------------------------------
;全滅リザルト
;--------------------------------------------------
@KOJO_DUNGEON_全滅リザルト_38(対象キャラ)
#DIM 対象キャラ
LOCAL = キャラ隊列検索(対象キャラ)

IF 陥落チェック(対象キャラ)
	KSTR:(K++) = 「怎么会……这样……太丢人了……！」
ELSE
	KSTR:(K++) = 「真是彻底失败呢……」
ENDIF
;--------------------------------------------------
;ボス撃破でクリア
;--------------------------------------------------
@KOJO_DUNGEON_討伐達成リザルト_38(対象キャラ)
#DIM 対象キャラ
LOCAL = キャラ隊列検索(対象キャラ)

IF 陥落チェック_性的(対象キャラ)
	KSTR:(K++) = 「好了，让我们回到二人世界吧_H_」
ELSE
	KSTR:(K++) = 「理所当然的结局！」
ENDIF
;--------------------------------------------------
;ダンジョン踏破でクリア
;--------------------------------------------------
@KOJO_DUNGEON_踏破達成リザルト_38(対象キャラ)
#DIM 対象キャラ
LOCAL = キャラ隊列検索(対象キャラ)

IF 陥落チェック_性的(対象キャラ)
	KSTR:(K++) = 「%CALLNAME:MASTER%……『奖励』就拜托了哦♪」
ELSE
	KSTR:(K++) = 「大家都很努力呢。呵呵呵♪」
ENDIF
;--------------------------------------------------
;ダンジョンから抜けるで終了
;--------------------------------------------------
@KOJO_DUNGEON_撤退リザルト_38(対象キャラ)
#DIM 対象キャラ
LOCAL = キャラ隊列検索(対象キャラ)

SELECTCASE RAND:3
	CASE 0
		KSTR:(K++) = 「哎呀，已经要回去了吗？」
	CASE 1
		KSTR:(K++) = 「辛苦了。我来给你准备些药汤吧」
	CASE 1
		KSTR:(K++) = 「时间也不早了，我们回去吧」
ENDSELECT
