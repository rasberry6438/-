
@固有奥義_287(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 奥義威力
#DIMS 奥義名

;IF 陥落チェック(キャラ番号) && 基礎BATTLE_STATE:キャラ番号:Lv >= 70
;	奥義名 = 静谧纯白+
;	奥義威力 = 450
;ELSE
	奥義名 = 静谧纯白
	奥義威力 = 450
;ENDIF

SELECTCASE ARGS
	CASE "奥義名"
		TSTR:コマンド名受渡 = %奥義名%
	CASE "奥義説明文"
		詳細文文字列受け渡し変数 = 奥义威力：{奥義威力}％<br>自身回复［70］ＭＰ/下次银冰吐息将触发冰雪拥抱效果
		詳細文文字列受け渡し変数 += "<br>重置我方全体白银雪花效果的剩余回合　"
		詳細文文字列受け渡し変数 += "<br>◆对银冰吐息状态下的敌人追加额外伤害"
		RETURN 奥義威力
	CASE "奥義前効果"
	CASE "奥義追加効果"
		;ここに奥義効果を記述する。基本の奥義ダメージ部分は記載する必要はない。
		;基本的にアビテンプレートの関数を使用すること
		;テンプレート使用の例は固有アビリティ_キャラ名.ERBに記載
		
		;銀氷の吐息状態の敵にアビダメを飛ばす部分
		FOR LOCAL, 10, 20
			IF デバフ番号取得_枠("銀氷の吐息", LOCAL) > -1
				CALL アビ汎用変数文字列リセット
				アビ汎用変数:効果割合 = 400
				アビ汎用文字列:ダメージ種類 = 奥義ダメージ
				CALL アビテンプレート_ダメージ処理_水属性
			ENDIF
		NEXT
		
		;ダメアビ即時使用可能の部分
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_自己のみ
		アビ汎用変数:効果量 = 70
		CALL アビテンプレート_ＭＰ回復処理_MAXでも回復
		
		;1アビと3アビを連続して撃つ部分(暫定)
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_自己のみ
		アビ汎用文字列:バフ・デバフ枠 = 銀氷の吹雪
		アビ汎用文字列:バフ・デバフ対象能力 = 銀氷の吹雪
		アビ汎用変数:持続ターン = -1
		アビ汎用変数:消去不可オプション = 1
		アビ汎用変数:特殊表示オプション = 1
		CALL アビテンプレート_有利効果_バフ効果セット
		
		;2アビの効果を延長する部分
		;バフ延長のやり方がよくわかんなくて再度かけ直すことにしたけど調べたらちゃんと延長も出来るらしい
		;…まあシステム的に奥義撃ちづらい感じだしこれくらいの強化はいいだろう多分
		IF バフ番号取得_枠("白銀の雪花", 戦闘行動キャラ) > -1
			CALL アビ汎用変数文字列リセット
			CALL アビ対象選択テンプレート_味方全体_生者のみ
			アビ汎用文字列:バフ・デバフ枠 = 白銀の雪花
			アビ汎用文字列:バフ・デバフ対象能力 = 白銀の雪花
			アビ汎用変数:持続ターン = 6
			アビ汎用変数:消去不可オプション = 1
			アビ汎用変数:特殊表示オプション = -1
			CALL アビテンプレート_有利効果_バフ効果セット
			
			CALL アビ汎用変数文字列リセット
			CALL アビ対象選択テンプレート_味方全体_生者のみ
			アビ汎用文字列:バフ・デバフ枠 = 属性与ダメージ_水
			アビ汎用文字列:バフ・デバフ対象能力 = 属性与ダメージ_水
			アビ汎用変数:効果割合 = 30
			アビ汎用変数:持続ターン = 6
			CALL アビテンプレート_有利効果_付随バフ効果セット
			
			CALL アビ汎用変数文字列リセット
			CALL アビ対象選択テンプレート_味方全体_生者のみ
			アビ汎用文字列:バフ・デバフ枠 = ダメージ補正_アビリティダメージ
			アビ汎用文字列:バフ・デバフ対象能力 = ダメージ補正_アビリティダメージ
			アビ汎用変数:効果割合 = 25
			アビ汎用変数:持続ターン = 6
			CALL アビテンプレート_有利効果_付随バフ効果セット
		ENDIF
ENDSELECT
