
@固有アビ_1723_1(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM サンド隊列
#DIM 効果数値1
#DIM 効果数値2

サンド隊列 = キャラ隊列検索(GETCHARA(1723))

	アビ名 = ドローショット
	消費ＭＰ = 20
	効果数値1 = 110
	効果数値2 = 50

SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		IF バフ存在判定_枠("タイムオブプリンセス",サンド隊列)
			詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>敵全体に自属性の［攻撃力✕{効果数値1}％］ダメージを与える。
		ELSEIF バフ存在判定_枠("ホワイトウィッシュ",サンド隊列)
			詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>敵全体に自属性の［攻撃力✕{効果数値1}％］ダメージを与える。
		ELSE
			詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>敵縦列に自属性の［攻撃力✕{効果数値1}％］ダメージを与える。
		ENDIF

		IF バフ存在判定_枠("ボールドレスアップ",サンド隊列)
			詳細文文字列受け渡し変数 += @"<br>更に敵全体に自属性の［攻撃力✕{効果数値2}％］ダメージを与える。"

		ENDIF
		RETURN 消費ＭＰ

	CASE "アビ効果"
		CALL アビ汎用変数文字列リセット
		IF バフ存在判定_枠("タイムオブプリンセス",サンド隊列)
			CALL アビ対象選択テンプレート_敵全体
			アビ汎用変数:効果割合 = 効果数値1
			CALL アビテンプレート_ダメージ処理_自属性
		ELSEIF バフ存在判定_枠("ホワイトウィッシュ",サンド隊列)
			CALL アビ対象選択テンプレート_敵全体
			アビ汎用変数:効果割合 = 効果数値1
			CALL アビテンプレート_ダメージ処理_自属性

		ELSE
			CALL アビ対象選択テンプレート_敵縦列
			アビ汎用変数:効果割合 = 効果数値1
			CALL アビテンプレート_ダメージ処理_自属性

		ENDIF

		IF バフ存在判定_枠("ボールドレスアップ",サンド隊列)
			CALL アビ汎用変数文字列リセット
			CALL アビ対象選択テンプレート_敵全体
			アビ汎用変数:効果割合 = 効果数値2
			CALL アビテンプレート_ダメージ処理_自属性
		ENDIF
ENDSELECT

@固有アビ_1723_2(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM サンド隊列
#DIM 効果数値1

サンド隊列 = キャラ隊列検索(GETCHARA(1723))

IF 基礎BATTLE_STATE:キャラ番号:Lv >= 39
	アビ名 = アッシュヒール＋＋
	消費ＭＰ = 50
	効果数値1 = 50
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 16
	アビ名 = アッシュヒール＋
	消費ＭＰ = 50
	効果数値1 = 50
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 3
	アビ名 = アッシュヒール
	消費ＭＰ = 80
	効果数値1 = 30
ELSE
	アビ名 = 
ENDIF

SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
	IF 基礎BATTLE_STATE:キャラ番号:Lv >= 27
			詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>自分のＨＰを［回復力✕{効果数値1}％］回復し、
			詳細文文字列受け渡し変数 += @"<br>かかっているデバフを一つ削除する。"
	ELSE
			詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>自分のＨＰを［回復力✕{効果数値1}％］回復する。
	ENDIF

		RETURN 消費ＭＰ

	CASE "アビ効果"
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_自己のみ
		アビ汎用変数:効果割合 = 効果数値1
		CALL アビテンプレート_回復処理_MAXでも回復

		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 27
			CALL アビテンプレート_有利効果_デバフ消去()
		ENDIF
ENDSELECT

@固有アビ_1723_3(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM サンド隊列

サンド隊列 = キャラ隊列検索(GETCHARA(1723))

IF 基礎BATTLE_STATE:キャラ番号:Lv >= 54
	アビ名 = ボールドレスアップ＋＋
	消費ＭＰ = 75
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 23
	アビ名 = ボールドレスアップ＋
	消費ＭＰ = 100
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 5
	アビ名 = ボールドレスアップ
	消費ＭＰ = 100
ELSE
	アビ名 = 
ENDIF

SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
	IF 基礎BATTLE_STATE:キャラ番号:Lv >= 23
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>5ターンの間、自分にボールドレスアップを付与する。
	ELSE
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>3ターンの間、自分にボールドレスアップを付与する。
	ENDIF

		RETURN 消費ＭＰ
	CASE "アビ効果"
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_自己のみ
		アビ汎用変数:特殊表示オプション = 1
		アビ汎用文字列:バフ・デバフ枠 = ボールドレスアップ
		アビ汎用文字列:バフ・デバフ対象能力 = ボールドレスアップ
		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 23
			アビ汎用変数:持続ターン = 5
			CALL アビテンプレート_有利効果_バフ効果セット
		ELSE
			アビ汎用変数:持続ターン = 3
			CALL アビテンプレート_有利効果_バフ効果セット
		ENDIF
ENDSELECT

@固有アビ_1723_4(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM サンド隊列
#DIM クールタイム
#DIM 効果数値1

サンド隊列 = キャラ隊列検索(GETCHARA(1723))

IF 基礎BATTLE_STATE:キャラ番号:Lv >= 70
	アビ名 = タイムオブプリンセス＋＋
	消費ＭＰ = 300
	効果数値1 = 40

ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 38
	アビ名 = タイムオブプリンセス＋
	消費ＭＰ = 500
	効果数値1 = 40

ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 5
	アビ名 = タイムオブプリンセス
	消費ＭＰ = 500
	効果数値1 = 30

ELSE
	アビ名 = 
ENDIF

クールタイム = 5 - 現在ターン数
IF クールタイム > 0
	アビテンプレート用_アビ封印用フラグ = 1
ELSEIF 戦闘中カウント:サンド隊列:0 == 1
	アビテンプレート用_アビ封印用フラグ = 1
ELSE
	クールタイム = 0
	アビテンプレート用_アビ封印用フラグ = 0
ENDIF

SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
	IF 基礎BATTLE_STATE:キャラ番号:Lv >= 38
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>味方全員のＨＰを自身の最大ＨＰの４０％分回復し、
		詳細文文字列受け渡し変数 += @"<br>自分にタイムオブプリンセスを付与する。"
		詳細文文字列受け渡し変数 += @"<br>戦闘中１度のみ。"
		詳細文文字列受け渡し変数 += @"使用可能：{クールタイム}ターン後）"
	ELSE
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>味方全員のＨＰを自身の最大ＨＰの３０％分回復し、
		詳細文文字列受け渡し変数 += @"<br>自分にタイムオブプリンセスを付与する。"
		詳細文文字列受け渡し変数 += @"<br>戦闘中１度のみ。"
		詳細文文字列受け渡し変数 += @"使用可能：{クールタイム}ターン後）"
	ENDIF
		RETURN 消費ＭＰ
	CASE "アビ効果"
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_味方全体_生者のみ
		アビ汎用文字列:回復側使用能力値 = 最大ＨＰ
		アビ汎用変数:効果割合 = 効果数値1
		CALL アビテンプレート_回復処理_MAXでも回復

		CALL アビ対象選択テンプレート_自己のみ
		アビ汎用変数:特殊表示オプション = 1
		アビ汎用文字列:バフ・デバフ枠 = タイムオブプリンセス
		アビ汎用文字列:バフ・デバフ対象能力 = タイムオブプリンセス
		アビ汎用変数:持続ターン = 15
		CALL アビテンプレート_有利効果_バフ効果セット
		戦闘中カウント:サンド隊列:0 = 1
ENDSELECT


@バフ・デバフ特殊表示_ボールドレスアップ(隊列番号, バフ・デバフ行数)
#DIM 隊列番号
#DIM バフ・デバフ行数
VARSET LOCALS

PRINTFORML ボールドレスアップ
PRINTFORML 自身のドローショットが終点で爆発するようになり、爆発範囲内の敵にダメージを与えられるようになる。
PRINTFORML 持続ターン：{DT_CELL_GET("戦闘効果データベース", バフ・デバフ行数, "持続ターン")}

@バフ・デバフ特殊表示_タイムオブプリンセス(隊列番号, バフ・デバフ行数)
#DIM 隊列番号
#DIM バフ・デバフ行数
VARSET LOCALS

PRINTFORML タイムオブプリンセス
PRINTFORML 自身と全味方キャストのHPが大幅に回復する。
PRINTFORML さらに、自身のドローショットの描ける線の長さが延長され
PRINTFORML 弾のサイズが拡大し、貫通力が上がる。
PRINTFORML ※戦闘中一度のみ使用可能
PRINTFORML 持続ターン：{DT_CELL_GET("戦闘効果データベース", バフ・デバフ行数, "持続ターン")}


