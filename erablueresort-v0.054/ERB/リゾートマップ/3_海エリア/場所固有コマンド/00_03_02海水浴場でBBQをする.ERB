
;-------------------------------------------------
;03_304_01バーベキューエリアで食事をする
;-------------------------------------------------
@COMNAME_PLACE_381_3_3
#FUNCTION

TSTR:コマンド名受渡 = 进行烧烤
RETURNF 1

;===================================================
;コマンドタイプ
;===================================================
@COMTYPE_381_3_3
#FUNCTION
TFLAG:コマンドタイプ受渡 = COMTYPE("日常")

@COM_TOOLTIP_381_3_3
LOCALS = <br>■进行烧烤<br>
LOCALS += "与在场所有角色共同烧烤用餐的指令。结果可能分为大成功、成功、失败、大失败四种情况。<br>提供携带的食材可提升效果。"
LOCALS += "<br>指令类型：日常<br>获取来源：欢乐・征服"
LOCALS += "<br>专属经验值：无<br>"
TSTR:ツールチップ受渡 = %LOCALS%
		
@COM381_3_3
;バーベキューエリアと同一なのでそっちに渡す
CALL COM380_0_304()
RETURN RESULT

;-------------------------------------------------
;実行判定
;-------------------------------------------------
@COM_ABLE381_3_3
;条件に合う場合0（不許可）を返す
;どの条件にも引っかからないなら1（許可）を返す
;一括管理
SIF GLOBAL_COMABLE(381)
	RETURN RESULT
;睡眠中
SIF CFLAG:睡眠
	RETURN 0
;隠密中はダメ
SIF CFLAG:PLAYER:隠密
	RETURN 0
;満腹
SIF TCVAR:MASTER:満腹
	RETURN 0
RETURN 1

;-------------------------------------------------
;実行時メッセージ
;-------------------------------------------------
@MESSAGE_COM381_3_3

PRINTFORM %CALLNAME:PLAYER%与%CALLNAME:TARGET%\@ GET_TARGETNUM() > 1 ? 们 # \@
PRINT 进行了烧烤活动

SELECTCASE RFLAG:コマンド結果受渡し変数
	CASE -2
		;大失敗時
		PRINTL ，但
		PRINTW 料理完全失败什么都吃不了…
	CASE -1
		;失敗時
		PRINTL 
		PRINTW 虽然烧焦了一些肉和蔬菜，但总算填饱了肚子。
	CASE 1
		;成功時
		PRINTL 
		PRINTFORMW %CALLNAME:(RFLAG:コマンド結果受渡し変数２)%精心烤制的烤肉让大家饱餐一顿
	CASE 2
		;大成功時
		PRINTL 
		PRINTFORMW %CALLNAME:(RFLAG:コマンド結果受渡し変数２)%的烤肉串堪称极品，\@ GET_TARGETNUM() > 1 ? 所有人都 # 两个人都\@吃得心满意足！
ENDSELECT


