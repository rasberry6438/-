

@MAP_RESORT_0_7(AA)
#DIMS REF AA, 0


AA:00 = 　　　　　　　　　　　　　┏━━━━━━━━━━━━━━━━━━━━━━━┓
AA:01 = ┌───────────┐┃　　　10　　　　　　　　　　　　　　　　　　09→
AA:02 = │　　　　　　　　　　　│┗━━━┳━━━━━━━━━┯━━━━━━━━━┫
AA:03 = │　　　　　　　　　　　│　　　◯┃　　　　　　　　　│　　　　　　　　□┃
AA:04 = │　　　　　　　　　　　│　　　　┃　　　　　　　　　│　　　　　　　　　┃
AA:05 = │　　　　　07　　　　　│　　　◯┃　　　　　　　　　│　　　　　　　　□┃
AA:06 = │　　　　　　　　　　　│　　　08┃　　　　　　　　　│　　　　　　　　　┃
AA:07 = │　　　　　　　　　　　│　　　◯┃　　　　04　　　　│　　　　　　03　□┃
AA:08 = │　　　　　　　　　　　│　　　　┃　　　　　　　　　│　　　　　　　　　┃
AA:09 = └───────────┘　　　◯┃　　　　　　　　　│　　　　　　　　□┃
AA:10 = 　　　　　　　　　　　　　　　　　┃　　　　　　　　　│　　　　　　　　　┃
AA:11 = 　　　　　　　　　　　　　　　　　┃　　　　　　　　　│　　　　　　　　□┃
AA:12 = 　　　　　　　　　　　　　　　　　┠─────────┘　　　　　　　　　┃
AA:13 = 　　　　　　　　　　　　　　　　　┃　　　　　　　　　　　　　┏━━　━━┫
AA:14 = ┏━━━━━━━━━━　　　━━━┛　　　　　　　　　　　　　┃┤　　　├┃
AA:15 = ┃　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　┃┤　　　├┃
AA:16 = ┃　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　┃┤　　　├┃
AA:17 = ┠───────┐　　　　　　　　　　　　┏━━━━━━━━━┫┤　02　├┃
AA:18 = ┃　　　　　　　│　　　　　　　　　　　　┃　　　　　　　　　┃┤　　　├┃
AA:19 = ┃　　　　　　　│　　　　┏━━━━━　━┫　　　　　　　　　┃┤　　　├┃
AA:20 = ┃　　　　　　　│　　　　┃　　　　　　　┃　　　　　　　　　┃┤　　　├┃
AA:21 = ┃　　　05　　　│　　　　┃　　　　　　　┃　　　　11　　　　┣━━　━━┛
AA:22 = ┃　　　　　　　│　　　　┃　　　06　　　┃　　　　　　　　　┃
AA:23 = ┃　　　　　　　│　　　　┃　　　　　　　┃　　
AA:24 = ┃　　　　　　　│　　　　┃　　　　　　　┃　　　　　　　　　┃　　01
AA:25 = ┗━━━━━━━┷━━━━┻━━━━━━━┻━━━━━━━━━┛　　↓
AA:26 = 
AA:27 = 一：返回大厅　　　　　二：更衣室　　　　　　三：淋浴区
AA:28 = 四：室内浴池　　　　　五：特色汤池　　　　　六：桑拿房　　　
AA:29 = 七：露天浴池　　　　　八：小型浴池　　　　　九：前往女浴池
AA:30 = 十：偷窥密道　　　　　什：按摩室　　　　　


@GETPLACENAME_0_7(ARG)
#FUNCTION
SELECTCASE ARG
	CASE 701
		TSTR:場所名受渡 = 大厅
	CASE 702
		TSTR:場所名受渡 = 更衣室
	CASE 703
		TSTR:場所名受渡 = 淋浴区
	CASE 704
		TSTR:場所名受渡 = 室内浴池
	CASE 705
		TSTR:場所名受渡 = 特色汤池
	CASE 706
		TSTR:場所名受渡 = 桑拿房
	CASE 707
		TSTR:場所名受渡 = 露天浴池
	CASE 708
		TSTR:場所名受渡 = 小型浴池
	CASE 709
		TSTR:場所名受渡 = 女浴池
	CASE 710
		TSTR:場所名受渡 = 偷窥密道
	CASE 711
		TSTR:場所名受渡 = 按摩室
ENDSELECT


@DRAW_MAP_BG_0_7(SLICED, 表示文字列)
#DIMS REF 表示文字列
#DIMS SLICED
SELECTCASE SLICED
;違う文字を表示させる例
;下部一覧の数字を三桁表示しつつボタン化させる
CASE "一"
	表示文字列 += @"<button value='701'>701</button>"
CASE "二"
	表示文字列 += @"<button value='702'>702</button>"
CASE "三"
	表示文字列 += @"<button value='703'>703</button>"
CASE "四"
	表示文字列 += @"<button value='704'>704</button>"
CASE "五"
	表示文字列 += @"<button value='705'>705</button>"
CASE "六"
	表示文字列 += @"<button value='706'>706</button>"
CASE "七"
	表示文字列 += @"<button value='707'>707</button>"
CASE "八"
	表示文字列 += @"<button value='708'>708</button>"
CASE "九"
	表示文字列 += @"<button value='709'>709</button>"
CASE "十"
	表示文字列 += @"<button value='710'>710</button>"
CASE "什"
	表示文字列 += @"<button value='711'>711</button>"
;ふつうの
CASEELSE
	表示文字列 += @"%SLICED%"
ENDSELECT


@風呂場系列改造メニュー()
#FUNCTIONS
;100~199と999は大本のメニュー操作で使うため、使用しないこと

LOCALS = 改造度假村连接的户外区域。<br><br>
IF 施設改造度:7:0 < 1
	LOCALS += @"■<button value='200'>[温泉设施建设]</button> Lv{施設改造度:7:0}>{施設改造度:7:0 + 1} （需要:300,000卢比＆50ZP）<br>"
ELSE
	LOCALS += @"■[温泉设施改造] Lv{施設改造度:7:0}：上限<br>"
	IF 施設改造度:7:1 < 1
		LOCALS += @"├■<button value='201'>[添加药草汤池]</button> （需要:50,000卢比）<br>"
	ELSE
		LOCALS += @"├■[药草汤池] 已添加<br>"
	ENDIF
	IF 施設改造度:7:2 < 1
		LOCALS += @"├■<button value='202'>[添加灵药汤池]</button> （需要:150,000卢比）<br>"
	ELSE
		LOCALS += @"├■[灵药汤池] 已添加<br>"
	ENDIF
	IF 施設改造度:7:3 < 1
		LOCALS += @"└■<button value='203'>[添加柚子汤池]</button> （需要:30,000卢比）<br>"
	ELSE
		LOCALS += @"└■[柚子汤池] 已添加<br>"
	ENDIF
ENDIF

RETURNF LOCALS


;サウナにいる場合の特殊イベント
@COM_END_PLACEEVENT_0_706
CALL COM_END_PLACEEVENT_0_306
SIF RESULT == 1
	CFLAG:MASTER:現在位置 = 703
RETURN RESULT

@風呂場系列改造実行関数(ARG)
#DIM CONST 薬草湯費 = 50000
#DIM CONST エリクシール湯費 = 150000
#DIM CONST ユズ湯費 = 30000

SELECTCASE ARG
	CASE 200
		DRAWLINE
		PRINTL 大浴场将升级为温泉设施，新增以下功能：
		PRINTL
		PRINTBUTTON "■解锁男女分浴独立地图", 300
		PRINTL 
		PRINTBUTTON "■建造更衣室、淋浴区、室内外浴池", 301
		PRINTL 
		PRINTBUTTON "■开设特色汤池", 302
		PRINTL 
		PRINTBUTTON "■建造桑拿房", 303
		PRINTL 
		PRINTBUTTON "■设置私人浴池", 304
		PRINTL 
		PRINTBUTTON "■建造偷窥密道", 305
		PRINTL 
		PRINTBUTTON "■开设按摩室", 306
		PRINTL 
		PRINTBUTTON "■满足条件时每日体力恢复量翻倍", 307
		PRINTL 
		PRINTL 
		PRINTL 是否改造温泉设施？（需要:300,000卢比＆50ZP / 维护费:每日5,000卢比）
		PRINTBUTTONLC "[0] 确定", 0
		PRINTBUTTONLC "[1] 取消", 1
		BINPUT
		SELECTCASE RESULT
			CASE 0
				IF MONEY < 300000
					PRINTW 卢比不足。
					RETURN
				ELSEIF FLAG:ZP所持量 < 50
					PRINTW ZP不足。
					RETURN
				ENDIF
				施設改造度:7:0 = 1
				施設改造度:8:0 = 1
				MONEY -= 300000
				FLAG:ZP所持量 -= 50
				PRINTL 大浴场已成功改造为温泉设施！
				IF ダンジョンクリアフラグ_名前を亡くした遺跡
					PRINTW (可停留角色上限＋２０)
				ELSE
					PRINTW (可停留角色上限＋１０)
				ENDIF
				CALL 滞在可能キャラ数再計算
				CALL RESET_GRAPH_0
				CALL 履歴データベース登録(CFLAG:MASTER:人物番号, @"将大浴场改造为Lv1温泉设施","実績")
				RETURN
			CASE 1
				RETURN
			CASE 300
				DRAWLINE
				PRINTL 解锁地图后，进入温泉时将切换至独立场景。
				PRINTL 男浴池和女浴池有单独的地图。
				PRINTL 后续改造可扩展地图并强化设施。（暂未实装）
				PRINTW
			CASE 301
				DRAWLINE
				PRINTL 基础温泉设施组合。
				PRINTL 可以从异性更衣室偷看更衣室内部，通过偷窥密道可以看到淋浴区、室内浴池、露天浴池。
				PRINTW
			CASE 302
				DRAWLINE
				PRINTL 每日随机更换的特殊汤池。
				PRINTL 包含药草浴、电流浴、柚子浴等类型。
				PRINTL 不同汤池将触发额外增益效果。
				PRINTW 
			CASE 303
				DRAWLINE
				PRINTL 配备专业桑拿设备与冷水池。
				PRINTL 具有「桑拿爱好者」特质的角色可能在此长时间停留。（暂未实装）
				PRINTW 
			CASE 304
				DRAWLINE
				PRINTL 单人式私密汤池。
				PRINTL 当同行角色好感度达标且无人时，可触发双人共浴事件。
				PRINTW 
			CASE 305
				DRAWLINE
				PRINTL 通过隐蔽通道可安全观察淋浴区、室内浴池、露天浴池。
				PRINTL 注意，若从该通道进入异性浴场会被驱逐。
				PRINTW 
			CASE 306
				DRAWLINE
				PRINTL 提供专业理疗服务的按摩室。
				PRINTL 需支付技师常驻费用（每日5,000卢比）。
				PRINTL 玩家也可亲自进行按摩操作。
				PRINTW 
			CASE 307
				DRAWLINE
				PRINTL 温泉特殊效果：当日结束时体力低于50%的角色，
				PRINTL 将获得双倍体力恢复量。
				PRINTW 
		ENDSELECT
		RESTART
	CASE 201
		DRAWLINE
		PRINTL 特色汤池列表新增「药草汤」。
		PRINTL 效果为每日结束时全体角色体力恢复基础值＋３００。
		PRINTL 
		PRINTFORML 是否添加药草汤？（需要:{薬草湯費}卢比 / 维护费:每日2,000卢比）
		PRINTBUTTONLC "[0] 确定", 0
		PRINTBUTTONLC "[1] 取消", 1
		BINPUT
		SELECTCASE RESULT
			CASE 0
				IF MONEY < 薬草湯費
					PRINTW 卢比不足。
					RETURN
				ENDIF
				施設改造度:7:1 = 1
				施設改造度:8:1 = 1
				MONEY -= 薬草湯費
				PRINTL 特色汤池列表已添加药草汤！
				PRINTW (每日结束时基础体力恢复值＋３００)
				CALL 履歴データベース登録(CFLAG:MASTER:人物番号, @"特色汤池列表添加药草汤","実績")
				RETURN
			CASE 1
				RETURN
		ENDSELECT
		RESTART
	CASE 202
		DRAWLINE
		PRINTL 特色汤池列表新增「灵药汤」。
		PRINTL 效果为仅体力耗尽状态角色每日结束时体力恢复基础值＋１０００。
		PRINTL 
		PRINTFORML 是否添加灵药汤？（需要:{エリクシール湯費}卢比 / 维护费:每日10,000卢比）
		PRINTBUTTONLC "[0] 确定", 0
		PRINTBUTTONLC "[1] 取消", 1
		BINPUT
		SELECTCASE RESULT
			CASE 0
				IF MONEY < エリクシール湯費
					PRINTW 卢比不足。
					RETURN
				ENDIF
				施設改造度:7:2 = 1
				施設改造度:8:2 = 1
				MONEY -= エリクシール湯費
				PRINTL 特色汤池列表已添加灵药汤！
				PRINTW (体力耗尽角色每日体力恢复基础值＋１０００)
				CALL 履歴データベース登録(CFLAG:MASTER:人物番号,@"特色汤池列表添加灵药汤","実績")
				RETURN
			CASE 1
				RETURN
		ENDSELECT
		RESTART
	CASE 203
		DRAWLINE
		PRINTL 特色汤池列表新增「柚子汤」。
		PRINTL 效果为路人游客来访概率小幅提升。
		PRINTL 
		PRINTFORML 是否添加柚子汤？（需要:{ユズ湯費}卢比 / 维护费:每日1,000卢比）
		PRINTBUTTONLC "[0] 确定", 0
		PRINTBUTTONLC "[1] 取消", 1
		BINPUT
		SELECTCASE RESULT
			CASE 0
				IF MONEY < ユズ湯費
					PRINTW 卢比不足。
					RETURN
				ENDIF
				施設改造度:7:3 = 1
				施設改造度:8:3 = 1
				MONEY -= ユズ湯費
				PRINTL 特色汤池列表已添加柚子汤！
				PRINTW (路人游客来访数微量增加)
				CALL 履歴データベース登録(CFLAG:MASTER:人物番号,@"特色汤池列表添加柚子汤","実績")
				RETURN
			CASE 1
				RETURN
		ENDSELECT
		RESTART
ENDSELECT







