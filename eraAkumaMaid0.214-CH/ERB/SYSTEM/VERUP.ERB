;バージョン違いによるフラグの変換等の処理の記述。
@VERUP_eraAkumaMaid, ARG
#DIM LCOUNT
#DIM LCOUNT2
#DIMS MEMOS, 10
#DIMS EVENT_TABLE
#DIMS CHOICES
#DIM MEMO_LINECOUNT
#DIM MOB
#DIM MOB_A
#DIM MOB_B





;現実時間フラグ取得
;CALL GET_REALTIMEFORFLAG

;角色の更新日時などを取得
CALL GET_UPDATE_ORDER

SIF FLAG:VER_eraAkumaMaid >= GAMEBASE_VERSION
	RETURN 0

CALL PRINT_UPDATE_MAIDFACE

;以下に更新内容を記述

IF FLAG:VER_eraAkumaMaid < 5
	IF COND("昼") && TEXTS("曜日") != "日"
		SAVESTR:現在位置 = 部室
	ELSE
		SAVESTR:現在位置 = 自室
	ENDIF
	FLAG:VER_eraAkumaMaid = 5
ENDIF
IF FLAG:VER_eraAkumaMaid < 7
	FOR LCOUNT, 2, CHARANUM
		SIF CSTR:LCOUNT:称号 == "実母"
			CSTR:LCOUNT:称号 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "称号") )%
		SIF CFLAG:LCOUNT:初期仲間 || COND("血縁", LCOUNT)
			CALL SETFLAG, "同居：一直", LCOUNT
	NEXT
	FLAG:VER_eraAkumaMaid = 7
ENDIF
IF FLAG:VER_eraAkumaMaid < 9
	CALL DEL_CEVENT, "固定：貧尻", MASTER
	CALL DEL_CEVENT, "除外：貧尻", MASTER
	FLAG:VER_eraAkumaMaid = 9
ENDIF
IF FLAG:VER_eraAkumaMaid < 13
	FOR LCOUNT, 2, CHARANUM
		;麦莉爱娜フラグ修正
		IF NO:LCOUNT == 10
			TALENT:LCOUNT:炮友 = 3
			CSTR:LCOUNT:喜欢的颜色 = 黒
			CSTR:LCOUNT:建议 = 包容力
			CSTR:LCOUNT:関係 = 保護者
		ENDIF
	NEXT
	FLAG:VER_eraAkumaMaid = 13
ENDIF
IF FLAG:VER_eraAkumaMaid < 14
	FOR LCOUNT, 2, CHARANUM
		;フラグ修正
		IF NO:LCOUNT == 15
			CSTR:LCOUNT:建议 = 理性主義
			CSTR:LCOUNT:関係 = 借住
		ENDIF
	NEXT
	FLAG:VER_eraAkumaMaid = 14
ENDIF
IF FLAG:VER_eraAkumaMaid < 15
	TALENT:MASTER:兩面通吃 = 1
	FOR LCOUNT, 2, CHARANUM
		SIF COND("口服避孕薬派", LCOUNT)
			CFLAG:LCOUNT:口服避孕薬 = 1
	NEXT
	FLAG:VER_eraAkumaMaid = 15
ENDIF
IF FLAG:VER_eraAkumaMaid < 16
	FOR LCOUNT, 2, CHARANUM
		;フラグ修正
		IF NO:LCOUNT == 7
			TALENT:LCOUNT:16 = 0
			SIF TALENT:LCOUNT:娇小 != 2
				CALL SETFLAG_3SIZE, "娇小Ⅱ化", LCOUNT
			SIF EXP:LCOUNT:Ａ性交経験 == 0
				TALENT:LCOUNT:Ａ処女 = 1
		ENDIF
	NEXT
	FLAG:VER_eraAkumaMaid = 16
ENDIF
IF FLAG:VER_eraAkumaMaid < 19
	FOR LCOUNT, 1, CHARANUM
		VARSET PALAM:LCOUNT:0
		VARSET CUP:LCOUNT:0
		;フラグ修正
		SIF COND("部室出現可能", LCOUNT) == 0 && COND("同居中", LCOUNT) == 0
			CALL SETFLAG, "同居：一直", LCOUNT
		SELECTCASE NO:LCOUNT
		CASE 7
			SIF TALENT:LCOUNT:娇小 != 2
				CALL SETFLAG_3SIZE, "娇小Ⅱ化", LCOUNT
		CASE 15
			CFLAG:LCOUNT:夜型 = 1
		CASE 17
			CALL SET_GOUI, "检查阴部", LCOUNT
			CFLAG:LCOUNT:夜型 = 1
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 19
ENDIF
IF FLAG:VER_eraAkumaMaid < 22
	FOR LCOUNT, 1, CHARANUM
		SIF CSTR:LCOUNT:初期变量 == ""
			CALL SETFLAG, "初期变量記録", LCOUNT
	NEXT
	FLAG:VER_eraAkumaMaid = 22
ENDIF
IF FLAG:VER_eraAkumaMaid < 24
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 14
			SIF TALENT:LCOUNT:男性 == 0
				TALENT:LCOUNT:性反転 = 1
		CASEELSE
			SIF CFLAG:LCOUNT:3
				TALENT:LCOUNT:性反転 = 1
		ENDSELECT
	NEXT

	FLAG:VER_eraAkumaMaid = 24
ENDIF
IF FLAG:VER_eraAkumaMaid < 27
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 19
			CSTR:LCOUNT:建议 = 淫精の伝道師
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 27
ENDIF
IF FLAG:VER_eraAkumaMaid < 31
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 21
			TALENT:LCOUNT:動物耳 = 8
			TALENT:LCOUNT:尾巴 = 8
		CASE 22
			TALENT:LCOUNT:動物耳 = 0
			TALENT:LCOUNT:尾巴 = 7
			TALENT:LCOUNT:角 = 7
			TALENT:LCOUNT:翼 = 7
			CSTR:LCOUNT:茶 = 烏龍茶/麦茶
		ENDSELECT
	NEXT
	CALL SETFLAG, "年月日"

	FLAG:VER_eraAkumaMaid = 31
ENDIF
IF FLAG:VER_eraAkumaMaid < 32
	FOR LCOUNT, 1, CHARANUM
		SIF EXP:LCOUNT:Ａ性交経験 == 0 && STRCOUNT(CSTR:LCOUNT:特別経験, "Ａ処女喪失") == 0
			TALENT:LCOUNT:Ａ処女 = 1
		SIF EXP:LCOUNT:尿道性交経験 == 0 && STRCOUNT(CSTR:LCOUNT:特別経験, "尿道処女喪失") == 0
			TALENT:LCOUNT:尿道処女 = 1
	NEXT
	FLAG:VER_eraAkumaMaid = 32
ENDIF

IF FLAG:VER_eraAkumaMaid < 34
	PRINTL ・discordでJakuran桑に、サロゲートペアで表示していた絵文字をPRINT_IMGで記述するパッチを作ってもらったので組み込みました
	PRINT 　例えば便当は
	PRINTFORM %UNI("便当")%
	PRINTL  と表示されます
	PRINTL 　有がとうございます
	PRINTL ・_fixed.configに　描画インターフェース:TEXTRENDERER　追加
	PRINTL 

	FLAG:VER_eraAkumaMaid = 34
ENDIF
IF FLAG:VER_eraAkumaMaid < 35
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 21
			TALENT:LCOUNT:淫乱 = 0
			SIF ABL:LCOUNT:欲望 < 3
				ABL:LCOUNT:欲望 = 3
		ENDSELECT
	NEXT

	FLAG:VER_eraAkumaMaid = 35
ENDIF
IF FLAG:VER_eraAkumaMaid < 37
	SIF SAVESTR:現在位置 == "自室"
		SAVESTR:現在位置 = 居間
	FOR LCOUNT, 1, CHARANUM
		CSTR:LCOUNT:喜欢的房间 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "喜欢的房间") )%
		CSTR:LCOUNT:現在位置 = %SAVESTR:現在位置%
	NEXT
	FLAG:VER_eraAkumaMaid = 37
ENDIF
IF FLAG:VER_eraAkumaMaid < 38
	FOR LCOUNT, 1, CHARANUM
		CSTR:LCOUNT:出現場所 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "出現場所") )%
	NEXT
	FLAG:VER_eraAkumaMaid = 38
ENDIF
IF FLAG:VER_eraAkumaMaid < 39
	FOR LCOUNT, 1, CHARANUM
		CALL GET_EXABL, LCOUNT
	NEXT

	FLAG:VER_eraAkumaMaid = 39
ENDIF
IF FLAG:VER_eraAkumaMaid < 41
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 1
			SIF TALENT:LCOUNT:喜欢的体位 == 1p9
				TALENT:LCOUNT:喜欢的体位 = 1p5
		CASE 2
			SIF TALENT:LCOUNT:喜欢的体位 == 1p9
				TALENT:LCOUNT:喜欢的体位 = 1p0
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 41
ENDIF
IF FLAG:VER_eraAkumaMaid < 48
	FOR LCOUNT, 1, CHARANUM
		CALL SETFLAG, "陰核の詳細設定", LCOUNT
		;胖次没収の合意を胖次交易に変更
		IF COND("合意：胖次没収", LCOUNT)
			CALL DEL_GOUI, "胖次没収", LCOUNT
			CALL SET_GOUI, "胖次交易", LCOUNT
		ENDIF
	NEXT
	CALL SETFLAG, "年月日"
	FLAG:VER_eraAkumaMaid = 48
ENDIF
IF FLAG:VER_eraAkumaMaid < 49
	FOR LCOUNT, 1, CHARANUM
		;名器の設定変更
		TALENT:LCOUNT:Ｖ名器 = LIMIT(TALENT:LCOUNT:Ｖ名器 - 1, CSVTALENT(NO:LCOUNT, GETNUM(TALENT, "Ｖ名器") ), 3)
		TALENT:LCOUNT:Ａ名器 = LIMIT(TALENT:LCOUNT:Ａ名器 - 1, CSVTALENT(NO:LCOUNT, GETNUM(TALENT, "Ａ名器") ), 3)
		TALENT:LCOUNT:喉名器 = LIMIT(TALENT:LCOUNT:喉名器 - 1, CSVTALENT(NO:LCOUNT, GETNUM(TALENT, "喉名器") ), 3)
		TALENT:LCOUNT:尿道名器 = LIMIT(TALENT:LCOUNT:尿道名器 - 1, CSVTALENT(NO:LCOUNT, GETNUM(TALENT, "尿道名器") ), 3)
		CALL GET_EXABL2, LCOUNT
	NEXT

	FLAG:VER_eraAkumaMaid = 49
ENDIF
IF FLAG:VER_eraAkumaMaid < 51
	;素質[お気に入り]を無くす
	CVARSET TALENT, 154
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 18
			TALENT:LCOUNT:有男朋友 = 2
		ENDSELECT
		CALL SETFLAG, "属性", LCOUNT
	NEXT
	FLAG:VER_eraAkumaMaid = 51
ENDIF
IF FLAG:VER_eraAkumaMaid < 53
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 20
			SIF GETBIT(TALENT:LCOUNT:喜欢的体位, 9)
				TALENT:LCOUNT:喜欢的体位 = 1p0
			TALENT:LCOUNT:避妊の護符 = 1
			CSTR:LCOUNT:茶 = 黒豆茶/麦茶/紅茶
			CSTR:LCOUNT:喜欢的东西 = 远古游戏/小説/児童書
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 53
ENDIF
IF FLAG:VER_eraAkumaMaid < 58
	;约会的约定フラグのバグフィクス
	CVARSET CFLAG, GETNUM(CFLAG, "约会的约定")
	FLAG:VER_eraAkumaMaid = 58
ENDIF
IF FLAG:VER_eraAkumaMaid < 61
	FOR LCOUNT, 1, CHARANUM
		FOR LCOUNT2, 40, 46
			JUEL:LCOUNT:LCOUNT2 = 0
		NEXT
	NEXT
	FLAG:VER_eraAkumaMaid = 61
ENDIF
IF FLAG:VER_eraAkumaMaid < 63
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE EXP:LCOUNT:孕ませ経験
		CASE IS >= 30
			TALENT:LCOUNT:小种马 = 2
		CASE IS >= 10
			TALENT:LCOUNT:小种马 = 1
		CASEELSE
			TALENT:LCOUNT:小种马 = 0
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 63
ENDIF
IF FLAG:VER_eraAkumaMaid < 65
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 30
			TALENT:LCOUNT:精灵耳 = 1
			CSTR:LCOUNT:初期变量 += "精灵耳_1/"
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 65
ENDIF
IF FLAG:VER_eraAkumaMaid < 69
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 31
			TALENT:LCOUNT:炮友 = 2
			BASE:LCOUNT:魂 += EXP:LCOUNT:强制绝顶回数*5
			CALL GET_EXTALENT, LCOUNT
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 69
ENDIF
IF FLAG:VER_eraAkumaMaid < 70
	CVARSET CFLAG, 8
	FLAG:VER_eraAkumaMaid = 70
ENDIF
IF FLAG:VER_eraAkumaMaid < 75
	FOR LCOUNT, 2, CHARANUM
		SIF CFLAG:LCOUNT:加入日
			CONTINUE
		IF CFLAG:LCOUNT:初期仲間
			CFLAG:LCOUNT:加入日 = 1
		ELSE
			CFLAG:LCOUNT:加入日 = 2
		ENDIF
	NEXT
	FLAG:VER_eraAkumaMaid = 75
ENDIF
IF FLAG:VER_eraAkumaMaid < 76
	FOR LCOUNT, 2, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 2
			CSTR:LCOUNT:喜欢的胖次 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "喜欢的胖次") )%
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 76
ENDIF
IF FLAG:VER_eraAkumaMaid < 78
	FOR LCOUNT, 2, CHARANUM
		SIF CSTR:LCOUNT:今年の泳装 == ""
			CFLAG:LCOUNT:泳装選び = 0
	NEXT
	FLAG:VER_eraAkumaMaid = 78
ENDIF
IF FLAG:VER_eraAkumaMaid < 81
	BASE:MASTER:欲求不満 = 0
	FLAG:VER_eraAkumaMaid = 81
ENDIF
IF FLAG:VER_eraAkumaMaid < 82
	FOR LCOUNT, 2, CHARANUM
		SIF COND("危険日存在", LCOUNT) == 0 || TALENT:LCOUNT:相思相愛 == 0
			CALL DEL_GOUI, "危険日生性交", LCOUNT
	NEXT
	FLAG:VER_eraAkumaMaid = 82
ENDIF
IF FLAG:VER_eraAkumaMaid < 86
	FOR LCOUNT, 1, CHARANUM
		;種族未設定の角色を人类に
		SIF CSTR:LCOUNT:種族 == ""
			CSTR:LCOUNT:種族 = 人类
		;素質の魔法使、式神、驱魔人を種族に移行
		SIF TALENT:LCOUNT:13
			CSTR:LCOUNT:種族 += "_魔法使"
		TALENT:LCOUNT:13 = 0
		SIF TALENT:LCOUNT:16
			CSTR:LCOUNT:種族 += "_式神"
		TALENT:LCOUNT:16 = 0
		SIF TALENT:LCOUNT:19
			CSTR:LCOUNT:種族 += "_驱魔人"
		TALENT:LCOUNT:19 = 0
		;避妊方法
		SIF GETBIT(TALENT:LCOUNT:176, 0)
			TALENT:LCOUNT:口服避孕薬派 = 1
		SIF GETBIT(TALENT:LCOUNT:176, 1)
			TALENT:LCOUNT:口服避孕薬派 = -1
		SIF GETBIT(TALENT:LCOUNT:176, 2)
			TALENT:LCOUNT:避孕套派 = 1
		SIF GETBIT(TALENT:LCOUNT:176, 3)
			TALENT:LCOUNT:避孕套派 = -1
		TALENT:LCOUNT:176 = 0
		;炮友
		SIF GETBIT(TALENT:LCOUNT:炮友, 2)
			TALENT:LCOUNT:炮友 = 3
		;阴茎
		IF GETBIT(TALENT:LCOUNT:24, 12)
			TALENT:LCOUNT:包茎 = 2
		ELSEIF GETBIT(TALENT:LCOUNT:24, 11)
			TALENT:LCOUNT:包茎 = 1
		ENDIF
		IF GETBIT(TALENT:LCOUNT:24, 5)
			TALENT:LCOUNT:阴茎 = 5
		ELSEIF GETBIT(TALENT:LCOUNT:24, 4)
			TALENT:LCOUNT:阴茎 = 4
		ELSEIF GETBIT(TALENT:LCOUNT:24, 3)
			TALENT:LCOUNT:阴茎 = 3
		ELSEIF GETBIT(TALENT:LCOUNT:24, 2)
			TALENT:LCOUNT:阴茎 = 2
		ELSEIF GETBIT(TALENT:LCOUNT:24, 1)
			TALENT:LCOUNT:阴茎 = 1
		ELSEIF GETBIT(TALENT:LCOUNT:24, 0)
			TALENT:LCOUNT:阴茎 = 0
		ENDIF
		TALENT:LCOUNT:24 = 0
		;乳頭
		IF GETBIT(TALENT:LCOUNT:37, 23)
			TALENT:LCOUNT:巨乳輪 = 3
		ELSEIF GETBIT(TALENT:LCOUNT:37, 22)
			TALENT:LCOUNT:巨乳輪 = 2
		ELSEIF GETBIT(TALENT:LCOUNT:37, 21)
			TALENT:LCOUNT:巨乳輪 = 1
		ELSEIF GETBIT(TALENT:LCOUNT:37, 20)
			TALENT:LCOUNT:巨乳輪 = 0
		ENDIF
		IF GETBIT(TALENT:LCOUNT:37, 12)
			TALENT:LCOUNT:陥没乳頭 = 2
		ELSEIF GETBIT(TALENT:LCOUNT:37, 11)
			TALENT:LCOUNT:陥没乳頭 = 1
		ENDIF
		IF GETBIT(TALENT:LCOUNT:37, 3)
			TALENT:LCOUNT:乳頭肥大 = 3
		ELSEIF GETBIT(TALENT:LCOUNT:37, 2)
			TALENT:LCOUNT:乳頭肥大 = 2
		ELSEIF GETBIT(TALENT:LCOUNT:37, 1)
			TALENT:LCOUNT:乳頭肥大 = 1
		ELSEIF GETBIT(TALENT:LCOUNT:37, 0)
			TALENT:LCOUNT:乳頭肥大 = 0
		ENDIF
		TALENT:LCOUNT:37 = 0
		;陰核
		SIF GETBIT(TALENT:LCOUNT:38, 11)
			TALENT:LCOUNT:陰核包茎 = 1
		IF GETBIT(TALENT:LCOUNT:38, 3)
			TALENT:LCOUNT:陰核肥大 = 3
		ELSEIF GETBIT(TALENT:LCOUNT:38, 2)
			TALENT:LCOUNT:陰核肥大 = 2
		ELSEIF GETBIT(TALENT:LCOUNT:38, 1)
			TALENT:LCOUNT:陰核肥大 = 1
		ELSEIF GETBIT(TALENT:LCOUNT:38, 0)
			TALENT:LCOUNT:陰核肥大 = 0
		ENDIF
		TALENT:LCOUNT:38 = 0

		;少々矛盾あるが初期变量も書き換える
		VARSET LOCALS
		SPLIT CSTR:LCOUNT:初期变量, "/", LOCALS
		CSTR:LCOUNT:初期变量 = /
		FOR LCOUNT2, 0, 100
			IF STRCOUNT(LOCALS:LCOUNT2, "阴茎")
				CSTR:LCOUNT:初期变量 += @"阴茎_{TALENT:LCOUNT:阴茎}\/包茎_{TALENT:LCOUNT:包茎}\/"
			ELSEIF STRCOUNT(LOCALS:LCOUNT2, "乳頭")
				CSTR:LCOUNT:初期变量 += @"乳頭肥大_{TALENT:LCOUNT:乳頭肥大}\/陥没乳頭_{TALENT:LCOUNT:陥没乳頭}\/巨乳輪_{TALENT:LCOUNT:巨乳輪}\/"
			ELSEIF STRCOUNT(LOCALS:LCOUNT2, "陰核")
				CSTR:LCOUNT:初期变量 += @"陰核肥大_{TALENT:LCOUNT:陰核肥大}\/陰核包茎_{TALENT:LCOUNT:陰核包茎}\/"
			ELSEIF LOCALS:LCOUNT2 != ""
				CSTR:LCOUNT:初期变量 += @"%LOCALS:LCOUNT2%\/"
			ENDIF
		NEXT
	NEXT
	FLAG:VER_eraAkumaMaid = 86
ENDIF
IF FLAG:VER_eraAkumaMaid < 87
	FOR LCOUNT, 2, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 23
			CALL DEL_CEVENT_GROUP, "当日约会", LCOUNT
		CASE 26
			CSTR:LCOUNT:種族 = 人类_魔法使
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 87
ENDIF
IF FLAG:VER_eraAkumaMaid < 88
	FOR LCOUNT, 2, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 1, 11, 12, 18, 20, 21, 22, 27, 30
			TALENT:LCOUNT:料理擅長 = 1
		CASE 34
			TALENT:LCOUNT:料理擅長 = 1
			TALENT:LCOUNT:真面目 = 1
		ENDSELECT
		SIF TALENT:LCOUNT:料理擅長
			CSTR:LCOUNT:初期变量 += "料理擅長_1/"
	NEXT
	FLAG:VER_eraAkumaMaid = 88
ENDIF
IF FLAG:VER_eraAkumaMaid < 93
	CALL SETFLAG, "要受精確率の設定", MASTER
	FOR LCOUNT, 2, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 14
			TALENT:LCOUNT:精灵耳 = 2
			CSTR:LCOUNT:初期变量 += "精灵耳_2/"
		CASE 37
			CSTR:LCOUNT:学年 = ２年生
		ENDSELECT
		CALL SETFLAG, "要受精確率の設定", LCOUNT
		;一回重置
		CALL VARSET_MAIDFACE, LCOUNT
	NEXT
	FLAG:VER_eraAkumaMaid = 93
ENDIF
IF FLAG:VER_eraAkumaMaid < 99
	FOR LCOUNT, 2, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 20
			TALENT:LCOUNT:避妊の護符 = 0
			TALENT:LCOUNT:口服避孕薬派 = 1
			CSTR:LCOUNT:出現場所 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "出現場所") )%
			CALL VARSET_MAIDFACE, LCOUNT
		CASE 31, 34
			CSTR:LCOUNT:出現場所 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "出現場所") )%
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 99
ENDIF
IF FLAG:VER_eraAkumaMaid < 102
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 17
			CFLAG:LCOUNT:晒痕強度 = 0
			CSTR:LCOUNT:晒痕 = 
		CASE 32
			NAME:LCOUNT = %CSVNAME(NO:LCOUNT)%
		CASE 42
			TALENT:LCOUNT:外見年齢 = 1
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 102
ENDIF
IF FLAG:VER_eraAkumaMaid < 103
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 15
			TALENT:LCOUNT:精灵耳 = 2,
			TALENT:LCOUNT:角 = 1
			TALENT:LCOUNT:翼 = 1
			CALL GET_EXTALENT, LCOUNT
		CASE 35
			TALENT:LCOUNT:外見年齢 = 2
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 103
ENDIF
IF FLAG:VER_eraAkumaMaid < 104
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 25
			TALENT:LCOUNT:真面目 = 1
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 104
ENDIF
IF FLAG:VER_eraAkumaMaid < 105
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 15
			TALENT:LCOUNT:自制心 = 1
		ENDSELECT
		IF COND("学生", LCOUNT) == 0
			BASE:LCOUNT:学力 = 0
			CFLAG:LCOUNT:予想点 = 0
		ENDIF
	NEXT
	FLAG:VER_eraAkumaMaid = 105
ENDIF
IF FLAG:VER_eraAkumaMaid < 107
	FOR LCOUNT, 2, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 35
			CSTR:LCOUNT:茶 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "茶") )%
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 107
ENDIF
IF FLAG:VER_eraAkumaMaid < 108
	FOR LCOUNT, 2, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 40
			CSTR:LCOUNT:建议 = 催精师
			TALENT:LCOUNT:料理擅長 = 1
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 108
ENDIF
IF FLAG:VER_eraAkumaMaid < 109
	FOR LCOUNT, 2, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 40
			CSTR:LCOUNT:建议 = 催精师
			TALENT:LCOUNT:料理擅長 = 1
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 109
ENDIF
IF FLAG:VER_eraAkumaMaid < 110
	FOR LCOUNT, 2, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 36
			CALL DEL_CEVENT, "肛門性交", LCOUNT
			SIF ABL:LCOUNT:Ａ感覚 < 3
				CALL SET_CEVENT, "合意禁止：肛門性交", LCOUNT
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 110
ENDIF
IF FLAG:VER_eraAkumaMaid < 112
	VARSET FLAG, 0, 200, 300
	FLAG:VER_eraAkumaMaid = 112
ENDIF
IF FLAG:VER_eraAkumaMaid < 113
	SIF DAY >= 2
		FLAG:勧誘可能 = 1
	FOR LCOUNT, 2, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 23
			IF CEVENT("淫紋：受精確認初回／玛丽", LCOUNT)
				CALL DEL_CEVENT, "淫紋：受精確認初回／玛丽", LCOUNT
				CALL SET_CEVENT, "淫紋イベント：受精確認初回／玛丽", LCOUNT
			ENDIF
		CASE 29
			TALENT:LCOUNT:筋肉 = 1
			CSTR:LCOUNT:茶 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "茶") )%
		CASE 44
			TALENT:LCOUNT:子宮性感 = 1
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 113
ENDIF
IF FLAG:VER_eraAkumaMaid < 114
	FOR LCOUNT, 2, CHARANUM
		SIF CSTR:LCOUNT:陰毛的喜好 == "保养完毕み"
			CSTR:LCOUNT:陰毛的喜好 = 保养完毕
		SELECTCASE NO:LCOUNT
		CASE 30
			IF CEVENT("淫紋：受精確認初回／奥丝卡", LCOUNT)
				CALL DEL_CEVENT, "淫紋：受精確認初回／奥丝卡", LCOUNT
				CALL SET_CEVENT, "淫紋イベント：受精確認初回", LCOUNT
			ENDIF
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 114
ENDIF
IF FLAG:VER_eraAkumaMaid < 116
	FLAG:26 = 0
	FLAG:VER_eraAkumaMaid = 116
ENDIF
IF FLAG:VER_eraAkumaMaid < 120
	FOR LCOUNT, 2, CHARANUM
		SIF STRCOUNT(CSTR:LCOUNT:特別経験, "第一次的对象") == 0
			CONTINUE
		VARSET LOCALS
		SPLIT CSTR:LCOUNT:特別経験, "/", LOCALS
		CSTR:LCOUNT:特別経験 = \/
		FOR LCOUNT2, 0, 50
			SELECTCASE LOCALS:LCOUNT2
			CASE ""
				CONTINUE
			CASEELSE
				IF STRCOUNT(LOCALS:LCOUNT2, "第一次的对象")
					CSTR:LCOUNT:特別経験 += @"%LOCALS:LCOUNT2%%CALLNAME:MASTER%の処女を美味しく頂いた\/"
				ELSE
					CSTR:LCOUNT:特別経験 += @"%LOCALS:LCOUNT2%\/"
				ENDIF
			ENDSELECT
		NEXT
	NEXT
	FLAG:VER_eraAkumaMaid = 120
ENDIF
IF FLAG:VER_eraAkumaMaid < 121
	CLEARBIT FLAG:換装, 0
	FLAG:換装 = CLEARBITS(FLAG:換装, 10, 20)
	FOR LCOUNT, 1, CHARANUM
		CSTR:LCOUNT:今年の泳装 = %CSTR:LCOUNT:93%
		;アプデに伴うデータ移植
		SIF CFLAG:LCOUNT:髪型変更のお願い中 && CSTR:LCOUNT:普段の髪型 != ""
			CSTR:LCOUNT:87 = %CSTR:LCOUNT:普段の髪型%
		SIF STRCOUNT(CSTR:LCOUNT:87, "髪長") == 0
			CSTR:LCOUNT:87 = 
		SIF STRCOUNT(CSTR:LCOUNT:89, "眼形") == 0
			CSTR:LCOUNT:89 = 
		CSTR:LCOUNT:髪色 = %EXTSTR(CSTR:LCOUNT:87, "髪色(", ")")%
		CSTR:LCOUNT:髪長 = %EXTSTR(CSTR:LCOUNT:87, "髪長(", ")")%
		CSTR:LCOUNT:前髪 = %EXTSTR(CSTR:LCOUNT:87, "前髪(", ")")%
		CSTR:LCOUNT:後髪 = %EXTSTR(CSTR:LCOUNT:87, "後髪(", ")")%
		CSTR:LCOUNT:改髪 = %EXTSTR(CSTR:LCOUNT:87, "改髪(", ")")%
		CSTR:LCOUNT:呆毛 = %EXTSTR(CSTR:LCOUNT:87, "呆毛(", ")")%
		CSTR:LCOUNT:蝴蝶結 = %EXTSTR(CSTR:LCOUNT:87, "蝴蝶結(", ")")%
		CSTR:LCOUNT:瞳色 = %EXTSTR(CSTR:LCOUNT:89, "瞳色(", ")")%
		CSTR:LCOUNT:眼形 = %EXTSTR(CSTR:LCOUNT:89, "眼形(", ")")%
		IF STRCOUNT(CSTR:LCOUNT:89, "白眼描写")
			CSTR:LCOUNT:白眼 = %EXTSTR(CSTR:LCOUNT:89, "白眼描写(", ")")%
		ELSE
			CSTR:LCOUNT:白眼 = %EXTSTR(CSTR:LCOUNT:89, "白眼(", ")")%
		ENDIF
		SIF CSTR:LCOUNT:白眼 == "有"
			CSTR:LCOUNT:白眼 = 白眼
		CSTR:LCOUNT:眉形 = %EXTSTR(CSTR:LCOUNT:89, "眉形(", ")")%
		CSTR:LCOUNT:嘴形 = %EXTSTR(CSTR:LCOUNT:89, "嘴形(", ")")%

		CALL RESET_OTHER, "", LCOUNT

		CSTR:LCOUNT:点心 = %CSTR:LCOUNT:99%
		CALL DEL_CEVENT_GROUP, "変な柄", LCOUNT
		;髪型と表情のCSTRを分散再設定
		FOR LCOUNT2, 90, 110
			SELECTCASE CSTRNAME:LCOUNT2
			CASE ""
				CSTR:LCOUNT:LCOUNT2 = 
			CASEELSE
				SIF CSTR:LCOUNT:LCOUNT2 == ""
					CSTR:LCOUNT:LCOUNT2 = %CSVCSTR(NO:LCOUNT, LCOUNT2)%
			ENDSELECT
		NEXT
		SELECTCASE NO:LCOUNT
		CASE 22
			CSTR:LCOUNT:瞳色 = 青_金
		CASE 25
			SIF CEVENT("灯服買った", LCOUNT) && FINDCHARA(NO, 35) > 0
				CALL SET_CEVENT, "灯服買った", FINDCHARA(NO, 35)
		CASE 29
			CSTR:LCOUNT:点心 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "点心") )%
		CASE 30
			CSTR:LCOUNT:白眼 = 黒目
		CASE 44
			CALL DEL_CEVENT_GROUP, "飾品", LCOUNT
		ENDSELECT
	NEXT
	CVARSET CSTR, GETNUM(CSTR, "普段の髪型")
	CVARSET CFLAG, GETNUM(CFLAG, "髪型変更のお願い中")
	CVARSET CSTR, 89
	FLAG:VER_eraAkumaMaid = 121
ENDIF
IF FLAG:VER_eraAkumaMaid < 124
	;TALENTの番号変更
	FOR LCOUNT, 1, CHARANUM
		TALENT:LCOUNT:避妊の護符 = TALENT:LCOUNT:194
		TALENT:LCOUNT:避孕套派 = TALENT:LCOUNT:199
		TALENT:LCOUNT:口服避孕薬派 = TALENT:LCOUNT:198
		TALENT:LCOUNT:常時尿道塞 = TALENT:LCOUNT:197
		TALENT:LCOUNT:常時Ａ肛塞 = TALENT:LCOUNT:196
		TALENT:LCOUNT:常時Ｖ振動棒 = TALENT:LCOUNT:195
	NEXT
	FLAG:VER_eraAkumaMaid = 124
ENDIF
IF FLAG:VER_eraAkumaMaid < 125
	FOR LCOUNT, 1, CHARANUM
		CALL GET_EXTALENT, LCOUNT
		SELECTCASE NO:LCOUNT
		CASE 27
			FOR LCOUNT2, 90, 110
				CSTR:LCOUNT:LCOUNT2 = %CSVCSTR(NO:LCOUNT, LCOUNT2)%
			NEXT
			CFLAG:LCOUNT:髪型変更のお願い中 = 0
			CALL SETFLAG, "普段の髪型記録", LCOUNT
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 125
ENDIF
IF FLAG:VER_eraAkumaMaid < 128
	TALENT:MASTER:復活 *= 100
	FLAG:VER_eraAkumaMaid = 128
ENDIF
IF FLAG:VER_eraAkumaMaid < 129
	FOR LCOUNT, 2, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 25
			TALENT:LCOUNT:甜言蜜语 = 1
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 129
ENDIF
IF FLAG:VER_eraAkumaMaid < 131
	FOR LCOUNT, 2, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 22
			TALENT:LCOUNT:体寒 = 1
		CASE 25
			CSTR:LCOUNT:種族 = 堕天使_天使
		CASE 44
			SIF CSTR:LCOUNT:前髪 == "乱髪"
				CSTR:LCOUNT:前髪 = 乱髪３
		CASE 50
			SIF CFLAG:LCOUNT:髪型変更のお願い中 == 0 && CSTR:LCOUNT:前髪 == "斜刘海"
				CSTR:LCOUNT:前髪 = 透明刘海
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 131
ENDIF
IF FLAG:VER_eraAkumaMaid < 132
	FOR LCOUNT, 2, CHARANUM
		CFLAG:LCOUNT:6000 = CFLAG:LCOUNT:6100

		SELECTCASE NO:LCOUNT
		CASE 31
			SIF CSTR:LCOUNT:前髪 == "乱髪"
				CSTR:LCOUNT:前髪 = 乱髪２
			SIF CSTR:LCOUNT:後髪 == "自然"
				CSTR:LCOUNT:後髪 = 卷髪
			SIF CSTR:LCOUNT:白眼 == "无眼白"
				CSTR:LCOUNT:白眼 = 白眼
		CASE 34
			SIF CSTR:LCOUNT:前髪 == "自然刘海"
				CSTR:LCOUNT:前髪 = 透明刘海２
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 132
ENDIF
IF FLAG:VER_eraAkumaMaid < 133
	FOR LCOUNT, 2, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 34
			TALENT:LCOUNT:容易迷恋 = 0
			TALENT:LCOUNT:討厭男人 = 0
			TALENT:LCOUNT:兩面通吃 = 1
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 133
ENDIF
IF FLAG:VER_eraAkumaMaid < 134
	FOR LCOUNT, 1, CHARANUM
		CALL SETFLAG, "性器年齢", LCOUNT
		SELECTCASE NO:LCOUNT
		CASE 49
			SIF CEVENT("名前のある死神", LCOUNT)
				CSTR:LCOUNT:ふりがな = あーりゃ
		CASE 51
			SIF CSTR:LCOUNT:後髪 == "自然"
				CSTR:LCOUNT:後髪 = 卷髪
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 134
ENDIF
IF FLAG:VER_eraAkumaMaid < 135
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 35
			SIF CSTR:LCOUNT:嘴形 == "微笑"
				CSTR:LCOUNT:嘴形 = 嘲笑
			CSTR:LCOUNT:建议 = 天才肌＆欺诈师
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 135
ENDIF
IF FLAG:VER_eraAkumaMaid < 138
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 29
			TALENT:LCOUNT:体寒 = 1
			SIF CSTR:LCOUNT:前髪 == "斜刘海"
				CSTR:LCOUNT:前髪 = 自然刘海２
			SIF CSTR:LCOUNT:後髪 == "自然"
				CSTR:LCOUNT:後髪 = 卷髪
		CASE 34, 35
			CSTR:LCOUNT:瞳色 = 焦茶
			CSTR:LCOUNT:茶 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "茶") )%
			CSTR:LCOUNT:点心 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "点心") )%
			CSTR:LCOUNT:喜欢的东西 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "喜欢的东西") )%
			CSTR:LCOUNT:讨厌的东西 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "讨厌的东西") )%
		CASE 46
			CSTR:LCOUNT:建议 = 堕天使の甘言＆欺诈师
		CASE 48
			FOR LCOUNT2, 70, 110
				CSTR:LCOUNT:LCOUNT2 = %CSVCSTR(NO:LCOUNT, LCOUNT2)%
			NEXT
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 138
ENDIF
IF FLAG:VER_eraAkumaMaid < 139
	FOR LCOUNT, 1, CHARANUM
		SIF TALENT:LCOUNT:動物耳
			TALENT:LCOUNT:動物耳 = 1
		SELECTCASE NO:LCOUNT
		CASE 29
			SIF CSTR:LCOUNT:後髪 == "自然刘海２"
				CSTR:LCOUNT:前髪 = 自然刘海２
		CASE 31
			TALENT:LCOUNT:動物耳 = 2
		CASE 44
			SIF CSTR:LCOUNT:眼形 == "垂眼"
				CSTR:LCOUNT:眼形 = 垂眼２
		CASE 49
			SIF CSTR:LCOUNT:眼形 == "普通眼"
				CSTR:LCOUNT:眼形 = 普通眼２
			SIF CSTR:LCOUNT:呆毛 == "呆毛"
				CSTR:LCOUNT:呆毛 = 呆毛３
			SIF CSTR:LCOUNT:髪色 == "銀髪"
				CSTR:LCOUNT:髪色 = 白髪
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 139
ENDIF
IF FLAG:VER_eraAkumaMaid < 141
	ABL:MASTER:Ｃ感覚 = 3
	ABL:MASTER:Ｖ感覚 = 3
	ABL:MASTER:Ａ感覚 = 3
	ABL:MASTER:Ｂ感覚 = 3
	ABL:MASTER:Ｍ感覚 = 3
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 22
			SIF CSTR:LCOUNT:髪色 == "青髪"
				CSTR:LCOUNT:髪色 = 紺髪
			SIF CSTR:LCOUNT:眼形 == "水灵眼"
				CSTR:LCOUNT:眼形 = 普通眼２
		CASE 30
			SIF CSTR:LCOUNT:眼形 == "吊眼"
				CSTR:LCOUNT:眼形 = 吊眼２
			SIF CSTR:LCOUNT:嘴形 == "微笑"
				CSTR:LCOUNT:嘴形 = 嘲笑
		CASE 34
			CSTR:LCOUNT:喜欢的东西 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "喜欢的东西") )%
			CSTR:LCOUNT:讨厌的东西 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "讨厌的东西") )%
			SIF CSTR:LCOUNT:髪長 == "巻髪"
				CSTR:LCOUNT:髪長 = 中等長度
			SIF CSTR:LCOUNT:前髪 == "透明刘海２"
				CSTR:LCOUNT:前髪 = Ｍ字刘海
		CASE 35, 48
			CSTR:LCOUNT:喜欢的东西 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "喜欢的东西") )%
			CSTR:LCOUNT:讨厌的东西 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "讨厌的东西") )%
		CASE 37
			SIF CSTR:LCOUNT:眼形 == "垂眼"
				CSTR:LCOUNT:眼形 = 垂眼２
			SIF CSTR:LCOUNT:嘴形 == "笑顔"
				CSTR:LCOUNT:嘴形 = ワ
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 141
ENDIF
IF FLAG:VER_eraAkumaMaid < 143
	FOR LCOUNT, 1, CHARANUM
		SIF CFLAG:LCOUNT:髪型変更のお願い中 == 0 || CSTR:LCOUNT:普段の髪型 == ""
			CALL SETFLAG, "普段の髪型記録", LCOUNT
		IF CSTR:LCOUNT:特別経験 == "/"
			CSTR:LCOUNT:特別経験 = 
			EXP:LCOUNT:特別経験 = 0
		ENDIF
		SELECTCASE NO:LCOUNT
		CASE 47
			CSTR:LCOUNT:関係 = 飼い猫
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 143
ENDIF
IF FLAG:VER_eraAkumaMaid < 144
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 48
			TALENT:LCOUNT:疼痛無視 = 1
		ENDSELECT
		IF PENIS(LCOUNT)
			CFLAG:LCOUNT:Ｐ尿道履歴 = CFLAG:LCOUNT:Ｖ尿道履歴
			CFLAG:LCOUNT:Ｖ尿道履歴 = 0
		ENDIF
	NEXT
	FLAG:VER_eraAkumaMaid = 144
ENDIF
IF FLAG:VER_eraAkumaMaid < 145
	FOR LCOUNT, 1, CHARANUM
		SIF CSTR:LCOUNT:ふりがな == ""
			CSTR:LCOUNT:ふりがな = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "ふりがな") )%
		SELECTCASE NO:LCOUNT
		CASE 49
			CSTR:LCOUNT:点心 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "点心") )%
		CASE 52
			CSTR:LCOUNT:出現場所 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "出現場所") )%
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 145
ENDIF
IF FLAG:VER_eraAkumaMaid < 146
	FOR LCOUNT, 2, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 38
			TALENT:LCOUNT:腸液分泌体質 = 1
			SIF ABL:LCOUNT:技巧 < 5
				ABL:LCOUNT:技巧 = 5
			SIF ABL:LCOUNT:自慰中毒 < 2
				ABL:LCOUNT:自慰中毒 = 2
			CSTR:LCOUNT:髪色 = 紅髪
			CSTR:LCOUNT:喜欢的房间 = 居間
		ENDSELECT

		;陥落人数の集計
		SIF TALENT:LCOUNT:淫乱 == 0 && TALENT:LCOUNT:恋慕 == 0
			CONTINUE
		FLAG:この周での陥落人数 += 1
		SAVESTR:この周での陥落角色 += @"%CSVCALLNAME(NO:LCOUNT)%/"
	NEXT
	FLAG:陥落人数 = FLAG:この周での陥落人数
	SAVESTR:陥落角色 = %SAVESTR:この周での陥落角色%
	FLAG:VER_eraAkumaMaid = 146
ENDIF
IF FLAG:VER_eraAkumaMaid < 147
	FOR LCOUNT, 2, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 49
			CSTR:LCOUNT:髪色 = 白髪
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 147
ENDIF
IF FLAG:VER_eraAkumaMaid < 148
	FOR LCOUNT, 2, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 49
			CSTR:LCOUNT:髪長 = 超長
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 148
ENDIF
IF FLAG:VER_eraAkumaMaid < 150
	FOR LCOUNT, 2, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 31
			IF EXP:LCOUNT:接吻経験 == 0
				CALL SET_CEVENT, "合意禁止：接吻", LCOUNT
				CALL DEL_GOUI, "接吻", LCOUNT
			ENDIF
		CASE 57
			TALENT:LCOUNT:料理擅長 = 1
			CSTR:LCOUNT:点心 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "点心") )%
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 150
ENDIF
IF FLAG:VER_eraAkumaMaid < 153
	SIF TALENT:MASTER:禁断的知識 >= 2
		TALENT:MASTER:具現 = 1
	FOR LCOUNT, 2, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 49
			SIF TALENT:恋慕 == 0
				CALL SET_CEVENT, "Ｈ的调戏禁止", LCOUNT
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 153
ENDIF
IF FLAG:VER_eraAkumaMaid < 154
	FOR LCOUNT, 2, CHARANUM
		CSTR:LCOUNT:没収済胖次 = %CSTR:LCOUNT:50%
		CSTR:LCOUNT:Ｈ衣装 = %CSTR:LCOUNT:51%

		SELECTCASE NO:LCOUNT
		CASE 15
			TALENT:LCOUNT:外見年齢 = 1
			TALENT:LCOUNT:保守的 = 1
			TALENT:LCOUNT:高贵 = 1
			TALENT:LCOUNT:冷静 = 1
			TALENT:LCOUNT:謙虚 = 1
			TALENT:LCOUNT:温柔 = 1
			TALENT:LCOUNT:真面目 = 1
			TALENT:LCOUNT:臆病 = 1
			TALENT:LCOUNT:受け身 = 1
			TALENT:LCOUNT:Ｖ妊娠不能 = 1
			BASE:LCOUNT:バイオリズム = CLEARBITS(BASE:LCOUNT:バイオリズム, 10, 19)

			SIF CSTR:LCOUNT:前髪 == "乱髪"
				CSTR:LCOUNT:前髪 = 乱髪４
			CSTR:LCOUNT:髪色 = 槞髪
			CSTR:LCOUNT:眼形 = 垂眼２
		CASE 20
			CSTR:LCOUNT:点心 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "点心") )%
			SIF CSTR:LCOUNT:前髪 == "自然刘海"
				CSTR:LCOUNT:前髪 = 自然卷
			SIF CSTR:LCOUNT:後髪 == "直髪"
				CSTR:LCOUNT:後髪 = 自然
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 154
ENDIF
IF FLAG:VER_eraAkumaMaid < 156
	FOR LCOUNT, 2, CHARANUM
		CALL SETFLAG, "同居解消禁止の自動設定", LCOUNT
		SELECTCASE NO:LCOUNT
		CASE 15
			TALENT:LCOUNT:难以妊娠 = 1
			TALENT:LCOUNT:Ｖ妊娠不能 = 0
			CSTR:LCOUNT:嘴形 = 微笑４
			CFLAG:LCOUNT:マグロ = 1
		CASE 34
			TALENT:LCOUNT:調教知識 = 1p0
		CASE 35
			TALENT:LCOUNT:調教知識 = 1p3
		CASE 48
			TALENT:LCOUNT:調教知識 = 1p6
		CASE 53
			TALENT:LCOUNT:調教知識 = 1p5
			CSTR:LCOUNT:讨厌的东西 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "讨厌的东西") )%
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 156
ENDIF
IF FLAG:VER_eraAkumaMaid < 157
	FOR LCOUNT, 2, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 51
			CSTR:LCOUNT:建议 = 包容力
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 157
ENDIF
IF FLAG:VER_eraAkumaMaid < 159
	FOR LCOUNT, 1, CHARANUM
		;いったん初期化
		TALENT:LCOUNT:Ｖ妊娠不能 = 0
		;初期状態でＶ妊娠不能かを格子
		SELECTCASE NO:LCOUNT
		CASE 0
			SIF COND("初期男性", LCOUNT)
				CSTR:LCOUNT:初期变量 = %SETSTR(CSTR:LCOUNT:初期变量, "Ｖ妊娠不能_1")%
		CASE 15, 33, 44, 47, 49, 25, 35, 46, 55, 57
			CSTR:LCOUNT:初期变量 = %SETSTR(CSTR:LCOUNT:初期变量, "Ｖ妊娠不能_1")%
		CASEELSE
			CSTR:LCOUNT:初期变量 = %CLEARSTR(CSTR:LCOUNT:初期变量, "Ｖ妊娠不能_1")%
		ENDSELECT
		;現状でＶ妊娠不能か格子
		IF TALENT:LCOUNT:男性 || TALENT:LCOUNT:未成熟 || COND("種族：人形", LCOUNT)
			TALENT:LCOUNT:Ｖ妊娠不能 = 1
		ELSE
			SELECTCASE NO:LCOUNT
			;成熟した女性だけど例外的にＶ妊娠不能な人々
			CASE 47
				SIF CEVENT("身体を元に戻した", LCOUNT) == 0
					TALENT:LCOUNT:Ｖ妊娠不能 = 1
			CASE 15, 49
				SIF COND("妊娠中", LCOUNT) == 0
					TALENT:LCOUNT:Ｖ妊娠不能 = 1
			ENDSELECT
		ENDIF
		;以前は[妊娠可能]という素質だったがそれを変更する
		IF TALENT:LCOUNT:6
			TALENT:LCOUNT:6 = 0
			IF TALENT:LCOUNT:男性
				TALENT:LCOUNT:Ａ妊娠体質 = 1
			ELSE
				TALENT:LCOUNT:Ｖ妊娠不能 = 0
			ENDIF
		ENDIF
	NEXT
	FLAG:VER_eraAkumaMaid = 159
ENDIF
IF FLAG:VER_eraAkumaMaid < 160
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 15
			CALL SET_CEVENT, "尿道調教禁止", LCOUNT
		CASE 44
			SIF CSTR:LCOUNT:眼形 == "垂眼２"
				CSTR:LCOUNT:眼形 = 垂眼３
		CASE 49
			SIF CSTR:LCOUNT:眼形 == "普通眼２"
				CSTR:LCOUNT:眼形 = 普通眼４
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 160
ENDIF
IF FLAG:VER_eraAkumaMaid < 163
	FOR LCOUNT, 2, CHARANUM
		CALL SETFLAG, "同居解消禁止の自動設定", LCOUNT
		SIF CEVENT("同居解消禁止", LCOUNT)
			CALL SETFLAG, "同居：一直", LCOUNT
	NEXT
	FLAG:VER_eraAkumaMaid = 163
ENDIF
IF FLAG:VER_eraAkumaMaid < 164
	;いくつかのフラグの変更
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 22
			IF CSTR:LCOUNT:眼形 == "普通眼２"
				CSTR:LCOUNT:眼形 = 普通眼４
				CSTR:LCOUNT:白眼 = 白眼
			ENDIF
		CASE 30
			CSTR:LCOUNT:高光 = 高光无
		CASE 34
			TALENT:LCOUNT:臆病 = 1
		CASE 35
			SIF TALENT:LCOUNT:男性
				TALENT:LCOUNT:包茎 = 1
		ENDSELECT

		IF GETBIT(CFLAG:LCOUNT:身嗜み, 23)
			SETBIT CFLAG:LCOUNT:身嗜み, 21
			SETBIT CFLAG:LCOUNT:身嗜み, 22
			CLEARBIT CFLAG:LCOUNT:身嗜み, 23
		ENDIF
		IF CFLAG:LCOUNT:3
			LOCALS = /
			SIF GETBIT(CFLAG:LCOUNT:3, 0)
				LOCALS += "処女_1/"
			SIF GETBIT(CFLAG:LCOUNT:3, 1)
				LOCALS += "処女_2/"
			SIF GETBIT(CFLAG:LCOUNT:3, 4)
				LOCALS += "Ｖ損傷_1/"
			SIF GETBIT(CFLAG:LCOUNT:3, 5)
				LOCALS += "Ｖ損傷_2/"
			SIF GETBIT(CFLAG:LCOUNT:3, 6)
				LOCALS += "Ｖ損傷_3/"
			SIF GETBIT(CFLAG:LCOUNT:3, 7)
				LOCALS += "遅漏_1/"
			SIF GETBIT(CFLAG:LCOUNT:3, 8)
				LOCALS += "遅漏_2/"
			SIF GETBIT(CFLAG:LCOUNT:3, 9)
				LOCALS += "淫壷_1/"
			SIF GETBIT(CFLAG:LCOUNT:3, 10)
				LOCALS += "伪娘_1/"

			IF GETBIT(CFLAG:LCOUNT:3, 11)
				LOCALS += "高大_1/"
			ELSEIF GETBIT(CFLAG:LCOUNT:3, 12)
				LOCALS += "娇小_1/"
			ELSE
				LOCALS += "中背_1/"
			ENDIF

			SIF GETBIT(CFLAG:LCOUNT:3, 14)
				LOCALS += "Ｖ性向_1/"
			SIF GETBIT(CFLAG:LCOUNT:3, 15)
				LOCALS += "貧乳_1/"
			SIF GETBIT(CFLAG:LCOUNT:3, 16)
				LOCALS += "巨乳_1/"
			SIF GETBIT(CFLAG:LCOUNT:3, 17)
				LOCALS += "巨乳_2/"
			SIF GETBIT(CFLAG:LCOUNT:3, 18)
				LOCALS += "女性_1/"
			SIF GETBIT(CFLAG:LCOUNT:3, 19)
				LOCALS += "扶她_1/"
			SIF GETBIT(CFLAG:LCOUNT:3, 20)
				LOCALS += "扶她_2/"
			SIF GETBIT(CFLAG:LCOUNT:3, 21)
				LOCALS += "男性_1/"
			SIF GETBIT(CFLAG:LCOUNT:3, 22)
				LOCALS += "母乳体質_1/"
			SIF GETBIT(CFLAG:LCOUNT:3, 23)
				LOCALS += "母乳体質_2/"
			SIF GETBIT(CFLAG:LCOUNT:3, 24)
				LOCALS += "早漏_1/"
			SIF GETBIT(CFLAG:LCOUNT:3, 25)
				LOCALS += "早漏_2/"
			SIF GETBIT(CFLAG:LCOUNT:3, 26)
				LOCALS += "童貞_1/"
			CSTR:LCOUNT:性転換前的素質 = %LOCALS%
		ENDIF
		CFLAG:LCOUNT:3 = 0
	NEXT
	FLAG:VER_eraAkumaMaid = 164
ENDIF
IF FLAG:VER_eraAkumaMaid < 165
	;いくつかのフラグの変更
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 27
			CFLAG:LCOUNT:ＮＴＲ禁止 = 2
			TALENT:LCOUNT:討厭男人 = 1
			TALENT:LCOUNT:討厭女人 = 1
			TALENT:LCOUNT:温柔 = 1
			TALENT:LCOUNT:不在乎貞操 = 0
			TALENT:LCOUNT:真面目 = 1
			TALENT:LCOUNT:炮友 = 2
			CSTR:LCOUNT:点心 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "点心") )%
			CSTR:LCOUNT:茶 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "茶") )%
			CSTR:LCOUNT:喜欢的东西 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "喜欢的东西") )%
			CSTR:LCOUNT:讨厌的东西 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "讨厌的东西") )%
			CALL SET_CEVENT, "Ｈ的调戏禁止", LCOUNT
		CASE 56
			TALENT:LCOUNT:难以妊娠 = 6
			SIF CSTR:LCOUNT:眼形 == "垂眼"
				CSTR:LCOUNT:眼形 = 垂眼３
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 165
ENDIF
IF FLAG:VER_eraAkumaMaid < 166
	;いくつかのフラグの変更
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 31
			SIF CSTR:LCOUNT:眼形 == "斜眼"
				CSTR:LCOUNT:眼形 = 斜眼３
		CASE 49
			SIF CSTR:LCOUNT:呆毛 == "呆毛"
				CSTR:LCOUNT:呆毛 = 呆毛３
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 166
ENDIF
IF FLAG:VER_eraAkumaMaid < 167
	;いくつかのフラグの変更
	FOR LCOUNT, 1, CHARANUM
		SIF TALENT:LCOUNT:禁断的知識 >= 2
			TALENT:LCOUNT:具現 = 1
	NEXT
	FLAG:VER_eraAkumaMaid = 167
ENDIF
IF FLAG:VER_eraAkumaMaid < 168
	;いくつかのフラグの変更
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 10
			CSTR:LCOUNT:称号 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "称号") )%
			CSTR:LCOUNT:点心 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "点心") )%
			CSTR:LCOUNT:茶 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "茶") )%
			FOR LCOUNT2, 90, 110
				CSTR:LCOUNT:LCOUNT2 = %CSVCSTR(NO:LCOUNT, LCOUNT2)%
			NEXT
		CASE 60
			SIF CEVENT("恋慕：地固圆圈", LCOUNT)
				CALL SET_GOUI, "危険日生性交", LCOUNT
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 168
ENDIF
IF FLAG:VER_eraAkumaMaid < 170
	FOR LCOUNT, 1, CHARANUM
		IF COND("種族：淫魔", LCOUNT)
			TALENT:LCOUNT:精液嗜好 = 1
			CSTR:LCOUNT:初期变量 = %SETSTR(CSTR:LCOUNT:初期变量, "精液嗜好_1")%
		ENDIF
	NEXT
	FLAG:VER_eraAkumaMaid = 170
ENDIF
IF FLAG:VER_eraAkumaMaid < 172
	FOR LCOUNT, 1, CHARANUM
		CALL CHECK_FAV_ONANIE, LCOUNT
	NEXT
	FLAG:VER_eraAkumaMaid = 172
ENDIF
IF FLAG:VER_eraAkumaMaid < 174
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 22, 30
			TALENT:LCOUNT:Ｖ性向 = 1
		CASE 48
			TALENT:LCOUNT:高慢 = 1
			TALENT:LCOUNT:汚臭無視 = 1
			TALENT:LCOUNT:疼痛無視 = 0
		CASE 53
			SIF TALENT:LCOUNT:Ｖ名器 == 0
				TALENT:LCOUNT:Ｖ名器 = 1
		CASE 60
			TALENT:LCOUNT:嘔吐反射耐性 = 1
			CSTR:LCOUNT:建议 = 餓狼の相
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 174
ENDIF
IF FLAG:VER_eraAkumaMaid < 175
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 2
			CSTR:LCOUNT:瞳色 = 紫
			CSTR:LCOUNT:眼形 = 吊眼３
			CSTR:LCOUNT:白眼 = 白眼
			CSTR:LCOUNT:嘴形 = へ字３
		CASE 61
			TALENT:LCOUNT:動物耳 = 1
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 175
ENDIF
IF FLAG:VER_eraAkumaMaid < 177
	FLAG:メイン画面 = 0
	CVARSET CSTR, GETNUM(CSTR, "今年の泳装")
	CVARSET CFLAG, GETNUM(CFLAG, "泳装選び")
	FLAG:VER_eraAkumaMaid = 177
ENDIF
IF FLAG:VER_eraAkumaMaid < 178
	SAVESTR:制服 = 
	SAVESTR:体操服 = 
	SAVESTR:泳装 = 
	SAVESTR:便装 = 
	SAVESTR:外出装 = 
	CALL SET_COORDINATE, "内衣", MASTER
	CALL SET_COORDINATE, "制服", MASTER

	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 31
			CSTR:LCOUNT:嘴形 = へ字２
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 178
ENDIF
IF FLAG:VER_eraAkumaMaid < 180
	;旧血縁フラグ初期化
	FOR LCOUNT, 53, 59
		CVARSET BASE, LCOUNT
	NEXT
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 6, 42
			TALENT:LCOUNT:妹 = 1
		CASE 10
			TALENT:LCOUNT:母親 = 1
		CASE 62
			TALENT:LCOUNT:姉 = 1
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 180
ENDIF
IF FLAG:VER_eraAkumaMaid < 182
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 1, 6, 10, 20, 24, 42, 47, 62
			CFLAG:LCOUNT:初期同居 = 1
		CASE 53
			CSTR:LCOUNT:学年 = ３年生
			CSTR:LCOUNT:関係 = 前輩
		ENDSELECT
		SELECTCASE CSTR:LCOUNT:白眼
		CASE "有眼白"
			CSTR:LCOUNT:白眼 = 白眼
		CASE "黑眼白"
			CSTR:LCOUNT:白眼 = 黒目
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 182
ENDIF
IF FLAG:VER_eraAkumaMaid < 184
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 59
			TALENT:LCOUNT:具現 = 0
			CSTR:LCOUNT:建议 = 欺诈师
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 184
ENDIF
IF FLAG:VER_eraAkumaMaid < 188
	SAVESTR:内衣の指定色 = 
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 56
			CSTR:LCOUNT:喜欢的东西 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "喜欢的东西") )%
			CSTR:LCOUNT:讨厌的东西 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "讨厌的东西") )%
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 188
ENDIF
IF FLAG:VER_eraAkumaMaid < 189
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 42
			SIF CSTR:LCOUNT:眼形 == "垂眼"
				CSTR:LCOUNT:眼形 = 垂眼３
			SIF CSTR:LCOUNT:白眼 == "无眼白"
				CSTR:LCOUNT:白眼 = 白眼
			SIF CSTR:LCOUNT:嘴形 == "微笑"
				CSTR:LCOUNT:嘴形 = 微笑２
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 189
ENDIF
IF FLAG:VER_eraAkumaMaid < 190
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 34
			CSTR:LCOUNT:建议 = 好奇の視線＆縄酔酒
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 190
ENDIF
IF FLAG:VER_eraAkumaMaid < 191
	FOR LCOUNT, 1, CHARANUM
		IF GETBIT(CFLAG:LCOUNT:性処理, 62)
			CFLAG:LCOUNT:性処理 = 1
		ELSE
			CFLAG:LCOUNT:性処理 = 0
		ENDIF
	NEXT
	FLAG:VER_eraAkumaMaid = 191
ENDIF
IF FLAG:VER_eraAkumaMaid < 195
	CALL SETFLAG, "性器年齢", MASTER
	FOR LCOUNT, 1, CHARANUM
		SIF CSVMARK(NO:LCOUNT, GETNUM(MARK, "淫紋") )
			CALL SETFLAG, "初期变量記録", LCOUNT

		CSTR:LCOUNT:喜欢的胖次 = %REPLACE(CSTR:LCOUNT:喜欢的胖次, "Ｔ字褲", "丁字褲")%
		CSTR:LCOUNT:讨厌的胖次 = %REPLACE(CSTR:LCOUNT:讨厌的胖次, "Ｔ字褲", "丁字褲")%
		CSTR:LCOUNT:喜欢的胖次 = %REPLACE(CSTR:LCOUNT:喜欢的胖次, "繩系胖次", "紐丁字褲")%
		CSTR:LCOUNT:讨厌的胖次 = %REPLACE(CSTR:LCOUNT:讨厌的胖次, "繩系胖次", "紐丁字褲")%
		CSTR:LCOUNT:喜欢的胖次 = %REPLACE(CSTR:LCOUNT:喜欢的胖次, "豹纹胖次/", "")%
		CSTR:LCOUNT:讨厌的胖次 = %REPLACE(CSTR:LCOUNT:讨厌的胖次, "豹纹胖次/", "")%
		CSTR:LCOUNT:喜欢的胖次 = %REPLACE(CSTR:LCOUNT:喜欢的胖次, "水玉模様の胖次/", "")%
		CSTR:LCOUNT:讨厌的胖次 = %REPLACE(CSTR:LCOUNT:讨厌的胖次, "水玉模様の胖次/", "")%

		CSTR:LCOUNT:喜欢的胸罩 = %REPLACE(CSTR:LCOUNT:喜欢的胸罩, "豹纹胸罩/", "")%
		CSTR:LCOUNT:讨厌的胸罩 = %REPLACE(CSTR:LCOUNT:讨厌的胸罩, "豹纹胸罩/", "")%

		SELECTCASE TALENT:LCOUNT:性器年齢
		CASE 3, 4
			TALENT:LCOUNT:性器年齢 -= 1
		ENDSELECT

		SELECTCASE NO:LCOUNT
		CASE 1
			CSTR:LCOUNT:白眼 = 白眼
		CASE 22
			CSTR:LCOUNT:挑染 = 挑染１_金
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 195
ENDIF
IF FLAG:VER_eraAkumaMaid < 196
	;褐色肌的晒痕廃止
	FLAG:95 = 0
	FOR LCOUNT, 1, CHARANUM
		;晒痕是ったん重置
		CFLAG:LCOUNT:晒痕強度 = 0
		CSTR:LCOUNT:晒痕 = 

		SIF STRCOUNT(CSTR:LCOUNT:普段の髪型, "ツインテ") && STRCOUNT(CSTR:LCOUNT:普段の髪型, "尾") == 0
			CSTR:LCOUNT:普段の髪型 = %REPLACE(CSTR:LCOUNT:普段の髪型, "ツインテ", "双马尾")%
		SIF STRCOUNT(CSTR:LCOUNT:改髪, "ツインテ") && STRCOUNT(CSTR:LCOUNT:改髪, "尾") == 0
			CSTR:LCOUNT:改髪 = %REPLACE(CSTR:LCOUNT:改髪, "ツインテ", "双马尾")%

		CSTR:LCOUNT:普段の髪型 = %REPLACE(CSTR:LCOUNT:普段の髪型, "侧马尾", "侧边马尾")%
		CSTR:LCOUNT:改髪 = %REPLACE(CSTR:LCOUNT:改髪, "侧马尾", "侧边马尾")%

		SELECTCASE NO:LCOUNT
		CASE 31
			IF CEVENT("詩燈坊主へ報告", LCOUNT)
				CALL DEL_CEVENT, "詩燈坊主へ報告", LCOUNT
				CALL SET_CEVENT, "詩燈坊主へ報告する", LCOUNT
			ENDIF
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 196
ENDIF
IF FLAG:VER_eraAkumaMaid < 197
	FOR LCOUNT, 1, CHARANUM
		CALL DEL_CEVENT_GROUP, "陰毛の形", LCOUNT
		IF AGE(LCOUNT)  == 1 && BASE:LCOUNT:陰毛 >= 500
			BASE:LCOUNT:陰毛 = 400
			CALL DEL_CEVENT_GROUP, "陰毛の名称", LCOUNT
		ENDIF
		;いくつかの素質の仕様変更
		SIF TALENT:LCOUNT:尾巴
			TALENT:LCOUNT:尾巴 = 1
		SIF TALENT:LCOUNT:翼
			TALENT:LCOUNT:翼 = 1

		;目５は一時廃止
		CSTR:LCOUNT:眼形 = %REPLACE(CSTR:LCOUNT:眼形, "５", "４")%

		SELECTCASE NO:LCOUNT
		CASE 31
			CALL SET_CEVENT, "四つ耳", LCOUNT
		;角や頭羽
		CASE 4, 19, 40, 50, 58
			TALENT:LCOUNT:頭羽 = 1
		CASE 8
			TALENT:LCOUNT:角 = 20
		CASE 15
			TALENT:LCOUNT:頭羽 = 1
			TALENT:LCOUNT:角 = 10
		CASE 22
			TALENT:LCOUNT:角 = 21
		;髪の毛
		CASE 2
			CSTR:LCOUNT:前髪 = 短刘海２
			CSTR:LCOUNT:普段の髪型 = %REPLACE(CSTR:LCOUNT:普段の髪型, "/短刘海/", "/短刘海２/")%
			TALENT:LCOUNT:陰毛年齢 = 3
		CASE 44
			CSTR:LCOUNT:髪色 = 亜麻髪
		CASE 61
			CSTR:LCOUNT:呆毛 = 呆毛５
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 197
ENDIF
IF FLAG:VER_eraAkumaMaid < 198
	;颜绘と特写ONOFFのフラグ廃止
	FLAG:76 = 0
	FLAG:79 = 0
	LOADGLOBAL
	IF GLOBAL:Config保存の日時 > 0
		GLOBAL:76 = 0
		GLOBAL:79 = 0
		SAVEGLOBAL
	ENDIF

	FOR LCOUNT, 1, CHARANUM
		SIF TALENT:LCOUNT:男性 + TALENT:LCOUNT:扶她 && TALENT:LCOUNT:女性
			TALENT:LCOUNT:女性 = 0
		SIF CSVTALENT(NO:LCOUNT, GETNUM(TALENT, "陰毛年齢") )
			TALENT:LCOUNT:陰毛年齢 = CSVTALENT(NO:LCOUNT, GETNUM(TALENT, "陰毛年齢") )
	NEXT
	FLAG:VER_eraAkumaMaid = 198
ENDIF
IF FLAG:VER_eraAkumaMaid < 199
	FOR LCOUNT, 1, CHARANUM
		SIF TALENT:LCOUNT:角 && COND("種族：悪魔", LCOUNT) && COND("種族：魔界人", LCOUNT) == 0
			TALENT:LCOUNT:角 = 1
	NEXT
	FLAG:VER_eraAkumaMaid = 199
ENDIF
IF FLAG:VER_eraAkumaMaid < 201
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 30
			SIF CSTR:LCOUNT:前髪 == "斜刘海"
				CSTR:LCOUNT:前髪 = 自然刘海２
		CASE 41
			TALENT:LCOUNT:口服避孕薬派 = -1
			CSTR:LCOUNT:髪色 = 墨髪
			CSTR:LCOUNT:瞳色 = 紺
			CSTR:LCOUNT:眼形 = 吊眼４
			CSTR:LCOUNT:嘴形 = 無口系２
		CASE 48
			CSTR:LCOUNT:渐变颜色 = 墨
			CSTR:LCOUNT:嘴形 = 無口系２
		CASE 53
			CSTR:LCOUNT:渐变颜色 = 亜麻
		CASE 63
			CFLAG:LCOUNT:夜型 = 1
			CSTR:LCOUNT:称号 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "称号") )%
			CSTR:LCOUNT:建议 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "建议") )%
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 201
ENDIF
IF FLAG:VER_eraAkumaMaid < 202
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 77
			CSTR:LCOUNT:髪色 = 空髪
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 202
ENDIF
IF FLAG:VER_eraAkumaMaid < 203
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 34, 35, 48, 53, 63
			CSTR:LCOUNT:喜欢的颜色 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "喜欢的颜色") )%
			CSTR:LCOUNT:嘴形 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "嘴形") )%
		CASE 59
			CALL SET_CEVENT, "性別変化のお願い不可", LCOUNT
			TALENT:LCOUNT:Ｖ妊娠不能 = 1
		CASE 77
			CSTR:LCOUNT:出現場所 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "出現場所") )%
			SIF TALENT:LCOUNT:恋慕 == 0
				CALL SET_CEVENT, "放課後Ｈ的邀请禁止", LCOUNT
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 203
ENDIF
IF FLAG:VER_eraAkumaMaid < 205
	FOR LCOUNT, 1, CHARANUM
		;禁断的知識回りの整理
		;具現の番号変更
		IF TALENT:LCOUNT:136
			TALENT:LCOUNT:136 = 0
			TALENT:LCOUNT:具現 = 1
		ENDIF
		TALENT:LCOUNT:淫紋刻印 = CSVTALENT(NO:LCOUNT, GETNUM(TALENT, "淫紋刻印") )
		TALENT:LCOUNT:認識阻害 = CSVTALENT(NO:LCOUNT, GETNUM(TALENT, "認識阻害") )
		IF LCOUNT == MASTER
			SIF TALENT:LCOUNT:禁断的知識
				TALENT:LCOUNT:淫紋刻印 = 1
			SIF TALENT:LCOUNT:禁断的知識 >= 2
				TALENT:LCOUNT:具現 = 1
			SIF TALENT:LCOUNT:禁断的知識 >= 3
				TALENT:LCOUNT:認識阻害 = 1
			TALENT:LCOUNT:禁断的知識 = MIN(TALENT:LCOUNT:禁断的知識, 1)
		ELSE
			TALENT:LCOUNT:禁断的知識 = CSVTALENT(NO:LCOUNT, GETNUM(TALENT, "禁断的知識") )
			CSTR:LCOUNT:初期变量 = %CLEARSTR(CSTR:LCOUNT:初期变量, "禁断的知識_1")%
			CSTR:LCOUNT:初期变量 = %CLEARSTR(CSTR:LCOUNT:初期变量, "禁断的知識_2")%
			CSTR:LCOUNT:初期变量 = %CLEARSTR(CSTR:LCOUNT:初期变量, "禁断的知識_3")%
			CSTR:LCOUNT:初期变量 = %SETSTR(CSTR:LCOUNT:初期变量, "禁断的知識_1")%
		ENDIF

		;３围
		CALL MEMO_3SIZE, LCOUNT
	NEXT
	FLAG:VER_eraAkumaMaid = 205
ENDIF
IF FLAG:VER_eraAkumaMaid < 206
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 34
			CSTR:LCOUNT:眉形 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "眉形") )%
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 206
ENDIF
IF FLAG:VER_eraAkumaMaid < 207
	CALL SETFLAG, "素質的固定与除外の初期化"
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 77
			TALENT:LCOUNT:謎之魅力 = 3
		ENDSELECT
		SIF TALENT:LCOUNT:陰蒂環 && TALENT:LCOUNT:容易濕 == 0
			TALENT:LCOUNT:容易濕 = 1
		;素質の[苗条]と[豐腴]は不顯示だけで常に持っていることに
		TALENT:LCOUNT:苗条 = CSVTALENT(NO:LCOUNT, GETNUM(TALENT, "苗条") )
		TALENT:LCOUNT:豐腴 = CSVTALENT(NO:LCOUNT, GETNUM(TALENT, "豐腴") )

		;腰圍を元にBASE:アンダー胸圍 を計算する
		CALL SETFLAG_3SIZE, "アンダー胸圍", LCOUNT
		;胸圍の[爆乳]等の基準を少し変更したので補正
		CALL SETFLAG_3SIZE, "胸圍の素質設定", LCOUNT
	NEXT
	FLAG:VER_eraAkumaMaid = 207
ENDIF
IF FLAG:VER_eraAkumaMaid < 208
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 77
			CSTR:LCOUNT:出現場所 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "出現場所") )%
			CSTR:LCOUNT:陰毛的喜好 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "陰毛的喜好") )%
			CSTR:LCOUNT:喜欢的颜色 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "喜欢的颜色") )%
			CSTR:LCOUNT:まつ毛の色 = 紺
		ENDSELECT
		;背心の再設定
		IF CHECK_SHIRT("男子背心", LCOUNT)
			CALL SET_SHIRT, "男子背心", LCOUNT
		ELSEIF CHECK_SHIRT("背心", LCOUNT)
			CALL SET_SHIRT, "背心", LCOUNT
		ENDIF
		;初期淫乱角色の攻略不具合
		IF TALENT:LCOUNT:恋慕 && COND("初期淫乱", LCOUNT)
			FLAG:この周での陥落人数 += 1
			SAVESTR:この周での陥落角色 += @"%CSVCALLNAME(NO:LCOUNT)%/"
			;陥落させたことがない角色？
			IF STRCOUNT(@"/%SAVESTR:陥落角色%/", @"/%CSVCALLNAME(NO:LCOUNT)%/") == 0
				FLAG:陥落人数 += 1
				SAVESTR:陥落角色 += @"%CSVCALLNAME(NO:LCOUNT)%/"
			ENDIF
		ENDIF
		;同意の修正
		SIF COND("合意：同居", LCOUNT) == 0
			CONTINUE
		SIF TALENT:LCOUNT:恋慕 || MARK:LCOUNT:屈服刻印 >= 3 || ABL:LCOUNT:信頼 >= 5 || CFLAG:LCOUNT:初期仲間
			CONTINUE
		SIF COND("血縁", LCOUNT) || CFLAG:LCOUNT:初期同居
			CONTINUE
		CALL DEL_GOUI, "同居", LCOUNT
	NEXT
	FLAG:VER_eraAkumaMaid = 208
ENDIF
IF FLAG:VER_eraAkumaMaid < 212
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 44
			CFLAG:LCOUNT:ＮＴＲ禁止 = 1
		CASE 49
			CFLAG:LCOUNT:ＮＴＲ禁止 = 1
			CSTR:LCOUNT:渐变颜色 = 銀
			CSTR:LCOUNT:眼形 = 普通眼６
			CSTR:LCOUNT:まつ毛の色 = 白
		CASE 66
			CFLAG:LCOUNT:ＮＴＲ禁止 = 1
			CSTR:LCOUNT:眼形 = 普通眼６
		CASE 46
			TALENT:LCOUNT:耳穿環 = 1
			CSTR:LCOUNT:前髪 = 自然刘海２
			CSTR:LCOUNT:挑染 = 挑染无_黒
			CSTR:LCOUNT:まつ毛の色 = 銀
			CSTR:LCOUNT:眼形 = 吊眼５
			CSTR:LCOUNT:眉形 = 通常眉短２
			CSTR:LCOUNT:嘴形 = 嘲笑２
		ENDSELECT
	NEXT
	FLAG:VER_eraAkumaMaid = 212
ENDIF
IF FLAG:VER_eraAkumaMaid < 213
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 49
			CSTR:LCOUNT:前髪 = 乱髪７
			CSTR:LCOUNT:改髪 = 三股辫耳後ろ
			CSTR:LCOUNT:呆毛 = 呆毛１０
		CASE 70
			CSTR:LCOUNT:点心 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "点心") )%
			CSTR:LCOUNT:茶 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "茶") )%
		ENDSELECT
	NEXT
	SIF FIND_NO("日向")
		FLAG:允许女性为你以外的其他人受孕 = 1
	FLAG:VER_eraAkumaMaid = 213
ENDIF

IF FLAG:VER_eraAkumaMaid < 214
	FOR LCOUNT, 1, CHARANUM
		SELECTCASE NO:LCOUNT
		CASE 15
			CFLAG:LCOUNT:ＮＴＲ禁止 = 1
			CSTR:LCOUNT:ふりがな = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "ふりがな") )%
			CSTR:LCOUNT:茶 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "茶") )%
			CSTR:LCOUNT:前髪 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "前髪") )%
			CSTR:LCOUNT:呆毛 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "呆毛") )%
			CSTR:LCOUNT:眼形 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "眼形") )%
			CSTR:LCOUNT:眉形 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "眉形") )%
			CSTR:LCOUNT:嘴形 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "嘴形") )%
			CSTR:LCOUNT:陰毛的喜好 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "陰毛的喜好") )%
			CSTR:LCOUNT:腋毛的喜好 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "腋毛的喜好") )%

		CASE 59
			TALENT:LCOUNT:禁断的知識 = 3
			TALENT:LCOUNT:避孕套派 = -1
			CSTR:LCOUNT:讨厌的东西 = %CSVCSTR(NO:LCOUNT, GETNUM(CSTR, "讨厌的东西") )%
		CASE 73
			TALENT:LCOUNT:伪娘 = 1
		ENDSELECT
	NEXT

	;新角色お披露目用関数
	PRINTL 
	PRINTL ・スレの637でうｐされた[不知陽る屠魔]四象湿華を組み込みました。有がとうございます
	CALL PRINT_SHOP_MAIDFACE, 69
	PRINTL 


	PRINTL ・discordでうｐされた柊日向口上更新を組み込みました。有がとうございます
	PRINTL ・スレの614でうｐされた米娅口上更新を組み込みました。有がとうございます
	PRINTL ・スレの604でうｐされた西露芙口上更新を組み込みました。有がとうございます
	PRINTL ・スレの602でうｐされた槞彁口上更新を組み込みました。有がとうございます
	PRINTL ・スレの598でうｐされた乃々0.18&诺伊0.06&遥0.04口上更新を組み込みました。有がとうございます
	PRINTL ・discordでうｐされた蔻卡口上更新を組み込みました。有がとうございます
	PRINTL ・discordでさやえんどう桑に頂いたД口を組み込みました。有がとうございます
	PRINTL ・discordで槌手元ひつか桑に頂いた笑顔４～５,いー４～７,おー,半開５～６,自然马尾辫,自然尾,
	PRINTL 　嘘声手,得意手,CIP露脐水手,CIP長百褶(旧ノーマル丈百褶),
	PRINTL 　CIP連衣裙系(無印連衣裙、褶边連衣裙、露肩連衣裙、夏日礼服、哥特連衣裙)等を組み込みました。有がとうございます
	PRINTL ・discordでやぶへび桑に頂いたＭ字刘海５,編髪３,顔面包帯、呆毛ツインを組み込みました。有がとうございます
	PRINTL ・discordなどで報告されたバグを修正しました。有がとうございます
	PRINTL 

	FLAG:VER_eraAkumaMaid = 214
ENDIF
CALL SETFLAG, "存在しない素質の整理"

TARGET = ARG

PRINTFORMW Ver%VERS_eraAkumaMaid()%更新完毕


;VER_eraAkumaMaidをX.ABCD表記にする
@VERS_eraAkumaMaid()
#FUNCTIONS
RETURNF TEXTS("0.001", GAMEBASE_VERSION)

@CHECK_VERUP
#DIM LCOUNT
#DIM LCOUNT2

;ツールチップの表示時間を10秒にする
TOOLTIP_SETDURATION 10000

;CSVを変更した際などには、ここで本編に反映させる
FOR LCOUNT, 1, CHARANUM
	CFLAG:LCOUNT:ＮＴＲ禁止 = CSVCFLAG(NO:LCOUNT, GETNUM(CFLAG, "ＮＴＲ禁止") )

	;CSTRの70～はcsv記述が基本
	FOR LCOUNT2, 70, 110
		SIF CSTR:LCOUNT:LCOUNT2 == ""
			CSTR:LCOUNT:LCOUNT2 = %CSVCSTR(NO:LCOUNT, LCOUNT2)%
	NEXT

	;主人はここまで
	SIF LCOUNT == MASTER
		CONTINUE
	;合意の格子
	CALL CHECK_GOUI, "汎用", LCOUNT
NEXT

FLAG:VERUP格子 = 1


;-------------------------------------------------
;全角色の番号を更新順に並べて STR:最新更新角色, STR:最新更新日時 を取得する
;-------------------------------------------------
@GET_UPDATE_ORDER
#DIM LCOUNT
#DIM DATE_ORDER, 100
#DIM NO_ORDER, 100
#DIM NUM_UPDATE
#DIM CHOICE


VARSET DATE_ORDER
VARSET NO_ORDER
NUM_UPDATE = 0

FOR LCOUNT, 1, 200
	SIF COND("勧誘可能角色", LCOUNT) == 0
		CONTINUE
	VARSET RESULT
	;RESULTに最新更新日が入る
	TRYCALLFORM UPDATE_K{LCOUNT}
	CHOICE = RESULT

	SIF CHOICE == 0
		CONTINUE

	DATE_ORDER:NUM_UPDATE = CHOICE
	NO_ORDER:NUM_UPDATE = LCOUNT

	NUM_UPDATE += 1
NEXT

;更新日時を最新順に変更＆角色番号もその順番に変更される（昇順なことに注意）
ARRAYMSORT DATE_ORDER, NO_ORDER

STR:最新更新角色 = 
STR:最新更新日時 = 

FOR LCOUNT, 0, 100
	SIF DATE_ORDER:LCOUNT == 0
		BREAK

	STR:最新更新角色 = %TOSTR(NO_ORDER:LCOUNT)%/%STR:最新更新角色%
	STR:最新更新日時 = %TOSTR(DATE_ORDER:LCOUNT)%/%STR:最新更新日時%
NEXT

