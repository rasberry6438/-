;OVERLAY_GCREATEじゃなくてOVERLAY_TCREATEを呼んでるから注意ね
@槞彁_TachieGenerate(ImgParam, Size= 4000, Xpos = 2250, Ypos = 0,NoAutoEmotionChange = 0)
	#DIMS DYNAMIC ImgParam
	#DIM DYNAMIC Xpos
	#DIM DYNAMIC Ypos
	#DIM DYNAMIC Size
	#DIMS DYNAMIC ResultHTML
	#DIMS DYNAMIC Layers,300
	#DIM DYNAMIC LCount
	#DIM DYNAMIC height
	
	#DIM DYNAMIC BGLayer
	#DIM DYNAMIC GraphicsId

	#DIM DYNAMIC NoAutoEmotionChange
	#DIMS DYNAMIC TachieSpriteCode
	;スプリットタグ→<TCBG/>

	TachieSpriteCode = 

	IF NoAutoEmotionChange == 0
		;欲求不満時に赤面2を自動で付与する
		;ここら辺の処理は何か弄りたい所
		SIF BASE:TARGET:欲求不満 >= 80
			ImgParam += "赤面２/"
	ENDIF 
	
	;#region 尾巴
		IF STRCOUNT(ImgParam,"通常尾巴２")
			TachieSpriteCode +=  @"K15T_尾巴_通常2<TCBG/>"
			ELSEIF STRCOUNT(ImgParam,"通常尾巴")
			TachieSpriteCode +=  @"K15T_尾巴_通常<TCBG/>"
			ELSEIF STRCOUNT(ImgParam,"随机通常尾巴") 
			IF GETTIME()%2 == 1
				TachieSpriteCode +=  @"K15T_尾巴_通常<TCBG/>"
			ELSE
				TachieSpriteCode +=  @"K15T_尾巴_通常2<TCBG/>"
			ENDIF
		ELSEIF STRCOUNT(ImgParam,"爱心尾巴") 
			TachieSpriteCode +=  @"K15T_尾巴_爱心<TCBG/>"
		ELSEIF STRCOUNT(ImgParam,"ハテナ尾巴")
			TachieSpriteCode +=  @"K15T_尾巴_ハテナ<TCBG/>"
		ELSEIF STRCOUNT(ImgParam,"ふりふり尾巴")
			TachieSpriteCode +=  @"K15T_尾巴_ふりふり<TCBG/>" 
		ELSEIF STRCOUNT(ImgParam,"惊嚇尾巴")
			TachieSpriteCode +=  @"K15T_尾巴_惊嚇<TCBG/>" 
		ELSE
			TachieSpriteCode +=  @"K15T_尾巴_通常<TCBG/>"
		ENDIF
	;#endregion
	;#region 基本素体
		TachieSpriteCode +=  @"K15T_ベース<TCBG/>"
		TachieSpriteCode +=  @"K15T_左手_通常<TCBG/>"
		TachieSpriteCode +=  @"K15T_右手_通常<TCBG/>"
	;#endregion 
	;#region 胸
		IF STRCOUNT(ImgParam,"巨乳") || BASE:TARGET:罩杯 >= 12;J罩杯以上
			TachieSpriteCode +=  @"K15T_胸_巨乳<TCBG/>"
		ELSE
			TachieSpriteCode +=  @"K15T_胸_普乳<TCBG/>"
		ENDIF
	;#endregion 


	;#region 服
		IF STRCOUNT(ImgParam,"全裸/")
		ELSEIF STRCOUNT(ImgParam,"吊帯衫/")
			IF STRCOUNT(ImgParam,"巨乳") || BASE:TARGET:罩杯 >= 12;J罩杯以上
				TachieSpriteCode +=  @"K15T_内衣_巨乳<TCBG/>"
			ELSE
				TachieSpriteCode +=  @"K15T_内衣_普乳<TCBG/>"
			ENDIF
		ELSE
			IF STRCOUNT(ImgParam,"巨乳") || BASE:TARGET:罩杯 >= 12;J罩杯以上
				TachieSpriteCode +=  @"K15T_默认服_巨乳<TCBG/>"
			ELSE
				TachieSpriteCode +=  @"K15T_默认服_普乳<TCBG/>"
			ENDIF
			TachieSpriteCode +=  @"K15T_默认服_左手_通常<TCBG/>"
			TachieSpriteCode +=  @"K15T_默认服_右手_通常<TCBG/>"
		ENDIF
	;#endregion 

	;#region 頭翼
		IF STRCOUNT(ImgParam,"通常頭翼")
			TachieSpriteCode +=  @"K15T_頭翼_通常<TCBG/>"
			Layers:40 = <nonbutton pos='{Xpos}'><img src='' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"惊嚇頭翼")
			TachieSpriteCode +=  @"K15T_頭翼_惊嚇<TCBG/>" 
			Layers:40 = <nonbutton pos='{Xpos}'><img src='' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"しょんぼり頭翼")
			TachieSpriteCode +=  @"K15T_頭翼_しょんぼり<TCBG/>" 
			Layers:40 = <nonbutton pos='{Xpos}'><img src='' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSE
			TachieSpriteCode +=  @"K15T_頭翼_通常<TCBG/>"
			Layers:40 = <nonbutton pos='{Xpos}'><img src='' height='{Size}' ypos='{Ypos}'></nonbutton>
		ENDIF
	;#endregion

	;顔素体
	
	TachieSpriteCode +=  @"K15T_顔素体<TCBG/>"

	;#region 口
		IF STRCOUNT(ImgParam,"△")
			TachieSpriteCode +=  @"K15T_口_△<TCBG/>"
		ELSEIF STRCOUNT(ImgParam,"嘟嘴") 
			TachieSpriteCode +=  @"K15T_口_嘟嘴<TCBG/>"
		ELSEIF STRCOUNT(ImgParam,"へ字３")
			TachieSpriteCode +=  @"K15T_口_へ字３<TCBG/>" 
		ELSEIF STRCOUNT(ImgParam,"ヮ")
			TachieSpriteCode +=  @"K15T_口_ヮ<TCBG/>"
		ELSEIF STRCOUNT(ImgParam,"小口３")
			TachieSpriteCode +=  @"K15T_口_小口３<TCBG/>"
		ELSEIF STRCOUNT(ImgParam,"半開４")
			TachieSpriteCode +=  @"K15T_口_半開４<TCBG/>"
		ELSEIF STRCOUNT(ImgParam,"微笑４") 
			TachieSpriteCode +=  @"K15T_口_微笑４<TCBG/>"
		ELSEIF STRCOUNT(ImgParam,"栗口２") 
			TachieSpriteCode +=  @"K15T_口_栗口２<TCBG/>"
		ELSEIF STRCOUNT(ImgParam,"無口系") 
			TachieSpriteCode +=  @"K15T_口_無口系<TCBG/>"
		ELSEIF STRCOUNT(ImgParam,"会話口") 
			TachieSpriteCode +=  @"K15T_口_会話口<TCBG/>"
		ELSEIF STRCOUNT(ImgParam,"呀哒")
			TachieSpriteCode +=  @"K15T_口_呀哒<TCBG/>" 
		ELSEIF STRCOUNT(ImgParam,"一文字") 
			TachieSpriteCode +=  @"K15T_口_一文字<TCBG/>"
		ELSE 
			TachieSpriteCode +=  @"K15T_口_微笑４<TCBG/>"
		ENDIF
	;#endregion

	;#region 目
		IF STRCOUNT(ImgParam,"混乱")
			TachieSpriteCode +=  @"K15T_目_混乱<TCBG/>"
		ELSEIF STRCOUNT(ImgParam,"しいたけ")
			TachieSpriteCode +=  @"K15T_目_しいたけ<TCBG/>"
		ELSEIF STRCOUNT(ImgParam,"爱心眼")
			TachieSpriteCode +=  @"K15T_目_爱心眼<TCBG/>"
		ELSEIF STRCOUNT(ImgParam,"笑颜")
			TachieSpriteCode +=  @"K15T_目_笑颜<TCBG/>"
		ELSEIF STRCOUNT(ImgParam,"飘忽")&&STRCOUNT(ImgParam,"斜眼")
			TachieSpriteCode +=  @"K15T_目_斜眼飘忽<TCBG/>"
		ELSEIF STRCOUNT(ImgParam,"斜眼")
			TachieSpriteCode +=  @"K15T_目_斜眼<TCBG/>"
		ELSEIF STRCOUNT(ImgParam,"飘忽")
			TachieSpriteCode +=  @"K15T_目_逸らす<TCBG/>"
		ELSEIF STRCOUNT(ImgParam,"睁開")
			TachieSpriteCode +=  @"K15T_目_睁開<TCBG/>"
		ELSEIF STRCOUNT(ImgParam,"闭眼")
			TachieSpriteCode +=  @"K15T_目_寝<TCBG/>"
		ELSEIF STRCOUNT(ImgParam,"タレ目")
			TachieSpriteCode +=  @"K15T_目_通常<TCBG/>"
		ELSEIF STRCOUNT(ImgParam,"涙目＞＜")
			TachieSpriteCode +=  @"K15T_目_涙目＞＜<TCBG/>"
		ELSEIF STRCOUNT(ImgParam,"＞＜")
			TachieSpriteCode +=  @"K15T_目_＞＜<TCBG/>"
		ELSEIF STRCOUNT(ImgParam,"涙目〇〇")
			TachieSpriteCode +=  @"K15T_目_涙目〇〇<TCBG/>"
		ELSEIF STRCOUNT(ImgParam,"〇〇")
			TachieSpriteCode +=  @"K15T_目_〇〇<TCBG/>"
		ELSEIF STRCOUNT(ImgParam,"半目")
			TachieSpriteCode +=  @"K15T_目_半目<TCBG/>"
		ELSE
			TachieSpriteCode +=  @"K15T_目_通常<TCBG/>"
		ENDIF
	;#endregion

	;#region 眉
		IF STRCOUNT(ImgParam,"困扰眉")
			TachieSpriteCode +=  @"K15T_眉_こまり<TCBG/>"
			Layers:80 = <nonbutton pos='{Xpos}'><img src='' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"通常眉３")
			TachieSpriteCode +=  @"K15T_眉_通常<TCBG/>"
			Layers:80 = <nonbutton pos='{Xpos}'><img src='' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"憤怒眉")
			TachieSpriteCode +=  @"K15T_眉_憤怒<TCBG/>"
			Layers:80 = <nonbutton pos='{Xpos}'><img src='' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"蹙眉")
			TachieSpriteCode +=  @"K15T_眉_ひそめ<TCBG/>"
			Layers:80 = <nonbutton pos='{Xpos}'><img src='' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSE
			TachieSpriteCode +=  @"K15T_眉_通常<TCBG/>"
			Layers:80 = <nonbutton pos='{Xpos}'><img src='' height='{Size}' ypos='{Ypos}'></nonbutton>
		ENDIF
	;#endregion

	;#region 呆毛
		IF STRCOUNT(ImgParam,"しょんぼり呆毛")
			TachieSpriteCode +=  @"K15T_呆毛_しょんぼり<TCBG/>"
			Layers:90 = <nonbutton pos='{Xpos}'><img src='' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"爱心呆毛")
			TachieSpriteCode +=  @"K15T_呆毛_爱心<TCBG/>"
			Layers:90 = <nonbutton pos='{Xpos}'><img src='' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"惊嚇呆毛")
			TachieSpriteCode +=  @"K15T_呆毛_惊嚇<TCBG/>"
			Layers:90 = <nonbutton pos='{Xpos}'><img src='' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"ハテナ呆毛")
			TachieSpriteCode +=  @"K15T_呆毛_ハテナ<TCBG/>"
			Layers:90 = <nonbutton pos='{Xpos}'><img src='' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"呆毛")
			TachieSpriteCode +=  @"K15T_呆毛_通常<TCBG/>"
			Layers:90 = <nonbutton pos='{Xpos}'><img src='' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSE
			TachieSpriteCode +=  @"K15T_呆毛_通常<TCBG/>"
			Layers:90 = <nonbutton pos='{Xpos}'><img src='' height='{Size}' ypos='{Ypos}'></nonbutton>
		ENDIF
	;#endregion

	;#region 漫画表現
		SIF STRCOUNT(ImgParam,"赤面２")
			TachieSpriteCode +=  @"K15T_漫画表現_赤面<TCBG/>"
			Layers:100 += @"<nonbutton pos='{Xpos}'><img src='' height='{Size}' ypos='{Ypos}'></nonbutton>"
		SIF STRCOUNT(ImgParam,"对话框兴奋")
			TachieSpriteCode +=  @"K15T_漫画表現_对话框兴奋<TCBG/>"
			Layers:100 += @"<nonbutton pos='{Xpos}'><img src='' height='{Size}' ypos='{Ypos}'></nonbutton>"
		SIF STRCOUNT(ImgParam,"对话框惊讶")
			TachieSpriteCode +=  @"K15T_漫画表現_对话框惊讶<TCBG/>"
			Layers:100 += @"<nonbutton pos='{Xpos}'><img src='' height='{Size}' ypos='{Ypos}'></nonbutton>"
		SIF STRCOUNT(ImgParam,"对话框汗３")
			TachieSpriteCode +=  @"K15T_漫画表現_对话框汗３<TCBG/>"
			Layers:100 += @"<nonbutton pos='{Xpos}'><img src='' height='{Size}' ypos='{Ypos}'></nonbutton>"
	;#endregion

	;#region 立ち絵非表示
		IF STRCOUNT(ImgParam,"非表示/")
			TachieSpriteCode = 
		ENDIF
	;#endregion 
	CALL OVERLAY_TCREATE, NO:TARGET , @"%TachieSpriteCode%","槞彁立ち絵", Size/50, 
	RESULTS = 
	RESULTS += @"<nonbutton pos='{Xpos}'><img src='槞彁立ち絵' height='{Size}' ypos='{Ypos}'></nonbutton>"
	RETURN 1


;立ち絵シミュレータ
@槞彁_TachieGenerate_Sim
	#DIM DYNAMIC LCount
	
	#DIMS DYNAMIC Clothes
	#DIMS DYNAMIC HeadWing
	#DIMS DYNAMIC Mayu
	#DIMS DYNAMIC Mouth
	#DIMS DYNAMIC Ahoge
	#DIMS DYNAMIC Eye
	#DIMS DYNAMIC Tail
	#DIMS DYNAMIC Bust
	#DIMS DYNAMIC Manga
	#DIMS DYNAMIC InputTags
	
	InputTags = 
	Clothes = 
	HeadWing = 
	Mouth =
	Ahoge =  
	Mayu = 
	Eye = 
	Tail = 
	Bust = 
	Manga = 

	$K15T_SIM_LOOP

	CLEARLINE LINECOUNT


	
	InputTags = 
	InputTags += @"%Bust%%Clothes%%HeadWing%%Mouth%%Mayu%%Ahoge%%Eye%%Tail%%Manga%"
	PRINTFORML 現在的タグ:%InputTags%
	PRINTL 
	PRINTL 
	PRINTL 
	PRINTL 
	PRINTL 
	PRINTL 
	PRINTL 
	PRINTL 
	PRINTL 
	PRINTL 
	PRINTL 
	PRINTL 
	PRINTL 
	PRINTL 
	PRINTL 
	PRINTL 
	PRINTL 
	PRINTL 
	
	CALL 槞彁_TachieGenerate(InputTags,4000,3000,300)
	CALL D20XX_NO_NOBR2(RESULTS)
	HTML_PRINT @"<nobr>%RESULTS%</nobr>"

	CALL D20XX_Generate_UniqueFcsv, "槞彁"
	CALL D20XX_FACE_FcsvToSprite(RESULTS,@"%InputTags%")
	CALL D20XX_FACE_Packaging(RESULTS)
	RESULTS = %CONVERTSTR(RESULTS)%
	CALL D20XX_NO_NOBR(RESULTS)
	CALL D20XX_OS_WindowInput_Constructor
	HTML_PRINT @"<nobr>%RESULTS%</nobr>"

	FOR Lcount,0,9
		PRINTL 
	NEXT

	SETCOLOR DEF_COLOR("緑")

	PRINTFORML 背景 [99]初期化
	PRINTFORML [1]住宅街 [2]部屋
	PRINTFORML 
	PRINTFORML 服の着脱 [199]初期化	 [198]巨乳化  [197]普乳化
	PRINTFORML [100]全裸 [101]いつもの服 [102]吊帯衫
	PRINTFORML 
	PRINTFORML 尾巴 [299]初期化
	PRINTFORML [200]通常 [201]通常2 [202]通常or通常2 [203]ふりふり [204]爱心 [205]ハテナ [206]惊嚇
	PRINTFORML 
	PRINTFORML 呆毛 [399]初期化
	PRINTFORML [300]通常 [301]しょんぼり呆毛 [302]爱心呆毛 [303]惊嚇呆毛 [304]ハテナ呆毛
	PRINTFORML 
	PRINTFORML 頭翼 [499]初期化
	PRINTFORML [400]通常頭翼 [401]惊嚇頭翼 [402]しょんぼり頭翼
	PRINTFORML 
	PRINTFORML 眉 [599]初期化
	PRINTFORML [500]通常眉３ [501]困扰眉 [502]憤怒眉 [503]蹙眉
	PRINTFORML 
	PRINTFORML 目 [699]初期化
	PRINTFORML [600]通常 [601]闭眼 [614]半目 [602]睁開 [603]飘忽 [604]笑颜 [605]斜眼 [606]斜眼飘忽 
	PRINTFORML [607]しいたけ [608] 爱心眼 [609]混乱 [610]＞＜ [611]涙目＞＜ [612]〇〇 [613]涙目〇〇 
	PRINTFORML 
	PRINTFORML 口 [799]初期化
	PRINTFORML [700]△ [701]嘟嘴 [702]へ字３ [703]ヮ [704]小口３ [705]半開４ [706]微笑４ [707]栗口２ [708]無口系 [709]会話口 
	PRINTFORML [710]呀哒 [711]一文字
	PRINTFORML 
	PRINTFORML 漫画表現 [899]初期化 
	PRINTFORML [800]赤面２ [801]兴奋 [802]惊讶 [803]汗３

	PRINTFORML 
	PRINTFORML 現在的タグ:%InputTags%
	PRINTFORML [997]全初期化 [998]コピペする [999]終了する
	RESETCOLOR
	INPUT 

	SELECTCASE RESULT/100
		CASE 0 ;背景
			SELECTCASE RESULT
				CASE 1
					CALL OVERLAY_GCREATE, 600, "BG住宅街+0x70000000", MIN(1100,CLIENTWIDTH()), 850
					CBGSETG 600, 0, 0, 5
				CASE 2
					CALL OVERLAY_GCREATE, 600, "BG自室+0x70000000", MIN(1100,CLIENTWIDTH()), 850
					CBGSETG 600, 0, 0, 5
				CASE 99
					CALL EFFECT_ALLRESET
			ENDSELECT
		CASE 1 ;服の着脱
			SELECTCASE RESULT%100
				CASE 0
					Clothes = 全裸/
				CASE 1
					Clothes = いつもの服/
				CASE 2
					Clothes = 吊帯衫/
				CASE 97
					Bust = 普乳/
				CASE 98
					Bust = 巨乳/
				CASE 99
					Clothes = 
					Bust = 
			ENDSELECT
		CASE 2 ;尾巴
			SELECTCASE RESULT%100;[200]通常 [201]通常2 [299]通常or通常2 [202]ふりふり [203]爱心 [204]ハテナ [205]惊嚇
				CASE 0
					Tail = 通常尾巴/
				CASE 1
					Tail = 通常尾巴２/
				CASE 2
					Tail = 随机通常尾巴/
				CASE 3
					Tail = ふりふり尾巴/
				CASE 4
					Tail = 爱心尾巴/
				CASE 5
					Tail = ハテナ尾巴/
				CASE 6
					Tail = 惊嚇尾巴/
				CASE 99
					Tail = 
			ENDSELECT
		CASE 3 ;呆毛
			SELECTCASE RESULT%100;[500]通常 [501]しょんぼり呆毛 [502]爱心呆毛 [503]惊嚇呆毛
				CASE 0
					Ahoge = 呆毛/
				CASE 1
					Ahoge = しょんぼり呆毛/
				CASE 2
					Ahoge = 爱心呆毛/
				CASE 3
					Ahoge = 惊嚇呆毛/
				CASE 4
					Ahoge = ハテナ呆毛/
				CASE 99
					Ahoge = 
			ENDSELECT
		CASE 4 ;頭翼
			SELECTCASE RESULT%100
				CASE 0
					HeadWing = 通常頭翼/
				CASE 1
					HeadWing = 惊嚇頭翼/
				CASE 2
					HeadWing = しょんぼり頭翼/
				CASE 99
					HeadWing = 
			ENDSELECT
		CASE 5 ;眉
			SELECTCASE RESULT%100
				CASE 0
					Mayu = 通常眉３/
				CASE 1
					Mayu = 困扰眉/
				CASE 2
					Mayu = 憤怒眉/
				CASE 3
					Mayu = 蹙眉/
				CASE 99
					Mayu = 
			ENDSELECT
		CASE 6 ;目
			SELECTCASE RESULT%100;[600]通常 [601]闭眼 [602]睁開 [603]飘忽 [604]笑颜 [605]斜眼 [606]しいたけ [607]混乱
				CASE 0
					Eye = 垂眼５/
				CASE 1
					Eye = 闭眼/
				CASE 2
					Eye = 睁開/
				CASE 3
					Eye = 飘忽/
				CASE 4
					Eye = 笑颜/
				CASE 5
					Eye = 斜眼５/
				CASE 6
					Eye = 斜眼５/飘忽/
				CASE 7
					Eye = しいたけ/
				CASE 8
					Eye = 爱心眼/
				CASE 9
					Eye = 混乱/
				CASE 10
					Eye = ＞＜/
				CASE 11
					Eye = 涙目＞＜/
				CASE 12
					Eye = 〇〇/
				CASE 13
					Eye = 涙目〇〇/
				CASE 14 
					Eye = 半目/
				CASE 99
					Eye = 
			ENDSELECT
		CASE 7 ;口
			SELECTCASE RESULT%100
				CASE 0
					Mouth = △/
				CASE 1
					Mouth = 嘟嘴/
				CASE 2
					Mouth = へ字３/
				CASE 3
					Mouth = ヮ/
				CASE 4
					Mouth = 小口３/
				CASE 5
					Mouth = 半開４/
				CASE 6
					Mouth = 微笑４/
				CASE 7
					Mouth = 栗口２/
				CASE 8
					Mouth = 無口系/
				CASE 9
					Mouth = 会話口/
				CASE 10
					Mouth = 呀哒/
				CASE 11
					Mouth = 一文字/
				CASE 99
					Mouth = 
			ENDSELECT
		CASE 8
			SELECTCASE RESULT%100
				CASE 0
					Manga += "赤面２/"
				CASE 1
					Manga += "对话框兴奋/"
				CASE 2
					Manga += "对话框惊讶/"
				CASE 3
					Manga += "对话框汗３/"
				CASE 99
					Manga = 
			ENDSELECT
	ENDSELECT
	
	IF RESULT == 997
		InputTags = 
		Clothes = 
		HeadWing = 
		Mouth =
		Ahoge =  
		Mayu = 
		Eye = 
		Tail = 
		Bust = 
		Manga = 
	ELSEIF RESULT == 998
		CLEARLINE LINECOUNT
		PRINTFORML %InputTags%
		WAIT
	ELSEIF RESULT == 999
		CALL EFFECT_ALLRESET
		RETURN
	ENDIF

	GOTO K15T_SIM_LOOP
	





;TRYCALLFORMするのでFUNCTIONSしたいけどしちゃだめ
;過去の遺産 @槞彁_TachieGenerate との互換性があるけど重くなるよ
@槞彁_TachieGenerate_OldHTML(ImgParam, Size= 4000, Xpos = 2250, Ypos = 0)
	#DIMS DYNAMIC ImgParam
	#DIM DYNAMIC Xpos
	#DIM DYNAMIC Ypos
	#DIM DYNAMIC Size
	#DIMS DYNAMIC ResultHTML
	#DIMS DYNAMIC Layers,300
	#DIM DYNAMIC LCount
	#DIM DYNAMIC height
	
	
	;#region 基本素体
		
		Layers:10 = <nonbutton pos='{Xpos}'><img src='K15T_ベース' height='{Size}' ypos='{Ypos}'></nonbutton>
		Layers:20 = <nonbutton pos='{Xpos}'><img src='K15T_左手_通常' height='{Size}' ypos='{Ypos}'></nonbutton>
		Layers:30 = <nonbutton pos='{Xpos}'><img src='K15T_右手_通常' height='{Size}' ypos='{Ypos}'></nonbutton>
	;#endregion 
	;#region 胸
		IF STRCOUNT(ImgParam,"巨乳") || BASE:TARGET:罩杯 >= 12;J罩杯以上
			Layers:11 = <nonbutton pos='{Xpos}'><img src='K15T_胸_巨乳' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSE
			Layers:11 = <nonbutton pos='{Xpos}'><img src='K15T_胸_普乳' height='{Size}' ypos='{Ypos}'></nonbutton>
		ENDIF
	;#endregion 

	;#region 尾巴
		IF STRCOUNT(ImgParam,"通常尾巴２")
			Layers:0 = <nonbutton pos='{Xpos}'><img src='K15T_尾巴_通常2' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"通常尾巴") 
			Layers:0 = <nonbutton pos='{Xpos}'><img src='K15T_尾巴_通常' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"随机通常尾巴") 
			IF GETTIME()%2 == 1
				Layers:0 = <nonbutton pos='{Xpos}'><img src='K15T_尾巴_通常' height='{Size}' ypos='{Ypos}'></nonbutton>
			ELSE
				Layers:0 = <nonbutton pos='{Xpos}'><img src='K15T_尾巴_通常2' height='{Size}' ypos='{Ypos}'></nonbutton>
			ENDIF
		ELSEIF STRCOUNT(ImgParam,"爱心尾巴") 
			Layers:0 = <nonbutton pos='{Xpos}'><img src='K15T_尾巴_爱心' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"ハテナ尾巴") 
			Layers:0 = <nonbutton pos='{Xpos}'><img src='K15T_尾巴_ハテナ' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"ふりふり尾巴") 
			Layers:0 = <nonbutton pos='{Xpos}'><img src='K15T_尾巴_ふりふり' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"惊嚇尾巴") 
			Layers:0 = <nonbutton pos='{Xpos}'><img src='K15T_尾巴_惊嚇' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSE
			Layers:0 = <nonbutton pos='{Xpos}'><img src='K15T_尾巴_通常' height='{Size}' ypos='{Ypos}'></nonbutton>
		ENDIF

	;#region 服
		IF STRCOUNT(ImgParam,"全裸/")
		ELSEIF STRCOUNT(ImgParam,"吊帯衫/")
			IF STRCOUNT(ImgParam,"巨乳") || BASE:TARGET:罩杯 >= 12;J罩杯以上
				Layers:15 = <nonbutton pos='{Xpos}'><img src='K15T_内衣_巨乳' height='{Size}' ypos='{Ypos}'></nonbutton>
			ELSE
				Layers:15 = <nonbutton pos='{Xpos}'><img src='K15T_内衣_普乳' height='{Size}' ypos='{Ypos}'></nonbutton>
			ENDIF
		ELSE
			IF STRCOUNT(ImgParam,"巨乳") || BASE:TARGET:罩杯 >= 12;J罩杯以上
				Layers:15 = <nonbutton pos='{Xpos}'><img src='K15T_默认服_巨乳' height='{Size}' ypos='{Ypos}'></nonbutton>
			ELSE
				Layers:15 = <nonbutton pos='{Xpos}'><img src='K15T_默认服_普乳' height='{Size}' ypos='{Ypos}'></nonbutton>
			ENDIF
			Layers:25 = <nonbutton pos='{Xpos}'><img src='K15T_默认服_左手_通常' height='{Size}' ypos='{Ypos}'></nonbutton>
			Layers:35 = <nonbutton pos='{Xpos}'><img src='K15T_默认服_右手_通常' height='{Size}' ypos='{Ypos}'></nonbutton>
		ENDIF
	;#endregion 

	;#region 頭翼
		IF STRCOUNT(ImgParam,"通常頭翼")
			Layers:40 = <nonbutton pos='{Xpos}'><img src='K15T_頭翼_通常' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"惊嚇頭翼") 
			Layers:40 = <nonbutton pos='{Xpos}'><img src='K15T_頭翼_惊嚇' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"しょんぼり頭翼") 
			Layers:40 = <nonbutton pos='{Xpos}'><img src='K15T_頭翼_しょんぼり' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSE
			Layers:40 = <nonbutton pos='{Xpos}'><img src='K15T_頭翼_通常' height='{Size}' ypos='{Ypos}'></nonbutton>
		ENDIF
	;#endregion

	;顔素体
	Layers:50 = <nonbutton pos='{Xpos}'><img src='K15T_顔素体' height='{Size}' ypos='{Ypos}'></nonbutton>

	;#region 口
		IF STRCOUNT(ImgParam,"△")
			Layers:60 = <nonbutton pos='{Xpos}'><img src='K15T_口_△' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"嘟嘴") 
			Layers:60 = <nonbutton pos='{Xpos}'><img src='K15T_口_嘟嘴' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"へ字３") 
			Layers:60 = <nonbutton pos='{Xpos}'><img src='K15T_口_へ字３' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"ヮ")
			Layers:60 = <nonbutton pos='{Xpos}'><img src='K15T_口_ヮ' height='{Size}' ypos='{Ypos}'></nonbutton> 
		ELSEIF STRCOUNT(ImgParam,"小口３")
			Layers:60 = <nonbutton pos='{Xpos}'><img src='K15T_口_小口３' height='{Size}' ypos='{Ypos}'></nonbutton> 
		ELSEIF STRCOUNT(ImgParam,"半開４")
			Layers:60 = <nonbutton pos='{Xpos}'><img src='K15T_口_半開４' height='{Size}' ypos='{Ypos}'></nonbutton> 
		ELSEIF STRCOUNT(ImgParam,"微笑４") 
			Layers:60 = <nonbutton pos='{Xpos}'><img src='K15T_口_微笑４' height='{Size}' ypos='{Ypos}'></nonbutton> 
		ELSEIF STRCOUNT(ImgParam,"栗口２") 
			Layers:60 = <nonbutton pos='{Xpos}'><img src='K15T_口_栗口２' height='{Size}' ypos='{Ypos}'></nonbutton> 
		ELSEIF STRCOUNT(ImgParam,"無口系") 
			Layers:60 = <nonbutton pos='{Xpos}'><img src='K15T_口_無口系' height='{Size}' ypos='{Ypos}'></nonbutton> 
		ELSEIF STRCOUNT(ImgParam,"会話口") 
			Layers:60 = <nonbutton pos='{Xpos}'><img src='K15T_口_会話口' height='{Size}' ypos='{Ypos}'></nonbutton> 
		ELSEIF STRCOUNT(ImgParam,"呀哒") 
			Layers:60 = <nonbutton pos='{Xpos}'><img src='K15T_口_呀哒' height='{Size}' ypos='{Ypos}'></nonbutton> 
		ELSEIF STRCOUNT(ImgParam,"一文字") 
			Layers:60 = <nonbutton pos='{Xpos}'><img src='K15T_口_一文字' height='{Size}' ypos='{Ypos}'></nonbutton> 
		ELSE 
			Layers:60 = <nonbutton pos='{Xpos}'><img src='K15T_口_微笑４' height='{Size}' ypos='{Ypos}'></nonbutton>
		ENDIF
	;#endregion

	;#region 目
		IF STRCOUNT(ImgParam,"混乱")
			Layers:70 = <nonbutton pos='{Xpos}'><img src='K15T_目_混乱' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"しいたけ")
			Layers:70 = <nonbutton pos='{Xpos}'><img src='K15T_目_しいたけ' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"爱心眼")
			Layers:70 = <nonbutton pos='{Xpos}'><img src='K15T_目_爱心眼' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"笑颜")
			Layers:70 = <nonbutton pos='{Xpos}'><img src='K15T_目_笑颜' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"飘忽")&&STRCOUNT(ImgParam,"斜眼")
			Layers:70 = <nonbutton pos='{Xpos}'><img src='K15T_目_斜眼飘忽' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"斜眼")
			Layers:70 = <nonbutton pos='{Xpos}'><img src='K15T_目_斜眼' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"飘忽")
			Layers:70 = <nonbutton pos='{Xpos}'><img src='K15T_目_逸らす' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"睁開")
			Layers:70 = <nonbutton pos='{Xpos}'><img src='K15T_目_睁開' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"闭眼")
			Layers:70 = <nonbutton pos='{Xpos}'><img src='K15T_目_寝' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"タレ目")
			Layers:70 = <nonbutton pos='{Xpos}'><img src='K15T_目_通常' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"涙目＞＜")
			Layers:70 = <nonbutton pos='{Xpos}'><img src='K15T_目_涙目＞＜' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"＞＜")
			Layers:70 = <nonbutton pos='{Xpos}'><img src='K15T_目_＞＜' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"涙目〇〇")
			Layers:70 = <nonbutton pos='{Xpos}'><img src='K15T_目_涙目〇〇' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"〇〇")
			Layers:70 = <nonbutton pos='{Xpos}'><img src='K15T_目_〇〇' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"半目")
			Layers:70 = <nonbutton pos='{Xpos}'><img src='K15T_目_半目' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSE
			Layers:70 = <nonbutton pos='{Xpos}'><img src='K15T_目_通常' height='{Size}' ypos='{Ypos}'></nonbutton>
		ENDIF
	;#endregion

	;#region 眉
		IF STRCOUNT(ImgParam,"困扰眉")
			Layers:80 = <nonbutton pos='{Xpos}'><img src='K15T_眉_こまり' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"通常眉３")
			Layers:80 = <nonbutton pos='{Xpos}'><img src='K15T_眉_通常' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"憤怒眉")
			Layers:80 = <nonbutton pos='{Xpos}'><img src='K15T_眉_憤怒' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"蹙眉")
			Layers:80 = <nonbutton pos='{Xpos}'><img src='K15T_眉_ひそめ' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSE
			Layers:80 = <nonbutton pos='{Xpos}'><img src='K15T_眉_通常' height='{Size}' ypos='{Ypos}'></nonbutton>
		ENDIF
	;#endregion

	;#region 呆毛
		IF STRCOUNT(ImgParam,"しょんぼり呆毛")
			Layers:90 = <nonbutton pos='{Xpos}'><img src='K15T_呆毛_しょんぼり' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"爱心呆毛")
			Layers:90 = <nonbutton pos='{Xpos}'><img src='K15T_呆毛_爱心' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"惊嚇呆毛")
			Layers:90 = <nonbutton pos='{Xpos}'><img src='K15T_呆毛_惊嚇' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"ハテナ呆毛")
			Layers:90 = <nonbutton pos='{Xpos}'><img src='K15T_呆毛_ハテナ' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSEIF STRCOUNT(ImgParam,"呆毛")
			Layers:90 = <nonbutton pos='{Xpos}'><img src='K15T_呆毛_通常' height='{Size}' ypos='{Ypos}'></nonbutton>
		ELSE
			Layers:90 = <nonbutton pos='{Xpos}'><img src='K15T_呆毛_通常' height='{Size}' ypos='{Ypos}'></nonbutton>
		ENDIF
	;#endregion

	;#region 漫画表現
		SIF STRCOUNT(ImgParam,"赤面２")
			Layers:100 += @"<nonbutton pos='{Xpos}'><img src='K15T_漫画表現_赤面' height='{Size}' ypos='{Ypos}'></nonbutton>"
		SIF STRCOUNT(ImgParam,"对话框兴奋")
			Layers:100 += @"<nonbutton pos='{Xpos}'><img src='K15T_漫画表現_对话框兴奋' height='{Size}' ypos='{Ypos}'></nonbutton>"
		SIF STRCOUNT(ImgParam,"对话框惊讶")
			Layers:100 += @"<nonbutton pos='{Xpos}'><img src='K15T_漫画表現_对话框惊讶' height='{Size}' ypos='{Ypos}'></nonbutton>"
		SIF STRCOUNT(ImgParam,"对话框汗３")
			Layers:100 += @"<nonbutton pos='{Xpos}'><img src='K15T_漫画表現_对话框汗３' height='{Size}' ypos='{Ypos}'></nonbutton>"
	;#endregion

	;#region 立ち絵非表示
		IF STRCOUNT(ImgParam,"非表示/")
			VARSET Layers:0,
		ENDIF
	;#endregion 

	ResultHTML = 
	FOR LCount,0,300
		ResultHTML += @"%Layers:LCount%"
	NEXT
	RESULTS = 
	RESULTS += @"%ResultHTML%"
	RETURN 1

