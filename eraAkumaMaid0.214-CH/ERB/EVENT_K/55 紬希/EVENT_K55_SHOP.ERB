;-------------------------------------------------
;取引画面と、购物の際の台詞を記述します
;-------------------------------------------------
;取引画面での台詞。悪魔以外は大部分が不要です
;-------------------------------------------------

@KOJO_WISH_K55, ARGS
#DIM MEMO_LINECOUNT

MEMO_LINECOUNT = LINECOUNT

SELECTCASE ARGS
CASE "取引開始"
	;自分を相手にＨしてる最中にお願いされた
	IF COND("Ｈ最中の取引")
		;しかも挿入中！
		IF INSERT("挿入相手") == MASTER
			PRINTFORMW 「欸……灵魂的交易？！」
			CALL PRINT_STRW, "「等等_HH_等等_HH_」"
		ELSE
			PRINTFORMW 「忘记拿东西了吗？」
			CALL PRINT_STRW, "「准备好变得舒服吧……_HH_」"
		ENDIF
	ELSEIF TALENT:恋慕 && YURI_COND(MASTER) >= 1 && TEXTS("日期対応イベント") == "情人節" && CDAYEV("情人節") == 0
		IF TALENT:相思相愛
			PRINTFORMW 「啊、稍微等一下」
			PRINTFORMW 「有想要给你的东西！」
			PRINTFORML 
			PRINTFORMW 「……今天、是情人节嘛……对吧。」
			PRINTFORMW 「能和%CNAME("二人称")%的口味就好了……」
		ELSE
			PRINTFORMW 「啊……啊欸欸啊、拜托我吗？」
			PRINTFORMW 「倒是没有関系、今天可是情人节哦。」
			PRINTFORMW 「%CNAME("二人称")%啊、有收到巧克力吗？」
			CALL PRINT_SELECT, "收到了/没收到"
			IF RESULT == 0
				PRINTFORMW 「……是吗」
				PRINTFORMW 「什么啊、这出乎意料的反应。……会寂寞吗？」
				PRINTFORMW 「啊哇、開玩笑的。给、情人节巧克力」
				CALL PRINT_STRW, @"「%CNAME("二人称")%更加……喜欢的话就好了_HH_」"
			ELSE
					PRINTFORMW 「每年的惯例呢」
				PRINT 「但是……你是唯一的
				IF TALENT:相思相愛
					PRINT 恋人
				ELSE
					PRINT 異性
				ENDIF
				CALL PRINT_STRW, @"想让你品尝………啊_HH_」"
				CALL PRINT_STRW, @"「我用了变得美味的魔法、所以肯定会好吃的_HH_」"
			ENDIF
		ENDIF
		PRINTL 
		CALL PRINT_STRW, @"黄色_%CALLNAME:TARGET%から本命巧克力を貰いました！"
		CALL SET_CDAYEV, "情人節"
	ELSEIF TALENT:恋慕 && TEXTS("日期対応イベント") == "白色情人節" && CDAYEV("情人節") && CDAYEV("白色情人節")== 0
		PRINTFORMW 「欸、情人节的回礼？」
		PRINTFORMW 「谢谢！我会好好品尝的！！」
		PRINTFORML 
		CALL PRINT_STRW, @"黄色_%CALLNAME:TARGET%情人节回礼了。"
		CALL SET_CDAYEV, "白色情人節"
	ELSE
		PRINTFORMW 「如果是力所能及的话」
	ENDIF
CASE "愛の告白"
	;必ず恋慕取ったあとに、恋慕えっちしないとここにはたどり着けない
	IF TALENT:相思相愛 && CEVENT("調教開始：恋慕") && FLAG:二人きり
		IF CFLAG:想イノ行方 >= 5
			PRINTFORMW %CALLNAME:MASTER%传达了爱意、
			PRINTFORMW %CALLNAME:TARGET%脸上带着笑容羞涩的看向一旁的天空。
			PRINTFORML 
			PRINTFORMW 「一直在想、这样就好了、那样就好了」
			PRINTFORMW 「但是%CNAME("一人称")%和我都是男性、这样是不行的……我知道的但是……」
			PRINTFORMW 「……%CNAME("一人称")%也、非常高兴」
			PRINTFORMW 「但是…… 心理准备……没那么、简单就做好」
			PRINTFORMW 相思相爱、就是指这样吧。这份感情现在才被从新认识到。
			PRINTFORMW 不知如何是好的%CALLNAME:TARGET%脸颊上留下的泪水、也就是说……
			PRINTFORMW 
			PRINTFORMW 「……%CNAME("二人称", "かな")%、我爱你……」
			PRINTFORMW 这样说着、%CALLNAME:TARGET%用嘴堵住了你的双唇、久久没有分開。
			CFLAG:想イノ行方 += 20
		ELSE
			PRINTFORMW %CALLNAME:MASTER%传达了爱意、
			PRINTFORMW %CALLNAME:TARGET%像是放弃一般的苦笑着……
			PRINTFORML 
			PRINTFORMW 「虽然、事到如今。……真的喜欢上我了呢」
			PRINTFORMW 「……%CNAME("一人称")%、啊」
			PRINTFORMW 「呐、喜欢%CNAME("二人称")%、还是%CNAME("一人称")%？」
			PRINTFORMW 「喜欢那边、都会很高清。……果然还是想问一下」
			PRINTFORML 
			;運命の決断
			PRINTFORMW 喜欢紬希的、哪一种性别呢？
			CALL PRINT_STRW, @"黄色_※这里的选择、可能会影响之后的剧情"
			CALL PRINT_SELECT, "作为男生喜欢/紬希就是紬希/作为女生喜欢/喜欢的是身体所以无所谓"
			IF RESULT == 0
				CALL PRINT_STRW, @"黄色「是吧、果然……是、这样呢」"
				CALL PRINT_STRW, @"「……但是……有点開心、_HH_」"
				CFLAG:想イノ行方 += 5
			ELSEIF RESULT == 1
				CALL PRINT_STRW, @"「笨蛋……_HH_」"
				CALL PRINT_STRW, @"「……最喜欢你、了……_HH_"
				CALL PRINT_STRW, @"「……%CNAME("一人称")%也好、%CNAME("二人称")%也好都最喜欢、了……_HH_」"
				CFLAG:想イノ行方 += 15
			ELSEIF RESULT == 2
				CALL PRINT_STRW, @"「……谢谢你_HH_」"
				CALL PRINT_STRW, @"「……果然%CNAME("一人称")%最喜欢这样的%CNAME("二人称")%、我知道的_HH_」"
				CFLAG:想イノ行方 += 10
			ELSE
				CALL PRINT_STRW, @"赤_「是吗、……%CNAME("一人称")%现在是这样的呢……」"
				CFLAG:想イノ行方 -= 100000
			ENDIF
		ENDIF
	ELSEIF TALENT:恋慕 && CEVENT("調教開始：恋慕") && FLAG:二人きり == 0
		PRINTFORMW 「那个、什么」
		PRINTFORMW 「考虑一下时间和场合啊……」
		TALENT:相思相愛 = 0
		CFLAG:心情差 = 1
		CALL SET_DEVENT, "告白保留"
	;断る
	ELSE
		SIF TALENT:男性 && TALENT:MASTER:男性
			PRINTFORMW 「欸？ %CNAME("一人称")%们、都是男性哦？」
		PRINTFORML 「%CNAME("二人称")%……我并不讨厌也想在你身边但是」
		PRINTFORMW 「但我觉得现在还太早了……」
	ENDIF

;胖次のお願いした時に相手が没穿内褲だった
CASE "没穿内褲"
	IF COND("合意：胖次交易")

	ELSE

	ENDIF
;胖次を要前の会話。
;ただし、悪魔の場合には魂を払っているので確実に渡すことになる
;ここで本来胖次を给かどうかなどを加味して分岐を設ける事も出来る。特に書かなくてもよい
;TFLAG:取引承諾 = 0とすると胖次拒否に行くようになり、TFLAG:取引承諾 = 1とすると判定無視で胖次を渡せるようになる
;TFLAG:取引価格 に数字を入れる事で好きな額を要求できるようになる。基準相場は$500です
;TFLAG:値上げ交渉 に数字を入れておくと、断られた際もその値上乗せで胖次を渡す展開に出来る
;TFLAG:取引拒否 = 1 とすると本来取引できるかに関わらず、取引しなくなる
CASE "胖次交易"
	;ＯＫ！
	IF TFLAG:取引承諾
		;日期と時間参照随机
		IF COND("合意：胖次交易") && RANDC(4) == 0
			PRINTFORMW 「嗯、可以哦～」
			TFLAG:取引価格 = 1000
		ELSE
			PRINTFORMW 「不……那样、有点……」
		ENDIF
	;断られる
	ELSE
		;これを指定しておくと、実行値が足りない際にこの額上乗せで応じてくれるようになる
		TFLAG:値上げ交渉 = 500
	ENDIF
CASE "胖次"
	;値上げ交渉した
	IF TFLAG:値上げ交渉
		PRINTFORMW 「还想要多一点啊～？」
	;相場より高い額を要求されるままに払った
	ELSEIF TFLAG:取引価格 > 500
		PRINTFORMW 「非常感谢」
	;値切って相場と変わらず$500払う。ここでTFLAG:取引承諾 = 0とすることで拒否するのもよいでしょう
	ELSEIF TFLAG:値切った
		PRINTFORMW 「没办法啊……」
	ELSE
		PRINTFORMW 
	ENDIF
	;胖次を脱いで渡してくる汎用地の文
	CALL DAILY_MESSAGE, "脱下胖次交了出去"

CASE "胖次拒否"
	;取引を拒否した際
	IF TFLAG:取引拒否

	ELSE

	ENDIF

;TFLAG:値上げ交渉 に数字を入れておくと、断られた際もその値上乗せで服を脱掉展開に出来る
;TFLAG:取引拒否 = 1 とすると本来取引できるかに関わらず、取引しなくなる
CASE "全裸交易"
	;ＯＫ！
	IF TFLAG:取引承諾

	;断られる
	ELSE
		;これを指定しておくと、実行値が足りない際にこの額上乗せで応じてくれるようになる
		;TFLAG:値上げ交渉 = 2000
	ENDIF
CASE "全裸"
	;値上げ交渉した("全裸交易"で設定した場合のみ)
	IF TFLAG:値上げ交渉

	;取引初成功
	ELSEIF COND("合意：全裸化") == 0

	ELSE

	ENDIF
	;汎用地の文
	CALL EVENT_DATUI, "裸体"
CASE "全裸拒否"
	;取引を拒否した際("全裸交易"で設定した場合のみ)
	IF TFLAG:取引拒否

	;二人きりなら脱いでくれるけど状況が悪い
	ELSEIF COND("合意：全裸化") && (CHARA_NUM("室内の邪魔者") || PLACE("個室") == 0)

	ELSE

	ENDIF

;TFLAG:取引拒否 = 1 とすると本来取引できるかに関わらず、取引しなくなる
CASE "事后避孕药取引"

CASE "事后避孕药"
	;代金をまけてくれた場合
	IF TFLAG:値切った
		;所持金が足りなかった場合です
		;現状、ここに来るのは恋慕无の時のみ
	;拝み倒したら代金を払わなくても許してくれた場合
	ELSEIF TFLAG:取引価格 == 0
		;現状、ここに来るのは恋慕有の時のみ
	ELSE
		;普通にお金を払った場合
		;口上无でも自然な感じです
		;ですが恋慕のときなどは、なにか一言あってもいいかもですね
	ENDIF

CASE "事后避孕药拒否"
	;これはCASE "事后避孕药取引"内でTFLAG:取引拒否 = 1 となる分岐を作った場合のみ
	IF TFLAG:取引拒否

	;拝み倒して失敗した場合
	ELSEIF TFLAG:取引価格 == 0
		;轻轻地地の文が表示されます。口上有无どちらでも大丈夫そうです。
	;其他、你が薬代を不支付場合
	ELSE
		;恋慕状態で、それなりに妊娠の恐惧がある場合
		IF ( COND("受精確認") || COND("胎内の精液量") ) && TALENT:恋慕
			;お金がないか、不支付を選んだ場合です。
			;それなら避妊できなくて妊娠しちゃっても仕方ないね…(爱心)って感じのやつです。
			;地の文が表示されるので何も書かないほうが良いかもしれません。
		;不支付、を選んだ場合
		ELSEIF MONEY >= TFLAG:取引価格
			;口上无でも自然な感じです
		;お金が足りなかった場合
		ELSE
			;不支付を選んだ場合も、お金が足りないときはここへ来ます。
		ENDIF
	ENDIF
CASE "同居拒否"

CASE "同居希望"

CASE "同居頻度的相談"

CASE "便当拒否"

CASE "做便当"
	;便当のお願い２回目以降
	IF COND("合意：便当")

	;以下は初めて作ってもらうよう变成了とき
	ELSE
		IF COND("同居中")

		ELSE

		ENDIF
	ENDIF

;COND("口服避孕薬派")かどうかで初回が"口服避孕薬を飲んで欲しい"or"口服避孕薬を止めて欲しい"に分かれます
CASE "口服避孕薬"
	;角色が口服避孕薬派なら、こっちだけ書いてください
	IF COND("口服避孕薬派")
		;口服避孕薬を服用してもらう
		IF CFLAG:口服避孕薬

		;口服避孕薬の服用を止めてもらう
		ELSE
			;初回
			IF DEVENT(ARGS) == 0

			ELSE

			ENDIF
		ENDIF
	;角色が口服避孕薬派でないなら、こっちだけ書いてください
	ELSE
		;口服避孕薬を服用してもらう
		IF CFLAG:口服避孕薬
			;初回
			IF DEVENT(ARGS) == 0

			ELSE

			ENDIF
		;口服避孕薬の服用を止めてもらう
		ELSE

		ENDIF
	ENDIF
;COND("口服避孕薬派")の人に口服避孕薬服用を止めてもらうお願いをしたけど聞き入れてもらえなかった場合
CASE "口服避孕薬中断拒否"

;COND("讨厌口服避孕薬")の人に口服避孕薬服用のお願いをしたけど聞き入れてもらえなかった場合
CASE "口服避孕薬服用拒否"

CASE "淫紋拒否"

;"淫紋贴纸直前"or"淫紋贴纸"の片方を書けば十分だと思います
CASE "淫紋贴纸直前"
	;初回
	IF DEVENT(ARGS) == 0

	ELSE

	ENDIF

CASE "淫紋贴纸"
	;初回
	IF DEVENT(ARGS) == 0

	ELSE

	ENDIF
;"淫紋直前"or"淫紋"の片方を書けば十分だと思います
CASE "淫紋直前"
	SELECTCASE MARK:淫紋
	CASE 2

	CASE 3

	CASE 4

	ENDSELECT
CASE "淫紋"
	SELECTCASE MARK:淫紋
	CASE 2

	CASE 3

	CASE 4

	ENDSELECT

CASE "拜托処理性欲"

CASE "性処理の一時中断"

CASE "性処理拒否"

;悪魔、淫魔、妖狐専用
CASE "给我看尾巴"

CASE "给我看尾巴拒否"

;改变髪型のは、長さが披肩以上の人のみ。未設定だと披肩扱いです
;髪型を弄る際に手伝ってくれる人がASSIになっています。お手伝い桑を指名したい場合にはその人をASSIにして下さい
CASE "改变髪型"

CASE "髪型変更の感想"
	;どの髪型变成了かで分岐可能
	SELECTCASE CONDS("髪型の種類")
	;その角色の普段の髪型(光滑柔顺や乱髪にはできないので、角色次第ではこの分岐には来ません)
	CASE CONDS("普段の髪型")
		PRINTFORMW 
	CASE "齐刘海"
		PRINTFORMW 
	CASE "直髪"
		PRINTFORMW 
	CASE "卷髪"
		PRINTFORMW 
	CASE "外八"
		PRINTFORMW 
	CASE "双马尾"
		PRINTFORMW 
	CASE "马尾辫"
		PRINTFORMW 
	CASE "三股辫"
		PRINTFORMW 
	CASE "编起来"
		PRINTFORMW 
	CASE "団子頭"
		PRINTFORMW 
	;其他
	CASEELSE
		PRINTFORMW 
	ENDSELECT
CASE "改变髪型拒否"

;これは普段から连褲襪を履く人じゃないとあんまり見る機会ないと思う
CASE "连褲襪着替え"
	;台詞を書いたら下のRETURN 1を消してください
	RETURN 1
	;どれに履き替えてもらったか
	IF CHECK_BOTTOM("開放型连褲襪")
		PRINTFORMW 
	ELSEIF CHECK_BOTTOM("渔网连褲襪")
		PRINTFORMW 
	ELSEIF CHECK_BOTTOM("连褲襪")
		PRINTFORMW 
	;生足
	ELSE
		PRINTFORMW 
	ENDIF
CASE "连褲襪着替え拒否"

CASE "巨根化して"
	;これは"大きくなる前"のサイズなのに注意
	SELECTCASE CONDS("基本阴茎尺寸")
	CASE "短小"

	CASE "普通"

	CASE "巨根"

	CASE "馬根"

	;腕並以上
	CASEELSE

	ENDSELECT

CASE "巨根化して拒否"

CASE "短小化して"
	;これは"小さくなる前"のサイズなのに注意
	SELECTCASE CONDS("基本阴茎尺寸")
	CASE "普通"

	CASE "巨根"

	CASE "馬根"

	;腕並、規格外
	CASEELSE

	ENDSELECT

CASE "短小化して拒否"

;以下は悪魔専用
CASE "魂が足りない"

CASE "想要钱"

CASE "甜言蜜语"

CASE "謎之魅力"

CASE "射精量強化"
	;自分を相手にＨしてる最中にお願いされた
	IF COND("Ｈ最中の取引")
		;しかもＶ挿入中！
		IF INSERT("Ｖ挿入相手") == MASTER

		ELSE

		ENDIF
	ELSE

	ENDIF
CASE "巨根化"
	;これは"大きくなる前"のサイズなのに注意
	SELECTCASE CONDS("基本阴茎尺寸", PLAYER)
	CASE "短小"

	CASE "普通"

	CASE "巨根"

	CASE "馬根"

	;腕並以上
	CASEELSE

	ENDSELECT
CASE "短小化"
	;これは"小さくなる前"のサイズなのに注意
	SELECTCASE CONDS("基本阴茎尺寸", PLAYER)
	CASE "普通"

	CASE "巨根"

	CASE "馬根"

	;腕並、規格外
	CASEELSE

	ENDSELECT
ENDSELECT

;以下は汎用台詞(すでに喋っている場合には下には行かない)
SIF LINECOUNT > MEMO_LINECOUNT
	RETURN 1

;汎用拒否
IF STRCOUNT(ARGS, "拒否")
	PRINTFORMW 「嗯嗯、对不起……」
;汎用取引（特に記述することがないならスキップ）
ELSEIF STRCOUNT(ARGS, "取引")

;汎用ＯＫ
ELSE
	PRINTFORMW 「可以哦」
ENDIF

;-------------------------------------------------
;购物での台詞
;-------------------------------------------------
@KOJO_SHOP_K55, ARGS

SELECTCASE ARGS
CASE "一緒に出発"
	;初回
	IF SEVENT(ARGS) == 0

	;着替えてもらう
	ELSEIF CHECK_CLO("裸体") || CHECK_CLO("泳装姿") || CHECK_CLO("体操服姿") || CHECK_CLO("内衣姿")

	ELSE

	ENDIF
CASE "目送"

CASE "没収胖次出発"
	;初回
	IF SEVENT(ARGS) == 0

	;既に没穿内褲
	ELSEIF EQUIP:胖次 == 0

	ELSE

	ENDIF
CASE "保持现在的装扮出発"
	IF CHECK_CLO("泳装姿")

	ELSEIF CHECK_CLO("体操服姿")

	ELSEIF CHECK_CLO("内衣姿") || CHECK_CLO("裸体")

	ENDIF
CASE "会計交代"
	;初回
	IF SEVENT(ARGS) == 0 || SEVENT("商品購入") == 0

	ELSE

	ENDIF
CASE "商品購入"
	;今買った物
	SELECTCASE STR:購入道具
	;ギリギリ通常商品の範疇or你用
	CASE "撮影機材", "潤滑液", "媚薬", "飞机杯"

	CASE "避孕套"
		;この商品を初めて買わされた
		IF SEVENT(STR:購入道具) == 0

		ELSE

		ENDIF
	;えっちな商品
	CASEELSE

	ENDSELECT
CASE "店内待機"
	;とりあえず何か一個買った時or33％で喋る
	SIF COND("買上品数") != 1 && RAND:3
		RETURN 0
	;胖次没収中
	IF COND("買い物胖次没収中")

	ELSE

	ENDIF
CASE "购物終了"
	;胖次没収中
	IF COND("買い物胖次没収中")

	;なにも買わなかった
	ELSEIF COND("買上品数") == 0

	ELSEIF CHECK_CLO("泳装姿") || CHECK_CLO("体操服姿")
	
	ENDIF
ENDSELECT
