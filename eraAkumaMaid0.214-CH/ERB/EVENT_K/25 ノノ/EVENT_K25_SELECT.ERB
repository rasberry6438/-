@WISH_K25_ADDSELECT
;乃々君が男装したり、女装に戻したりできるようになるお願い
;しかし男の男装とは・・・？
IF (MARK:屈服刻印 >= 1 || ABL:信頼 >= 2) && CFLAG:好感度 >= 100
	IF CEVENT("乃々：男装")
		STR:選択肢 = %STR:選択肢% [80] %TEXT_LJ("制服を戻して", 16)% … 女性用の制服に戻してもらいます
	ELSE
		STR:選択肢 = %STR:選択肢% [80] %TEXT_LJ("制服を男性用に", 16)% … 男性用の制服で登校してもらいます
	ENDIF
	STR:選択肢 = %STR:選択肢%（不需要魂）/
	;休托莉酱の同名のものを丸パク……リスペクトして作ったお願い
	;男性器と女性器の呼称を変更できるようになります
	STR:選択肢 = %STR:選択肢% [81] %TEXT_LJ("男性器をあだ名で", 16)% … 男性器の呼称を変えてもらいます（不需要魂）/
	STR:選択肢 = %STR:選択肢% [82] %TEXT_LJ("女性器をあだ名で", 16)% … 女性器の呼称を変えてもらいます（不需要魂）/
ENDIF

IF CEVENT("乃々：妊娠可")
	IF TALENT:Ａ妊娠体質
		STR:選択肢 = %STR:選択肢% [83] %TEXT_LJ("妊娠不可になって", 16)% … 妊娠できないように戻ってもらいます
	ELSE
		STR:選択肢 = %STR:選択肢% [83] %TEXT_LJ("妊娠可能になって", 16)% … 妊娠できるようになってもらいます
	ENDIF
	STR:選択肢 = %STR:選択肢%（不需要魂）/
	;你が妊娠できない状態のとき、魂を消費して妊娠可能をつけることができるようになるお願い
	;妊娠中or受精中は文面を分岐させたいので、お願い自体はできるようにする（効果はない）
	;妊娠してるのが分かってなければ、この場で妊娠発覚扱いにできるようにしたい
	;灯君のＴＳイベントを参考にさせていただきました
	IF COND("初期Ｖ妊娠不能", MASTER)
		IF COND("妊娠可能", MASTER)
			IF BASE:MASTER:魂 > 100 || BASE:魂 > 100
				STR:選択肢 = %STR:選択肢% [84] %TEXT_LJ("妊娠不可にして", 16)% … 妊娠できないように戻してもらいます/
			ELSE
				STR:選択肢 = %STR:選択肢%灰色/ [84] %TEXT_LJ("妊娠不可にして", 16)% … %CALLNAME:MASTER%か%CALLNAME:TARGET%の魂が1.01以上必要です/
			ENDIF
		ELSE
			;文章の最後には半角スペース入ってないよ！
			IF BASE:MASTER:魂 > 100 || BASE:魂 > 100
				STR:選択肢 = %STR:選択肢% [84] %TEXT_LJ("妊娠可能にして", 16)% …
				;文面を分岐させてみたいのでここで変える
				;你は人形になれないので無駄分岐だが、雰囲気付けのため加える
				IF COND("種族：人形", MASTER)
					STR:選択肢 = %STR:選択肢% 人形の
				ELSEIF TALENT:MASTER:未成熟
					STR:選択肢 = %STR:選択肢% 未成熟な
				ELSEIF TALENT:MASTER:男性
					STR:選択肢 = %STR:選択肢% 男の
				ENDIF
				STR:選択肢 = %STR:選択肢%体でも妊娠できるようにしてもらいます/
			ELSE
				STR:選択肢 = %STR:選択肢%灰色/ [84] %TEXT_LJ("妊娠可能にして", 16)% … %CALLNAME:MASTER%か%CALLNAME:TARGET%の魂が1.01以上必要です/
			ENDIF
		ENDIF
	ENDIF
ENDIF

IF CEVENT("伪娘講座") && TALENT:MASTER:男性
	IF TALENT:MASTER:伪娘
		STR:選択肢 = %STR:選択肢% [85] %TEXT_LJ("男性に戻して", 16)% … 伪娘から普通の男性に戻してもらいます（不需要魂）/
	ELSE
		STR:選択肢 = %STR:選択肢% [85] %TEXT_LJ("伪娘にして", 16)% … %CALLNAME:TARGET%に伪娘に見えるようにしてもらいます（不需要魂）/
	ENDIF
ENDIF

;ポリネシアン性交来招待，みたいという希望だけをここに書いておく
;できるだけ游戏的にもエッチかつフラストレーションのたまらないものにしたい
;SIF TALENT:相思相愛 && CEVENT("Ｐ・性交") == 0
;	STR:選択肢 = %STR:選択肢% [84] %TEXT_LJ("提案をしてみる", 16)% … %CALLNAME:TARGET%にポリネシアン・性交を提案します（不需要魂）/

@KOJO_WISH_K25_ADDSELECT,ARGS
SELECTCASE ARGS
CASE "制服を戻して"
	PRINTFORMW %CALLNAME:MASTER%请求%CALLNAME:TARGET%从明天開始穿女性校服上学
	PRINTL
	PRINTFORMW 「还是和以前一样比较好吗？　我知道了，下一次就会换回去」
	PRINTL 
	PRINTFORMW %CALLNAME:TARGET%从明天開始会穿女性校服上学
	CALL DEL_CEVENT, "乃々：男装"
CASE "制服を男性用に"
	PRINTFORMW %CALLNAME:MASTER%请求%CALLNAME:TARGET%从明天開始穿男性校服上学
	PRINTL 
	PRINTFORMW 「是这样啊……说不定穿得和往常不一样也很新鲜呢。可以哦」
	PRINTL
	PRINTFORMW %CALLNAME:TARGET%从明天起就会穿着男性用的制服来上学了
	CALL SET_CEVENT, "乃々：男装"
CASE "男性器をあだ名で", "女性器をあだ名で"
	PRINTFORMW %CALLNAME:MASTER%请求%CALLNAME:TARGET%改变对\@ARGS == "男性器をあだ名で" ? %TEXTR("男性器/阴茎")% # %TEXTR("女性器/ヴァギナ")%\@的称呼
	PRINTL 
	IF YOKUBO()
		CALL PRINT_STRW, @"「呵呵_H_%CNAME("二人称")%的话，就会考虑色色的事情呢_H_」"
		PRINTFORMW 「那么，想怎么称呼呢？」
	ELSE
		PRINTFORMW 「诶、称、称呼方式吗……？」
		PRINTFORMW 「我、我明白了。…………应该怎么称呼呢？	」
	ENDIF
	PRINTL
	IF ARGS == "男性器をあだ名で"
		CALL PRINT_SELECT, "ちんちん/おちんちん/おちんぽ/其他", "果然還是放棄"
		SELECTCASE RESULT
		CASE 0
			CALL SET_CEVENT, "男性器呼：ちんちん_ちんちん"
		CASE 1
			CALL SET_CEVENT, "男性器呼：おちんちん_おちんちん"
		CASE 2
			CALL SET_CEVENT, "男性器呼：おちんぽ_おちんぽ"
		CASE 3
			CALL GENITALNAME_CONVERT, "男性器"
		CASE 100
			PRINTFORMW 「就这样吧」
			RETURN 1
		ENDSELECT
		PRINTFORMW 「以后叫%CNAME("男性器")%就好了吗\@YOKUBO() ? ね、我明白了 # か……？\@」
	ELSE
		CALL PRINT_SELECT, "まんこ/おまんこ/下のお口/其他", "果然還是放棄"
		SELECTCASE RESULT
		CASE 0
			CALL SET_CEVENT, "女性器呼：まんこ_まんこ"
		CASE 1
			CALL SET_CEVENT, "女性器呼：おまんこ_おまんこ"
		CASE 2
			CALL SET_CEVENT, "女性器呼：下のお口_したのおくち"
		CASE 3
			CALL GENITALNAME_CONVERT, "女性器"
		CASE 100
			PRINTFORMW 「还是维持现状吧」
			RETURN 1
		ENDSELECT
		PRINTFORMW 「以后叫%CNAME("女性器")%就好了吗\@YOKUBO() ? ね、我明白了 # か……？\@」
	ENDIF
CASE "妊娠不可になって"
	PRINTFORMW %CALLNAME:MASTER%向%CALLNAME:TARGET%拜托了想从可以妊娠的状态恢复原样的愿望
	PRINTL 
	IF COND("妊娠中") || COND("受精確認")
		PRINTFORMW 「对不起。现在做不到」
		PRINTFORMW 「请之后再来吧」
	ELSE
		PRINTFORMW 「我明白了，那么请稍事等候……」
		CALL SETFLAG, "妊娠不能にする", MASTER
		PRINTL 
		PRINTFORMW 「……久等了。回到原样了哟」
		PRINTFORMW %CALLNAME:TARGET%的身体恢复了原状
	ENDIF
CASE "妊娠可能になって"
	PRINTFORMW %CALLNAME:MASTER%请求%CALLNAME:TARGET%变成可以妊娠的状态
	PRINTL 
	PRINTFORMW 「我明白了，那么请稍事等候……」
	CALL SETFLAG, "妊娠可能にする", MASTER
	PRINTL 
	PRINTFORMW 「……久等了。变得可以妊娠了哦」
	PRINTFORMW %CALLNAME:TARGET%变得可以妊娠的样子了
CASE "妊娠不可にして"
	PRINTFORMW %CALLNAME:MASTER%请求%CALLNAME:TARGET%从可以妊娠的状态回到原样
	PRINTL
	PRINTFORMW 「还是想要变成不能妊娠的体质吗？」
	IF COND("妊娠中", MASTER) || COND("受精確認", MASTER)
		PRINTFORM 「我明白了……我也说的是
		IF COND("妊娠後期")
			PRINTFORMW 再稍微过些时候就要生産了，不是吗」
		ELSEIF COND("妊娠中期")
			PRINTFORMW 肚子也已经变大很多了，不是吗」
		ELSEIF COND("妊娠初期")
			PRINTFORMW 虽然肚子还没有大起来，但是难道不是妊娠了吗」
		ELSEIF COND("受精確認", MASTER)
			PRINTFORMW 「……啊嘞？　法术看上去不起作用的样子呢」
		ENDIF
		;生理は何か起きてない扱いなの？　と突っ込んで是けない
		IF COND("妊娠中：妊娠発覚済み")
			PRINTFORMW 「这个法术在胎内有什么事情发生着的情况下是不会发挥效果的」
			PRINTFORMW 「所以，直到生出孩子为止都请等候」
		ELSE
			PRINTFORMW 「……恐怕一时半会都不会起作用了呢」
			PRINTFORMW 「因为稍微等一下就能做好，请让我再来一次」
		ENDIF
	ELSE
		PRINTFORMW 「我知道了。那么请稍作等候哦……」
		IF BASE:MASTER:魂 <= 100
			PRINTFORMW 「……哦呀？　魂好像不够了的样子」
			PRINTFORMW 「没办法。因为实际上已经存储着%CNAME("二人称")%的魂了，就用那个来做吧」
			CALL PRINT_STRW, @"「……之后，请准备好充足的回礼哦_H_」"
			CALL KOJO_WISH_K25_USESOUL, ARGS, TARGET
		ELSE
			CALL KOJO_WISH_K25_USESOUL, ARGS
		ENDIF
	ENDIF
CASE "妊娠可能にして"
	PRINTFORM 想要把%CALLNAME:MASTER%は
	IF COND("種族：人形", MASTER)
		PRINTFORM %TEXTR("硬的/冷的/人工的")%人形的
	ELSEIF TALENT:MASTER:男性
		IF TALENT:MASTER:伪娘
			PRINTFORM 尽管会被误认作女性、实际上是男性的
		ELSE
			PRINTFORM 男性的
		ENDIF
	ELSEIF TALENT:MASTER:未成熟
		PRINTFORM 还和孩子一样的
	ENDIF
	PRINTFORMW 身体，向%CALLNAME:TARGET%拜托了想让这样的身体也能妊娠
	PRINTL 
	IF CEVENT("乃々：妊娠可能了承") == 0
		;場所がおかしいが、还是算了を押すと戻される都合上こちらに書いておく
		CALL SET_CEVENT, "乃々：妊娠可能了承"

		PRINTFORMW 「……做这种事情本身没有问题，不过在那种情况下%CNAME("二人称")%的魂必不可少，没问题吗？」
		PRINTFORMW 「也就是说，因为这个法术要改变身体，所以只需要无论做什么都能承受住的身体强度」
		PRINTFORMW 「虽然说%CNAME("一人称")%是所谓的混血堕天使所以没问题，但是不管%CNAME("二人称")%有多么特别，身体还是人类」
		PRINTFORMW 「所以才不得不用魂来让身体变成可以经受住这些的状态」
		PRINTFORMW 「……嘛啊，是%CNAME("二人称")%的话，虽然没有什么特别的问题……」
		PRINTFORMW 「话说回来……那么，要怎么做呢？」
		CALL PRINT_SELECT, "術を受ける/还是算了"

		IF RESULT == 1
			PRINTFORMW 「……暂且不做吗。我明白了」
			PRINTFORMW 「还想要接受法术的时候，请再来和我说一声」
			RETURN 0
		ENDIF
	ENDIF
	PRINTFORMW 「……我明白了。那么请稍事等候……」
	IF BASE:MASTER:魂 <= 100
		PRINTFORMW 「……哦呀？ 看来魂不够了呢」
		IF BASE:魂 > 100
			PRINTFORMW 「没办法。因为实际上已经存储着%CNAME("二人称")%的魂了，就用那个来做吧」
			CALL PRINT_STRW, @"「……之后，请准备好充足的回礼哦_H_」"
			CALL KOJO_WISH_K25_USESOUL, ARGS, TARGET
		ELSE
			PRINTFORMW 「因为这样很危险，请明天再来吧」
		ENDIF
	ELSE
		CALL KOJO_WISH_K25_USESOUL, ARGS
	ENDIF
CASE "男性に戻して"
	PRINTFORMW 「我明白了。那么请安安静静不要动……」
	SIF CFLAG:年齢一時保管 != 0
		TALENT:MASTER:外見年齢 = CFLAG:年齢一時保管
	TALENT:MASTER:伪娘 = 0
	CFLAG:年齢一時保管 = 0
	PRINTFORMW 「……久等了。已经可以了哦」
CASE "伪娘にして"
	PRINTFORMW 「我知道了。那么请稍等一下……」
	PRINTFORMW 「……那个、对这个部分的这里操作一下……」
	IF TALENT:MASTER:外見年齢 > 2
		PRINTFORMW 「在最后如果使用这个魔法的话……」
		CFLAG:年齢一時保管 = TALENT:MASTER:外見年齢
		TALENT:MASTER:外見年齢 = 1
	ENDIF
	TALENT:MASTER:伪娘 = 1
ENDSELECT

;魂を使う領帯プのお願いの時に通すプログラム
;複数書き始めると一所に纏めたほうが都合がよさそうなのでする
@KOJO_WISH_K25_USESOUL, ARGS, ARG

;ARGに記載がない場合は、＝你の魂を使うものとする
SIF ARG == 0
	ARG = MASTER

BASE:ARG:魂 -= 100

;乃々君が魂を使う可能性がある都合上、魂が貯圆圈かどうかは別個に記述する（めちゃくちゃめんどくさいけど）
SELECTCASE ARGS
CASE "妊娠不可にして"
	SIF ARG != TARGET
		BASE:魂 += 100
	PRINTFORMW 「……好的、完成了」
	CALL SETFLAG, "妊娠不能にする", MASTER
	PRINTL 
	PRINTFORMW %CALLNAME:MASTER%使用了魂变回了不能妊娠的体质
CASE "妊娠可能にして"
	SIF ARG != TARGET
		BASE:魂 += 100
	PRINTFORMW 「……好的、完成了」
	CALL SETFLAG, "妊娠可能にする", MASTER
	PRINTL 
	PRINTFORMW %CALLNAME:MASTER%使用了魂变成了可以妊娠的体质
ENDSELECT
PRINTL 
PRINTFORMW 魂-1.00（%CALLNAME:ARG%）

;-------------------------------------------------
;Talk指令の選択肢を追加
;玛丽桑の作者桑＋千紗酱の作者桑の建议で加筆することにしました
;知識が増えれば対応する内容もちょっと変わるかもしれない
@DAILY1_K25_ADDSELECT
SIF DAILYCOMNAME(1) == "Talk"
	STR:選択肢 += "美術について聞く/"

;互动指令で増やした選択肢の地の文と台詞
@KOJO_DAILY1_K25_ADDSELECT, ARGS
SELECTCASE ARGS
CASE "美術について聞く"
	PRINTFORMW %CALLNAME:MASTER%向%CALLNAME:TARGET%打听%ARGS%了。
	PRINTL 
	PRINTFORMW 「诶？ 想要%CNAME("一人称")%告诉你関于美术的事情吗？」
	IF CEVENT("美術初めて") == 0
		PRINTFORMW 「虽然可以，但是要从哪里……诶？ 現代芸術？」
		PRINTFORMW 「原来如此，上次美术课上的讲义上说的是现代艺术……」
		PRINTFORMW 「嘛，不过因为也有亲戚把拍卖上买到的东西让给我的事情，所以多少还是知道一些啦……」
		CALL SET_CEVENT, "美術初めて"
	ENDIF
	CALL QUESTION_ART
	PRINTL 
ENDSELECT

;-------------------------------------------------
;互动指令の選択肢を追加
@DAILY2_K25_ADDSELECT
SIF CEVENT("ほっぺふにふに") && GETBIT(CFLAG:一日フラグ, 0) == 0
	STR:選択肢 += "頬をつんつんする/"

;互动指令で増やした選択肢の地の文と台詞
@KOJO_DAILY2_K25_ADDSELECT, ARGS
SELECTCASE ARGS
CASE "頬をつんつんする"
	SELECTCASE CFLAG:つんつん回数
	CASE IS >= 50
		IF RAND:2
			PRINTFORMW 「好、好了～～～」
		ELSE
			PRINTFORMW 「太、太害羞了！　因为太害羞了！」
		ENDIF
	CASE IS >= 25
		PRINTFORMW 「请停下、停下来！」
	CASEELSE
		PRINTFORMW 「请、请停手！」
	ENDSELECT
	PRINTL 
	PRINTFORMW %CALLNAME:MASTER%戳了戳%CALLNAME:TARGET%的脸颊……。
	SIF CFLAG:つんつん回数 <= 999
		CFLAG:つんつん回数++
	INVERTBIT CFLAG:一日フラグ, 0
ENDSELECT

;-------------------------------------------------
;约会行き先の選択肢を追加。
@DATE_K25_ADDSELECT
;ここで増やした選択肢を選ぶと、それがSAVESTR:约会 に代入される仕組みです
STR:選択肢 += "写真展/"
SIF CEVENT("家族公認")
	STR:選択肢 += @"%CALLNAME:TARGET%的家/"


;増やした行先での地の文と台詞。起きうるイベントのフラグもここで決める
@KOJO_DATE_K25_ADDSELECT
SELECTCASE SAVESTR:约会
CASE "写真展"
	PRINTFORMW 「这么说来、在附近的%TEXTR("美術館/画廊")%好像举办着摄影展的样子」
	PRINTFORMW 「可以的话，不来一起去吗」
	PRINTFORML 
	;地の文
	PRINTFORMW %CALLNAME:TARGET%和%CALLNAME:MASTER%去了%TEXTR("新鋭/行内老手/中堅")%摄影家的%SAVESTR:约会%
	SELECTCASE RAND:3
	CASE 2
		PRINTFORMW 为时尚杂志被拍摄的苗条模特儿们，摆着各种各样的姿势静止在房间里的墙上
	CASE 1
		PRINTFORMW 摆着色情姿势的裸体女性们的照片，被密密麻麻地展示着
	CASEELSE
		PRINTFORMW 在各种地方拍摄的风景照片，以一定的间隔展示着
	ENDSELECT
	;地の文を用意していない場合には汎用のものを使う
	;CALL DAILY_MESSAGE, "约会本番"
	PRINTL 
	PRINTFORMW 「偶然地从学校的公告牌上写着的内容里知道了，听说这里展示着珍贵的照片，所以就想着看一次呢」
	PRINTFORMW 聚精会神地安静望着照片的%CALLNAME:TARGET%小声地说起来
	PRINTFORMW 「……在这里的照片，仔细看的话，在技术上相当扎实，很受欢迎呢」
	PRINTFORMW 「真了不起啊……%CNAME("一人称")%什么时候也想拍拍看这样的照片啊……」
	PRINTFORMW %CALLNAME:TARGET%和%CALLNAME:MASTER%两个人享受了这场%SAVESTR:约会%……
	;情緒BOUNSが高い場所でFLAG:情緒+60、普通ならFLAG:情緒+30、约会っぽくない場所だと修正无
	FLAG:情緒 += 30
	;それぞれ可能なもののコメントアウトを取下
	TFLAG:约会中牵手可能 = 1
CASE @"%CALLNAME:TARGET%的家"
	;乃々君のお家に突入だ！
	;家族からの理解も必要と考えて、相思相愛時解放のイベントとして作る予定
	FLAG:情緒 += 60
	TFLAG:约会中H可能 = 1
	CALL K25_DATE_HOUSE_SOLO
ENDSELECT
