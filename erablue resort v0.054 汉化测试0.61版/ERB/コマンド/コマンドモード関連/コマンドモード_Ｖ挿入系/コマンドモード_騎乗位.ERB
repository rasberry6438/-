@MODE_持続快楽_騎乗位(実行キャラ番号, 対象キャラ番号)
#DIM 実行キャラ番号
#DIM 対象キャラ番号
CALL SOURCE_CALC_奉仕(対象キャラ番号, 実行キャラ番号, 60)
CALL MODE_持続快楽_Ｖ挿入系(実行キャラ番号, 対象キャラ番号, 120, 200)


@MODETYPE_騎乗位(部位番号, 処理モード, プレイヤー番号, ターゲット番号)
#DIM 部位番号
#DIM プレイヤー番号
#DIM ターゲット番号
#DIMS 処理モード

IF 処理モード == "写真用文字列_プレイヤー"
	;モード固有の「～～をする」の文章を入れ込む
	詳細文文字列受け渡し変数 = 从下方将阴茎插入骑坐着的%CALLNAME:ターゲット番号%
	;下の部位専有判定と別の値を返す
	RETURN 部位状況_写真用
ELSEIF 処理モード == "写真用文字列_ターゲット"
	;モード固有の「～～をする」の文章を入れ込む
	IF 陥落チェック_性的(ターゲット番号) == 0 && BASE:酩酊 > 300
		;未陥落の泥酔姦。ヤってる最中にも酩酊は下がり続けるので、泥酔の500からちょい下げて300までで
		;むしろ未陥落でもないと別に酔ってコトに及んだ情報残してもシコくなさそうなので未陥落のみ
		詳細文文字列受け渡し変数 = %TEXTR("借着酒劲/被醉意驱使/烂醉如泥")%的%CALLNAME:プレイヤー番号%骑乘着
		IF TALENT:ターゲット番号:恋人持ち > 0
			IF RISKY_DAY(ターゲット番号) >= 1
				詳細文文字列受け渡し変数 += @"正在用骑乘位与人偷情%TEXTR("托卵/受孕")%%TEXTR("做爱/啪啪啪")%"
			ELSE
				詳細文文字列受け渡し変数 += @"正在用骑乘位与人偷情%TEXTR("做爱/啪啪啪")%"
			ENDIF
		ELSE
			詳細文文字列受け渡し変数 += @"正用骑乘位%TEXTR("扭动腰肢/摆动腰肢侍奉/用小穴侍奉阴茎/献出小穴/贪享快感")%"
		ENDIF
	ELSE
		詳細文文字列受け渡し変数 = %CALLNAME:プレイヤー番号%跨坐上来，
		IF TALENT:ターゲット番号:恋人持ち > 0
			詳細文文字列受け渡し変数 += @"%TEXTR("/调情缠绵/恩爱缠绵")%偷情%TEXTR("做爱/啪啪啪/手牵手骑乘位扭腰")%"
		ELSE
			詳細文文字列受け渡し変数 += @"正含着%TEXTR("阴茎/肉棒")%%TEXTR("扭动腰肢/上下起伏腰肢/研磨般摆动腰肢/贪享快感")%"
		ENDIF
	ENDIF
	;下の部位専有判定と別の値を返す
	RETURN 部位状況_写真用
ENDIF

;0=ペニス 1=クリ 2=指（手） 3=口 4=胸 5=膣 6=アナル
;挿入で使用するのはペニスと膣で1を返す
SELECTCASE 部位番号
	CASE 部位_ペニス
		SIF 処理モード == "プレイヤー"
			RETURN 部位状況_占有
	CASE 部位_口
		IF プレイヤー番号 < 0 || ターゲット番号 < 0
			;キャラ不明の場合は一般論
			RETURN 部位状況_なし
		ELSEIF ABS(体格差計算(プレイヤー番号, ターゲット番号, 1)) >= 4
			;体格差が4サイズになると口は届かない
			;ターゲット側がプレイヤー側に乗ってるので+1補正
			RETURN 部位状況_届かない
		ELSE
			RETURN 部位状況_なし
		ENDIF
	CASE 部位_膣
		SIF 処理モード == "ターゲット"
			RETURN 部位状況_占有
		SIF 処理モード == "プレイヤー"
			RETURN 部位状況_届かない
	CASE 部位_アナル
		;尻は届かない
		RETURN 部位状況_届かない
ENDSELECT


@MODE_絶頂相手_騎乗位(絶頂部位, 処理モード, 判定結果)
#FUNCTION
#DIM 絶頂部位
#DIMS 処理モード
#DIM REF 判定結果
RETURNF MODE_絶頂相手_Ｖ挿入系(絶頂部位, 処理モード, 判定結果)


@MESSAGE_MODE_騎乗位解除(実行キャラ番号, 対象キャラ番号)
#DIM 実行キャラ番号
#DIM 対象キャラ番号

PRINTFORML %CALLNAME:実行キャラ番号%缓缓从%CALLNAME:対象キャラ番号%的阴道里拔出阴茎
SIF TCVAR:対象キャラ番号:膣内精液量
	PRINTFORML %CALLNAME:対象キャラ番号%的穴口处，%CALLNAME:実行キャラ番号%的精液黏稠地垂落…
