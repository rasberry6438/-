@チェインバーストカットイン
;アニメが作成できれば1、できなかったときは0を返す
#DIM レイヤー番号
#DIM キャラTEMP
#DIM メンバ
#DIM カットインカウント;実際表示する人数の記録
#DIM カットイン人数;顔画像がない場合はカットイン人数自体を減らす
#DIM カットインメンバ,4;画像がない場合の編成を記録する
#DIMS 汎用グラ用文字列,4
#DIMS デフォルト用文字列,4
レイヤー番号 = 50

;一日一回オプション対象に終了
SIF MATCH(カットイン一日一回フラグ, "チェインバースト") > 0
	RETURN 0

VARSET カットインメンバ, -1
カットインカウント = 0

;人数確定
FOR メンバ , 0 , ターン中奥義回数保存
	キャラTEMP = BATTLE_STATE:(チェンバ基準キャラ保存:メンバ):キャラ登録番号
	IF EXIST画像FILE(@"resources/%CSTR:キャラTEMP:画像フォルダ%/顔_デフォルト")
		汎用グラ用文字列:カットインカウント = 
		デフォルト用文字列:カットインカウント = デフォルト
		SIF CSTR:キャラTEMP:画像フォルダ == ""
			CSTR:キャラTEMP:画像フォルダ '= GET_RESOURCES_BASE_FOLDER(キャラTEMP)
	ELSEIF OPTION変数:汎用立ち絵制御
		汎用グラ用文字列:カットインカウント = _%CSTR:キャラTEMP:汎用立ち絵登録文字列%
		デフォルト用文字列:カットインカウント = _%CSTR:キャラTEMP:汎用立ち絵登録文字列%
		CSTR:キャラTEMP:画像フォルダ = 汎用グラフィック
	ENDIF
	IF EXIST画像FILE(@"resources/%CSTR:キャラTEMP:画像フォルダ%/縦カットイン%汎用グラ用文字列:カットインカウント%")
	ELSEIF EXIST画像FILE(@"resources/%CSTR:キャラTEMP:画像フォルダ%/短冊_%デフォルト用文字列:カットインカウント%")
	ELSEIF EXIST画像FILE(@"resources/%CSTR:キャラTEMP:画像フォルダ%/顔_%デフォルト用文字列:カットインカウント%")
	ELSE
		;画像がないときは飛ばす
		CONTINUE
	ENDIF
	;画像があったキャラをカットインメンバに登録
	IF MATCH(カットインメンバ, チェンバ基準キャラ保存:メンバ) == 0
		カットインメンバ:カットインカウント = チェンバ基準キャラ保存:メンバ
		カットインカウント ++
	ENDIF
	SIF カットインカウント >= 4
		BREAK
NEXT

カットイン人数 = カットインカウント

;画像作成
FOR LOCAL ,0 ,10
	GDISPOSE レイヤー番号 + LOCAL
	GCREATE レイヤー番号 + LOCAL, 900, 900
NEXT
FOR メンバ ,0 ,カットイン人数
	SIF カットインメンバ:メンバ < 0
		CONTINUE
	キャラTEMP =  BATTLE_STATE:(カットインメンバ:メンバ):キャラ登録番号
	SIF CSTR:キャラTEMP:画像フォルダ == ""
		CSTR:キャラTEMP:画像フォルダ '= GET_RESOURCES_BASE_FOLDER(キャラTEMP)
	GDISPOSE レイヤー番号 + 20 + メンバ
	IF EXIST画像FILE(@"resources/%CSTR:キャラTEMP:画像フォルダ%/縦カットイン%汎用グラ用文字列:メンバ%")
		CALL GCREATE_拡張子(レイヤー番号 + 20 + メンバ, @"%CSTR:キャラTEMP:画像フォルダ%/縦カットイン%汎用グラ用文字列:メンバ%")
	ELSEIF EXIST画像FILE(@"resources/%CSTR:キャラTEMP:画像フォルダ%/短冊_%デフォルト用文字列:メンバ%")
		CALL GCREATE_拡張子(レイヤー番号 + 20 + メンバ, @"%CSTR:キャラTEMP:画像フォルダ%/短冊_%デフォルト用文字列:メンバ%")
	ELSEIF EXIST画像FILE(@"resources/%CSTR:キャラTEMP:画像フォルダ%/顔_%デフォルト用文字列:メンバ%")
		CALL GCREATE_拡張子(レイヤー番号 + 20 + メンバ, @"%CSTR:キャラTEMP:画像フォルダ%/顔_%デフォルト用文字列:メンバ%")
	ENDIF
NEXT

;画像を２：１にする
FOR メンバ ,0 ,カットイン人数
	CALL グラフィックトリミング(レイヤー番号 + 20 + メンバ, 450, 900)
NEXT
	
GDISPOSE レイヤー番号 + 41
SELECTCASE BATTLE_STATE:戦闘行動キャラ:属性
	CASE 0
		CALL GCREATE_拡張子(レイヤー番号 + 41, @"カットイン素材/subtitle火")
	CASE 1
		CALL GCREATE_拡張子(レイヤー番号 + 41, @"カットイン素材/subtitle水")
	CASE 2
		CALL GCREATE_拡張子(レイヤー番号 + 41, @"カットイン素材/subtitle風")
	CASE 3
		CALL GCREATE_拡張子(レイヤー番号 + 41, @"カットイン素材/subtitle土")
	CASE 4
		CALL GCREATE_拡張子(レイヤー番号 + 41, @"カットイン素材/subtitle光")
	CASE 5
		CALL GCREATE_拡張子(レイヤー番号 + 41, @"カットイン素材/subtitle闇")
ENDSELECT


SELECTCASE カットイン人数
	CASE 4
;-----------------４人チェインカットイン
		;-------------描画と透明化処理
		メンバ = 0
		CALL カットイン用カラーマトリクス取得(80)
		GDRAWG レイヤー番号 + 0, レイヤー番号 + 20 + メンバ, 0, 90, 270, 540, 0, 0, GWIDTH (レイヤー番号 + 20 + メンバ), GHEIGHT(レイヤー番号 + 20 + メンバ) , カットイン用カラーマトリクス:0:0

		CALL カットイン用カラーマトリクス取得(0)
		GDRAWG レイヤー番号 + 1, レイヤー番号 + 0, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0
		メンバ = 0
		CALL カットイン用カラーマトリクス取得(40)
		GDRAWG レイヤー番号 + 1, レイヤー番号 + 20 + メンバ, 0, 120, 270, 540, 0, 0, GWIDTH (レイヤー番号 + 20 + メンバ), GHEIGHT(レイヤー番号 + 20 + メンバ) , カットイン用カラーマトリクス:0:0
		メンバ = 1
		CALL カットイン用カラーマトリクス取得(80)
		GDRAWG レイヤー番号 + 1, レイヤー番号 + 20 + メンバ, 210, 270, 270, 540, 0, 0, GWIDTH (レイヤー番号 + 20 + メンバ), GHEIGHT(レイヤー番号 + 20 + メンバ) , カットイン用カラーマトリクス:0:0

		CALL カットイン用カラーマトリクス取得(0)
		GDRAWG レイヤー番号 + 2, レイヤー番号 + 1, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0
		メンバ = 0
		CALL カットイン用カラーマトリクス取得(0)
		GDRAWG レイヤー番号 + 2, レイヤー番号 + 20 + メンバ, 0, 150, 270, 540, 0, 0, GWIDTH (レイヤー番号 + 20 + メンバ), GHEIGHT(レイヤー番号 + 20 + メンバ) , カットイン用カラーマトリクス:0:0
		メンバ = 1
		CALL カットイン用カラーマトリクス取得(40)
		GDRAWG レイヤー番号 + 2, レイヤー番号 + 20 + メンバ, 210, 240, 270, 540, 0, 0, GWIDTH (レイヤー番号 + 20 + メンバ), GHEIGHT(レイヤー番号 + 20 + メンバ) , カットイン用カラーマトリクス:0:0
		メンバ = 2
		CALL カットイン用カラーマトリクス取得(80)
		GDRAWG レイヤー番号 + 2, レイヤー番号 + 20 + メンバ, 420, 90, 270, 540, 0, 0, GWIDTH (レイヤー番号 + 20 + メンバ), GHEIGHT(レイヤー番号 + 20 + メンバ) , カットイン用カラーマトリクス:0:0

		CALL カットイン用カラーマトリクス取得(0)
		GDRAWG レイヤー番号 + 3, レイヤー番号 + 2, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0
		メンバ = 1
		CALL カットイン用カラーマトリクス取得(0)
		GDRAWG レイヤー番号 + 3, レイヤー番号 + 20 + メンバ, 210, 210, 270, 540, 0, 0, GWIDTH (レイヤー番号 + 20 + メンバ), GHEIGHT(レイヤー番号 + 20 + メンバ) , カットイン用カラーマトリクス:0:0
		メンバ = 2
		CALL カットイン用カラーマトリクス取得(40)
		GDRAWG レイヤー番号 + 3, レイヤー番号 + 20 + メンバ, 420, 120, 270, 540, 0, 0, GWIDTH (レイヤー番号 + 20 + メンバ), GHEIGHT(レイヤー番号 + 20 + メンバ) , カットイン用カラーマトリクス:0:0
		メンバ = 3
		CALL カットイン用カラーマトリクス取得(80)
		GDRAWG レイヤー番号 + 3, レイヤー番号 + 20 + メンバ, 630, 270, 270, 540, 0, 0, GWIDTH (レイヤー番号 + 20 + メンバ), GHEIGHT(レイヤー番号 + 20 + メンバ) , カットイン用カラーマトリクス:0:0

		CALL カットイン用カラーマトリクス取得(0)
		GDRAWG レイヤー番号 + 4, レイヤー番号 + 3, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0
		メンバ = 2
		CALL カットイン用カラーマトリクス取得(0)
		GDRAWG レイヤー番号 + 4, レイヤー番号 + 20 + メンバ, 420, 150, 270, 540, 0, 0, GWIDTH (レイヤー番号 + 20 + メンバ), GHEIGHT(レイヤー番号 + 20 + メンバ) , カットイン用カラーマトリクス:0:0
		メンバ = 3
		CALL カットイン用カラーマトリクス取得(40)
		GDRAWG レイヤー番号 + 4, レイヤー番号 + 20 + メンバ, 630, 240, 270, 540, 0, 0, GWIDTH (レイヤー番号 + 20 + メンバ), GHEIGHT(レイヤー番号 + 20 + メンバ) , カットイン用カラーマトリクス:0:0

		CALL カットイン用カラーマトリクス取得(0)
		GDRAWG レイヤー番号 + 5, レイヤー番号 + 4, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0
		メンバ = 3
		CALL カットイン用カラーマトリクス取得(0)
		GDRAWG レイヤー番号 + 5, レイヤー番号 + 20 + メンバ, 630, 210, 270, 540, 0, 0, GWIDTH (レイヤー番号 + 20 + メンバ), GHEIGHT(レイヤー番号 + 20 + メンバ) , カットイン用カラーマトリクス:0:0

		CALL カットイン用カラーマトリクス取得(60)
		GDRAWG レイヤー番号 + 6, レイヤー番号 + 5, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0
		CALL カットイン用カラーマトリクス取得(60)
		GDRAWG レイヤー番号 + 7, レイヤー番号 + 6, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0
		CALL カットイン用カラーマトリクス取得(60)
		GDRAWG レイヤー番号 + 8, レイヤー番号 + 7, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0

		SPRITEDISPOSE "カットインアニメ_0"
		;----------アニメーション画像の合成
		SPRITEANIMECREATE "カットインアニメ_0", 900, 900
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 0, 0, 0, 900, 900,   0,   0,  90
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 1, 0, 0, 900, 900,   0,   0,  90
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 2, 0, 0, 900, 900,   0,   0,  90
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 3, 0, 0, 900, 900,   0,   0,  90
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 4, 0, 0, 900, 900,   0,   0,  90
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 5, 0, 0, 900, 900,   0,   0, 360
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 6, 0, 0, 900, 900,   0,   0, 180
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 7, 0, 0, 900, 900,   0,   0, 180
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 8, 0, 0, 900, 900,   0,   0, 180
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 9, 0, 0, 100, 100,   0,   0, 10000

	CASE 3
;-----------------３人チェインカットイン
		;-------------描画と透明化処理
		メンバ = 0
		CALL カットイン用カラーマトリクス取得(80)
		GDRAWG レイヤー番号 + 0, レイヤー番号 + 20 + メンバ, 135,  90, 270, 540, 0, 0, GWIDTH (レイヤー番号 + 20 + メンバ), GHEIGHT(レイヤー番号 + 20 + メンバ) , カットイン用カラーマトリクス:0:0

		CALL カットイン用カラーマトリクス取得(0)
		GDRAWG レイヤー番号 + 1, レイヤー番号 + 0, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0
		メンバ = 0
		CALL カットイン用カラーマトリクス取得(40)
		GDRAWG レイヤー番号 + 1, レイヤー番号 + 20 + メンバ, 135, 120, 270, 540, 0, 0, GWIDTH (レイヤー番号 + 20 + メンバ), GHEIGHT(レイヤー番号 + 20 + メンバ) , カットイン用カラーマトリクス:0:0
		メンバ = 1
		CALL カットイン用カラーマトリクス取得(80)
		GDRAWG レイヤー番号 + 1, レイヤー番号 + 20 + メンバ, 345, 270, 270, 540, 0, 0, GWIDTH (レイヤー番号 + 20 + メンバ), GHEIGHT(レイヤー番号 + 20 + メンバ) , カットイン用カラーマトリクス:0:0

		CALL カットイン用カラーマトリクス取得(0)
		GDRAWG レイヤー番号 + 2, レイヤー番号 + 1, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0
		メンバ = 0
		CALL カットイン用カラーマトリクス取得(0)
		GDRAWG レイヤー番号 + 2, レイヤー番号 + 20 + メンバ, 135, 150, 270, 540, 0, 0, GWIDTH (レイヤー番号 + 20 + メンバ), GHEIGHT(レイヤー番号 + 20 + メンバ) , カットイン用カラーマトリクス:0:0
		メンバ = 1
		CALL カットイン用カラーマトリクス取得(40)
		GDRAWG レイヤー番号 + 2, レイヤー番号 + 20 + メンバ, 345, 240, 270, 540, 0, 0, GWIDTH (レイヤー番号 + 20 + メンバ), GHEIGHT(レイヤー番号 + 20 + メンバ) , カットイン用カラーマトリクス:0:0
		メンバ = 2
		CALL カットイン用カラーマトリクス取得(80)
		GDRAWG レイヤー番号 + 2, レイヤー番号 + 20 + メンバ, 555,  90, 270, 540, 0, 0, GWIDTH (レイヤー番号 + 20 + メンバ), GHEIGHT(レイヤー番号 + 20 + メンバ) , カットイン用カラーマトリクス:0:0

		CALL カットイン用カラーマトリクス取得(0)
		GDRAWG レイヤー番号 + 3, レイヤー番号 + 2, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0
		メンバ = 1
		CALL カットイン用カラーマトリクス取得(0)
		GDRAWG レイヤー番号 + 3, レイヤー番号 + 20 + メンバ, 345, 210, 270, 540, 0, 0, GWIDTH (レイヤー番号 + 20 + メンバ), GHEIGHT(レイヤー番号 + 20 + メンバ) , カットイン用カラーマトリクス:0:0
		メンバ = 2
		CALL カットイン用カラーマトリクス取得(40)
		GDRAWG レイヤー番号 + 3, レイヤー番号 + 20 + メンバ, 555, 120, 270, 540, 0, 0, GWIDTH (レイヤー番号 + 20 + メンバ), GHEIGHT(レイヤー番号 + 20 + メンバ) , カットイン用カラーマトリクス:0:0

		CALL カットイン用カラーマトリクス取得(0)
		GDRAWG レイヤー番号 + 4, レイヤー番号 + 3, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0
		メンバ = 2
		CALL カットイン用カラーマトリクス取得(0)
		GDRAWG レイヤー番号 + 4, レイヤー番号 + 20 + メンバ, 555, 150, 270, 540, 0, 0, GWIDTH (レイヤー番号 + 20 + メンバ), GHEIGHT(レイヤー番号 + 20 + メンバ) , カットイン用カラーマトリクス:0:0

		CALL カットイン用カラーマトリクス取得(0)
		GDRAWG レイヤー番号 + 5, レイヤー番号 + 4, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0

		CALL カットイン用カラーマトリクス取得(60)
		GDRAWG レイヤー番号 + 6, レイヤー番号 + 5, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0
		CALL カットイン用カラーマトリクス取得(60)
		GDRAWG レイヤー番号 + 7, レイヤー番号 + 6, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0
		CALL カットイン用カラーマトリクス取得(60)
		GDRAWG レイヤー番号 + 8, レイヤー番号 + 7, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0

		SPRITEDISPOSE "カットインアニメ_0"
		;----------アニメーション画像の合成
		SPRITEANIMECREATE "カットインアニメ_0", 900, 900
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 0, 0, 0, 900, 900,   0,   0,  100
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 1, 0, 0, 900, 900,   0,   0,  100
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 2, 0, 0, 900, 900,   0,   0,  100
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 3, 0, 0, 900, 900,   0,   0,  100
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 4, 0, 0, 900, 900,   0,   0,  100
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 5, 0, 0, 900, 900,   0,   0,  400
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 6, 0, 0, 900, 900,   0,   0,  200
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 7, 0, 0, 900, 900,   0,   0,  200
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 8, 0, 0, 900, 900,   0,   0,  200
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 9, 0, 0, 100, 100,   0,   0, 10000

	CASE 2
;-----------------２人チェインカットイン
		;-------------描画と透明化処理
		メンバ = 0
		CALL カットイン用カラーマトリクス取得(80)
		GDRAWG レイヤー番号 + 0, レイヤー番号 + 20 + メンバ, 240,  90, 270, 540, 0, 0, GWIDTH (レイヤー番号 + 20 + メンバ), GHEIGHT(レイヤー番号 + 20 + メンバ) , カットイン用カラーマトリクス:0:0

		CALL カットイン用カラーマトリクス取得(0)
		GDRAWG レイヤー番号 + 1, レイヤー番号 + 0, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0
		メンバ = 0
		CALL カットイン用カラーマトリクス取得(40)
		GDRAWG レイヤー番号 + 1, レイヤー番号 + 20 + メンバ, 240, 120, 270, 540, 0, 0, GWIDTH (レイヤー番号 + 20 + メンバ), GHEIGHT(レイヤー番号 + 20 + メンバ) , カットイン用カラーマトリクス:0:0
		メンバ = 1
		CALL カットイン用カラーマトリクス取得(80)
		GDRAWG レイヤー番号 + 1, レイヤー番号 + 20 + メンバ, 450, 270, 270, 540, 0, 0, GWIDTH (レイヤー番号 + 20 + メンバ), GHEIGHT(レイヤー番号 + 20 + メンバ) , カットイン用カラーマトリクス:0:0

		CALL カットイン用カラーマトリクス取得(0)
		GDRAWG レイヤー番号 + 2, レイヤー番号 + 1, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0
		メンバ = 0
		CALL カットイン用カラーマトリクス取得(0)
		GDRAWG レイヤー番号 + 2, レイヤー番号 + 20 + メンバ, 240, 150, 270, 540, 0, 0, GWIDTH (レイヤー番号 + 20 + メンバ), GHEIGHT(レイヤー番号 + 20 + メンバ) , カットイン用カラーマトリクス:0:0
		メンバ = 1
		CALL カットイン用カラーマトリクス取得(40)
		GDRAWG レイヤー番号 + 2, レイヤー番号 + 20 + メンバ, 450, 240, 270, 540, 0, 0, GWIDTH (レイヤー番号 + 20 + メンバ), GHEIGHT(レイヤー番号 + 20 + メンバ) , カットイン用カラーマトリクス:0:0

		CALL カットイン用カラーマトリクス取得(0)
		GDRAWG レイヤー番号 + 3, レイヤー番号 + 2, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0
		メンバ = 1
		CALL カットイン用カラーマトリクス取得(0)
		GDRAWG レイヤー番号 + 3, レイヤー番号 + 20 + メンバ, 450, 210, 270, 540, 0, 0, GWIDTH (レイヤー番号 + 20 + メンバ), GHEIGHT(レイヤー番号 + 20 + メンバ) , カットイン用カラーマトリクス:0:0

		CALL カットイン用カラーマトリクス取得(0)
		GDRAWG レイヤー番号 + 4, レイヤー番号 + 3, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0
		CALL カットイン用カラーマトリクス取得(0)
		GDRAWG レイヤー番号 + 5, レイヤー番号 + 4, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0

		CALL カットイン用カラーマトリクス取得(60)
		GDRAWG レイヤー番号 + 6, レイヤー番号 + 5, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0
		CALL カットイン用カラーマトリクス取得(60)
		GDRAWG レイヤー番号 + 7, レイヤー番号 + 6, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0
		CALL カットイン用カラーマトリクス取得(60)
		GDRAWG レイヤー番号 + 8, レイヤー番号 + 7, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0

		SPRITEDISPOSE "カットインアニメ_0"
		;----------アニメーション画像の合成
		SPRITEANIMECREATE "カットインアニメ_0", 900, 900
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 0, 0, 0, 900, 900,   0,   0,  100
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 1, 0, 0, 900, 900,   0,   0,  100
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 2, 0, 0, 900, 900,   0,   0,  100
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 3, 0, 0, 900, 900,   0,   0,  100
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 4, 0, 0, 900, 900,   0,   0,  100
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 5, 0, 0, 900, 900,   0,   0,  400
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 6, 0, 0, 900, 900,   0,   0,  200
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 7, 0, 0, 900, 900,   0,   0,  200
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 8, 0, 0, 900, 900,   0,   0,  200
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 9, 0, 0, 100, 100,   0,   0, 10000
	CASE 1
;-----------------１人チェインカットイン
		;-------------描画と透明化処理
		メンバ = 0
		CALL カットイン用カラーマトリクス取得(80)
		GDRAWG レイヤー番号 + 0, レイヤー番号 + 20 + メンバ, 345,  150, 270, 540, 0, 0, GWIDTH (レイヤー番号 + 20 + メンバ), GHEIGHT(レイヤー番号 + 20 + メンバ) , カットイン用カラーマトリクス:0:0

		CALL カットイン用カラーマトリクス取得(0)
		GDRAWG レイヤー番号 + 1, レイヤー番号 + 0, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0
		メンバ = 0
		CALL カットイン用カラーマトリクス取得(40)
		GDRAWG レイヤー番号 + 1, レイヤー番号 + 20 + メンバ, 345, 180, 270, 540, 0, 0, GWIDTH (レイヤー番号 + 20 + メンバ), GHEIGHT(レイヤー番号 + 20 + メンバ) , カットイン用カラーマトリクス:0:0

		CALL カットイン用カラーマトリクス取得(0)
		GDRAWG レイヤー番号 + 2, レイヤー番号 + 1, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0
		メンバ = 0
		CALL カットイン用カラーマトリクス取得(0)
		GDRAWG レイヤー番号 + 2, レイヤー番号 + 20 + メンバ, 345, 210, 270, 540, 0, 0, GWIDTH (レイヤー番号 + 20 + メンバ), GHEIGHT(レイヤー番号 + 20 + メンバ) , カットイン用カラーマトリクス:0:0

		CALL カットイン用カラーマトリクス取得(0)
		GDRAWG レイヤー番号 + 3, レイヤー番号 + 2, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0
		CALL カットイン用カラーマトリクス取得(0)
		GDRAWG レイヤー番号 + 4, レイヤー番号 + 3, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0
		CALL カットイン用カラーマトリクス取得(0)
		GDRAWG レイヤー番号 + 5, レイヤー番号 + 4, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0

		CALL カットイン用カラーマトリクス取得(60)
		GDRAWG レイヤー番号 + 6, レイヤー番号 + 5, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0
		CALL カットイン用カラーマトリクス取得(60)
		GDRAWG レイヤー番号 + 7, レイヤー番号 + 6, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0
		CALL カットイン用カラーマトリクス取得(60)
		GDRAWG レイヤー番号 + 8, レイヤー番号 + 7, 0, 0, 900, 900, 0, 0, 900, 900 , カットイン用カラーマトリクス:0:0

		SPRITEDISPOSE "カットインアニメ_0"
		;----------アニメーション画像の合成
		SPRITEANIMECREATE "カットインアニメ_0", 900, 900
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 0, 0, 0, 900, 900,   0,   0,  100
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 1, 0, 0, 900, 900,   0,   0,  100
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 2, 0, 0, 900, 900,   0,   0,  100
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 3, 0, 0, 900, 900,   0,   0,  100
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 4, 0, 0, 900, 900,   0,   0,  100
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 5, 0, 0, 900, 900,   0,   0,  400
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 6, 0, 0, 900, 900,   0,   0,  200
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 7, 0, 0, 900, 900,   0,   0,  200
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 8, 0, 0, 900, 900,   0,   0,  200
		SPRITEANIMEADDFRAME "カットインアニメ_0", レイヤー番号 + 9, 0, 0, 100, 100,   0,   0, 10000

	CASEELSE
	;アニメなし、0を返す
	RETURN 0

ENDSELECT

;一日一回表示するのとき
IF カットイン演出一括表示フラグ == 2
	FOR LOCAL, 0, 100
		IF カットイン一日一回フラグ:LOCAL == ""
			カットイン一日一回フラグ = チェインバースト
			BREAK
		ENDIF
	NEXT
ENDIF
;アニメあり、1を返す
RETURN 1
