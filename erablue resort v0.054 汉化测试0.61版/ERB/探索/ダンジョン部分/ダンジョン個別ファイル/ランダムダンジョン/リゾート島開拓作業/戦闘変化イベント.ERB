
@イベント_リゾート島開拓作業_ランダム_属性エレメントの強化
#DIM 属性番号

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 周围没有异常状况。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	属性番号 = RAND:6
	WSTR:(K++) = %CALLNAME:MASTER%一行正在探索时，发现了地面喷涌着强烈魔力的地穴。
	WSTR:(K++) = 似乎是地脉能量汇聚于此，以%属性数値文字列変換(属性番号)%属性的魔力形式显现。
	KSTR:(K++) = 若能利用这股魔力，虽仅限于本次探索，但可提升%属性数値文字列変換(属性番号)%属性的伤害输出。_PAGE
	
	KSTR:(K++) = 如何选择？
	KSTR:(K++) = 可获取的探索加护：%属性数値文字列変換(属性番号)%属性伤害UP（20％）
	IF ランダムダンジョン中加護 == ""
		KSTR:(K++) = 当前探索加护：无
		KSTR:(K++) = BUTTON_[获取加护]
	ELSE
		KSTR:(K++) = 当前探索加护：%ランダムダンジョン中加護%
		KSTR:(K++) = BUTTON_[替换加护]
	ENDIF
	KSTR:(K++) = BUTTON_[什么也不做]
	CALL メッセージ欄表示用関数(,,,0)
	CALL 口上変数初期化
	$LOOP_MESSAGE
	BINPUTS
	SELECTCASE RESULTS
		CASE "[获取加护]", "[替换加护]"
			WSTR:(K++) = 看来能成为探索助力。
			WSTR:(K++) = %CALLNAME:MASTER%一行利用喷涌的魔力，成功获取了提升%属性数値文字列変換(属性番号)%属性伤害的加护！
			ランダムダンジョン中加護 = %属性数値文字列変換(属性番号)%属性ダメージUP_20％
			WSTR:(K++) = %CALLNAME:MASTER%一行确认加护生效后，心满意足地继续探索。
		CASE "[什么也不做]"
			WSTR:(K++) = 似乎暂时不需要。
			WSTR:(K++) = %CALLNAME:MASTER%一行未作任何操作便继续探索。
	ENDSELECT
	CALL メッセージ欄表示用関数(,,,0)
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@固有戦闘開始時処理_特殊_火属性ダメージUP_20％
;味方全体へのバフを貼る
{
DT_ROW_ADD "戦闘効果データベース", "効果名", "ランダムダンジョン加護", "バフ・デバフフラグ", "バフ", "適用範囲", "味方全体",
	"効果枠", "火強化_ランダム加護", "対象能力", "火強化", "効果量_割合", 0, "効果量_固定値", 20,
	"持続ターン", -1, "持続回数", -1, "持続行動回数", -1, "持続被ダメ回数", -1, "消去不可フラグ", 1, "特殊表示オプション", 0
}

@固有戦闘開始時処理_特殊_水属性ダメージUP_20％
;味方全体へのバフを貼る
{
DT_ROW_ADD "戦闘効果データベース", "効果名", "ランダムダンジョン加護", "バフ・デバフフラグ", "バフ", "適用範囲", "味方全体",
	"効果枠", "水強化_ランダム加護", "対象能力", "水強化", "効果量_割合", 0, "効果量_固定値", 20,
	"持続ターン", -1, "持続回数", -1, "持続行動回数", -1, "持続被ダメ回数", -1, "消去不可フラグ", 1, "特殊表示オプション", 0
}

@固有戦闘開始時処理_特殊_風属性ダメージUP_20％
;味方全体へのバフを貼る
{
DT_ROW_ADD "戦闘効果データベース", "効果名", "ランダムダンジョン加護", "バフ・デバフフラグ", "バフ", "適用範囲", "味方全体",
	"効果枠", "風強化_ランダム加護", "対象能力", "風強化", "効果量_割合", 0, "効果量_固定値", 20,
	"持続ターン", -1, "持続回数", -1, "持続行動回数", -1, "持続被ダメ回数", -1, "消去不可フラグ", 1, "特殊表示オプション", 0
}

@固有戦闘開始時処理_特殊_土属性ダメージUP_20％
;味方全体へのバフを貼る
{
DT_ROW_ADD "戦闘効果データベース", "効果名", "ランダムダンジョン加護", "バフ・デバフフラグ", "バフ", "適用範囲", "味方全体",
	"効果枠", "土強化_ランダム加護", "対象能力", "土強化", "効果量_割合", 0, "効果量_固定値", 20,
	"持続ターン", -1, "持続回数", -1, "持続行動回数", -1, "持続被ダメ回数", -1, "消去不可フラグ", 1, "特殊表示オプション", 0
}

@固有戦闘開始時処理_特殊_光属性ダメージUP_20％
;味方全体へのバフを貼る
{
DT_ROW_ADD "戦闘効果データベース", "効果名", "ランダムダンジョン加護", "バフ・デバフフラグ", "バフ", "適用範囲", "味方全体",
	"効果枠", "光強化_ランダム加護", "対象能力", "光強化", "効果量_割合", 0, "効果量_固定値", 20,
	"持続ターン", -1, "持続回数", -1, "持続行動回数", -1, "持続被ダメ回数", -1, "消去不可フラグ", 1, "特殊表示オプション", 0
}

@固有戦闘開始時処理_特殊_闇属性ダメージUP_20％
;味方全体へのバフを貼る
{
DT_ROW_ADD "戦闘効果データベース", "効果名", "ランダムダンジョン加護", "バフ・デバフフラグ", "バフ", "適用範囲", "味方全体",
	"効果枠", "闇強化_ランダム加護", "対象能力", "闇強化", "効果量_割合", 0, "効果量_固定値", 20,
	"持続ターン", -1, "持続回数", -1, "持続行動回数", -1, "持続被ダメ回数", -1, "消去不可フラグ", 1, "特殊表示オプション", 0
}


@イベント_リゾート島開拓作業_ランダム_奇妙な学者
#DIM 属性番号

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 周围没有异常状况。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	属性番号 = RAND:3
	WSTR:(K++) = %CALLNAME:MASTER%一行正在探索时，遇见了接受岛屿开拓委托的空骑士。
	WSTR:(K++) = 这名空骑士本职是学者，似乎在进行田野调查的同时兼职赚取研究经费。
	SELECTCASE 属性番号
		CASE 0
			WSTR:(K++) = 研究课题是「普通攻击的性能」。
			KSTR:(K++) = 学者提议，虽仅限于本次探索，但可为你们施加提升普通攻击伤害的魔法。_PAGE
		CASE 1
			WSTR:(K++) = 研究课题是「伤害类技能的性能」。
			KSTR:(K++) = 学者提议，虽仅限于本次探索，但可为你们施加提升技能伤害的魔法。_PAGE
		CASE 2
			WSTR:(K++) = 研究课题是「奥义的性能」。
			KSTR:(K++) = 学者提议，虽仅限于本次探索，但可为你们施加提升奥义伤害的魔法。_PAGE
	ENDSELECT
	
	KSTR:(K++) = 如何选择？
	SELECTCASE 属性番号
		CASE 0
			KSTR:(K++) = 可获取的探索加护：普通攻击伤害UP（30％）
		CASE 1
			KSTR:(K++) = 可获取的探索加护：技能伤害UP（25％）
		CASE 2
			KSTR:(K++) = 可获取的探索加护：奥义伤害UP（20％）
	ENDSELECT
	IF ランダムダンジョン中加護 == ""
		KSTR:(K++) = 当前探索加护：无
		KSTR:(K++) = BUTTON_[获取加护]
	ELSE
		KSTR:(K++) = 当前探索加护：%ランダムダンジョン中加護%
		KSTR:(K++) = BUTTON_[替换加护]
	ENDIF
	KSTR:(K++) = BUTTON_[什么也不做]
	CALL メッセージ欄表示用関数(,,,0)
	CALL 口上変数初期化
	$LOOP_MESSAGE
	BINPUTS
	SELECTCASE RESULTS
		CASE "[获取加护]", "[替换加护]"
			WSTR:(K++) = 看来能成为探索助力。
			SELECTCASE 属性番号
				CASE 0
					WSTR:(K++) = %CALLNAME:MASTER%一行欣然接受学者好意，获取了提升普通攻击伤害的加护！
					ランダムダンジョン中加護 = 通常攻撃ダメージUP_30％
				CASE 1
					WSTR:(K++) = %CALLNAME:MASTER%一行欣然接受学者好意，获取了提升技能伤害的加护！
					ランダムダンジョン中加護 = アビリティダメージUP_25％
				CASE 2
					WSTR:(K++) = %CALLNAME:MASTER%一行欣然接受学者好意，获取了提升奥义伤害的加护！
					ランダムダンジョン中加護 = 奥義ダメージUP_20％
			ENDSELECT
			WSTR:(K++) = %CALLNAME:MASTER%一行向学者致谢后，心满意足地继续探索。
		CASE "[什么也不做]"
			WSTR:(K++) = 似乎暂时不需要。
			WSTR:(K++) = %CALLNAME:MASTER%一行婉拒学者后，继续投入探索。
	ENDSELECT
	CALL メッセージ欄表示用関数(,,,0)
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@固有戦闘開始時処理_特殊_通常攻撃ダメージUP_30％
;味方全体へのバフを貼る
{
DT_ROW_ADD "戦闘効果データベース", "効果名", "ランダムダンジョン加護", "バフ・デバフフラグ", "バフ", "適用範囲", "味方全体",
	"効果枠", "通常攻撃強化_ランダム加護", "対象能力", "ダメージ補正_通常攻撃ダメージ", "効果量_割合", 30, "効果量_固定値", 0,
	"持続ターン", -1, "持続回数", -1, "持続行動回数", -1, "持続被ダメ回数", -1, "消去不可フラグ", 1, "特殊表示オプション", 0
}

@固有戦闘開始時処理_特殊_アビリティダメージUP_25％
;味方全体へのバフを貼る
{
DT_ROW_ADD "戦闘効果データベース", "効果名", "ランダムダンジョン加護", "バフ・デバフフラグ", "バフ", "適用範囲", "味方全体",
	"効果枠", "アビリティ攻撃強化_ランダム加護", "対象能力", "ダメージ補正_アビリティダメージ", "効果量_割合", 25, "効果量_固定値", 0,
	"持続ターン", -1, "持続回数", -1, "持続行動回数", -1, "持続被ダメ回数", -1, "消去不可フラグ", 1, "特殊表示オプション", 0
}

@固有戦闘開始時処理_特殊_奥義ダメージUP_20％
;味方全体へのバフを貼る
{
DT_ROW_ADD "戦闘効果データベース", "効果名", "ランダムダンジョン加護", "バフ・デバフフラグ", "バフ", "適用範囲", "味方全体",
	"効果枠", "奥義強化_ランダム加護", "対象能力", "ダメージ補正_奥義ダメージ", "効果量_割合", 20, "効果量_固定値", 0,
	"持続ターン", -1, "持続回数", -1, "持続行動回数", -1, "持続被ダメ回数", -1, "消去不可フラグ", 1, "特殊表示オプション", 0
}


@イベント_リゾート島開拓作業_ランダム_呪いの遺物
#DIM 属性番号

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 周围没有异常状况。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	属性番号 = RAND:3
	WSTR:(K++) = %CALLNAME:MASTER%一行正在探索时，发现了散发诡异魔力的古旧宝石。
	WSTR:(K++) = 或许是古代咒术使用的器物，能感受到向四周扩散恶意的阴森气息。
	WSTR:(K++) = 所幸岁月侵蚀使其力量大幅衰减，放任不管也会逐渐消散。
	SELECTCASE 属性番号
		CASE 0
			KSTR:(K++) = 稍加改造或许能转化为削弱敌方攻击力的诅咒。_PAGE
		CASE 1
			KSTR:(K++) = 稍加改造或许能转化为削弱敌方防御力的诅咒。_PAGE
		CASE 2
			KSTR:(K++) = 稍加改造或许能转化为降低敌方行动速度的诅咒。_PAGE
	ENDSELECT
	
	KSTR:(K++) = 如何选择？
	SELECTCASE 属性番号
		CASE 0
			KSTR:(K++) = 可获取的探索加护：敌方攻击力DOWN（10％）
		CASE 1
			KSTR:(K++) = 可获取的探索加护：敌方防御力DOWN（10％）
		CASE 2
			KSTR:(K++) = 可获取的探索加护：敌方行动速度DOWN（15％）
	ENDSELECT
	IF ランダムダンジョン中加護 == ""
		KSTR:(K++) = 当前探索加护：无
		KSTR:(K++) = BUTTON_[获取加护]
	ELSE
		KSTR:(K++) = 当前探索加护：%ランダムダンジョン中加護%
		KSTR:(K++) = BUTTON_[替换加护]
	ENDIF
	KSTR:(K++) = BUTTON_[什么也不做]
	CALL メッセージ欄表示用関数(,,,0)
	CALL 口上変数初期化
	$LOOP_MESSAGE
	BINPUTS
	SELECTCASE RESULTS
		CASE "[获取加护]", "[替换加护]"
			WSTR:(K++) = 看来能成为探索助力，开始改造吧。
			SELECTCASE 属性番号
				CASE 0
					WSTR:(K++) = %CALLNAME:MASTER%一行将诅咒改造为降低敌方攻击力的加护！
					ランダムダンジョン中加護 = 攻撃力DOWN_10％
				CASE 1
					WSTR:(K++) = %CALLNAME:MASTER%一行将诅咒改造为降低敌方防御力的加护！
					ランダムダンジョン中加護 = 防御力DOWN_10％
				CASE 2
					WSTR:(K++) = %CALLNAME:MASTER%一行将诅咒改造为降低敌方行动速度的加护！
					ランダムダンジョン中加護 = 行動速度DOWN_15％
			ENDSELECT
			WSTR:(K++) = %CALLNAME:MASTER%一行将宝石收入怀中，继续探索。
		CASE "[什么也不做]"
			WSTR:(K++) = 似乎暂时不需要。
			WSTR:(K++) = %CALLNAME:MASTER%一行弃置宝石后，继续投入探索。
	ENDSELECT
	CALL メッセージ欄表示用関数(,,,0)
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
	CALL 口上変数初期化
ENDIF
CALL 画面再描画


@固有戦闘開始時処理_特殊_攻撃力DOWN_10％
;敵全体へのデバフを貼る
{
DT_ROW_ADD "戦闘効果データベース", "効果名", "ランダムダンジョン加護", "バフ・デバフフラグ", "デバフ", "適用範囲", "敵全体",
	"効果枠", "攻撃力DOWN_ランダム加護", "対象能力", "攻撃力", "効果量_割合", 10, "効果量_固定値", 0,
	"持続ターン", -1, "持続回数", -1, "持続行動回数", -1, "持続被ダメ回数", -1, "消去不可フラグ", 1, "特殊表示オプション", 0
}

@固有戦闘開始時処理_特殊_防御力DOWN_10％
;敵全体へのデバフを貼る
{
DT_ROW_ADD "戦闘効果データベース", "効果名", "ランダムダンジョン加護", "バフ・デバフフラグ", "デバフ", "適用範囲", "敵全体",
	"効果枠", "防御力DOWN_ランダム加護", "対象能力", "防御力", "効果量_割合", 10, "効果量_固定値", 0,
	"持続ターン", -1, "持続回数", -1, "持続行動回数", -1, "持続被ダメ回数", -1, "消去不可フラグ", 1, "特殊表示オプション", 0
}

@固有戦闘開始時処理_特殊_行動速度DOWN_15％
;敵全体へのデバフを貼る
{
DT_ROW_ADD "戦闘効果データベース", "効果名", "ランダムダンジョン加護", "バフ・デバフフラグ", "デバフ", "適用範囲", "敵全体",
	"効果枠", "行動速度DOWN_ランダム加護", "対象能力", "行動速度", "効果量_割合", 15, "効果量_固定値", 0,
	"持続ターン", -1, "持続回数", -1, "持続行動回数", -1, "持続被ダメ回数", -1, "消去不可フラグ", 1, "特殊表示オプション", 0
}
