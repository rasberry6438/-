
@イベント_リゾート島開拓作業_ランダム_調合知識イベ１
CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 周围没有异常状况。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = 发现了长着奇特形状叶片的灌木丛生地。
	CALL 知識技能所持者検索("調合知識", 1)
	LOCAL = RESULT
	IF LOCAL > -1
		WSTR:(K++) = %CALLNAME:LOCAL%察觉到这些叶子可以制成治疗药水的药草。
		WSTR:(K++) = 就地调配的话就能作为应急治疗药水使用。
		WSTR:(K++) = 虽然药草无法长期保存只能在本次探索中使用，但应该能派上大用场。
		LOCAL:1 = RAND:3 + 1
		KSTR:(K++) = %CALLNAME:PLAYER%一行获得了{LOCAL:1}个「即效万能药」！
		CALL アイテム増減汎用処理("即效万能药", LOCAL:1)
		ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
	ELSE
		WSTR:(K++) = %CALLNAME:PLAYER%一行对此并无更多了解。
		KSTR:(K++) = 若有调合知识的话或许能辨别出是什么树种……
	ENDIF
	CALL メッセージ欄表示用関数()
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_調合知識イベ２
CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 周围没有异常状况。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = 发现了长着奇特形状叶片的灌木丛生地。
	CALL 知識技能所持者検索("調合知識", 1)
	LOCAL = RESULT
	IF LOCAL > -1
		WSTR:(K++) = %CALLNAME:LOCAL%发现这些树木结有储存魔力的果实。
		WSTR:(K++) = 虽然采摘后魔力会迅速消散，但就地恢复的话不成问题。
		LOCAL:1 = RAND:3 + 1
		KSTR:(K++) = %CALLNAME:PLAYER%一行的ＭＰ恢复了{LOCAL:1 * 50}！
		CALL 探索中全体回復_ＭＰ(LOCAL:1 * 50)
		ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
	ELSE
		WSTR:(K++) = %CALLNAME:PLAYER%一行对此并无更多了解。
		KSTR:(K++) = 若有调合知识的话或许能辨别出是什么树种……
	ENDIF
	CALL メッセージ欄表示用関数()
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_調合知識イベ３
CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 周围没有异常状况。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = 发现了长着奇特形状叶片的灌木丛生地。
	CALL 知識技能所持者検索("調合知識", 1)
	LOCAL = RESULT
	IF LOCAL > -1
		WSTR:(K++) = %CALLNAME:LOCAL%发现这些叶子能制成临时魔力强化药。
		WSTR:(K++) = 喝下调配好的药剂后，力量在你们体内奔涌！
		KSTR:(K++) = %CALLNAME:PLAYER%一行的奥义即刻进入可发动状态！
		CALL 探索中全体回復_奥義ゲージ(100)
		ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
	ELSE
		WSTR:(K++) = %CALLNAME:PLAYER%一行对此并无更多了解。
		KSTR:(K++) = 若有调合知识的话或许能辨别出是什么树种……
	ENDIF
	CALL メッセージ欄表示用関数()
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_魔法知識イベ１
CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 周围没有异常状况。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = 在岩石阴影处发现了散发魔力的石头。
	KSTR:(K++) = 要捡起来吗？
	KSTR:(K++) = BUTTON_[确定]
	KSTR:(K++) = BUTTON_[取消]
	CALL メッセージ欄表示用関数(,,,0)
	CALL 口上変数初期化
	$LOOP_MESSAGE
	BINPUTS
	SELECTCASE RESULTS
		CASE "[确定]"
			CALL 知識技能所持者検索("魔法知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				WSTR:(K++) = %CALLNAME:LOCAL%鉴定后发现，似乎是能作为骑空艇动力的风属性魔石。
				WSTR:(K++) = 带回去贩卖应该能赚不少钱！
				KSTR:(K++) = %CALLNAME:PLAYER%一行获得了５万卢比！
				MONEY += 50000
			ELSE
				WSTR:(K++) = 虽然不清楚具体用途，但确实是漂亮的魔石。
				WSTR:(K++) = 带回去贩卖应该能兑换现金。
				KSTR:(K++) = %CALLNAME:PLAYER%一行获得了１万卢比！
				MONEY += 10000
			ENDIF
			ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
		CASE "[取消]"
			WSTR:(K++) = 贸然触碰不知会发生什么危险，还是别碰为妙。
			KSTR:(K++) = 若有魔法知识或许能加以利用……
		CASEELSE
			CLEARLINE 1
			REUSELASTLINE
			GOTO LOOP_MESSAGE
	ENDSELECT
	CALL メッセージ欄表示用関数()
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_魔法知識イベ２
#DIM ダメージ量

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 周围没有异常状况。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = 在岩石阴影处发现了散发魔力的石头。
	KSTR:(K++) = 要捡起来吗？
	KSTR:(K++) = BUTTON_[确定]
	KSTR:(K++) = BUTTON_[取消]
	CALL メッセージ欄表示用関数(,,,0)
	CALL 口上変数初期化
	$LOOP_MESSAGE
	BINPUTS
	SELECTCASE RESULTS
		CASE "[确定]"
			CALL 知識技能所持者検索("魔法知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				WSTR:(K++) = 靠近后发现，%CALLNAME:LOCAL%察觉到这是火之魔石。
				WSTR:(K++) = 要是贸然触碰恐怕会喷出火焰导致受伤。
				WSTR:(K++) = %CALLNAME:LOCAL%从魔石中抽离多余魔力，将其加工成简易道具。
				LOCAL:1 = RAND:3 + 1
				KSTR:(K++) = %CALLNAME:PLAYER%一行获得了{LOCAL:1}颗「火之魔石」！
				CALL アイテム増減汎用処理("火之魔石", LOCAL:1)
			ELSE
				WSTR:(K++) = 靠近后突然从魔石中喷出火焰！！
				ダメージ量 = ＰＴ内最大レベル算出() * 20
				KSTR:(K++) = %CALLNAME:PLAYER%一行全员ＨＰ受到{ダメージ量}伤害！

				CALL メッセージ欄表示用関数()
				CALL 口上変数初期化
				CALL 探索中全体ダメージ_ＨＰ_致死(ダメージ量)

				WSTR:(K++) = 看来火之魔石积蓄了过多魔力。
				WSTR:(K++) = 魔力耗尽的魔石已沦为普通石块……
				KSTR:(K++) = 若有魔法知识或许能避免……重整旗鼓后你们继续前进。
			ENDIF
			ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
		CASE "[取消]"
			WSTR:(K++) = 贸然触碰不知会发生什么危险，还是别碰为妙。
			KSTR:(K++) = 若有魔法知识或许能加以利用……
		CASEELSE
			CLEARLINE 1
			REUSELASTLINE  
			GOTO LOOP_MESSAGE
	ENDSELECT
	CALL メッセージ欄表示用関数()
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_魔法知識イベ３
CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 周围没有异常状况。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = 在岩石阴影处发现了散发魔力的石头。
	KSTR:(K++) = 要捡起来吗？
	KSTR:(K++) = BUTTON_[确定]
	KSTR:(K++) = BUTTON_[取消]
	CALL メッセージ欄表示用関数(,,,0)
	CALL 口上変数初期化
	$LOOP_MESSAGE
	BINPUTS
	SELECTCASE RESULTS
		CASE "[确定]"
			CALL 知識技能所持者検索("魔法知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				WSTR:(K++) = 靠近后发现，%CALLNAME:LOCAL%察觉到这是光之魔石。
				WSTR:(K++) = 蕴含生命之力的魔力大幅增强治愈效果！
				WSTR:(K++) = %CALLNAME:LOCAL%运用魔石魔力，全员（含战斗不能者）ＨＰ恢复了１００！
				CALL 探索中全体回復_ＨＰ_蘇生(100)
			ELSE
				WSTR:(K++) = 靠近后突然从魔石中涌出温暖光芒。
				WSTR:(K++) = 沐浴光芒的你们伤口逐渐愈合……
				KSTR:(K++) = %CALLNAME:PLAYER%一行的ＨＰ恢复了１００！
				CALL メッセージ欄表示用関数()
				CALL 探索中全体回復_ＨＰ(100)
				CALL 口上変数初期化
				WSTR:(K++) = 看来光之魔石积蓄了过多魔力。
				WSTR:(K++) = 魔力耗尽的魔石已沦为普通石块……
				KSTR:(K++) = 若有魔法知识或许能更有效利用……重整旗鼓后你们继续前进。
			ENDIF
			ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
		CASE "[取消]"
			WSTR:(K++) = 贸然触碰不知会发生什么危险，还是别碰为妙。
			KSTR:(K++) = 若有魔法知识或许能加以利用……
		CASEELSE
			CLEARLINE 1
			REUSELASTLINE  
			GOTO LOOP_MESSAGE
	ENDSELECT
	CALL メッセージ欄表示用関数()
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_機械知識イベ１
#DIMS ドロップアイテム

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 周围没有异常状况。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = 发现横卧在地面即将腐朽的铁魔像。
	KSTR:(K++) = 要靠近查看吗？
	KSTR:(K++) = BUTTON_[确定]
	KSTR:(K++) = BUTTON_[取消]
	CALL 知識技能所持者検索("機械知識", 1)
	LOCAL = RESULT
	IF LOCAL > -1
		KSTR:(K++) = BUTTON_[%CALLNAME:LOCAL%从远处进行观察]
	ELSE
		LOCAL = 0
	ENDIF
	CALL メッセージ欄表示用関数(,,,0)
	CALL 口上変数初期化
	$LOOP_MESSAGE
	BINPUTS
	SELECTCASE RESULTS
		CASE "[确定]"
			IF RAND:2
				WSTR:(K++) = 靠近仔细查看发现，腐朽的仅是表面而内部机构仍可使用。
				WSTR:(K++) = 分解后回收状态良好的零件吧。
				ドロップアイテム = %ランダム素材名("迷宫素材", RAND:3)%
				LOCAL = RAND:3 + 2
				WSTR:(K++) = %CALLNAME:PLAYER%获得了{LOCAL}个%ドロップアイテム%！
				CALL 素材入手処理(ドロップアイテム, LOCAL)
			ELSE
				WSTR:(K++) = 靠近时魔像突然发出异响爆炸了！
				KSTR:(K++) = %CALLNAME:PLAYER%一行ＨＰ减少了{ダンジョン階層記録 * 50}！
				CALL メッセージ欄表示用関数()
				CALL 探索中全体ダメージ_ＨＰ_非致死(ダンジョン階層記録 * 50)
				CALL 口上変数初期化
				WSTR:(K++) = 看似腐朽的躯体竟还保留着动力核心。
				WSTR:(K++) = 零件全被炸飞，已无可用回收物。
				KSTR:(K++) = 怀着未能收获的遗憾，重整旗鼓后你们继续前进。
			ENDIF
			ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
		CASE "[取消]"
			WSTR:(K++) = 贸然触碰不知会发生什么危险，还是别碰为妙。
		CASE @"[%CALLNAME:LOCAL%从远处进行观察]"
			IF RAND:2
				WSTR:(K++) = 裸露的机械部分已失去光泽，但侧耳倾听能听见细微的驱动声…
				WSTR:(K++) = %CALLNAME:LOCAL%判断那具魔像是安全的。
				WSTR:(K++) = 再次仔细观察，腐朽的仅是表面而内部机构仍可使用。
				WSTR:(K++) = 分解后回收状态良好的零件吧。
				ドロップアイテム = %ランダム素材名("迷宫素材", RAND:3)%
				LOCAL = RAND:3 + 2
				WSTR:(K++) = %CALLNAME:PLAYER%获得了{LOCAL}个%ドロップアイテム%！
				CALL 素材入手処理(ドロップアイテム, LOCAL)
			ELSE
				WSTR:(K++) = 裸露的机械部分已失去光泽，但侧耳倾听能听见细微的驱动声…
				WSTR:(K++) = %CALLNAME:LOCAL%判断那具魔像存在危险。
				KSTR:(K++) = 从远处投石试探时，魔像突然发出异响爆炸了！_PAGE
				WSTR:(K++) = 看似腐朽的躯体竟还保留着动力核心。
				WSTR:(K++) = 零件全被炸飞，已无可用回收物。
				KSTR:(K++) = 虽遗憾未能收获，但庆幸安全处理后你们继续前进。
			ENDIF
			ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
		CASEELSE
			CLEARLINE 1
			REUSELASTLINE  
			GOTO LOOP_MESSAGE
	ENDSELECT
	CALL メッセージ欄表示用関数()
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_機械知識イベ２
#DIMS ドロップアイテム

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 周围没有异常状况。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = %CALLNAME:PLAYER%们遭遇野生兽型魔像。
	WSTR:(K++) = 虽迅速摆出战斗姿态，魔像却毫无反应。似乎对这边没有敌意。
	KSTR:(K++) = 要靠近查看吗？
	KSTR:(K++) = BUTTON_[确定]
	KSTR:(K++) = BUTTON_[取消]
	CALL 知識技能所持者検索("機械知識", 1)
	LOCAL = RESULT
	CALL メッセージ欄表示用関数(,,,0)
	CALL 口上変数初期化
	$LOOP_MESSAGE
	BINPUTS
	SELECTCASE RESULTS
		CASE "[确定]"
			WSTR:(K++) = 靠近仔细观察发现，魔像的指示灯正规律闪烁。
			IF LOCAL > -1
				WSTR:(K++) = %CALLNAME:LOCAL%破译闪烁规律后，发现与骑空艇常用通讯信号一致。
				WSTR:(K++) = 解读内容竟是……「这・里・有・宝・藏・汪・汪」……
				ドロップアイテム = %TEXTR("涡琥珀/血琥珀/宝晶原石/星晶碎块")%
				WSTR:(K++) = 试着挖掘地面后，从土中挖出了%ドロップアイテム%！
				KSTR:(K++) = %CALLNAME:LOCAL%一行获得了1个%ドロップアイテム%！_PAGE
				CALL 素材入手処理(ドロップアイテム, 1)
				WSTR:(K++) = 魔像仿佛心满意足般熄灭灯光，就地进入休眠状态。
				KSTR:(K++) = 心怀感激收下宝石后，你们离开魔像继续前进。
			ELSE
				WSTR:(K++) = 魔像似乎想传达什么，但%CALLNAME:PLAYER%一行无法理解……
				WSTR:(K++) = 若有机械知识或许能解读，但眼下没有破译手段。
				KSTR:(K++) = 无奈告别魔像后，你们继续前行。
			ENDIF
		CASE "[取消]"
			WSTR:(K++) = 既然没有敌意也不必强行接触。
			KSTR:(K++) = 你们远离魔像继续探索。
		CASEELSE
			CLEARLINE 1
			REUSELASTLINE  
			GOTO LOOP_MESSAGE
	ENDSELECT
	ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
	CALL メッセージ欄表示用関数()
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_錬金知識イベ１
#DIMS ドロップアイテム
#DIM 知識２
#DIM 知識１
#DIM 薬効果
#DIM 飲むキャラ

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 周围没有异常状况。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = %CALLNAME:PLAYER%一行探索时，森林中现出神秘老妪身影。
	CALL メッセージ欄表示用関数(,,,0)
	CALL 口上変数初期化
	WSTR:(K++) = 「嘿嘿嘿……有上好的药，要尝尝吗？」
	;薬の効果をここで決定しておく
	薬効果 = RAND:4
	;0:ダメージ　1:何も起こらない　2:HP回復　3:MP回復
	飲むキャラ = 味方ランダム選出()
	CALL メッセージ欄表示用関数(,"可疑的老妪",,0)
	CALL 口上変数初期化
	WSTR:(K++) = 老妪递来的药剂正咕嘟咕嘟冒着泡，怎么看都充满可疑……
	$選択ループ
	KSTR:(K++) = 要喝下药吗？
	KSTR:(K++) = BUTTON_[确定]
	KSTR:(K++) = BUTTON_[取消]
	CALL 知識技能所持者検索("錬金知識", 2)
	知識２ = RESULT
	CALL 知識技能所持者検索("錬金知識", 1)
	知識１ = RESULT
	IF 知識２ >= 0
		KSTR:(K++) = BUTTON_[鉴定药效]
	ELSEIF 知識１ >= 0
		KSTR:(K++) = BUTTON_[推测药效]
	ENDIF
	CALL メッセージ欄表示用関数(,,,0)
	CALL 口上変数初期化
	$LOOP_MESSAGE
	BINPUTS
	SELECTCASE RESULTS
		CASE "[确定]"
			WSTR:(K++) = 「那就一口气喝下去吧，要豪爽地喝哦，嘿嘿嘿……」
			CALL メッセージ欄表示用関数(,"可疑的老妪",,0)
			CALL 口上変数初期化
			SELECTCASE 薬効果
				CASE 0
					WSTR:(K++) = %CALLNAME:(BATTLE_STATE:飲むキャラ:0)%仰头灌下药剂，苦涩与腥膻在口腔炸裂！
					WSTR:(K++) = %CALLNAME:(BATTLE_STATE:飲むキャラ:0)%的ＨＰ降到了1点！
					CALL メッセージ欄表示用関数(,,,0)
					CALL 口上変数初期化
					BATTLE_STATE:飲むキャラ:ＨＰ = 1
					WSTR:(K++) = %CALLNAME:PLAYER%一行回头时发现老妪早已消失无踪。
					KSTR:(K++) = 可疑物品果然不能乱喝……带着这样的教训，%CALLNAME:PLAYER%一行继续探索。
				CASE 1
					WSTR:(K++) = %CALLNAME:(BATTLE_STATE:飲むキャラ:0)%仰头灌下药剂，却没有任何味道……
					WSTR:(K++) = 或者说，根本就是加了色素的清水。
					CALL メッセージ欄表示用関数(,,,0)
					CALL 口上変数初期化
					WSTR:(K++) = %CALLNAME:PLAYER%一行回头时发现老妪早已消失无踪。
					KSTR:(K++) = 怀着满腹疑惑，%CALLNAME:PLAYER%一行继续探索。
				CASE 2
					WSTR:(K++) = %CALLNAME:(BATTLE_STATE:飲むキャラ:0)%仰头灌下药剂，身体的疲惫与疼痛逐渐消散……
					WSTR:(K++) = %CALLNAME:(BATTLE_STATE:飲むキャラ:0)%的ＨＰ完全恢复了！
					CALL メッセージ欄表示用関数(,,,0)
					CALL 口上変数初期化
					BATTLE_STATE:飲むキャラ:ＨＰ = BATTLE_STATE:飲むキャラ:最大ＨＰ
					WSTR:(K++) = %CALLNAME:PLAYER%一行回头时发现老妪早已消失无踪。
					KSTR:(K++) = 遗憾未能道谢，%CALLNAME:PLAYER%一行继续探索。
				CASE 3
					WSTR:(K++) = %CALLNAME:(BATTLE_STATE:飲むキャラ:0)%仰头灌下药剂，浑身涌动着澎湃力量！
					WSTR:(K++) = %CALLNAME:(BATTLE_STATE:飲むキャラ:0)%的奥义槽蓄满了！
					CALL メッセージ欄表示用関数(,,,0)
					CALL 口上変数初期化
					BATTLE_STATE:飲むキャラ:奥義ゲージ = BATTLE_STATE:飲むキャラ:ゲージ最大値
					WSTR:(K++) = %CALLNAME:PLAYER%一行回头时发现老妪早已消失无踪。
					KSTR:(K++) = 遗憾未能道谢，%CALLNAME:PLAYER%一行继续探索。
			ENDSELECT
		CASE "[取消]"
			WSTR:(K++) = %CALLNAME:PLAYER%一行还不至于鲁莽到乱喝不明药剂。
			KSTR:(K++) = 婉拒老妪后迅速离开了现场。
		CASE "[鉴定药效]"
			SELECTCASE 薬効果
				CASE 0
					WSTR:(K++) = %CALLNAME:知識２%仔细端详药剂……
					WSTR:(K++) = 似乎饮用后会大幅削减体力……%CALLNAME:知識２%如此判断
				CASE 1
					WSTR:(K++) = %CALLNAME:知識２%仔细端详药剂……
					WSTR:(K++) = 这根本不是药只是染色水……%CALLNAME:知識２%如此判断
				CASE 2
					WSTR:(K++) = %CALLNAME:知識２%仔细端详药剂……
					WSTR:(K++) = 似乎是能大幅恢复体力的药剂……%CALLNAME:知識２%如此判断
				CASE 3
					WSTR:(K++) = %CALLNAME:知識２%仔细端详药剂……
					WSTR:(K++) = 似乎是能大幅恢复奥义槽的药剂……%CALLNAME:知識２%如此判断
			ENDSELECT
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			GOTO 選択ループ
		CASE "[推测药效]"
			SELECTCASE 薬効果
				CASE 0, 1
					WSTR:(K++) = %CALLNAME:知識１%仔细端详药剂……
					WSTR:(K++) = 感觉不会有正面效果……%CALLNAME:知識１%如此判断
				CASE 2, 3
					WSTR:(K++) = %CALLNAME:知識１%仔细端详药剂……
					WSTR:(K++) = 总觉得会有不错的效果……%CALLNAME:知識１%如此判断
			ENDSELECT
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			GOTO 選択ループ
		CASEELSE
			CLEARLINE 1
			REUSELASTLINE  
			GOTO LOOP_MESSAGE
	ENDSELECT
	ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
	CALL メッセージ欄表示用関数()
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_錬金知識イベ２
#DIMS ドロップアイテム
#DIM 知識１
#DIM 薬効果

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 周围没有异常状况。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = %CALLNAME:PLAYER%一行探索时，四周突然被浓雾笼罩.……
	WSTR:(K++) = 或许是天气骤变，转瞬间能见度已降至伸手不见五指。
	$選択ループ
	KSTR:(K++) = 该如何应对？
	KSTR:(K++) = BUTTON_[继续前进]
	KSTR:(K++) = BUTTON_[原地等待雾散]
	CALL 知識技能所持者検索("錬金知識", 1)
	知識１ = RESULT
	IF 知識１ >= 0
		KSTR:(K++) = BUTTON_[用炼金术驱散雾气]
	ENDIF
	CALL メッセージ欄表示用関数(,,,0)
	CALL 口上変数初期化
	$LOOP_MESSAGE
	BINPUTS
	SELECTCASE RESULTS
		CASE "[继续前进]"
			WSTR:(K++) = 想着前进总能走出迷雾，硬着头皮前行。
			WSTR:(K++) = …………
			SELECTCASE RAND:3
				CASE 0, 1
					WSTR:(K++) = …………不行！完全找不到出路。
					KSTR:(K++) = %CALLNAME:PLAYER%一行因疲劳ＨＰ减少100点。
					CALL メッセージ欄表示用関数()
					CALL 口上変数初期化
					
					CALL 探索中全体ダメージ_ＨＰ_非致死(100)
					GOTO 選択ループ
				CASE 2
					WSTR:(K++) = …………总算成功走出了迷雾。
					KSTR:(K++) = 确认地图上清晰可见的道路与当前位置后，%CALLNAME:PLAYER%一行继续探索。
			ENDSELECT
		CASE "[原地等待雾散]"
			WSTR:(K++) = 与其盲目乱闯不如原地等待。
			WSTR:(K++) = %CALLNAME:PLAYER%一行相互依偎静候雾散。
			WSTR:(K++) = …………
			KSTR:(K++) = …………_PAGE
			WSTR:(K++) = …………雾气终于开始变淡。
			WSTR:(K++) = %CALLNAME:PLAYER%一行精神疲惫ＭＰ减少100点。
			KSTR:(K++) = 确认地图上清晰可见的道路与当前位置后，%CALLNAME:PLAYER%一行继续探索。
			CALL メッセージ欄表示用関数()
			CALL 口上変数初期化
			CALL 探索中全体ダメージ_ＭＰ(100)
		CASE "[用炼金术驱散雾气]"
			WSTR:(K++) = %CALLNAME:知識１%用常见素材炼制出驱雾粉。
			WSTR:(K++) = 药粉随风飘散，空气中的水分被迅速吸附，浓雾逐渐稀薄……
			WSTR:(K++) = …………能见度已恢复至可探索程度！
			KSTR:(K++) = 确认地图上清晰可见的道路与当前位置后，%CALLNAME:PLAYER%一行继续探索。
		CASEELSE
			CLEARLINE 1
			REUSELASTLINE  
			GOTO LOOP_MESSAGE
	ENDSELECT
	ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
	CALL メッセージ欄表示用関数()
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_魔物知識イベ１
#DIMS ドロップアイテム
#DIM 知識１
#DIM 薬効果

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 周围没有异常状况。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = %CALLNAME:PLAYER%一行发现周遭树木岩石布满巨大爪痕。
	WSTR:(K++) = 似是魔物标记领地所致，但范围异常广阔……
	WSTR:(K++) = 看来有超乎寻常的魔物在此游荡。
	$選択ループ
	KSTR:(K++) = 该如何应对？
	KSTR:(K++) = BUTTON_[主动讨伐]
	KSTR:(K++) = BUTTON_[谨慎撤离]
	CALL 知識技能所持者検索("魔物知識", 1)
	知識１ = RESULT
	IF 知識１ >= 0
		KSTR:(K++) = BUTTON_[设伏剿灭]
	ENDIF
	CALL メッセージ欄表示用関数(,,,0)
	CALL 口上変数初期化
	$LOOP_MESSAGE
	BINPUTS
	SELECTCASE RESULTS
		CASE "[主动讨伐]"
			WSTR:(K++) = 放任魔物威胁度假村后果严重。
			WSTR:(K++) = %CALLNAME:PLAYER%一行搜索周边成功锁定目标。
			KSTR:(K++) = 即刻向凶暴魔物发起讨伐！
			CALL メッセージ欄表示用関数()

			CALL ランダムエネミーセット関数(2, ダンジョン階層記録 + 5)
			SIF ランダムダンジョン中加護 != ""
				戦闘時_特殊処理フラグ '= ランダムダンジョン中加護
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == -1
				;逃走時
				CALL 口上変数初期化
				CALL 画面再描画
				RETURN 0
			ELSEIF RESULT == 0
				;勝利時
				WSTR:(K++) = %CALLNAME:PLAYER%一行顺利剿灭魔物。
				KSTR:(K++) = 这将使周围地区更加安全一些，%CALLNAME:PLAYER%一行继续探索。
			ENDIF
		CASE "[谨慎撤离]"
			WSTR:(K++) = 不行，现在还没做好准备
			KSTR:(K++) = %CALLNAME:PLAYER%一行决定暂时撤离。
			CALL メッセージ欄表示用関数()
			CALL 口上変数初期化
			CALL 画面再描画
			RETURN 0
		CASE "[设伏剿灭]"
			WSTR:(K++) = %CALLNAME:知識１%观察周围环境，分析出魔物移动路线。
			WSTR:(K++) = %CALLNAME:PLAYER%一行在必经之路设伏……
			KSTR:(K++) = …………魔物经过瞬间发动突袭！_PAGE
			WSTR:(K++) = 魔物毫无招架之力被歼灭。
			KSTR:(K++) = 这将使周围地区更加安全一些，%CALLNAME:PLAYER%一行继续探索。
		CASEELSE
			CLEARLINE 1
			REUSELASTLINE  
			GOTO LOOP_MESSAGE
	ENDSELECT
	ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
	CALL メッセージ欄表示用関数()
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_魔物知識イベ２
#DIMS ドロップアイテム
#DIM 知識１
#DIM 弱点
#DIM 成功フラグ
#DIM レベルアップフラグ

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 周围没有异常状况。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	弱点 = RAND:2
	WSTR:(K++) = %CALLNAME:PLAYER%一行正在探索时，出现了甲壳呈现鲜明红蓝双色的魔物！
	WSTR:(K++) = 这种魔物对火或水属性存在弱点……但如果误判弱点属性就会遭到强力反击。
	$選択ループ
	KSTR:(K++) = 该用哪种属性攻击呢？
	KSTR:(K++) = BUTTON_[用火攻击！]
	KSTR:(K++) = BUTTON_[用水攻击！]
	CALL 知識技能所持者検索("魔物知識", 1)
	知識１ = RESULT
	IF 知識１ >= 0
		KSTR:(K++) = BUTTON_[用魔物知识看破弱点]
	ENDIF
	CALL メッセージ欄表示用関数(,,,0)
	CALL 口上変数初期化
	$LOOP_MESSAGE
	BINPUTS
	SELECTCASE RESULTS
		CASE "[用火攻击！]", "[用水攻击！]"
			成功フラグ = 0
			IF RESULTS == "[用火攻击！]"
				WSTR:(K++) = %CALLNAME:PLAYER%一行用火属性发动了攻击！
				SIF 弱点 == 0
					成功フラグ = 1
			ELSE
				WSTR:(K++) = %CALLNAME:PLAYER%一行用水属性发动了攻击！
				SIF 弱点 == 1
					成功フラグ = 1
			ENDIF
			IF 成功フラグ
				WSTR:(K++) = 魔物发出巨大的惨叫声，缓缓在原地倒下。
				WSTR:(K++) = 看来是成功击中了正确的弱点。
				KSTR:(K++) = 击败魔物的%CALLNAME:PLAYER%一行获得了{ダンジョン階層記録 * 200}经验值！
				CALL メッセージ欄表示用関数()
				CALL 口上変数初期化
				レベルアップフラグ = 0
				FOR LOCAL, 0, 14
					SIF LOCAL > 3 && LOCAL < 10
						CONTINUE
					SIF BATTLE_STATE:LOCAL:キャラ登録番号 < 1
						CONTINUE
					基礎BATTLE_STATE:(BATTLE_STATE:LOCAL:キャラ登録番号):蓄積EXP += ダンジョン階層記録 * 200
					CALL レベルアップ処理(BATTLE_STATE:LOCAL:キャラ登録番号)
					SIF レベルアップフラグ < RESULT
						レベルアップフラグ = RESULT
				NEXT
				IF レベルアップフラグ
					;ステータス代入
					CALL 戦闘初期処理_味方
					CALL メッセージ欄表示用関数(,,,0)
					CALL 口上変数初期化
				ENDIF
				KSTR:(K++) = 周边暂时安全了，%CALLNAME:PLAYER%一行继续展开探索。
			ELSE
				WSTR:(K++) = 魔物发出震耳欲聋的咆哮，亢奋地扑向%CALLNAME:PLAYER%一行！
				KSTR:(K++) = %CALLNAME:PLAYER%一行的ＨＰ减少了{ダンジョン階層記録 * 30, 4}！
				CALL メッセージ欄表示用関数()
				CALL 口上変数初期化
				
				CALL 探索中全体ダメージ_ＨＰ_非致死(ダンジョン階層記録 * 30)
				WSTR:(K++) = 后来总算用另一种属性成功击倒了魔物。
				KSTR:(K++) = 这次吃了大亏……下次得谨慎些。%CALLNAME:PLAYER%一行重整旗鼓继续探索。
			ENDIF
		CASE "[用魔物知识看破弱点]"
			WSTR:(K++) = %CALLNAME:知識１%仔细观察魔物的行动模式，看破其弱点是%属性数値文字列変換(弱点)%属性！
			WSTR:(K++) = %CALLNAME:PLAYER%一行用正确属性攻击后，魔物惨叫着缓缓倒地。
			WSTR:(K++) = 魔物毫无招架之力被歼灭。
			KSTR:(K++) = 周边暂时安全了，%CALLNAME:PLAYER%一行继续展开探索。
		CASEELSE
			CLEARLINE 1
			REUSELASTLINE  
			GOTO LOOP_MESSAGE
	ENDSELECT
	ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
	CALL メッセージ欄表示用関数()
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	CALL 口上変数初期化
ENDIF
CALL 画面再描画


@イベント_リゾート島開拓作業_ランダム_釣り好き１
#DIMS 素材名
#DIM 知識１

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 周围没有异常状况。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = %CALLNAME:MASTER%一行探索时发现了一条清澈见底的美丽溪流。
	WSTR:(K++) = 溪水中可见数尾肥美健硕的鱼儿游弋。
	CALL 知識技能所持者検索("釣り好き", 1)
	知識１ = RESULT
	IF 知識１ >= 0
		WSTR:(K++) = %CALLNAME:知識１%取出携带的钓竿，%CALLNAME:MASTER%一行享受了片刻垂钓时光。
		WSTR:(K++) = …………
		WSTR:(K++) = %CALLNAME:知識１%钓到了足够数量的鱼！
		素材名 = %ランダム素材名("食物素材", , , "魚")%
		WSTR:(K++) = 获得了３个%素材名%！
		WSTR:(K++) = %CALLNAME:MASTER%一行将鱼处理后妥善保存，继续投入探索。
		CALL 素材入手処理(素材名, 3)
	ELSE
		WSTR:(K++) = 可惜今天谁都没带垂钓工具。
		WSTR:(K++) = 垂钓之趣就留待下次吧。
	ENDIF
	CALL メッセージ欄表示用関数(,,,0)
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_料理人１
#DIM 知識１
#DIM 回復量

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 周围没有异常状况。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = %CALLNAME:MASTER%们探索时发现了珍稀蘑菇。
	WSTR:(K++) = 虽以美味著称，但若处理不当会释放毒素。
	CALL 知識技能所持者検索("料理人", 2)
	知識１ = RESULT
	IF 知識１ >= 0
		WSTR:(K++) = %CALLNAME:知識１%恰好知晓预处理方法。
		WSTR:(K++) = 使用户外烹饪器具开始料理蘑菇。
		WSTR:(K++) = …………
		WSTR:(K++) = 众人津津有味地品尝了%CALLNAME:知識１%烹制的蘑菇料理！
		回復量 = ダンジョン階層記録 * 50
		WSTR:(K++) = 全体成员的ＨＰ恢复了{回復量, 4}！
		CALL メッセージ欄表示用関数(,,,0)
		CALL 口上変数初期化
		CALL 探索中全体回復_ＨＰ(回復量)
		WSTR:(K++) = %CALLNAME:MASTER%们满足地抚慰了饥肠，继续投入探索。
	ELSE
		WSTR:(K++) = 可惜无人通晓正确料理方法。
		WSTR:(K++) = 中毒就麻烦了，决定不作处理继续探索。
	ENDIF
	CALL メッセージ欄表示用関数(,,,0)
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_高貴１
#DIM 知識１
#DIMS 素材名

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 周围没有异常状况。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = %CALLNAME:MASTER%一行探索时，遇见了身披皇家气派的鸟类魔物。
	WSTR:(K++) = 这种魔物会展开发出七彩光芒的尾羽，有着竞逐皇家风范的习性。
	KSTR:(K++) = 皇家之鸟瞥了%CALLNAME:MASTER%一行一眼。_PAGE
	CALL 知識技能所持者検索("高貴", 2)
	知識１ = RESULT
	IF 知識１ >= 0
		WSTR:(K++) = …………鸟的视线停留在%CALLNAME:知識１%身上。
		WSTR:(K++) = 经过长久凝视后，皇家之鸟如同认输般向%CALLNAME:知識１%低头。
		WSTR:(K++) = 看来是在皇家风范比拼中获胜了。
		WSTR:(K++) = 皇家之鸟如同向胜者献礼般，从怀中取出赠礼。
		素材名 = %ランダム素材名("礼物类道具", , , "アクセサリ")%
		CALL 素材入手処理(素材名, 1)
		KSTR:(K++) = %CALLNAME:知識１%获得了%素材名%！_PAGE
		WSTR:(K++) = %CALLNAME:MASTER%一行目送皇家之鸟离去，继续投入探索。
	ELSE
		WSTR:(K++) = …………皇家之鸟似乎得出了自己才是最尊贵的结论。
		WSTR:(K++) = 对%CALLNAME:MASTER%一行嗤之以鼻后，优雅地摇曳着身姿离去。
		WSTR:(K++) = 虽然有些耿耿于怀，%CALLNAME:MASTER%一行仍继续探索。
	ENDIF
	CALL メッセージ欄表示用関数(,,,0)
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_踊り子１
#DIM 知識１
#DIMS 素材名

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 周围没有异常状况。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = %CALLNAME:MASTER%一行探索时，哥布林群突然从森林现身！
	WSTR:(K++) = 哥布林们敲响太鼓吹奏笛子，狂热地跳起激情舞蹈！
	KSTR:(K++) = 尽情舞动后的哥布林们摆出定格姿势，挑衅地瞪着%CALLNAME:MASTER%一行。_PAGE
	CALL 知識技能所持者検索("踊り子", 2)
	知識１ = RESULT
	IF 知識１ >= 0
		WSTR:(K++) = %CALLNAME:知識１%踏着节奏即兴回敬精彩舞姿！
		WSTR:(K++) = 哥布林们配合着%CALLNAME:知識１%的舞步奏乐共舞！
		WSTR:(K++) = …………酣畅淋漓的共舞后，哥布林们献上称赞胜者的礼物。
		素材名 = %ランダム素材名("礼物类道具", , , "酒")%
		CALL 素材入手処理(素材名, 1)
		KSTR:(K++) = %CALLNAME:知識１%获得了%素材名%！_PAGE
		WSTR:(K++) = 哥布林们带着灿烂笑容返回森林，这到底算怎么回事？
		WSTR:(K++) = %CALLNAME:MASTER%一行困惑地目送它们离去，继续探索。
	ELSE
		WSTR:(K++) = …………%CALLNAME:MASTER%们呆立原地时，哥布林们明显露出失望神色。
		WSTR:(K++) = 哥布林们垂头丧气地叹息着，步履蹒跚地返回森林。
		WSTR:(K++) = 怀着莫名愧疚，%CALLNAME:MASTER%一行继续投入探索。
	ENDIF
	CALL メッセージ欄表示用関数(,,,0)
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_歴史知識１
#DIM 知識１
#DIMS 素材名

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 周围没有异常状况。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = %CALLNAME:MASTER%一行探索时，在悬崖状地层发现奇异石块。
	WSTR:(K++) = 表面刻有类似纹样的图案，但未感应到魔力波动。
	KSTR:(K++) = 难道只是天然形成的普通石块？_PAGE
	CALL 知識技能所持者検索("歴史知識", 2)
	知識１ = RESULT
	IF 知識１ >= 0
		WSTR:(K++) = %CALLNAME:知識１%凝神观察后……意识到这是霸空战争时期的纹样。
		WSTR:(K++) = 应是当时用暗号记录历史的某族遗留的传说残片。
		WSTR:(K++) = 在天空世界各处均有出土，因历史价值，智慧殿堂会以适当价格收购。
		KSTR:(K++) = 出售应该能赚取零用钱程度的资金_PAGE
		WSTR:(K++) = %CALLNAME:MASTER%一行将石块收入行囊准备日后变卖。
		WSTR:(K++) = %CALLNAME:MASTER%获得了{ダンジョン階層記録 * 150}卢比！
		MONEY += ダンジョン階層記録 * 150
	ELSE
		WSTR:(K++) = %CALLNAME:MASTER%一行随意丢弃石块，继续投入探索。
	ENDIF
	CALL メッセージ欄表示用関数(,,,0)
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_絵師１
#DIM 知識１
#DIM ダメージ量

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 周围没有异常状况。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = %CALLNAME:MASTER%一行探索时，误入了错综复杂的回廊地形。
	WSTR:(K++) = 对比绘制的地图与周围环境，总觉得哪里标注有误。
	KSTR:(K++) = 是否该重新探索周边区域呢？_PAGE
	CALL 知識技能所持者検索("絵師", 2)
	知識１ = RESULT
	IF 知識１ > 0
		WSTR:(K++) = 正当%CALLNAME:MASTER%犹豫时，%CALLNAME:知識１%查看地图发现了路线绘制错误。
		WSTR:(K++) = %CALLNAME:知識１%用树枝在地面流畅勾勒出正确路线范本。
		WSTR:(K++) = 仔细核对后，%CALLNAME:知識１%的范本确实正确无误。
		WSTR:(K++) = %CALLNAME:MASTER%向%CALLNAME:知識１%道谢，穿过复杂地形继续探索。
	ELSEIF 知識１ == MASTER
		WSTR:(K++) = %CALLNAME:MASTER%重新核对地图，发现是道路连接处画错了。
		WSTR:(K++) = %CALLNAME:MASTER%试着在地面试画路线，果然自己才是正确的。
		WSTR:(K++) = 修正地图后，%CALLNAME:MASTER%一行穿过复杂地形继续探索。
	ELSE
		WSTR:(K++) = 若继续迷路遭遇不测就糟糕了。
		WSTR:(K++) = %CALLNAME:MASTER%一行重新开始逐步探索周边……
		ダメージ量 = ダンジョン階層記録 * 10
		KSTR:(K++) = 在繁琐探索中浪费了时间，全员ＨＰ减少了{ダメージ量, 4}。
		;HPバーの表示タイミングを調整するためここで一旦メッセージ表示
		CALL メッセージ欄表示用関数()
		CALL 口上変数初期化
		
		CALL 探索中全体ダメージ_ＨＰ_非致死(ダメージ量)
		WSTR:(K++) = %CALLNAME:MASTER%一行将完善后的地图收好，继续投入探索。
	ENDIF
	CALL メッセージ欄表示用関数(,,,0)
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_歌唱技能１
#DIM 知識１
#DIM 知識２
#DIMS 素材名

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 周围没有异常状况。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = %CALLNAME:MASTER%一行探索时，森林深处传来天籁歌声。
	WSTR:(K++) = 那是前所未闻的绝美魅惑之音。
	KSTR:(K++) = %CALLNAME:MASTER%一行被吸引着朝歌声方向走去……_PAGE
	CALL 知識技能所持者検索("歌唱技能", 2)
	知識１ = RESULT
	CALL 知識技能所持者検索("歌唱技能", -1)
	知識２ = RESULT
	IF 知識１ >= 0
		WSTR:(K++) = %CALLNAME:知識１%察觉异样，随着歌声即兴和唱。
		WSTR:(K++) = 原本的歌声戛然而止，取而代之的是银铃般的欢快笑声。
		素材名 = %ランダム素材名("礼物类道具", , , "花")%
		CALL 素材入手処理(素材名, 1)
		WSTR:(K++) = 一个%素材名%轻飘飘落在%CALLNAME:知識１%头顶。
		KSTR:(K++) = %CALLNAME:知識１%获得了%素材名%！_PAGE
		WSTR:(K++) = 那歌声想必是妖精们的嬉戏之音。
		WSTR:(K++) = 这份赠礼是对合唱的谢礼。
		WSTR:(K++) = %CALLNAME:MASTER%一行向隐形的妖精们致谢后继续探索。
	ELSEIF 知識２ >= 0
		WSTR:(K++) = %CALLNAME:知識２%察觉异样，随着歌声即兴和唱。
		WSTR:(K++) = 原本的歌声戛然而止，取而代之的是痛苦悲鸣！
		WSTR:(K++) = 那歌声虽说是妖精的嬉戏……
		WSTR:(K++) = %CALLNAME:知識２%的歌声似乎让妖精们落荒而逃。
		WSTR:(K++) = %CALLNAME:MASTER%在心底向妖精们致歉后继续探索。
	ELSE
		WSTR:(K++) = 然而无论如何寻觅都找不到歌者。
		WSTR:(K++) = 唯有不知何处传来的窃窃嬉笑。
		WSTR:(K++) = 那歌声想必是隐形妖精捉弄人类的把戏。
		WSTR:(K++) = %CALLNAME:MASTER%一行苦笑着放弃追寻，继续投入探索。
	ENDIF
	CALL メッセージ欄表示用関数(,,,0)
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_経営知識１
#DIM 知識１
#DIMS 素材名
#DIM 品番号

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 周围没有异常状况。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = %CALLNAME:MASTER%一行探索时，遇见了承接岛屿开拓委托的骑空士。
	WSTR:(K++) = 这位骑空士本职是商人，边承接委托边周游列岛进行商品买卖。
	WSTR:(K++) = 若有兴趣，他愿意以略高价格出售随身药剂。
	KSTR:(K++) = 该怎么办呢？
	KSTR:(K++) = BUTTON_[购买药剂]
	KSTR:(K++) = BUTTON_[暂时不需要]
	CALL メッセージ欄表示用関数(,,,0)
	CALL 口上変数初期化
	$LOOP_MESSAGE
	BINPUTS
	SELECTCASE RESULTS
		CASE "[购买药剂]"
			;道具屋処理
			CALL 知識技能所持者検索("経営知識", 2)
			知識１ = RESULT
			IF 知識１ >= 0
				WSTR:(K++) = %CALLNAME:知識１%在交易前与商人展开议价。
				WSTR:(K++) = 经过几轮磋商成功砍价。
				WSTR:(K++) = 商人苦笑着摆出药剂。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 口上変数初期化
				品番号 = 0
				汎用アイテム購入用_序文 = ■迷宫商人<br>　「欢迎光临！多买多优惠哟！」
				汎用アイテム購入用_品揃え登録:(品番号++) = 治疗药水
				汎用アイテム購入用_品揃え登録:(品番号++) = 魔力药水
				汎用アイテム購入用_品揃え登録:(品番号++) = 勇气药剂
				汎用アイテム購入用_品揃え登録:(品番号++) = 复活药剂
				汎用アイテム購入用_品揃え登録:(品番号++) = 解毒剂
				CALL 汎用アイテム購入画面処理(0)
			ELSE
				品番号 = 0
				汎用アイテム購入用_序文 = ■迷宫商人<br>　「欢迎光临！多买多优惠哟！」
				汎用アイテム購入用_品揃え登録:(品番号++) = 治疗药水,1600,卢比
				汎用アイテム購入用_品揃え登録:(品番号++) = 魔力药水,12000,卢比
				汎用アイテム購入用_品揃え登録:(品番号++) = 勇气药剂,1000,卢比
				汎用アイテム購入用_品揃え登録:(品番号++) = 复活药剂,6000,卢比
				汎用アイテム購入用_品揃え登録:(品番号++) = 解毒剂,800,卢比
				CALL 汎用アイテム購入画面処理(0)
			ENDIF

			WSTR:(K++) = 所需物资大致齐备。
			WSTR:(K++) = %CALLNAME:PLAYER%一行与道谢的商人告别，继续探索。
		CASE "[暂时不需要]"
			WSTR:(K++) = 目前物资尚且充足。
			WSTR:(K++) = %CALLNAME:PLAYER%一行与商人告别，继续探索。
		CASEELSE
			CLEARLINE 1
			REUSELASTLINE  
			GOTO LOOP_MESSAGE
	ENDSELECT
	CALL メッセージ欄表示用関数(,,,0)
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_水泳技能１
#DIM 知識１
#DIMS 素材名

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 周围没有异常状况。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = %CALLNAME:MASTER%一行探索时，发现湖心漂浮着小岛。
	WSTR:(K++) = 隐约感应到岛上散发奇异魔力。
	KSTR:(K++) = 若能登岛调查便好了……_PAGE
	CALL 知識技能所持者検索("水泳技能", 1)
	知識１ = RESULT
	IF 知識１ >= 0
		WSTR:(K++) = %CALLNAME:知識１%换上轻便装束，利落地游向湖心。
		WSTR:(K++) = 片刻便抵达小岛，调查后发现蕴含特殊魔力的矿石。
		WSTR:(K++) = 稍作加工即可制成耳饰。
		CALL 古ぼけた耳飾り抽選取得処理(ダンジョン階層記録 / 10 + 1)
		KSTR:(K++) = %CALLNAME:知識１%获得了%RESULTS%！_PAGE
		WSTR:(K++) = 再次游过湖面，%CALLNAME:知識１%安然返回岸边。
		IF 知識１ == MASTER
			WSTR:(K++) = 同伴们慰劳泅渡的%CALLNAME:知識１%，继续投入探索。
		ELSE
			WSTR:(K++) = %CALLNAME:MASTER%一行慰劳泅渡的%CALLNAME:知識１%，继续投入探索。
		ENDIF
	ELSE
		WSTR:(K++) = 可惜未发现船只或桥梁。
		WSTR:(K++) = 暂时无法登岛。
		WSTR:(K++) = %CALLNAME:MASTER%一行虽心有不甘仍放弃，继续探索。
	ENDIF
	CALL メッセージ欄表示用関数(,,,0)
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_農業知識１
#DIM 知識１
#DIMS 素材名

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 周围没有异常状况。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = %CALLNAME:MASTER%一行探索时发现了树精幼体。
	WSTR:(K++) = 传闻这种生物会因生长环境蜕变为魔物或森林守护精灵。
	KSTR:(K++) = 现阶段尚无法判断其进化方向……_PAGE
	$選択ループ
	KSTR:(K++) = 该如何处置树精？
	KSTR:(K++) = BUTTON_[趁早驱除]
	KSTR:(K++) = BUTTON_[放任不管]
	CALL 知識技能所持者検索("農業知識", 1)
	知識１ = RESULT
	IF 知識１ >= 0
		KSTR:(K++) = BUTTON_[改善环境助其精灵化]
	ENDIF
	CALL メッセージ欄表示用関数(,,,0)
	CALL 口上変数初期化
	$LOOP_MESSAGE
	BINPUTS
	SELECTCASE RESULTS
		CASE "[趁早驱除]"
			WSTR:(K++) = 若其成长为魔物危害人间就危险了。
			WSTR:(K++) = %CALLNAME:PLAYER%一行驱除树精幼体后继续探索。
		CASE "[放任不管]"
			WSTR:(K++) = 屠戮尚未作恶的生物是否妥当？
			WSTR:(K++) = %CALLNAME:PLAYER%一行选择放任树精幼体，继续探索。
		CASE "[改善环境助其精灵化]"
			WSTR:(K++) = %CALLNAME:知識１%通晓树精精灵化培育法。
			WSTR:(K++) = 需在向阳处灌溉魔力之水促进蜕变。
			WSTR:(K++) = %CALLNAME:PLAYER%一行清理周边枝桠，浇注魔力之水。
			素材名 = %ランダム素材名("食物素材", , , "野菜")%
			CALL 素材入手処理(素材名, 3)
			WSTR:(K++) = 整备环境时意外发现野生%素材名%，品质尚可就地采收。
			KSTR:(K++) = %CALLNAME:PLAYER%一行获得了３个%素材名%！_PAGE
			WSTR:(K++) = 环境改善后，树精幼体明显焕发生机。
			WSTR:(K++) = 祈愿其终成精灵，%CALLNAME:PLAYER%一行继续探索。
		CASEELSE
			CLEARLINE 1
			REUSELASTLINE  
			GOTO LOOP_MESSAGE
	ENDSELECT
	CALL メッセージ欄表示用関数(,,,0)
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

