
@ダンジョン初期処理_深海の古戦場跡
;ダンジョン構造の読み込み
;0でない時、そのマスは存在する
#DIM 深度
#DIM 分岐

ダンジョンサブタイトル = NAVAL BATTLE SITE
ダンジョンマス画像URL_伏せ状態 = 壁_海
ダンジョン現在位置:0 = 3
ダンジョン現在位置:1 = 0
ダンジョン背景画像 = 背景_砂浜

;スタート地点は必ず存在
;初期からオープン済みなので3を入れる
;ビット0：存在するか　ビット1：移動できるか　ビット2：マスをオープンするか（ビット１をONにしないと無意味）　ビット3：入れないがオープンする場合に使用
;ビット4以降：自由枠。主に宝箱の開閉やイベント達成フラグなどに使用
IF GETVAR(@"ダンジョン構造配列_%ダンジョン名%:{ダンジョン現在位置:0}:{ダンジョン現在位置:1}") == 0
	SETVAR @"ダンジョン構造配列_%ダンジョン名%:{ダンジョン現在位置:0}:{ダンジョン現在位置:1}", 3
ENDIF

FOR 深度, 1, 100
	LOCAL = 0
	FOR 分岐, 0, 9
		IF GETVAR(@"ダンジョン構造配列_%ダンジョン名%:{深度}:{分岐}")
			;既にマス情報が入ってるなら飛ばす
			LOCAL = 1
			CONTINUE
		ELSEIF ENUMFUNCBEGINSWITH(@"ダンジョンマス情報_%ダンジョン名%_{深度}_{分岐}")
			LOCAL = 1
			SETVAR @"ダンジョン構造配列_%ダンジョン名%:深度:分岐", 1
		ENDIF
	NEXT
	IF LOCAL
		ダンジョン最大深度 = 深度
	ENDIF
NEXT

@ダンジョン解説文_深海の古戦場跡

詳細文文字列受け渡し変数 = 
詳細文文字列受け渡し変数 += "被称为古战场遗迹的岛屿周边海域及海底。<br>"
詳細文文字列受け渡し変数 += "海中魔物凶暴且攻击力高，需具备速战速决的火力。<br>"
IF ダンジョンクリアフラグ_深海の古戦場跡
	詳細文文字列受け渡し変数 += "海底沉没着遇难船只，可能出现大量不死系魔物。<br>"
ELSE
	詳細文文字列受け渡し変数 += "传闻海底沉睡着某种奇妙存在……<br>"
ENDIF

;推奨レベルを返す
RETURN 14



@敵討伐後処理_ダンジョン固有_深海の古戦場跡(討伐エネミー数)
;ダンジョン内で戦闘した後に呼ばれる関数、主にダンジョンごとのドロップアイテム取得に使用
;まだ敵データはリセットしていないので敵BATTLE_STATEで色々情報は取得可能
#DIM 討伐エネミー数
#DIM ドロップ確率
#DIMS ドロップアイテム

ドロップ確率 = 5 * 討伐エネミー数
ドロップアイテム = 海之星砂
CALL ドロップ判定処理(ドロップ確率, ドロップアイテム)

ドロップ確率 = 5 * 討伐エネミー数
ドロップアイテム = 虹鳟鱼
CALL ドロップ判定処理(ドロップ確率, ドロップアイテム)

ドロップ確率 = 3 * 討伐エネミー数
ドロップアイテム = 三文鱼
CALL ドロップ判定処理(ドロップ確率, ドロップアイテム)

ドロップ確率 = 5 * 討伐エネミー数
ドロップアイテム = 星晶碎片
CALL ドロップ判定処理(ドロップ確率, ドロップアイテム)

ドロップ確率 = 1 * 討伐エネミー数
ドロップアイテム = 赤铜古纹
CALL ドロップ判定処理(ドロップ確率, ドロップアイテム)

;---------------------------------------------------------------------
;マップ構造
;---------------------------------------------------------------------
;枝分かれ満載で分かりづらいマップ
;とは言え同一マップだとどこを探索してないかはすぐわかるのでわかりやすい
;戦闘中は海中フィールドが展開される。水強化と火弱体。まあ対水でほぼ土で戦うだろうから実質敵強化
;クリアすると海が開放される。
;---------------------------------------------------------------------
@固有戦闘開始時処理_特殊_海中フィールド
;海中の場合、フィールドを初手に貼る。
展開中フィールド名格納 = 海中
;常時海中なので特に貼る時のメッセージは出さない

@固有バフ・デバフ処理_フィールド_海中_水強化(隊列番号, 補正前数値)
#DIM 隊列番号
#DIM 補正前数値
;水ダメ1.2倍
RETURN 補正前数値 + 20

@固有バフ・デバフ処理_フィールド_海中_火強化(隊列番号, 補正前数値)
#DIM 隊列番号
#DIM 補正前数値
;火ダメ半減
RETURN 補正前数値 - 50

@フィールド説明文_海中
LOCALS = 显示身处海域的场地效果。<br>
LOCALS += "水属性伤害+20%<br>"
LOCALS += "火属性伤害-50%<br>"
LOCALS += "效果时间：永久持续<br>"

詳細文文字列受け渡し変数 = %LOCALS%


@ダンジョンマス情報_深海の古戦場跡_2_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 2
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "3_8")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 缓缓沉入海中，逐渐远离地面。
			WSTR:(K++) = 仰望可见阳光穿透的海面如宝石般闪闪发光。
			WSTR:(K++) = 俯视则渐入幽暗，仿佛永无止境的深渊……
			WSTR:(K++) = 只要魔法持续，呼吸与水压皆不成问题。鼓起勇气前进吧。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_3_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 3
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "5_0")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "3_3")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = %CALLNAME:PLAYER%一行踏入星晶兽艾拉指引的场所。
			WSTR:(K++) = 古战场遗迹岛屿的海岸线。
			WSTR:(K++) = 这个季节因星晶兽在其他区域肆虐，此处相对平静……
			WSTR:(K++) = 但魔物不受季节影响，谨慎前行。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 海岸唯有柔波轻漾。
		ENDIF
		ダンジョン背景画像 = 背景_砂浜
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_3_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 3
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "4_5")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = %CALLNAME:PLAYER%一行施加水中行动魔法潜入海底。
			WSTR:(K++) = 魔法生效期间可在水中如陆上般战斗，呼吸无碍。_PAGE
			WSTR:(K++) = 但终究身处水域。
			WSTR:(K++) = _COLOR_%カラーパレット_HTML("黄")%_火属性攻击伤害减半_。
			WSTR:(K++) = 反之，_COLOR_%カラーパレット_HTML("黄")%_水属性攻击威力提升20％_。
			WSTR:(K++) = 虽属性克制更有效，仍需牢记水系强化特性。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 此处已入水域。
			KSTR:(K++) = _COLOR_%カラーパレット_HTML("黄")%_火属性攻击伤害减半_。
			KSTR:(K++) = 反之，_COLOR_%カラーパレット_HTML("黄")%_水属性攻击威力提升20％_。
		ENDIF
		ダンジョン背景画像 = 背景_海
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_3_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 3
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 海域仍显深邃。
			WSTR:(K++) = 与海渊源深厚的星晶兽究竟在何处……但愿能尽早发现。
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(11, 0)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 11
		ダンジョン現在位置:1 = 0
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_4_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 4
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "2_6")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 潜游时有鱼群靠近。
			WSTR:(K++) = 正以为是亲近人类的鱼类……鱼群突然龇牙袭来！
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:0:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:1:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:4:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:5:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:8:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:9:エネミー名 = Lv13_巨颚鲳
			戦闘時_特殊処理フラグ = 海中フィールド
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 击退凶暴鱼群。
				WSTR:(K++) = 虽稍有大意，但此处终究是古战场遗迹。
				WSTR:(K++) = 即便看似普通鱼类也常具敌意。保持警戒前行。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:0:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:1:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:4:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:5:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:8:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:9:エネミー名 = Lv13_巨颚鲳
			戦闘時_特殊処理フラグ = 海中フィールド
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_5_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 5
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "6_1")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "7_0")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 虽目标在海底，仍沿沙滩侦察周边。
			WSTR:(K++) = 远方传来骑空士与星晶兽交战之声。
			WSTR:(K++) = 最好远离主战场区域。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 远方传来骑空士与星晶兽交战之声。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_6_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 6
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 漫步沙滩时，沙丘突然隆起……巨型螃蟹现身！
			WSTR:(K++) = 看来它们将%CALLNAME:PLAYER%一行视为猎物并立即发起攻击！
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:1:エネミー名 = Lv14_骷髅蟹
			敵BATTLE_STATE_STR:3:エネミー名 = Lv14_骷髅蟹
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = %CALLNAME:PLAYER%一行成功击退螃蟹。
				WSTR:(K++) = 不愧是古战场遗迹栖息的魔物，尽是凶暴好战个体。
				WSTR:(K++) = 留在这里可能会再次受到攻击，尽快转移吧。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:1:エネミー名 = Lv14_骷髅蟹
			敵BATTLE_STATE_STR:3:エネミー名 = Lv14_骷髅蟹
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_7_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 7
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 至此已能远眺战场景象。
			WSTR:(K++) = 为避免卷入战火不宜继续靠近。_PAGE
			WSTR:(K++) = %CALLNAME:PLAYER%一行折返时脚边发现陈旧戒指。
			WSTR:(K++) = 虽显古旧但性能尚佳。
			WSTR:(K++) = 推测遗落数年难寻失主，不妨收下。_PAGE
			WSTR:(K++) = %CALLNAME:PLAYER%获得了「伟勋之戒・重」！
			CALL 汎用指輪取得処理("伟勋之戒・重", 3)
		ELSE
			KSTR:(K++) = 远方可见交战景象，不宜继续靠近。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_9_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 9
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(19, 5)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 19
		ダンジョン現在位置:1 = 5
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_10_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 10
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(16, 4)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 16
		ダンジョン現在位置:1 = 4
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_10_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 10
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(32, 8)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 32
		ダンジョン現在位置:1 = 8
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_11_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 11
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "12_4")
	CASE "マスイベント"
		ダンジョン現在位置:0 = 3
		ダンジョン現在位置:1 = 8
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_12_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 12
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "10_3")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "9_5")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "10_7")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "14_7")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "15_5")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "14_3")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 潜游时发现多股海流交汇点。
			WSTR:(K++) = 乘洋流可高效探索周边海域。
			WSTR:(K++) = 注意保持队形展开搜索。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 多股海流交汇之处。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT



@ダンジョンマス情報_深海の古戦場跡_14_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 14
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(17, 1)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 17
		ダンジョン現在位置:1 = 1
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_14_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 14
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(25, 1)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 25
		ダンジョン現在位置:1 = 1
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_15_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 15
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(27, 7)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 27
		ダンジョン現在位置:1 = 7
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_16_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 16
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "16_6")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(10, 3)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 10
		ダンジョン現在位置:1 = 3
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_16_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 16
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "17_8")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "16_4")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "18_6")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 潜游时目睹鱼蟹分食大型鱼尸。
			WSTR:(K++) = 察觉%CALLNAME:PLAYER%一行靠近，误认抢食而发动袭击！
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:0:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:3:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:4:エネミー名 = Lv14_骷髅蟹
			敵BATTLE_STATE_STR:7:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:8:エネミー名 = Lv13_巨颚鲳
			戦闘時_特殊処理フラグ = 海中フィールド
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 制服鱼群后保持距离。
				WSTR:(K++) = 对方似乎理解这是一场误会，不再视作敌人。
				WSTR:(K++) = 无谓增加敌对并无益处，非必要不打扰它们进食。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:0:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:3:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:4:エネミー名 = Lv14_骷髅蟹
			敵BATTLE_STATE_STR:7:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:8:エネミー名 = Lv13_巨颚鲳
			戦闘時_特殊処理フラグ = 海中フィールド
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_17_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 17
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "18_1")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(14, 3)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 14
		ダンジョン現在位置:1 = 3
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_17_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 17
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "16_6")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(34, 8)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 34
		ダンジョン現在位置:1 = 8
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_18_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 18
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "18_2")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "19_0")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "17_1")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 此处属较浅海域。
			WSTR:(K++) = 虽光线昏暗仍可借日光辨识环境。
			WSTR:(K++) = 多为小型鱼类，亲近游弋。
			WSTR:(K++) = 度假岛建设后可考虑增设潜水游览项目。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 此处属较浅海域。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_18_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 18
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "18_4")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "18_1")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 潜行间嗅到异样气味。
			CALL 知識技能所持者検索("錬金知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				WSTR:(K++) = %CALLNAME:LOCAL%取出药剂泼洒净化。
				WSTR:(K++) = 显然该地区的部分海水已被污染并有毒。
				WSTR:(K++) = 看起来，其原因在于从某处释放出的瘴气……
				WSTR:(K++) = 完成中和后，%CALLNAME:PLAYER%们继续前进。
			ELSE
				WSTR:(K++) = 那是什么味道？正感疑惑时一阵剧痛突然传遍全身！
				WSTR:(K++) = 全员ＨＰ减少２５０点！
				CALL メッセージ欄表示用関数(,,,0)
				CALL 口上変数初期化
				FOR LOCAL, 0, 4
					SIF BATTLE_STATE:LOCAL:キャラ登録番号 < 1
						CONTINUE
					BATTLE_STATE:LOCAL:ＨＰ = MAX(BATTLE_STATE:LOCAL:ＨＰ - 250, 1)
				NEXT
				WSTR:(K++) = 显然部分海水已经受到污染并变得有毒。
				WSTR:(K++) = %CALLNAME:PLAYER%一行紧急撤离。
				WSTR:(K++) = 若有炼金术知识或可预判……远离此区域为妙。
			ENDIF
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 遭污染海域，切勿靠近。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_18_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 18
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "18_2")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(38, 1)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 38
		ダンジョン現在位置:1 = 1
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_18_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 18
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		IF GETBIT(ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱
		ELSE
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 在海上航行时，发现水中漂浮着一块石头。
			WSTR:(K++) = 拿起来一看，那似乎是水之魔力凝结而成的魔石。
			CALL 知識技能所持者検索("魔法知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				WSTR:(K++) = %CALLNAME:LOCAL%清除了魔石中多余的魔力，将其加工成简易的道具。
				WSTR:(K++) = %CALLNAME:PLAYER%一行获得了３颗「水之魔石」！
				CALL アイテム増減汎用処理("水之魔石", 3)
				SETBIT ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4
			ELSE
				WSTR:(K++) = 不过这样根本没法用吧。
				WSTR:(K++) = 要是有掌握魔法知识的同伴在说不定能加工得更精细……
			ENDIF
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 已经找不到什么有价值的东西了。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_19_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 19
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "21_1")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "18_1")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 在这片海域感觉不到星晶兽的气息。
			WSTR:(K++) = 只有美丽的大海和栖息其中的鱼群。
			WSTR:(K++) = 单从眼前景象来看，实在不像是会有魔物出没的环境。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 在这片海域感觉不到星晶兽的气息。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_19_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 19
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "21_3")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(9, 5)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 9
		ダンジョン現在位置:1 = 5
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_19_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 19
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "20_7")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(33, 5)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 33
		ダンジョン現在位置:1 = 5
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_20_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 20
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "19_8")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "21_6")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 附近传来噼里啪啦的爆裂声……
			WSTR:(K++) = 循声望去，发现海中隐约闪烁着什么。
			WSTR:(K++) = 那是……会放电的鳗鱼！
			WSTR:(K++) = 正笔直朝你们袭来！
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:3:エネミー名 = Lv15_电鳗
			戦闘時_特殊処理フラグ = 海中フィールド
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 虽然被电得浑身发麻，但还是成功击退了鳗鱼。
				WSTR:(K++) = 属性相异的攻击很难应对，真是棘手的敌人。
				WSTR:(K++) = 下次战斗时最好在它放出技能前速战速决。
				WSTR:(K++) = %CALLNAME:PLAYER%一行边思考对策边继续前进。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:3:エネミー名 = Lv15_电鳗
			戦闘時_特殊処理フラグ = 海中フィールド
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_21_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 21
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "19_0")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(24, 6)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 24
		ダンジョン現在位置:1 = 6
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_21_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 21
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "19_5")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "22_3")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = %CALLNAME:PLAYER%一行在海中行进时，巨大的螃蟹和鱼群围了过来。
			WSTR:(K++) = 它们似乎饿坏了，明显把%CALLNAME:PLAYER%们当成了猎物。
			WSTR:(K++) = 它们高举螯钳猛扑过来！！
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:1:エネミー名 = Lv14_骷髅蟹
			敵BATTLE_STATE_STR:2:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:4:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:7:エネミー名 = Lv14_骷髅蟹
			戦闘時_特殊処理フラグ = 海中フィールド
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 被击退的海产品们像四散的蜘蛛幼崽般逃走了。
				WSTR:(K++) = 虽然人类在海中显得格格不入，但既无鳞片也无尖刺的身躯或许正适合当饵食。
				WSTR:(K++) = 预感今后还会被纠缠，%CALLNAME:PLAYER%一行继续前行。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:1:エネミー名 = Lv14_骷髅蟹
			敵BATTLE_STATE_STR:2:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:4:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:7:エネミー名 = Lv14_骷髅蟹
			戦闘時_特殊処理フラグ = 海中フィールド
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_21_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 21
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 顺着海流漂来一个瓶状物体。
			WSTR:(K++) = 捞起来发现是陈年葡萄酒。
			KSTR:(K++) = 瓶身和封口都完好无损，里面的液体应该没问题。_PAGE
			WSTR:(K++) = 若是还能饮用，想必能品尝到长期熟成的高级风味。
			WSTR:(K++) = 带回去鉴定看看吧。
			WSTR:(K++) = %CALLNAME:PLAYER%获得了百年陈酿葡萄酒！
			CALL 素材入手処理("百年陈酿葡萄酒", 1)
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 已无值得注意的东西。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_21_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 21
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "22_5")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 海中不仅栖息着魔物，还有许多普通鱼类。
			WSTR:(K++) = 比如旋转着在水中移动的牡蛎、发射尖刺捕猎的海胆……
			WSTR:(K++) = ……还是别靠近为妙。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 海里还有许多最好别靠近的生物。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_22_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 22
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "21_3")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "22_5")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "23_3")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 海流错综复杂，正以难以预测的路径奔涌。
			WSTR:(K++) = 若不牢记各处的连接点，恐怕会迷失方向吧。
			WSTR:(K++) = 或者将未涉足之地逐个踏破，总归能找到出路。
			WSTR:(K++) = 为避免全军覆没，还是分批次探索为妙。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 海流错综复杂，正以难以预测的路径奔涌。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_22_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 22
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		SIF GETBIT(ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "23_6")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "20_7")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "21_5")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "22_3")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 在深海中行进时，发现了巨大的电鳗。
			KSTR:(K++) = 鳗鱼虽未主动袭击，但试图从其身旁经过时却会发出威吓。_PAGE
			CALL 知識技能所持者検索("魔物知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				WSTR:(K++) = 在四周搜寻，发现小鱼后将其驱赶向鳗鱼的方向。
				WSTR:(K++) = 小鱼吸附在鳗鱼体表，开始吸收电能。
				WSTR:(K++) = 看来这是种能帮忙吸收过量电荷的共生小鱼。
				WSTR:(K++) = 释放完电能的鳗鱼露出满足的神情游向远方。
				WSTR:(K++) = 这下可以继续前进了。
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4
			ELSE
				WSTR:(K++) = 强行突破似乎很困难。
				WSTR:(K++) = 若有通晓魔物知识的同伴在场或许能找到突破口……
				WSTR:(K++) = 暂且先撤退吧。
			ENDIF
		ELSE
			KSTR:(K++) = 已经没有特别值得留意的东西了。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_23_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 23
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "22_3")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(32, 3)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 32
		ダンジョン現在位置:1 = 3
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_23_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 23
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		SIF ダンジョン内一時変数:0 == 0
			ダンジョンマス画像URL_重ね表示 = えっちハート
	CASE "接続先"
	CASE "マスイベント"
		;えっちイベ
		;XXXXを使ってないダンジョン内一時変数の番号に変えること
		IF ダンジョン内一時変数:0
		ELSE
			CALL ダンジョンハプニング基本処理()
			IF RESULT
				ダンジョン内一時変数:0 = 1
			ENDIF
			CALL 口上変数初期化
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_24_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 24
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "26_2")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(38, 4)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 38
		ダンジョン現在位置:1 = 4
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_24_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 24
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "25_6")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(21, 1)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 21
		ダンジョン現在位置:1 = 1
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_24_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 24
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		IF ダンジョン内一時変数:2 == 0
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱
		ELSE
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 发现长满海藻的岩礁区。
			WSTR:(K++) = 不少品质上乘的昆布，稍微采集些吧。
			KSTR:(K++) = %CALLNAME:PLAYER%获得了「昆布」！_PAGE
			CALL 素材入手処理("昆布", 1)
			ダンジョン内一時変数:2 = 1
			WSTR:(K++) = 看来是片营养丰富的海域，海藻生长速度很快。
			WSTR:(K++) = 改日再来应该还能采收，记住这个位置吧。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			IF ダンジョン内一時変数:2 == 0
				WSTR:(K++) = 生长着优质昆布，稍微采集些吧。
				WSTR:(K++) = %CALLNAME:PLAYER%获得了「昆布」！
				CALL 素材入手処理("昆布", 1)
				ダンジョン内一時変数:2 = 1
			ELSE
				WSTR:(K++) = 没看到成熟的昆布，下次再来吧。
			ENDIF
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_25_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 25
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "26_2")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(14, 7)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 14
		ダンジョン現在位置:1 = 7
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_25_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 25
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "25_8")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "28_5")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "24_6")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 偶然抬头望去，发现正在缓缓下沉的残破铠甲。
			WSTR:(K++) = 不见穿戴者的踪影，恐怕是古战场激烈厮杀的结果。
			WSTR:(K++) = 为原主人祈祷平安后，你们继续前行。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 没什么特别值得注意的东西。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_25_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 25
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "25_6")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "27_7")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "27_8")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "24_8")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 海底突然涌现出铺天盖地的螃蟹群！
			WSTR:(K++) = 来不及闪避，蟹群已向你们袭来！
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:1:エネミー名 = Lv14_骷髅蟹
			敵BATTLE_STATE_STR:3:エネミー名 = Lv14_骷髅蟹
			敵BATTLE_STATE_STR:5:エネミー名 = Lv14_骷髅蟹
			戦闘時_特殊処理フラグ = 海中フィールド
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 击退部分螃蟹后，余下的纷纷绕开你们逃窜而去。
				WSTR:(K++) = 到底怎么回事呢，虽然对魔物的生态不甚了解……
				WSTR:(K++) = 总之现在可以继续前进了。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:1:エネミー名 = Lv14_骷髅蟹
			敵BATTLE_STATE_STR:3:エネミー名 = Lv14_骷髅蟹
			敵BATTLE_STATE_STR:5:エネミー名 = Lv14_骷髅蟹
			戦闘時_特殊処理フラグ = 海中フィールド
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_26_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 26
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 打倒贝壳魔物后，它的壳猛然张开，从中滚出一颗巨大的珍珠。
			WSTR:(K++) = 这般尺寸的珍珠极其罕见，作为赠礼堪称极品。
			WSTR:(K++) = 就当作战利品收下吧。
			WSTR:(K++) = %CALLNAME:PLAYER%获得了巨型珍珠！
			CALL 素材入手処理("巨型珍珠", 1)
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 已无值得注意的东西。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_26_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 26
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "25_1")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "24_3")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "28_2")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 逐渐潜入了更深的海域。
			WSTR:(K++) = 能看见海底的区域变多了，但似乎仍有通往更深处的路径。
			WSTR:(K++) = 或许会有意外状况发生，谨慎前进吧。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 逐渐潜入了更深的海域。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_27_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 27
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 魔法阵深处掉落着一枚戒指。
			WSTR:(K++) = 看来正是这枚失控的戒指制造了封锁魔法。
			WSTR:(K++) = 似乎是能在佩戴者周围形成屏障的防御型戒指。
			WSTR:(K++) = 相当实用呢。反正没有主人，我们就收下吧。
			WSTR:(K++) = %CALLNAME:PLAYER%获得了拒绝之戒！
			CALL 汎用指輪取得処理("拒绝之戒", 1)
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 已无值得注意的东西。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_27_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 27
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "25_8")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(15, 5)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 15
		ダンジョン現在位置:1 = 5
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_27_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 27
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "25_8")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			WSTR:(K++) = 海底生长着鲜艳美丽的珊瑚森林。
			KSTR:(K++) = 若能将这般规模的珊瑚带回去，定能卖出高价。_PAGE
			KSTR:(K++) = 要采集珊瑚吗？
			KSTR:(K++) = BUTTON_[确定]
			KSTR:(K++) = BUTTON_[取消]
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[确定]"
					WSTR:(K++) = %CALLNAME:PLAYER%采集了珊瑚，仔细收纳防止破损。
					WSTR:(K++) = 回去后通过万事屋卖给收藏家赚笔大的吧。
					WSTR:(K++) = %CALLNAME:PLAYER%获得了１０万卢比！
					MONEY += 100000
				CASE "[取消]"
					カリュブディス信頼度_深海の古戦場跡 += 20
					WSTR:(K++) = 珊瑚生长需要漫长岁月。
					WSTR:(K++) = 为了不破坏海洋生态，还是别碰这里吧。
				CASEELSE
					CLEARLINE 1
					REUSELASTLINE  
					GOTO LOOP_MESSAGE
			ENDSELECT
		ELSE
			KSTR:(K++) = 已无值得注意的东西。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_28_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 28
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン_赤
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "26_0")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4) == 0
			CALL 強敵マス確認
			SIF RESULT == 1
				RETURN 0
			;最初に訪れた時
			WSTR:(K++) = 在海中行进时发现了巨型贝壳魔物。
			WSTR:(K++) = %CALLNAME:PLAYER%一行试图绕开避免战斗，贝壳却旋转着挡住去路！
			WSTR:(K++) = 是觉得领地受侵了吗，看来战斗无法避免了。
			WSTR:(K++) = 旋转的贝壳径直朝你们袭来！
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:0:エネミー名 = Lv25_珍珠贝
			戦闘時_特殊処理フラグ = 海中フィールド
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 费尽周折击退了巨型贝壳。
				KSTR:(K++) = 虽然外壳坚硬无比，但抓住它开壳瞬间发动攻击。
				WSTR:(K++) = 成功打乱了对方架势是关键。
				WSTR:(K++) = 继续前进吧。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4
			ENDIF
		ELSE
			CALL 接続ルート全開放処理(マス深度, マス分岐)
			敵BATTLE_STATE_STR:0:エネミー名 = Lv25_珍珠贝
			戦闘時_特殊処理フラグ = 海中フィールド
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_28_2(ARGS)
#DIM 使用知識
#DIM マス深度
#DIM マス分岐
マス深度 = 28
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "29_1")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "28_4")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 潜行间嗅到异样气味。
			CALL 知識技能所持者検索("錬金知識", 1)
			LOCAL = RESULT
			使用知識 = 0
			IF LOCAL == -1
				CALL 知識技能所持者検索("魔法知識", 1)
				LOCAL = RESULT
				使用知識 = 1
			ENDIF
			IF LOCAL > -1
				WSTR:(K++) = %CALLNAME:LOCAL%察觉到不死族瘴气正在周围弥漫！
				IF 使用知識
					KSTR:(K++) = %CALLNAME:LOCAL%临时构筑净化魔法，驱散了周遭瘴气。_PAGE
				ELSE
					KSTR:(K++) = %CALLNAME:LOCAL%提炼海水盐分，制作出驱散瘴气的简易药剂。_PAGE
				ENDIF
			ELSE
				WSTR:(K++) = 这是……不死族的瘴气！
				WSTR:(K++) = 全员ＨＰ减少3００点！
				CALL メッセージ欄表示用関数(,,,0)
				CALL 口上変数初期化
				FOR LOCAL, 0, 14
					SIF LOCAL > 3 && LOCAL < 10
						CONTINUE
					SIF BATTLE_STATE:LOCAL:キャラ登録番号 < 1
						CONTINUE
					BATTLE_STATE:LOCAL:ＨＰ = MAX(BATTLE_STATE:LOCAL:ＨＰ - 300, 1)
				NEXT
				WSTR:(K++) = %CALLNAME:PLAYER%移动到水流湍急处躲避瘴气。
				KSTR:(K++) = 若具备炼金或魔法知识，或许能在受创前采取对策……_PAGE
			ENDIF
			WSTR:(K++) = 瘴气浓度下深上浅。
			WSTR:(K++) = 恐怕不死族巢穴就在下方。
			WSTR:(K++) = 能释放如此浓烈的瘴气，看来是相当强大的不死族。
			WSTR:(K++) = 若要继续下潜，最好提高警惕。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 不死族瘴气呈现下深上浅的分布。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_28_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 28
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "30_3")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 远处可见两条龇牙咧嘴厮杀的鱼。
			WSTR:(K++) = 它们不顾自身伤痕，在诡异氛围中殊死搏斗……
			WSTR:(K++) = 不死族的瘴气似乎对普通鱼类也产生了强烈影响。
			WSTR:(K++) = %CALLNAME:PLAYER%一行最好也不要在此久留。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 连鱼群都变得凶暴了。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_28_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 28
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		SIF GETBIT(ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "25_6")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "29_7")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "30_6")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "27_4")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 在海中行进时，眼前景色似曾相识……
			WSTR:(K++) = ……不对，这分明是在同一地点兜圈子。
			KSTR:(K++) = 即便试图前进，也会被传送回稍早的位置。_PAGE
			CALL 知識技能所持者検索("魔法知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				WSTR:(K++) = %CALLNAME:LOCAL%探查周遭魔力，找到了术式的基点。
				WSTR:(K++) = 向其中注入魔力后，封锁此处的魔法应声碎裂！
				WSTR:(K++) = 障碍已除，继续前进吧。
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4
			ELSE
				WSTR:(K++) = 尝试各种方法突破，却总在游动后被传回原点。
				WSTR:(K++) = 若有魔法知识或许能破解……眼下还是放弃改道吧。
			ENDIF
		ELSE
			KSTR:(K++) = 封锁魔法已不复存在。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_29_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 29
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "28_0")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "31_1")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = %CALLNAME:PLAYER%一行朝着瘴气稀薄的方向前进。
			WSTR:(K++) = 通过观察眼前瘴气变化发现，海水似乎能分解瘴气。
			WSTR:(K++) = 准确说是海水中盐分具有净化瘴气的效果。
			WSTR:(K++) = 若持有盐类道具，或许对不死族有奇效。牢记这点吧。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 盐分正在净化瘴气。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_29_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 29
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "28_5")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 海水中漂浮着白色碎片……
			WSTR:(K++) = 似乎是自然结晶的盐块。
			WSTR:(K++) = 其中寄宿着净化魔力的盐，战斗中可作为道具使用。
			WSTR:(K++) = %CALLNAME:PLAYER%获得了３个「净化盐」！
			CALL アイテム増減汎用処理("净化盐", 3)
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 已经没有值得留意的东西了。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_30_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 30
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "31_4")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 噼啪放电的鳗鱼正带着鱼群巡游。
			WSTR:(K++) = 发现%CALLNAME:PLAYER%们后，鳗鱼发出激烈威吓猛扑而来！
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:0:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:3:エネミー名 = Lv15_电鳗
			敵BATTLE_STATE_STR:4:エネミー名 = Lv13_巨颚鲳
			戦闘時_特殊処理フラグ = 海中フィールド
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 击退了凶暴化的鳗鱼群。
				WSTR:(K++) = 瘴气弥漫实在妨碍探索，必须设法排除根源……
				WSTR:(K++) = 往瘴气浓重处或许能发现线索，继续前进吧。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:0:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:3:エネミー名 = Lv15_电鳗
			敵BATTLE_STATE_STR:4:エネミー名 = Lv13_巨颚鲳
			戦闘時_特殊処理フラグ = 海中フィールド
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_30_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 30
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "28_5")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(34, 0)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 34
		ダンジョン現在位置:1 = 0
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_31_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 31
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 海水中漂浮着白色碎片……
			WSTR:(K++) = 似乎是自然结晶的盐块。
			WSTR:(K++) = 其中寄宿着净化魔力的盐，战斗中可作为道具使用。
			WSTR:(K++) = %CALLNAME:PLAYER%获得了３个「净化盐」！
			CALL アイテム増減汎用処理("净化盐", 3)
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 已经没有值得留意的东西了。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_31_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 31
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(37, 5)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 37
		ダンジョン現在位置:1 = 5
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_32_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 32
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "34_3")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(23, 3)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 23
		ダンジョン現在位置:1 = 3
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_32_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 32
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "32_8")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "33_6")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 在海底步行时，脚下突然传来动静！
			WSTR:(K++) = 比目鱼惊慌地从沙中窜出逃窜……
			WSTR:(K++) = 似乎是不小心踩到了沉睡的比目鱼。
			WSTR:(K++) = 在心中向逃走的比目鱼致歉后，%CALLNAME:PLAYER%一行继续前行。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 空无一物。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_32_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 32
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "32_6")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(10, 7)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 10
		ダンジョン現在位置:1 = 7
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_33_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 33
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "33_6")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(19, 8)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 19
		ダンジョン現在位置:1 = 8
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_33_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 33
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "32_6")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "34_6")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "33_5")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 沉在海底的巨大鱼尸正被螃蟹和鳗鱼分食。
			WSTR:(K++) = 发现%CALLNAME:PLAYER%们后，它们为守护食物发动袭击！
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:1:エネミー名 = Lv14_骷髅蟹
			敵BATTLE_STATE_STR:3:エネミー名 = Lv14_骷髅蟹
			敵BATTLE_STATE_STR:6:エネミー名 = Lv15_电鳗
			戦闘時_特殊処理フラグ = 海中フィールド
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 击退螃蟹和鳗鱼后，%CALLNAME:PLAYER%一行缓缓远离尸体。
				WSTR:(K++) = 或许对方终于明白我们并非来抢夺食物。
				WSTR:(K++) = 蟹群不再发动攻击，重新回到进餐状态。
				WSTR:(K++) = 趁下次被误会前速速离开吧。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:1:エネミー名 = Lv14_骷髅蟹
			敵BATTLE_STATE_STR:3:エネミー名 = Lv14_骷髅蟹
			敵BATTLE_STATE_STR:6:エネミー名 = Lv15_电鳗
			戦闘時_特殊処理フラグ = 海中フィールド
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_33_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 33
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "34_8")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "34_6")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 漫步海底时，细沙在脚下发出清脆的沙沙声。
			WSTR:(K++) = 不仅水中移动，或许海底漫步也能成为观光项目？
			WSTR:(K++) = 不过能让人在这种深度活动的魔法使可不容易找到。
			WSTR:(K++) = 暂且保留这个企划，继续前进吧。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 漫步海底时，细沙在脚下发出清脆的沙沙声。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_34_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 34
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "36_0")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(30, 6)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 30
		ダンジョン現在位置:1 = 6
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_34_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 34
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "32_3")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "35_2")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "35_5")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 这片海域似乎是最深处。
			WSTR:(K++) = 虽然用魔法确保了照明，但还是要小心别踩到奇怪的东西。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 这片海域似乎是最深处。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_34_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 34
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		SIF GETBIT(ダンジョン構造配列_深海の古戦場跡:55:7, 4) == 0 && GETBIT(ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "33_7")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "33_6")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_深海の古戦場跡:55:7, 4) && GETBIT(ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4) == 0
			KSTR:(K++) = 没什么值得留意的东西。
		ELSEIF GETBIT(ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 海底插着一柄长剑。是古战场遗留的武器吗？
			WSTR:(K++) = 虽然锻造工艺精湛，但剑身却散发着不祥气息……
			KSTR:(K++) = 要拾取长剑吗？
			KSTR:(K++) = BUTTON_[确定]
			KSTR:(K++) = BUTTON_[取消]
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[确定]"
					WSTR:(K++) = %CALLNAME:PLAYER%从海底拔出了长剑。
					WSTR:(K++) = 剑身浸染的瘴气开始掠夺%CALLNAME:PLAYER%一行的生命力！
					WSTR:(K++) = 全体成员的奥义槽归零了！
					CALL メッセージ欄表示用関数(,,,0)
					CALL 口上変数初期化
					FOR LOCAL, 0, 14
						SIF LOCAL > 3 && LOCAL < 10
							CONTINUE
						SIF BATTLE_STATE:LOCAL:キャラ登録番号 < 1
							CONTINUE
						BATTLE_STATE:LOCAL:奥義ゲージ = 0
					NEXT
					WSTR:(K++) = ……剑上的瘴气似乎平息了。
					WSTR:(K++) = 生命吸收现象停止，剑身变得安静许多。
					WSTR:(K++) = %CALLNAME:PLAYER%用布条包裹剑身，决定将其带走。
					SETBIT ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4
				CASE "[取消]"
					WSTR:(K++) = 总觉得散发着不祥之气……
					WSTR:(K++) = 君子不立危墙之下，还是别碰为妙。
				CASEELSE
					CLEARLINE 1
					REUSELASTLINE  
					GOTO LOOP_MESSAGE
			ENDSELECT
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 长剑已被取走。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_34_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 34
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "33_7")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(17, 8)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 17
		ダンジョン現在位置:1 = 8
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_35_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 35
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "36_3")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "34_3")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "36_0")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = %CALLNAME:PLAYER%一行在海中行进时，前方出现了鲨鱼身影。
			WSTR:(K++) = 那条鲨鱼在接近过程中不断变大……变大……！？
			WSTR:(K++) = 由于过于巨大导致距离感错乱，这竟是体长数百米的巨鲨！！
			KSTR:(K++) = 目前看来对方没有敌意，不过……_PAGE
			KSTR:(K++) = 要如何应对巨鲨？
			KSTR:(K++) = BUTTON_[先发制人！发动突袭]
			KSTR:(K++) = BUTTON_[避免无谓战斗。冷静周旋]
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[先发制人！发动突袭]"
					WSTR:(K++) = %CALLNAME:PLAYER%一行对巨鲨发动全力攻击！
					WSTR:(K++) = 无数魔法与技能命中鲨鱼！
					KSTR:(K++) = ……然而连一道擦伤都没留下！_PAGE
					WSTR:(K++) = 巨鲨朝你们瞥了一眼，翻身掀起狂暴水流！
					WSTR:(K++) = %CALLNAME:PLAYER%一行全体ＨＰ减少９９９点！
					CALL メッセージ欄表示用関数(,,,0)
					CALL 口上変数初期化
					FOR LOCAL, 0, 14
						SIF LOCAL > 3 && LOCAL < 10
							CONTINUE
						SIF BATTLE_STATE:LOCAL:キャラ登録番号 < 1
							CONTINUE
						BATTLE_STATE:LOCAL:ＨＰ = MAX(BATTLE_STATE:LOCAL:ＨＰ - 999, 1)
					NEXT
					WSTR:(K++) = ……巨鲨悠然游向远方。
					WSTR:(K++) = 是放过我们了吗？
					WSTR:(K++) = 不，或许现在的%CALLNAME:PLAYER%一行连成为对手的资格都没有。
					WSTR:(K++) = 庆幸巨鲨未动真怒的同时，你们继续前行。
				CASE "[避免无谓战斗。冷静周旋]"
					WSTR:(K++) = 与那种体型的鲨鱼在海中交战无异于自杀。
					WSTR:(K++) = %CALLNAME:PLAYER%一行按兵不动，巨鲨也悠然游走。
					WSTR:(K++) = 虽常闻海洋生物多有特异进化，但竟夸张至此。
					WSTR:(K++) = %CALLNAME:PLAYER%一行体会着自然的恐怖继续前进。
				CASEELSE
					CLEARLINE 1
					REUSELASTLINE  
					GOTO LOOP_MESSAGE
			ENDSELECT
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 巨鲨早已游向远方。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_35_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 35
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 海水中漂浮着白色碎片……
			WSTR:(K++) = 似乎是自然结晶的盐块。
			WSTR:(K++) = 其中寄宿着净化魔力的盐，战斗中可作为道具使用。
			WSTR:(K++) = %CALLNAME:PLAYER%获得了３个「净化盐」！
			CALL アイテム増減汎用処理("净化盐", 3)
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 已经没有值得留意的东西了。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_36_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 36
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "38_1")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "34_0")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "35_2")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 突然察觉到异样，%CALLNAME:PLAYER%一行猛然回头。
			WSTR:(K++) = 只见后方赫然显现欲将众人吞噬的巨鱼黑影……不！
			WSTR:(K++) = 竟是鱼群聚集成团拟态而成的巨型鱼影！
			WSTR:(K++) = 它们仗着数量优势袭来，企图将你们变为饵食！
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:0:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:1:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:2:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:3:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:4:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:5:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:6:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:7:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:8:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:9:エネミー名 = Lv13_巨颚鲳
			戦闘時_特殊処理フラグ = 海中フィールド
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 击退部分鱼群后，剩余鱼群似乎忌惮减员四散而逃。
				WSTR:(K++) = 如此精妙的群体协作，定是严酷自然中磨砺出的生存智慧。
				WSTR:(K++) = 感叹鱼类生态的同时，%CALLNAME:PLAYER%一行继续前行。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:0:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:1:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:2:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:3:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:4:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:5:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:6:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:7:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:8:エネミー名 = Lv13_巨颚鲳
			敵BATTLE_STATE_STR:9:エネミー名 = Lv13_巨颚鲳
			戦闘時_特殊処理フラグ = 海中フィールド
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_36_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 36
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "38_4")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "35_2")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 仔细想来，这片海域无论何处（水质本身）都清澈透亮。
			WSTR:(K++) = 听闻以海岛著称的奥古斯提正为游客乱丢垃圾所困。
			WSTR:(K++) = 这座岛多是前往古战场的骑空士，想必无人专程来此观海吧。
			WSTR:(K++) = 若要在度假岛开发海域，必须着手解决垃圾非法倾倒问题。
			WSTR:(K++) = %CALLNAME:PLAYER%边思索对策边在海中行进。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 这片海域无论何处（水质本身）都清澈透亮。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_36_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 36
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		IF ダンジョン内一時変数:3 == 0
			ダンジョンマス画像URL_重ね表示 = 回復アビ
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		IF ダンジョン内一時変数:3
		ELSE
			KSTR:(K++) = 发现岩礁错综复杂形成的隐蔽洞穴。
			KSTR:(K++) = 此处似乎能安心休整。
			KSTR:(K++) = 要稍作休息吗？
			KSTR:(K++) = （全队状态恢复・效果持续至离开迷宫）
			KSTR:(K++) = BUTTON_[确定]
			KSTR:(K++) = BUTTON_[取消]
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[确定]"
					KSTR:(K++) = 你们在洞窟充分休整，体力完全恢复！
					CALL メッセージ欄表示用関数()
					ダンジョン内一時変数:3 = 1
					FOR LOCAL, 0, 14
						SIF LOCAL > 3 && LOCAL < 10
							CONTINUE
						SIF BATTLE_STATE:LOCAL:キャラ登録番号 < 1
							CONTINUE
						BATTLE_STATE:LOCAL:ＨＰ = BATTLE_STATE:LOCAL:最大ＨＰ
						BATTLE_STATE:LOCAL:ＭＰ = BATTLE_STATE:LOCAL:最大ＭＰ
					NEXT
				CASE "[取消]"
					KSTR:(K++) = 尚未疲惫到需要休息，继续前进吧。
					CALL メッセージ欄表示用関数()
				CASEELSE
					CLEARLINE 1
					REUSELASTLINE  
					GOTO LOOP_MESSAGE
			ENDSELECT
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_37_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 37
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "37_7")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(31, 4)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 31
		ダンジョン現在位置:1 = 4
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_37_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 37
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "39_7")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "36_8")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 在海中行进时，远处可见疑似沉船的轮廓。
			WSTR:(K++) = 周遭几乎没有生物气息，连凶暴化的鱼群都避之不及。
			WSTR:(K++) = 显然有蹊跷，再靠近些观察。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 远处可见疑似沉船的轮廓。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_38_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 38
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "36_0")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(18, 4)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 18
		ダンジョン現在位置:1 = 4
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_38_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 38
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "36_3")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(24, 3)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 24
		ダンジョン現在位置:1 = 3
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_39_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 39
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_海中
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 靠近船体发现船身已断成两截。
			WSTR:(K++) = 后半部分面目全非，看来沉没已久。
			WSTR:(K++) = ……海中弥漫的瘴气源头似乎正是这艘船。
			WSTR:(K++) = 或许藏有星晶兽的线索，进去调查吧。
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(41, 1)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 41
		ダンジョン現在位置:1 = 1
		ダンジョン背景画像 = 背景_沈没船
		ダンジョンマス画像URL_伏せ状態 = 壁_沈没船
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_40_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 40
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_沈没船
		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 船首女神像正散发微光……
			WSTR:(K++) = 似乎能凭此像弹开海水维持空气。
			KSTR:(K++) = 可自由开关此效果。_PAGE
			KSTR:(K++) = 要关闭女神像吗？
			KSTR:(K++) = （船内战斗将启用海中战场）
			KSTR:(K++) = BUTTON_[确定]
			KSTR:(K++) = BUTTON_[取消]
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[确定]"
					KSTR:(K++) = 关闭女神像，船内瞬间被海水灌满……
					CALL メッセージ欄表示用関数()
					女神像OFFフラグ = 1
				CASE "[取消]"
					KSTR:(K++) = 无需海中战场，保持现状吧。
					CALL メッセージ欄表示用関数()
				CASEELSE
					CLEARLINE 1
					REUSELASTLINE  
					GOTO LOOP_MESSAGE
			ENDSELECT
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSEIF 女神像OFFフラグ
			KSTR:(K++) = 要开启女神像吗？
			KSTR:(K++) = （船内战斗将禁用海中战场）
			KSTR:(K++) = BUTTON_[确定]
			KSTR:(K++) = BUTTON_[取消]
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			$LOOP_MESSAGE2
			INPUTS
			SELECTCASE RESULTS
				CASE "[确定]"
					KSTR:(K++) = 开启女神像，海水从船内逐渐退去…
					CALL メッセージ欄表示用関数()
					女神像OFFフラグ = 0
				CASE "[取消]"
					KSTR:(K++) = 需要海中战场，保持现状吧。
					CALL メッセージ欄表示用関数()
				CASEELSE
					CLEARLINE 1
					REUSELASTLINE  
					GOTO LOOP_MESSAGE2
			ENDSELECT
		ELSE
			KSTR:(K++) = 要关闭女神像吗？
			KSTR:(K++) = （船内战斗将启用海中战场）
			KSTR:(K++) = BUTTON_[确定]
			KSTR:(K++) = BUTTON_[取消]
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			$LOOP_MESSAGE3
			INPUTS
			SELECTCASE RESULTS
				CASE "[确定]"
					KSTR:(K++) = 关闭女神像，船内瞬间被海水灌满……
					CALL メッセージ欄表示用関数()
					女神像OFFフラグ = 1
				CASE "[取消]"
					KSTR:(K++) = 无需海中战场，保持现状吧。
					CALL メッセージ欄表示用関数()
				CASEELSE
					CLEARLINE 1
					REUSELASTLINE  
					GOTO LOOP_MESSAGE3
			ENDSELECT
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_41_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 41
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_沈没船
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "44_0")
	CASE "マスイベント"
		ダンジョン現在位置:0 = 39
		ダンジョン現在位置:1 = 7
		ダンジョン背景画像 = 背景_海
		ダンジョンマス画像URL_伏せ状態 = 壁_海
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_41_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 41
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_沈没船
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 进入标有「女性房间」的房间。
			WSTR:(K++) = 或许因长期无人打理，房间内破败不堪。
			WSTR:(K++) = 试着搜寻是否留有物品时，在角落发现金属箱。
			KSTR:(K++) = 似乎是存放贵重品的保险箱。_PAGE
			WSTR:(K++) = 怀着寻宝期待打开箱子。
			WSTR:(K++) = ……然而里面只有一根刻着振动魔法的棍子。
			WSTR:(K++) = 值钱物品大概在沉船时就被带走了吧。
			WSTR:(K++) = 无奈之下%CALLNAME:PLAYER%捡起了棍子。
			WSTR:(K++) = %CALLNAME:PLAYER%获得了「电动按摩器」！
			CALL 素材入手処理("电动按摩器", 1)
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 已经没有值得留意的东西了。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_42_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 42
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_沈没船
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "40_3")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "42_6")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 朝船首方向前进，发现通往船内的门扉。
			WSTR:(K++) = 更前方可见安装在船体的女神像。
			WSTR:(K++) = 能感受到某种神秘力量……或许该调查下女神像。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 可见通往船内的门扉与前方船体上的女神像。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_42_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 42
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_沈没船
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "43_6")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "42_7")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "41_6")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 进入船内后是短走廊，左右与尽头各有一扇门。
			WSTR:(K++) = 地板多处腐朽，贸然行走恐会踏穿。
			WSTR:(K++) = 需辨别坚固区域谨慎前行。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 左右与尽头各有一扇门。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_42_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 42
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_沈没船
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF GETBIT(ダンジョン構造配列_深海の古戦場跡:46:4, 4) == 0
			;カリュブ出会いまだ
			WSTR:(K++) = 打开尽头门扉发现向下的阶梯。
			WSTR:(K++) = 但星晶兽的气息似乎来自其他方向……
			WSTR:(K++) = 再仔细搜查附近吧。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			RETURN 0
		ELSEIF GETBIT(ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4) == 0
			;カリュブ出会い済み
			WSTR:(K++) = 打开尽头门扉发现向下的阶梯。
			WSTR:(K++) = 卡律布狄斯提及的不死族应该就在下方。
			WSTR:(K++) = 估计和附近徘徊的不死族同属暗属性敌人。
			WSTR:(K++) = 或许该配备光属性应对……
			WSTR:(K++) = %CALLNAME:PLAYER%一行保持警戒向船底进发。
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			SETBIT ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4
			CALL 接続ルート全開放処理(49, 0)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 49
		ダンジョン現在位置:1 = 0
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_43_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 43
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_沈没船
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 进入标有「男性房间」的房间。
			WSTR:(K++) = ……只见骷髅兵严阵以待！
			WSTR:(K++) = 它们高举利剑向%CALLNAME:PLAYER%一行袭来！
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:1:エネミー名 = Lv16_骷髅剑士
			敵BATTLE_STATE_STR:2:エネミー名 = Lv16_骷髅剑士
			敵BATTLE_STATE_STR:4:エネミー名 = Lv16_骷髅剑士
			SIF 女神像OFFフラグ
				戦闘時_特殊処理フラグ = 海中フィールド
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 击倒骷髅后简单搜查房间。
				WSTR:(K++) = 虽无贵重物品，但墙面残留着多处古老斩痕。
				WSTR:(K++) = 恐怕是沉船时船员内讧厮杀所致。
				WSTR:(K++) = %CALLNAME:PLAYER%一行为亡者默祷后继续前进。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:1:エネミー名 = Lv16_骷髅剑士
			敵BATTLE_STATE_STR:2:エネミー名 = Lv16_骷髅剑士
			敵BATTLE_STATE_STR:4:エネミー名 = Lv16_骷髅剑士
			SIF 女神像OFFフラグ
				戦闘時_特殊処理フラグ = 海中フィールド
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_44_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 44
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_沈没船
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "44_2")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 游至沉船桅杆顶端，降落在瞭望台。
			WSTR:(K++) = 不可思议的是沉船周围没有海水，形成了空气层。
			WSTR:(K++) = 是某种魔道具维持着空气吗？
			WSTR:(K++) = _COLOR_%カラーパレット_HTML("黄")%_船内部的战斗不会触发海中战场_吧。
			WSTR:(K++) = %CALLNAME:PLAYER%一行抓紧绳索沿桅杆下降。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 沉船桅杆顶端的瞭望台。
			KSTR:(K++) = 并无特别之处。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_44_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 44
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_沈没船
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "44_4")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 沿桅杆下至半途，可见甲板上徘徊的骸骨魔物。
			WSTR:(K++) = 这些生前或是船员的不死族正散发着瘴气。
			WSTR:(K++) = 继续下降必将触发战斗，做好准备再下去吧。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 甲板上徘徊着骸骨魔物。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_44_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 44
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_沈没船
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "42_4")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "46_4")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "45_6")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 降落后，徘徊的骷髅兵们突然齐刷刷地有了反应！
			WSTR:(K++) = 它们高举武器向%CALLNAME:PLAYER%一行袭来！
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:2:エネミー名 = Lv16_骷髅弓箭手
			敵BATTLE_STATE_STR:5:エネミー名 = Lv16_骷髅剑士
			敵BATTLE_STATE_STR:6:エネミー名 = Lv16_骷髅弓箭手
			SIF 女神像OFFフラグ
				戦闘時_特殊処理フラグ = 海中フィールド
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 驱散骸骨魔物后环顾四周。
				WSTR:(K++) = 甲板虽有多处腐朽，但尚不影响行动。
				WSTR:(K++) = 附近有通往船内的门扉，亦可前往船首与船尾。
				WSTR:(K++) = 保持对骷髅兵的警戒展开调查吧。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:2:エネミー名 = Lv16_骷髅弓箭手
			敵BATTLE_STATE_STR:5:エネミー名 = Lv16_骷髅剑士
			敵BATTLE_STATE_STR:6:エネミー名 = Lv16_骷髅弓箭手
			SIF 女神像OFFフラグ
				戦闘時_特殊処理フラグ = 海中フィールド
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_44_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 44
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_沈没船
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 打开标有「仓库」的门扉进入。
			WSTR:(K++) = 室内空荡，物资几乎荡然无存。
			KSTR:(K++) = 仅剩几个空木箱翻倒在地……掀开其中一个发现了陈旧的戒指。_PAGE
			WSTR:(K++) = 布满裂痕，即便佩戴也毫无效果。
			WSTR:(K++) = 但若修复或许能成为珍品，带回去试试吧。
			WSTR:(K++) = %CALLNAME:PLAYER%获得了「古旧戒指・铜」！
			CALL 素材入手処理("古旧戒指・铜", 1)
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 已无值得注意的东西。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_45_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 45
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_沈没船
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "46_6")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "45_7")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "44_6")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 穿过门扉进入船内，来到多扇门扉并存的走廊。
			WSTR:(K++) = 多数门扉或遭破坏或已腐朽，房间内瓦砾遍布。
			WSTR:(K++) = 尚算完好的仅有左侧仓库、右侧厨房、深处标有食品库的门扉。
			WSTR:(K++) = 逐一调查吧。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 尚算完好的仅有左侧仓库、右侧厨房、深处标有食品库的门扉。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_45_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 45
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_沈没船
		SIF GETBIT(ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 进入食品库。虽是古船，食材早已风化……
			WSTR:(K++) = ……却有透明牛肉飘飘忽忽悬浮着。
			WSTR:(K++) = 透明牛肉气势汹汹地扑向%CALLNAME:PLAYER%一行！搞什么啊！？
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:0:エネミー名 = Lv1_牛肉幽灵
			敵BATTLE_STATE_STR:5:エネミー名 = Lv1_牛肉幽灵
			敵BATTLE_STATE_STR:6:エネミー名 = Lv1_牛肉幽灵
			SIF 女神像OFFフラグ
				戦闘時_特殊処理フラグ = 海中フィールド
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 轻松化解透明牛肉的袭击。
				WSTR:(K++) = 看来这是食材的幽灵。
				WSTR:(K++) = 虽然掉落真实牛肉，但这玩意真能吃吗？
				WSTR:(K++) = 似乎没有变质或诅咒迹象……但若丢弃恐怕幽灵又要作祟。
				WSTR:(K++) = 总之先带回去再说。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4
			ENDIF
		ELSE
			KSTR:(K++) = 食材幽灵已消失，是成佛了吗。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_46_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 46
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_沈没船
		SIF GETBIT(ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 5) == 0
			ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
	CASE "マスイベント"
		;立ち絵リソース記録に必要な画像のリソースを生成する
		CALLF 顔グラ表示用文字列関数(キャラ検索("[水底诱惑的少女]卡律布狄斯"),100,,,1,1)
		LOCALS = %立ち絵リソース記録%
		IF GETBIT(ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 5)
			;全部終わった後
			KSTR:(K++) = 这里似乎空无一人了。
			CALL メッセージ欄表示用関数(,,,0)
		ELSEIF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 走向船尾方向……
			WSTR:(K++) = 沉船后半部分已扭曲坍塌。
			KSTR:(K++) = 正当%CALLNAME:PLAYER%一行觉得无法探索准备折返时，不知何处传来声音。_PAGE
			WSTR:(K++) = 「等～～～一～～～下～～～」
			WSTR:(K++) = ……这声音听着有点脱线……
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「欢迎来到海底～……才怪，能听我说说话吗～？」
			WSTR:(K++) = 「现在人家遇到大麻烦啦～」
			WSTR:(K++) = 「好想有谁来帮帮我呀～」
			CALL メッセージ欄表示用関数(LOCALS,"星晶兽卡律布狄斯",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 从海底现身的是身着优雅服饰的星晶兽。
			WSTR:(K++) = 她正是栖息深海的星晶兽卡律布狄斯。
			IF 海作成許可フラグ
				WSTR:(K++) = 艾拉说过能参考她来建造海域……
			ELSE
				WSTR:(K++) = 若能获得她的协助就能成功造海。
			ENDIF
			WSTR:(K++) = 不过她说的麻烦是怎么回事？
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「其实是～……这艘船里突然冒出好多不死族～」
			WSTR:(K++) = 「瘴气都流到海里来啦～！」
			WSTR:(K++) = 「虽然现在靠盐分还能净化～但这样下去整片海都要被污染啦～！」
			CALL メッセージ欄表示用関数(LOCALS,"星晶兽卡律布狄斯",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 实际情况与%CALLNAME:PLAYER%们所见基本吻合。
			WSTR:(K++) = 但卡律布狄斯可是实力强大的星晶兽。
			WSTR:(K++) = 明明不必求助他人，自己就能解决吧……
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「因为呀～……这艘船装着超～强的海难护符……」
			WSTR:(K++) = 「别说战斗了～连进都进不去啦！」
			WSTR:(K++) = 「要是用破坏船体的攻击～又会伤到海洋环境～！」
			CALL メッセージ欄表示用関数(LOCALS,"星晶兽卡律布狄斯",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 也就是说卡律布狄斯需要我们代替她，
			WSTR:(K++) = 进入船内消灭不死族，阻止污染。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「没错～！能帮帮人家嘛～？」
			WSTR:(K++) = 「一定会好好答谢的～！只要我能办到的事～什么都行！」
			WSTR:(K++) = 「现在预定附赠鱼鳍和鱼鳃服务哦～！」
			CALL メッセージ欄表示用関数(LOCALS,"星晶兽卡律布狄斯",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 既然如此就好说了。
			IF 海作成許可フラグ
				WSTR:(K++) = 消灭不死族，获取造海建议吧。
			ELSE
				WSTR:(K++) = 消灭不死族，请求帮助创造海洋。
			ENDIF
			WSTR:(K++) = %CALLNAME:PLAYER%欣然接受了卡律布狄斯的请求。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「太感谢啦～！」
			WSTR:(K++) = 「那我就在这里等着哦～」
			WSTR:(K++) = 「万事拜托啦～」
			CALL メッセージ欄表示用関数(LOCALS,"星晶兽卡律布狄斯",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 在卡律布狄斯的挥手目送下，%CALLNAME:PLAYER%一行向甲板深处进发。
			WSTR:(K++) = 搜索船内，消灭瘴气元凶不死族吧。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			CALL 接続ルート全開放処理(マス深度, マス分岐)
			SETBIT ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4
		ELSEIF GETBIT(ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4) && GETBIT(ダンジョン構造配列_深海の古戦場跡:55:7, 4) == 0
			;まだ倒してないパターン
			KSTR:(K++) = 「不死族好像在船里哦～」
			WSTR:(K++) = 「万事拜托啦～」
			CALL メッセージ欄表示用関数(LOCALS,"星晶兽卡律布狄斯",,0)
			CALL 口上変数初期化
		ELSEIF GETBIT(ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4) && GETBIT(ダンジョン構造配列_深海の古戦場跡:55:7, 4)
			;倒した後パターン
			カリュブディス信頼度_深海の古戦場跡 += 20
			WSTR:(K++) = 向卡吕布狄斯报告船底不死族已消灭。
			WSTR:(K++) = 甲板上的瘴气明显稀薄，骷髅兵应该也不会再出现了。
			WSTR:(K++) = 卡吕布狄斯似乎也察觉到了这点，笑容满面地迎接%CALLNAME:PLAYER%一行。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「完美解决啦～！」
			WSTR:(K++) = 「这下脏东西就不会扩散到海里啦～！」
			WSTR:(K++) = 「想要什么谢礼呢～？现在预定赠送海底黄金地段哦～」
			CALL メッセージ欄表示用関数(LOCALS,"星晶兽卡律布狄斯",,0)
			CALL 口上変数初期化
			WSTR:(K++) = %CALLNAME:PLAYER%婉拒了海底房产，说明来意。
			IF 海作成許可フラグ
				WSTR:(K++) = 想在度假岛造海，询问是否有助观光的主意。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 口上変数初期化
				WSTR:(K++) = 「原来如此～那就推荐深海漫步体验怎么样～！」
				WSTR:(K++) = 「只要用你们现在用的那种水中魔法就行了吧～？」
				WSTR:(K++) = 「我给海域施加魔法，让大家都能在海底散步～」
				CALL メッセージ欄表示用関数(LOCALS,"星晶兽卡律布狄斯",,0)
				CALL 口上変数初期化
			ELSE
				WSTR:(K++) = 请求协助在度假岛建造海域。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 口上変数初期化
				WSTR:(K++) = 「哇～！要增加海洋面积吗，太棒啦～！」
				WSTR:(K++) = 「当然会全力协助啦～」
				WSTR:(K++) = 「顺便施加全民海底漫步魔法来宣传深海魅力如何～？」
				CALL メッセージ欄表示用関数(LOCALS,"星晶兽卡律布狄斯",,0)
				CALL 口上変数初期化
			ENDIF
			WSTR:(K++) = 海底漫步既能成为观光亮点，又能减少溺水事故。
			WSTR:(K++) = 对度假岛百利无一害。%CALLNAME:PLAYER%点头赞同卡律布狄斯的提案。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「那我这就把权能转交给艾拉酱～」
			WSTR:(K++) = 「偶尔也会去玩～请多关照啦～」
			CALL メッセージ欄表示用関数(LOCALS,"星晶兽卡律布狄斯",,0)
			CALL 口上変数初期化
			ダンジョンクリアフラグ_深海の古戦場跡 = 1
			IF 海作成許可フラグ
				WSTR:(K++) = 「海洋区域」带来的人气上限提升效果强化了！
			ELSE
				WSTR:(K++) = 解锁大型区域建设「海洋区域」！
				WSTR:(K++) = 道具店新增「水之魔石」！
				海作成許可フラグ = 1
			ENDIF
			WSTR:(K++) = [水底诱惑的少女]卡律布狄斯开始造访度假村了！
			WSTR:(K++) = 已通关深海古战场遗迹区域，即将返回。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			LOCAL = GETCHARA(171)
			CFLAG:LOCAL:招待不可フラグ = 0
			CFLAG:LOCAL:信頼度 = カリュブディス信頼度_深海の古戦場跡 * 200
			SKIPDISP 1
			CALL FAVOR_LvUPCheck(LOCAL)
			SKIPDISP 0
			ダンジョン終了状況 = 討伐達成
			SETBIT ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 5
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_46_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 46
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_沈没船
		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 打开标有「厨房」的门扉。
			WSTR:(K++) = 石砌灶台、布满孔洞的墙壁与地板、扭曲变形的铁锅。
			WSTR:(K++) = 乍看之下毫无价值……
			WSTR:(K++) = ……却在橱柜中发现泛黄的羊皮纸，似乎是某种食谱。
			CALL レシピランダム取得処理()
			IF RESULT == -1
				;もう全部知ってる
				KSTR:(K++) = 不过，这已经是已知的食谱了……_PAGE
			ELSE
				KSTR:(K++) = %CALLNAME:PLAYER%获得了「%RESULTS%」的食谱！_PAGE
			ENDIF
			WSTR:(K++) = 似乎没有其他值得留意之物，前往别处吧。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 已无值得留意之物。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT




@ダンジョンマス情報_深海の古戦場跡_49_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 49
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_沈没船
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "50_2")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "51_1")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		ダンジョン現在位置:0 = 42
		ダンジョン現在位置:1 = 7
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_50_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 50
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_沈没船
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "51_4")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 进入货舱沿梯子继续下行。
			WSTR:(K++) = 若是飞行船此处本该是驱动空行桨的舱室，但航海船似乎改作仓库使用。
			WSTR:(K++) = 没有窗户导致一片漆黑……即便使用照明魔法也只能看清周身范围。
			WSTR:(K++) = 需提防不死族的突袭谨慎前行。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 向着黑暗的货舱深处下降。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_51_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 51
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_沈没船
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "53_1")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 在货舱内部行进。
			WSTR:(K++) = 虽然各处都已腐朽破损，但这条走廊被数道门扉分隔。
			WSTR:(K++) = 想必是通往重要区域的路径。
			WSTR:(K++) = 船长室或藏宝库……亦或两者兼有，或许会有收获。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 在货舱内部行进。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_51_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 51
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_沈没船
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "52_6")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "53_4")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 黑暗中传来咔嗒咔嗒的异响……
			WSTR:(K++) = ……是骷髅兵的突袭！
			WSTR:(K++) = 不死族不受黑暗影响，径直扑来！
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:0:エネミー名 = Lv16_骷髅弓箭手
			敵BATTLE_STATE_STR:2:エネミー名 = Lv16_骷髅弓箭手
			敵BATTLE_STATE_STR:5:エネミー名 = Lv16_骷髅剑士
			敵BATTLE_STATE_STR:7:エネミー名 = Lv16_骷髅剑士
			SIF 女神像OFFフラグ
				戦闘時_特殊処理フラグ = 海中フィールド
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 击溃骷髅兵，粉碎骸骨。
				WSTR:(K++) = 即便散落在地，骨片仍在咔嗒作响……
				WSTR:(K++) = 足见瘴气浓度之高，根源不死族必在附近。
				WSTR:(K++) = 照这情形，可能还会遭遇一两次袭击，保持警惕前进吧。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:0:エネミー名 = Lv16_骷髅弓箭手
			敵BATTLE_STATE_STR:2:エネミー名 = Lv16_骷髅弓箭手
			敵BATTLE_STATE_STR:5:エネミー名 = Lv16_骷髅剑士
			敵BATTLE_STATE_STR:7:エネミー名 = Lv16_骷髅剑士
			SIF 女神像OFFフラグ
				戦闘時_特殊処理フラグ = 海中フィールド
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_52_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 52
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_沈没船
		SIF ダンジョン内一時変数:1 == 0
			ダンジョンマス画像URL_重ね表示 = えっちハート
	CASE "接続先"
	CASE "マスイベント"
		;えっちイベ
		;XXXXを使ってないダンジョン内一時変数の番号に変えること
		IF ダンジョン内一時変数:1
		ELSE
			CALL ダンジョンハプニング基本処理()
			IF RESULT
				ダンジョン内一時変数:1 = 1
			ENDIF
			CALL 口上変数初期化
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_53_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 53
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_沈没船
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 打开厚重门扉，室内堆积如山的财宝映入眼帘！
			WSTR:(K++) = 黄金冠冕、宝石镶嵌的宝剑、金币与艺术品……
			WSTR:(K++) = 若能带回至少价值数百万，不，数千万卢比！
			CALL 知識技能所持者検索("魔法知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				WSTR:(K++) = 正欣喜时，%CALLNAME:LOCAL%突然察觉异样。
			ELSE
				WSTR:(K++) = 正欣喜时，%CALLNAME:PLAYER%突然察觉异样。
			ENDIF
			KSTR:(K++) = ……看来这些财宝全都被诅咒了！_PAGE
			WSTR:(K++) = 长期暴露于不死族瘴气之下，形成了极强的诅咒……
			WSTR:(K++) = 解除诅咒的费用恐怕远超财宝价值。
			WSTR:(K++) = %CALLNAME:PLAYER%挑拣相对完好的黄金项链带走。
			WSTR:(K++) = 单件尚可抵消解咒开销。
			KSTR:(K++) = 虽惋惜满室珍宝，%CALLNAME:PLAYER%一行仍退出宝库。_PAGE
			WSTR:(K++) = %CALLNAME:PLAYER%获得了１０万卢比！
			MONEY += 100000
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 被诅咒的财宝，带走得不偿失。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_53_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 53
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_沈没船
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "53_0")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "54_1")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "53_2")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 沿着走廊前进，发现左右两侧的金属加固门扉。
			WSTR:(K++) = 虽已破损，但原本似乎配有锁具。是藏宝库吗？
			WSTR:(K++) = 或许藏有好东西，调查看看吧。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 左右两侧可见金属加固门扉。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_53_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 53
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_沈没船
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 打开加固门进入，室内墙壁嵌满书架。
			WSTR:(K++) = 似乎是存放魔法相关珍宝的房间。
			KSTR:(K++) = 书架上残留着腐坏的魔导书残骸。_PAGE
			WSTR:(K++) = 搜寻是否有遗留物品时，在书架深处发现发光物。
			WSTR:(K++) = 这似乎是古代制作的耳饰。
			WSTR:(K++) = 既无诅咒又奇迹般完好无损，可以直接使用。
			WSTR:(K++) = %CALLNAME:PLAYER%获得了「鼓舞耳饰」！
			CALL 接続ルート全開放処理(マス深度, マス分岐)
			CALL 汎用耳飾り取得処理("鼓舞耳饰")
		ELSE
			KSTR:(K++) = 已经没有值得留意的东西了。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_53_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 53
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_沈没船
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "53_6")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "55_4")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 深入货舱时，再次传来骷髅兵的脚步声！
			WSTR:(K++) = 瘴气越浓处滋生的不死族越多，看来接近目的地了。
			WSTR:(K++) = 为继续前进，将袭来的骷髅兵们反杀吧。
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:0:エネミー名 = Lv16_骷髅弓箭手
			敵BATTLE_STATE_STR:2:エネミー名 = Lv16_骷髅弓箭手
			敵BATTLE_STATE_STR:4:エネミー名 = Lv16_骷髅弓箭手
			敵BATTLE_STATE_STR:3:エネミー名 = Lv16_骷髅剑士
			敵BATTLE_STATE_STR:5:エネミー名 = Lv16_骷髅剑士
			SIF 女神像OFFフラグ
				戦闘時_特殊処理フラグ = 海中フィールド
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 击溃骷髅兵后，发现通往更深处的梯子。
				WSTR:(K++) = 瘴气浓度愈发厚重。
				WSTR:(K++) = 若要下行，最好有擅长魔法的同伴或携带净化道具。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:0:エネミー名 = Lv16_骷髅弓箭手
			敵BATTLE_STATE_STR:2:エネミー名 = Lv16_骷髅弓箭手
			敵BATTLE_STATE_STR:4:エネミー名 = Lv16_骷髅弓箭手
			敵BATTLE_STATE_STR:3:エネミー名 = Lv16_骷髅剑士
			敵BATTLE_STATE_STR:5:エネミー名 = Lv16_骷髅剑士
			SIF 女神像OFFフラグ
				戦闘時_特殊処理フラグ = 海中フィールド
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_53_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 53
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_沈没船
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "55_7")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 沿梯子下降，充斥着对人体有害的浓烈瘴气漩涡！
			CALL 知識技能所持者検索("魔法知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				WSTR:(K++) = %CALLNAME:LOCAL%构筑净化术式，驱散了%CALLNAME:PLAYER%一行周围的瘴气！
			ELSE
				IF DT_CELL_GET("所持アイテムデータベース", 0, "净化盐") > 0
					WSTR:(K++) = %CALLNAME:PLAYER%撒出净化盐驱散瘴气！
					CALL アイテム増減汎用処理("净化盐", -1)
				ELSE
					WSTR:(K++) = 瘴气侵蚀着%CALLNAME:PLAYER%一行的肉体！
					WSTR:(K++) = 全员ＨＰ减少５００点！
					CALL メッセージ欄表示用関数(,,,0)
					CALL 口上変数初期化
					FOR LOCAL, 0, 14
						SIF LOCAL > 3 && LOCAL < 10
							CONTINUE
						SIF BATTLE_STATE:LOCAL:キャラ登録番号 < 1
							CONTINUE
						BATTLE_STATE:LOCAL:ＨＰ = MAX(BATTLE_STATE:LOCAL:ＨＰ - 500, 1)
					NEXT
					IF 女神像OFFフラグ
						WSTR:(K++) = %CALLNAME:PLAYER%一行忍受侵蚀更换周遭海水，稀释了瘴气……
					ELSE
						WSTR:(K++) = %CALLNAME:PLAYER%一行忍受侵蚀更换周遭空气，稀释了瘴气……
					ENDIF
				ENDIF
			ENDIF
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 勉强能前进时窥视货舱深处。
			WSTR:(K++) = ……明显能感受到瘴气源头的存在……
			WSTR:(K++) = _COLOR_%カラーパレット_HTML("黄")%_前方定有不死族首领_，做好万全准备再前进吧。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSEIF GETBIT(ダンジョン構造配列_深海の古戦場跡:55:7, 4) == 0
			KSTR:(K++) = _COLOR_%カラーパレット_HTML("黄")%_前方定有不死族首领_，做好万全准备再前进吧。
		ELSE
			KSTR:(K++) = 没有什么特别不寻常的地方。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_54_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 54
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_沈没船
		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 打开门扉的房间里摆放着豪华书桌，陈列着酒瓶的橱柜一应俱全。
			WSTR:(K++) = 看来这里就是船长室，虽然大部分资料与陈设都已风化腐朽……
			WSTR:(K++) = 唯独豪华书桌及其内部似乎施加了防蚀魔法，保存完好。
			KSTR:(K++) = 拉开抽屉发现了船长日记。_PAGE
			KSTR:(K++) = 要阅读日记吗？
			KSTR:(K++) = BUTTON_[确定]
			KSTR:(K++) = BUTTON_[取消]
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[确定]"
					CALL 深海の古戦場跡_船長の日記()
				CASE "[取消]"
					WSTR:(K++) = 似乎没什么重要情报，置之不理吧。
				CASEELSE
					CLEARLINE 1
					REUSELASTLINE  
					GOTO LOOP_MESSAGE
			ENDSELECT
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 要阅读船长日记吗？
			KSTR:(K++) = BUTTON_[确定]
			KSTR:(K++) = BUTTON_[取消]
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			$LOOP_MESSAGE2
			INPUTS
			SELECTCASE RESULTS
				CASE "[确定]"
					CALL 深海の古戦場跡_船長の日記()
				CASE "[取消]"
					WSTR:(K++) = 似乎没什么重要情报，置之不理吧。
				CASEELSE
					CLEARLINE 1
					REUSELASTLINE  
					GOTO LOOP_MESSAGE2
			ENDSELECT
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@深海の古戦場跡_船長の日記
CALL 口上変数初期化

WSTR:(K++) = ◯月◯日
WSTR:(K++) = 将骑空艇改装为航海用，终于驶入这片海域。
WSTR:(K++) = 虽然积蓄挥霍一空，但已有翻盘计划。
KSTR:(K++) = 这座岛的星晶兽们常掉落强力武器与财宝。_PAGE
WSTR:(K++) = 无需费力讨伐星晶兽，只要找到藏宝地就能大发横财。
WSTR:(K++) = 我推测宝物分散藏在多处，其中一处就在「海上孤岛」。
WSTR:(K++) = 若判断正确不仅能得财宝，甚至可能入手天星器与极星器。
KSTR:(K++) = 届时老子就是一流——不，最强的空贼！哇哈哈哈！！_PAGE
WSTR:(K++) = △月□日
WSTR:(K++) = 出海数月，果然老子料事如神！
WSTR:(K++) = 在某座平凡小岛发现了堆积如山的财宝，还藏着天星器「七星剑」！
KSTR:(K++) = 这下老子天下无敌！金钱与力量尽在掌握！_PAGE
WSTR:(K++) = ◎月☓日
WSTR:(K++) = 用财宝强化船只，扩充船员。
WSTR:(K++) = 其他小岛必定还藏着更多宝物与武器。
KSTR:(K++) = 还有盘踞海域的星晶兽……叫卡律布狄斯来着？_PAGE
WSTR:(K++) = 虽只瞥过一眼，那小娘们可是极品。
KSTR:(K++) = 手握七星剑的老子连星晶兽都能狩猎，定要打趴她收作禁脔。_PAGE
WSTR:(K++) = ■月■日
WSTR:(K++) = 混账东西！！那群该死的星晶兽！！
WSTR:(K++) = 老子不过借了点财宝，居然呼朋唤友围攻老子！！
KSTR:(K++) = 船体半毁，船员逃的逃内讧的内讧。可恶！_PAGE
WSTR:(K++) = 连七星剑都掉进海底了。不可饶恕，星晶兽们……！
WSTR:(K++) = 就算死也绝不原谅，绝对、绝对要复仇……
WSTR:(K++) = ……日记在此戛然而止。
CALL メッセージ欄表示用関数(,"船长日记",,0)
CALL 口上変数初期化

@ダンジョンマス情報_深海の古戦場跡_54_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 54
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_沈没船
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "54_0")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "55_1")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "54_2")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 继续沿走廊前进，发现两侧装饰华丽的门扉。
			WSTR:(K++) = 是船长室吗？似乎未上锁，可轻松进入。
			WSTR:(K++) = 或许能发现有趣之物，稍作调查吧。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 两侧可见装饰华丽的门扉。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_54_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 54
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_沈没船
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 推门而入，室内散落着诡异器具。
			WSTR:(K++) = 虽已风化……但可见口枷、镣铐等拘束具，以及皮鞭、钢针等刑具。
			WSTR:(K++) = ……作为拷问室选址不当，恐怕是船长的情趣房间。
			WSTR:(K++) = 翻找也难有收获，当作没看见吧。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 翻找也难有收获。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_深海の古戦場跡_55_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 55
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_沈没船
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 通道中途坍塌，与外界海域连通。
			WSTR:(K++) = 前方本应是船尾区域，但已完全损毁。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 通道中途坍塌，与外界海域连通。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_55_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 55
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_沈没船
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 通道中途坍塌，与外界海域连通。
			WSTR:(K++) = 前方本应是船尾区域，但已完全损毁。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 通道中途坍塌，与外界海域连通。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_深海の古戦場跡_55_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 55
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_沈没船
		IF ダンジョン内一時変数:4 == 0
			ダンジョンマス画像URL_重ね表示 = エネミーアイコン_赤
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = %CALLNAME:PLAYER%们抵达了瘴气淤积的货舱最深处。
			WSTR:(K++) = 盘踞在此的，是缠绕着浓密暗黑魔力的巨型骷髅。
			WSTR:(K++) = 由怨念实体化而成的顶级不死族！
			WSTR:(K++) = 巨型骷髅察觉%CALLNAME:PLAYER%们的存在，缓缓张开下颌。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			VARSET LOCAL
			IF TALENT:MASTER:種族 == 5
				;星晶獣がいる
				LOCAL:1 = 1
			ENDIF
			IF TALENT:MASTER:性別 == 1
				;女性がいる
				LOCAL:2 = 1
			ENDIF
			FOR LOCAL, 0, 14
				SIF LOCAL > 3 && LOCAL < 10
					CONTINUE
				SIF BATTLE_STATE:LOCAL:キャラ登録番号 < 1
					CONTINUE
				IF TALENT:(BATTLE_STATE:LOCAL:キャラ登録番号):種族 == 5
					;星晶獣がいる
					LOCAL:1 = 1
				ENDIF
				IF TALENT:(BATTLE_STATE:LOCAL:キャラ登録番号):性別 == 1
					;女性がいる
					LOCAL:2 = 1
				ENDIF
			NEXT
			IF LOCAL:1
				;星晶獣がいる
				WSTR:(K++) = 「噢噢噢……这、气息……」
				WSTR:(K++) = 「……星晶兽！！可憎的星晶兽！！」
				WSTR:(K++) = 「把你们全都杀光！！」
			ELSEIF LOCAL:2
				;女性がいる
				WSTR:(K++) = 「噢噢噢……这、气息……」
				WSTR:(K++) = 「……女人……！有女人……！」
				WSTR:(K++) = 「所有女人都是老子的，交出来！！」
			ELSE
				WSTR:(K++) = 「噢噢噢……这、气息……」
				WSTR:(K++) = 「……生者……活着的人类……」
				WSTR:(K++) = 「为何老子死了，你们却活着……不可饶恕……！」
				WSTR:(K++) = 「把你们的生命……献给老子！！」
			ENDIF
			CALL メッセージ欄表示用関数(,"巨型骷髅",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 巨型骷髅发出咆哮，向%CALLNAME:PLAYER%一行袭来！
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:0:エネミー名 = Lv20_格拉辛
			SIF 女神像OFFフラグ
				戦闘時_特殊処理フラグ = 海中フィールド
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 「呜呜……为何……为何我会败北……」
				WSTR:(K++) = 「本应成为最强……我的船、我的剑、我的部下……」
				WSTR:(K++) = 「在哪……都去哪了……明明得到了一切……」
				CALL メッセージ欄表示用関数(,"巨型骷髅",,0)
				CALL 口上変数初期化
				WSTR:(K++) = 巨型骷髅——格拉辛化作砂砾崩解。
				WSTR:(K++) = 失去源头的瘴气也逐渐稀薄。
				KSTR:(K++) = ……？格拉辛消散处似乎遗落了什么。_PAGE
				IF GETBIT(ダンジョン構造配列_深海の古戦場跡:34:6, 4)
					WSTR:(K++) = %CALLNAME:PLAYER%获得了「七星剑碎片」！
					CALL 素材入手処理("七星剑碎片", 1)
				ENDIF
				WSTR:(K++) = %CALLNAME:PLAYER%获得了「逆恨之戒」！
				WSTR:(K++) = %CALLNAME:PLAYER%获得了「怨念耳饰」！
				CALL 汎用指輪取得処理("逆恨之戒", 1)
				CALL 汎用耳飾り取得処理("怨念耳饰")
				WSTR:(K++) = 至此已完成卡律布狄斯的委托。_COLOR_%カラーパレット_HTML("黄")%_前去汇报吧。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 口上変数初期化
				SETBIT ダンジョン構造配列_深海の古戦場跡:マス深度:マス分岐, 4
			ENDIF
		ELSEIF ダンジョン内一時変数:4 == 0
			KSTR:(K++) = 要重温与格拉辛的战斗记忆吗？
			KSTR:(K++) = （与BOSS再战）
			KSTR:(K++) = BUTTON_[确定]
			KSTR:(K++) = BUTTON_[取消]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE2
			INPUTS
			SELECTCASE RESULTS
				CASE "[确定]"
					敵BATTLE_STATE_STR:0:エネミー名 = Lv20_格拉辛
					SIF 女神像OFFフラグ
						戦闘時_特殊処理フラグ = 海中フィールド
					CALL 雑魚敵遭遇汎用処理
					IF RESULT == 0
						CALL 口上変数初期化
						WSTR:(K++) = %CALLNAME:PLAYER%获得了「逆恨之戒」！
						WSTR:(K++) = %CALLNAME:PLAYER%获得了「怨念耳饰」！
						ダンジョン内一時変数:4 = 1
						CALL 汎用指輪取得処理("逆恨之戒", 1)
						CALL 汎用耳飾り取得処理("怨念耳饰")
						CALL メッセージ欄表示用関数(,,,0)
						CALL 口上変数初期化
					ENDIF
				CASE "[取消]"
					CALL 口上変数初期化
				CASEELSE
					CLEARLINE 1
					REUSELASTLINE  
					GOTO LOOP_MESSAGE2
			ENDSELECT
		ENDIF
		CALL 画面再描画
ENDSELECT
