

@ダンジョン初期処理_Strayed_Princess
;ダンジョン構造の読み込み
;0でない時、そのマスは存在する
#DIM 深度
#DIM 分岐

ダンジョンサブタイトル = 迷途的小公主
ダンジョンマス画像URL_伏せ状態 = 壁_森
ダンジョン現在位置:0 = 3
ダンジョン現在位置:1 = 7
ダンジョン背景画像 = 背景_森

;スタート地点は必ず存在
;初期からオープン済みなので3を入れる
;ビット0：存在するか　ビット1：移動できるか　ビット2：マスをオープンするか（ビット１をONにしないと無意味）　ビット3：入れないがオープンする場合に使用
;ビット4以降：自由枠。主に宝箱の開閉やイベント達成フラグなどに使用
IF GETVAR(@"ダンジョン構造配列_%ダンジョン名%:{ダンジョン現在位置:0}:{ダンジョン現在位置:1}") == 0
	SETVAR @"ダンジョン構造配列_%ダンジョン名%:{ダンジョン現在位置:0}:{ダンジョン現在位置:1}", 3
ENDIF

FOR 深度, 1, 100
	LOCAL = 0
	FOR 分岐, 0, 9
		IF GETVAR(@"ダンジョン構造配列_%ダンジョン名%:{深度}:{分岐}")
			;既にマス情報が入ってるなら飛ばす
			LOCAL = 1
			CONTINUE
		ELSEIF ENUMFUNCBEGINSWITH(@"ダンジョンマス情報_%ダンジョン名%_{深度}_{分岐}")
			LOCAL = 1
			SETVAR @"ダンジョン構造配列_%ダンジョン名%:深度:分岐", 1
		ENDIF
	NEXT
	IF LOCAL
		ダンジョン最大深度 = 深度
	ENDIF
NEXT

@ダンジョン解説文_Strayed_Princess

詳細文文字列受け渡し変数 = 
詳細文文字列受け渡し変数 += "山中出现了带着神秘马形生物的山贼。<br>"
詳細文文字列受け渡し変数 += "若放任不管，将会对度假岛的环境和客人造成严重损害。<br>"
詳細文文字列受け渡し変数 += @"%CALLNAME:PLAYER%为讨伐山贼而前往山中。<br>"
詳細文文字列受け渡し変数 += "<br>"
詳細文文字列受け渡し変数 += "迷宫出处：Violated Princess<br>"
詳細文文字列受け渡し変数 += "<br>"
詳細文文字列受け渡し変数 += "<br>"
詳細文文字列受け渡し変数 += "※本迷宫中战败时不会触发色情事件。"

;推奨レベルを返す
RETURN 10

@敵討伐後処理_ダンジョン固有_Strayed_Princess(討伐エネミー数)
#DIM 討伐エネミー数
;ダンジョン内で戦闘した後に呼ばれる関数、主にダンジョンごとのドロップアイテム取得に使用
;今回アイテムドロップはないので記述なし

;---------------------------------------------------------------------
;マップ構造
;---------------------------------------------------------------------
;イベントミニマップなのでほぼ一本道、途中ちょっとだけ分岐
;---------------------------------------------------------------------

@ダンジョンマス情報_Strayed_Princess_3_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 3
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原

		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "3_4")
	CASE "マスイベント"
		RFLAG:ダンジョン再視聴フラグ = 0
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			SETBIT RFLAG:ダンジョン再視聴フラグ, 0
			SETBIT RFLAG:ダンジョン再視聴フラグ, 1
			SETBIT RFLAG:ダンジョン再視聴フラグ, 10
		ELSE
			KSTR:(K++) = 树木郁郁葱葱地生长着。
			CALL 再視聴確認(1)
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 0)
			WSTR:(K++) = %CALLNAME:PLAYER%踏入了山贼船只停靠的山地。
			WSTR:(K++) = 在枝繁叶茂的森林中，随时可能与山贼们遭遇。请小心前进。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 1)
			;戦闘部分
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 10)
			;再視聴では通らない報酬部分
		ENDIF
		RFLAG:ダンジョン再視聴フラグ = 0
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT



@ダンジョンマス情報_Strayed_Princess_3_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 3
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原

	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "3_2")
	CASE "マスイベント"
		KSTR:(K++) = 地面上有人的小脚印。大概是孩子的。
		KSTR:(K++) = 如果对度假村一无所知的客人先一步深入的话就麻烦了。加快脚步吧。
		CALL 接続ルート全開放処理(マス深度, マス分岐)
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_Strayed_Princess_3_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 3
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原

		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "3_0")
	CASE "マスイベント"
		RFLAG:ダンジョン再視聴フラグ = 0
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			SETBIT RFLAG:ダンジョン再視聴フラグ, 0
			SETBIT RFLAG:ダンジョン再視聴フラグ, 1
			SETBIT RFLAG:ダンジョン再視聴フラグ, 10
		ELSE
			KSTR:(K++) = 与山贼战斗过的地方。
			CALL 再視聴確認(0)
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 0)
			;立ち絵リソース記録に必要な画像のリソースを生成する
			CALLF 顔グラ表示用文字列関数(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜"),100,,,1,1)
			LOCALS = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜"),"ダンジョン用_野盗",101)
			LOCALS:1 = %立ち絵リソース記録%
			WSTR:(K++) = 当向森林深处前进时，透过树丛可以看到疑似山贼的数名男子。
			WSTR:(K++) = 他们似乎在寻找什么，正东张西望地环顾四周……
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「啊？ 你们这些家伙怎么回事！？ 是那小鬼的同伙吗！？」
			CALL メッセージ欄表示用関数(LOCALS:1,"野盗",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 看来对方也察觉到了这边的存在。
			WSTR:(K++) = 山贼手持匕首向%CALLNAME:PLAYER%一行袭来！
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 1)
			;戦闘部分
			敵BATTLE_STATE_STR:0:エネミー名 = Lv10_山贼
			敵BATTLE_STATE_STR:3:エネミー名 = Lv10_山贼
			CALL 雑魚敵遭遇汎用処理
			IF RESULT != 0 && GETBIT(RFLAG:ダンジョン再視聴フラグ, 10)
				CALL マス未踏破戻し処理(ダンジョン現在位置:0, ダンジョン現在位置:1)
				ダンジョン現在位置:0 = 3
				ダンジョン現在位置:1 = 4
				RETURN 0
			ENDIF
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 0)
			;勝利後or読み返し中
			WSTR:(K++) = 成功击退了山贼。
			WSTR:(K++) = 从『那个小鬼』的称呼来看，之前的脚印果然是度假游客留下的吗…？
			WSTR:(K++) = 总之还是加快进度比较好吧。
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 10)
			;再視聴では通らない報酬部分
			CALL 接続ルート全開放処理(マス深度, マス分岐)
			LOCAL = GETVAR(@"ダンジョン構造配列_%ダンジョン名%:3:0")
			SETBIT LOCAL, 1
			SETBIT LOCAL, 2
			CLEARBIT LOCAL, 3
			SETVAR @"ダンジョン構造配列_%ダンジョン名%:3:0", LOCAL
		ENDIF
		RFLAG:ダンジョン再視聴フラグ = 0
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT



@ダンジョンマス情報_Strayed_Princess_3_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 3
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原

		ダンジョンマス画像URL_重ね表示 = 上アイコン
	CASE "接続先"
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		ダンジョン現在位置:0 = 11
		ダンジョン現在位置:1 = 7
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 接続ルート全開放処理(11, 7)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_Strayed_Princess_11_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 11
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原

		ダンジョンマス画像URL_重ね表示 = 下アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "11_5")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		ダンジョン現在位置:0 = 3
		ダンジョン現在位置:1 = 0
		CALL 画面再描画
ENDSELECT



@ダンジョンマス情報_Strayed_Princess_11_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 11
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原

	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "11_3")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 能听到男人们的怒吼声…
			WSTR:(K++) = 应该是刚才那群山贼的同伙。%CALLNAME:PLAYER%一行朝着声音方向前进。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 地面上残留着多人的脚印。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT




@ダンジョンマス情報_Strayed_Princess_11_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 11
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原

		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "11_0")
	CASE "マスイベント"
		RFLAG:ダンジョン再視聴フラグ = 0
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			SETBIT RFLAG:ダンジョン再視聴フラグ, 0
			SETBIT RFLAG:ダンジョン再視聴フラグ, 1
			SETBIT RFLAG:ダンジョン再視聴フラグ, 10
		ELSE
			KSTR:(K++) = 这是山贼和塞蕾娜战斗过的地方。
			CALL 再視聴確認(0)
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 0)
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜"),"ダンジョン用_基本",102,,,"暗闇掛け")
			LOCALS = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜"),"ダンジョン用_野盗",103)
			LOCALS:1 = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜"),"ダンジョン用_野盗1",104,,,"怒りマーク")
			LOCALS:2 = %立ち絵リソース記録%
			WSTR:(K++) = 这是战斗的声音吗？ 在男人们的怒吼声中，夹杂着类似物体碰撞的声响。
			WSTR:(K++) = 或许不是度假游客，而是前来讨伐山贼的骑空士之类的存在。靠近看看吧。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「可恶！对付一个小鬼还这么费劲！你到底是什么人！？」
			CALL メッセージ欄表示用関数(LOCALS:1,"山贼A",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「就算报上名号你们也不会明白。来意也……没必要说了」
			CALL メッセージ欄表示用関数(LOCALS,"金发少女",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「装模作样的小鬼！现在后悔也晚了！！」
			CALL メッセージ欄表示用関数(LOCALS:2,"山贼B",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 靠近后发现，一名金发少女正在与多名山贼对峙战斗。
			WSTR:(K++) = 每当少女挥拳，山贼的身体就会腾空飞起。是在释放魔力吗？
			WSTR:(K++) = 面对盗贼挥舞的匕首，她甩动着双马尾如同尾巴般灵巧踏步闪避。
			WSTR:(K++) = 不过山贼人数众多。应该去帮助少女吧。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「这次又是什么啊！？」
			CALL メッセージ欄表示用関数(LOCALS:1,"山贼A",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「唔……！？」
			CALL メッセージ欄表示用関数(LOCALS,"金发少女",,0)
			CALL 口上変数初期化
			WSTR:(K++) = %CALLNAME:PLAYER%一行向山贼发起了进攻！
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 1)
			;戦闘部分
			敵BATTLE_STATE_STR:0:エネミー名 = Lv10_山贼
			敵BATTLE_STATE_STR:3:エネミー名 = Lv10_山贼
			敵BATTLE_STATE_STR:4:エネミー名 = Lv10_山贼
			CALL 雑魚敵遭遇汎用処理
			IF RESULT != 0 && GETBIT(RFLAG:ダンジョン再視聴フラグ, 10)
				CALL マス未踏破戻し処理(ダンジョン現在位置:0, ダンジョン現在位置:1)
				ダンジョン現在位置:0 = 11
				ダンジョン現在位置:1 = 5
				RETURN 0
			ENDIF
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 0)
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜"),"ダンジョン用_基本",105,,,"暗闇掛け")
			LOCALS = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜"),"ダンジョン用_基本",106)
			LOCALS:1 = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜"),"ダンジョン用_驚き",107)
			LOCALS:2 = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜"),"ダンジョン用_悲しみ",108)
			LOCALS:3 = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜"),"ダンジョン用_目瞑り",109)
			LOCALS:4 = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜"),"ダンジョン用_苦笑",110)
			LOCALS:5 = %立ち絵リソース記録%
			WSTR:(K++) = 「抱歉，得救了」
			CALL メッセージ欄表示用関数(LOCALS,"金发少女",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 击退山贼后，金发少女走近搭话。
			WSTR:(K++) = 重新打量少女，发现她身材十分娇小。和多拉夫族的女性差不多高。
			WSTR:(K++) = 总之，%CALLNAME:PLAYER%决定先自我介绍。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「管理这座岛的领主大人吗。请恕我问候来迟」
			CALL メッセージ欄表示用関数(LOCALS,"金发少女",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「我是塞蕾娜・胡奥……塞蕾娜。请多关照」
			CALL メッセージ欄表示用関数(LOCALS:1,"塞蕾娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 向自称塞蕾娜的少女说明前来讨伐山贼的原委。
			WSTR:(K++) = 静静聆听的塞蕾娜听到山贼带着神秘独角兽的消息时，突然瞪大眼睛慌乱起来。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「此话当真！？」
			CALL メッセージ欄表示用関数(LOCALS:2,"塞蕾娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 　……失礼了。让你看到难堪的样子了」
			CALL メッセージ欄表示用関数(LOCALS:3,"塞蕾娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 早有预感，看来果然事有蹊跷。
			WSTR:(K++) = %CALLNAME:PLAYER%询问她为何会在此处。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「或许该向领主大人说明。
			WSTR:(K++) = 　其实，我因某个缘由正在寻找独角兽」
			CALL メッセージ欄表示用関数(LOCALS:1,"塞蕾娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 根据塞蕾娜的说明，似乎是她家饲养的独角兽幼崽被人掳走了。
			WSTR:(K++) = 独自离家的她，通过传闻与零星痕迹得知被带进这座岛的情报，一路追踪至此。
			WSTR:(K++) = 不过，这种事本该交给仆从或骑空士处理才对吧。
			WSTR:(K++) = 从优雅的举止与明显精心保养的容貌来看，她无疑是『使唤人』的那一方。
			WSTR:(K++) = 恐怕她的父母也不会同意塞蕾娜独自离家追寻独角兽。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「领主大人所言极是。连我自己也认为本该如此。
			WSTR:(K++) = 　任谁听了都会说这是愚蠢之举吧。
			CALL メッセージ欄表示用関数(LOCALS:1,"塞蕾娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 　但是，那孩子……光辉人偶对我来说是独一无二的、唯一的朋友。
			WSTR:(K++) = 　一想到它正在我不知晓的地方遭受可怕、残酷的对待就……」
			CALL メッセージ欄表示用関数(LOCALS:3,"塞蕾娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 塞蕾娜诉说着露出悲怆神情。
			WSTR:(K++) = 然而山贼可不会体谅她的苦衷。若被抓住，像她这样的少女定会遭受比死亡更痛苦的折磨。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「我早有觉悟。那孩子此刻也一定在呼唤着我。
			WSTR:(K++) = 　为了回应那个声音，我才站在这里。
			WSTR:(K++) = 　无论这个决定多么愚蠢不合理。无论多么错误。
			CALL メッセージ欄表示用関数(LOCALS:4,"塞蕾娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 　我，都会坚持自己的选择」
			CALL メッセージ欄表示用関数(LOCALS:1,"塞蕾娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 如此断言后，塞蕾娜露出决然神情。恐怕说什么都无法让她退让半步。
			WSTR:(K++) = 况且若放任不管导致她被盗贼凌辱，实在难以心安。
			WSTR:(K++) = %CALLNAME:PLAYER%提议共同讨伐盗贼。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「这本是我与家族的问题，无意牵连他人。
			CALL メッセージ欄表示用関数(LOCALS:4,"塞蕾娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 　虽想这么说，但盗贼在岛上肆虐对领主大人而言也绝非无关之事。
			CALL メッセージ欄表示用関数(LOCALS:1,"塞蕾娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 　……实不相瞒，离家后独自行动确实心中没底。
			WSTR:(K++) = 　若能得到帮助实在感激不尽。拜托了，领主大人」
			CALL メッセージ欄表示用関数(LOCALS:5,"塞蕾娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 事情就此敲定。
			WSTR:(K++) = %CALLNAME:PLAYER%与塞蕾娜循着盗贼们的足迹开始前行。
			
			
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 10)
			;再視聴では通らない報酬部分
			CALL 接続ルート全開放処理(マス深度, マス分岐)
			LOCAL = GETVAR(@"ダンジョン構造配列_%ダンジョン名%:11:0")
			SETBIT LOCAL, 1
			SETBIT LOCAL, 2
			CLEARBIT LOCAL, 3
			SETVAR @"ダンジョン構造配列_%ダンジョン名%:11:0", LOCAL
		ENDIF
		RFLAG:ダンジョン再視聴フラグ = 0
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT



@ダンジョンマス情報_Strayed_Princess_11_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 11
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原

		ダンジョンマス画像URL_重ね表示 = 上アイコン
	CASE "接続先"
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		ダンジョン現在位置:0 = 19
		ダンジョン現在位置:1 = 7
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 接続ルート全開放処理(19, 7)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_Strayed_Princess_19_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 19
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原

		ダンジョンマス画像URL_重ね表示 = 下アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "19_5")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		ダンジョン現在位置:0 = 11
		ダンジョン現在位置:1 = 0
		CALL 画面再描画
ENDSELECT



@ダンジョンマス情報_Strayed_Princess_19_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 19
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "19_3")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜"),"ダンジョン用_基本",111)
			LOCALS = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜"),"ダンジョン用_笑顔",112)
			LOCALS:1 = %立ち絵リソース記録%
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「想听光辉人偶的事吗？这个嘛……
			CALL メッセージ欄表示用関数(LOCALS,"塞蕾娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 　那孩子除了我亲手喂的胡萝卜外一概不吃，我不抚摸哄睡就会整夜嘶鸣。
			WSTR:(K++) = 　我弹钢琴时它就在旁边蹦跳，我被责骂哭泣时，那孩子总会陪在我身边——」
			CALL メッセージ欄表示用関数(LOCALS:1,"塞蕾娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 塞蕾娜带着温柔的笑容讲述着独角兽的事。
			WSTR:(K++) = 与方才威风凛凛的姿态截然不同，此刻的她俨然是个符合年龄的可爱少女。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 地面上残留着多人的脚印。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_Strayed_Princess_19_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 19
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原

		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "19_0")
	CASE "マスイベント"
		RFLAG:ダンジョン再視聴フラグ = 0
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			SETBIT RFLAG:ダンジョン再視聴フラグ, 0
			SETBIT RFLAG:ダンジョン再視聴フラグ, 1
			SETBIT RFLAG:ダンジョン再視聴フラグ, 10
		ELSE
			KSTR:(K++) = 与山贼战斗过的地方。
			CALL 再視聴確認(0)
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 0)
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜"),"ダンジョン用_基本",113)
			LOCALS = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜"),"ダンジョン用_悲しみ",114)
			LOCALS:1 = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜"),"ダンジョン用_怒り",115)
			LOCALS:2 = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜"),"ダンジョン用_野盗",116)
			LOCALS:3 = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜"),"ダンジョン用_野盗1",117)
			LOCALS:4 = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜"),"ダンジョン用_野盗2",118)
			LOCALS:5 = %立ち絵リソース記録%
			WSTR:(K++) = 正与塞蕾娜闲聊着前进时，一伙山贼突然现身。
			WSTR:(K++) = 或许已得知%CALLNAME:PLAYER%们正在剿灭山贼的情报，他们杀气腾腾地举着武器。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「挺会耍小聪明嘛……别以为能活着回去啊混蛋！」
			CALL メッセージ欄表示用関数(LOCALS:3,"山贼A",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「等等，仔细看这不都是脸蛋不错的小妞吗。
			WSTR:(K++) = 　不如排成一列当便器干个痛快吧」
			CALL メッセージ欄表示用関数(LOCALS:4,"山贼B",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「这主意好！老子要干那个金发小鬼！
			WSTR:(K++) = 　虽然身体没啥看头，就用垃圾精液让她怀孕吧！
			WSTR:(K++) = 　之前的便器最高纪录是『3匹』来着？」
			CALL メッセージ欄表示用関数(LOCALS:5,"山贼C",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「白痴，那种小身板生一胎就会坏掉啦。
			WSTR:(K++) = 　不过坏了正好能当杀鸡儆猴的教材。嘎哈哈哈哈！！」
			CALL メッセージ欄表示用関数(LOCALS:3,"山贼A",,0)
			CALL 口上変数初期化
			;男やケモオンリーのパーティーだと野盗の台詞が矛盾するか野盗が特殊性癖になるけどまあいいか！よろしくなあ！
			WSTR:(K++) = 山贼们吐着下流话语发出猥琐笑声。
			WSTR:(K++) = 塞蕾娜也皱起眉头，向野盗投去冰冷的视线。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「不堪入耳。
			CALL メッセージ欄表示用関数(LOCALS:1,"塞蕾娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 　上吧，领主大人！」
			CALL メッセージ欄表示用関数(LOCALS:2,"塞蕾娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = %CALLNAME:PLAYER%一行向山贼发起了进攻！
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 1)
			;戦闘部分
			敵BATTLE_STATE_STR:0:エネミー名 = Lv10_山贼
			敵BATTLE_STATE_STR:3:エネミー名 = Lv10_山贼
			敵BATTLE_STATE_STR:4:エネミー名 = Lv10_山贼
			敵BATTLE_STATE_STR:7:エネミー名 = Lv10_山贼
			CALL 雑魚敵遭遇汎用処理
			IF RESULT != 0 && GETBIT(RFLAG:ダンジョン再視聴フラグ, 10)
				CALL マス未踏破戻し処理(ダンジョン現在位置:0, ダンジョン現在位置:1)
				ダンジョン現在位置:0 = 19
				ダンジョン現在位置:1 = 5
				RETURN 0
			ENDIF
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 0)
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜"),"ダンジョン用_笑顔",119)
			LOCALS = %立ち絵リソース記録%
			WSTR:(K++) = 山贼被击败了。塞蕾娜似乎也没有受伤。
			WSTR:(K++) = 尽管被灌输了连成年人都难以承受的污言秽语，少女却看不出有受到打击的迹象。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「啊，不必担心我。
			WSTR:(K++) = 　前些日子我亲眼见证了婴儿是经由爱与幸福诞生的。
			WSTR:(K++) = 　那种程度的粗鄙之语，无需放在心上」
			CALL メッセージ欄表示用関数(LOCALS,"塞蕾娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = ……看来塞蕾娜对性知识几乎一无所知且存在严重偏差。
			WSTR:(K++) = 虽说是年幼，但作为王公贵族的本家究竟是怎么进行性教育的呢。
			WSTR:(K++) = 怀着些许困惑，%CALLNAME:PLAYER%决定继续前进。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 10)
			;再視聴では通らない報酬部分
			CALL 接続ルート全開放処理(マス深度, マス分岐)
			LOCAL = GETVAR(@"ダンジョン構造配列_%ダンジョン名%:19:0")
			SETBIT LOCAL, 1
			SETBIT LOCAL, 2
			CLEARBIT LOCAL, 3
			SETVAR @"ダンジョン構造配列_%ダンジョン名%:19:0", LOCAL
		ENDIF
		RFLAG:ダンジョン再視聴フラグ = 0
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_Strayed_Princess_19_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 11
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原

		ダンジョンマス画像URL_重ね表示 = 上アイコン
	CASE "接続先"
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		ダンジョン現在位置:0 = 27
		ダンジョン現在位置:1 = 7
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 接続ルート全開放処理(27, 7)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_Strayed_Princess_27_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 27
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原

		ダンジョンマス画像URL_重ね表示 = 下アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "27_5")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		ダンジョン現在位置:0 = 19
		ダンジョン現在位置:1 = 0
		CALL 画面再描画
ENDSELECT



@ダンジョンマス情報_Strayed_Princess_27_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 27
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "27_3")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜"),"ダンジョン用_笑顔",120)
			LOCALS = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜"),"ダンジョン用_悲しみ",121)
			LOCALS:1 = %立ち絵リソース記録%
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「度假村里有沐浴和游泳的设施吧。
			WSTR:(K++) = 　这是我初次离家，稍微有些兴趣。
			WSTR:(K++) = 　顺带一问，更衣时需要几名侍从？」
			CALL メッセージ欄表示用関数(LOCALS,"塞蕾娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 　——原、原来如此。独自更衣才是常态啊。问了奇怪的问题呢」
			CALL メッセージ欄表示用関数(LOCALS:1,"塞蕾娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 塞蕾娜似乎是个彻头彻尾的深闺大小姐。等这次事件解决后，或许可以邀请她去度假村。
			WSTR:(K++) = 虽然稍有松懈，但山贼头目可能即将现身。%CALLNAME:PLAYER%重新振作精神。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 地面上残留着多人的脚印。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_Strayed_Princess_27_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 27
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原

		ダンジョンマス画像URL_重ね表示 = エネミーアイコン_赤
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "27_1")
	CASE "マスイベント"
		RFLAG:ダンジョン再視聴フラグ = 0
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			SETBIT RFLAG:ダンジョン再視聴フラグ, 0
			SETBIT RFLAG:ダンジョン再視聴フラグ, 1
			SETBIT RFLAG:ダンジョン再視聴フラグ, 10
		ELSE
			KSTR:(K++) = 这是与山贼头目战斗过的地方。
			CALL 再視聴確認(0)
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 0)
			;立ち絵リソース記録に必要な画像のリソースを生成する
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜"),"ダンジョン用_怒り",122)
			LOCALS = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜"),"ダンジョン用_基本",123)
			LOCALS:1 = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜"),"ダンジョン用_野盗ボス",124)
			LOCALS:2 = %立ち絵リソース記録%
			WSTR:(K++) = 继续前行，最终抵达森林中的开阔地带。
			WSTR:(K++) = 广场中央躺着肤色黝黑的男子与一只小型独角兽。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「光辉人偶！」
			CALL メッセージ欄表示用関数(LOCALS,"塞蕾娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「……通透的金发与雪白肌肤。哼，原来如此？
			WSTR:(K++) = 　你们就是那群来找我麻烦的家伙？」
			CALL メッセージ欄表示用関数(LOCALS:2,"山贼头目",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「……只会从自己立场出发的男人。你对光辉人偶做了什么！」
			CALL メッセージ欄表示用関数(LOCALS,"塞蕾娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「聒噪的小鬼。
			WSTR:(K++) = 　因为太闹腾就喂了点安眠药。要不是能卖钱早就宰了……也罢」
			CALL メッセージ欄表示用関数(LOCALS:2,"山贼头目",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 从男子的口吻判断，此人正是山贼头目。
			WSTR:(K++) = 不知是为交易独角兽而来，还是为休整才降落此岛。真是给人添麻烦的家伙。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「处理掉废物部下的事无所谓，但你们的行为我视为宣战。
			WSTR:(K++) = 　你这纤细身躯倒适合当开胃菜。
			WSTR:(K++) = 　男人去死，女人就怀上我的种吧」
			CALL メッセージ欄表示用関数(LOCALS:2,"山贼头目",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 擅自登陆此岛还满口胡言的家伙。勃起的胯间令人作呕。
			WSTR:(K++) = 若不在此解决此人，必将给度假村带来巨大灾祸。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「哼，从头到尾只会自说自话的男人。
			CALL メッセージ欄表示用関数(LOCALS:1,"塞蕾娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 　也罢，就让你的亲身领教谦逊为何是美德」
			CALL メッセージ欄表示用関数(LOCALS,"塞蕾娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = %CALLNAME:PLAYER%一行向野盗头目发起了进攻！
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化

		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 1)
			;戦闘部分
			敵BATTLE_STATE_STR:0:エネミー名 = Lv15_山贼头目
			CALL 雑魚敵遭遇汎用処理
			IF RESULT != 0 && GETBIT(RFLAG:ダンジョン再視聴フラグ, 10)
				CALL マス未踏破戻し処理(ダンジョン現在位置:0, ダンジョン現在位置:1)
				ダンジョン現在位置:0 = 27
				ダンジョン現在位置:1 = 5
				RETURN 0
			ENDIF
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 10)
			;再視聴では通らない報酬部分
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ENDIF
		RFLAG:ダンジョン再視聴フラグ = 0
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT







@ダンジョンマス情報_Strayed_Princess_27_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 27
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原

		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
	CASE "マスイベント"
		RFLAG:ダンジョン再視聴フラグ = 0
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			SETBIT RFLAG:ダンジョン再視聴フラグ, 0
			SETBIT RFLAG:ダンジョン再視聴フラグ, 1
			SETBIT RFLAG:ダンジョン再視聴フラグ, 10
		ELSE
			KSTR:(K++) = 问题解决后，为度假村赢得了新客户。
			CALL 再視聴確認(1)
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 0)
			;立ち絵リソース記録に必要な画像のリソースを生成する
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜"),"ダンジョン用_涙",125)
			LOCALS = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜"),"ダンジョン用_涙1",126)
			LOCALS:1 = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜"),"ダンジョン用_笑顔",127)
			LOCALS:2 = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜"),"ダンジョン用_悲しみ",128)
			LOCALS:3 = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜"),"ダンジョン用_基本",129)
			LOCALS:4 = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜"),"ダンジョン用_苦笑",130)
			LOCALS:5 = %立ち絵リソース記録%
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 野盗头目被击败了。环顾四周，塞蕾娜正奔向倒地的独角兽。
			WSTR:(K++) = 塞蕾娜忧心忡忡地抚摸独角兽数次后，独角兽缓缓睁开了眼睛。
			WSTR:(K++) = 似乎认出了身旁原本的主人，独角兽发出细微嘶鸣，撒娇般将身体贴近塞蕾娜。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「啊啊，光辉人偶……光辉人偶……！
			CALL メッセージ欄表示用関数(LOCALS,"塞蕾娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 　终于、终于重逢了……我的光辉……！」
			CALL メッセージ欄表示用関数(LOCALS:1,"塞蕾娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 塞蕾娜泪流满面地紧抱着独角兽。
			WSTR:(K++) = 为不打扰这感人的重逢，众人静默注视，片刻后塞蕾娜转向这边。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「感谢您，领主大人。
			WSTR:(K++) = 　多亏您的鼎力相助，才能与光辉人偶重逢」
			CALL メッセージ欄表示用関数(LOCALS:2,"塞蕾娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 虽然塞蕾娜表达了谢意，但显然还存在问题。
			WSTR:(K++) = 不知是野盗疏于照顾，还是因陌生环境导致精神受创，独角兽看起来十分虚弱。
			WSTR:(K++) = 立刻用骑空艇长途跋涉运送或许存在风险。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「确实，比起在家时消瘦了许多。
			WSTR:(K++) = 　看来需要疗养了」
			CALL メッセージ欄表示用関数(LOCALS:3,"塞蕾娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 于是，%CALLNAME:PLAYER%提议让独角兽在度假村暂住疗养。
			WSTR:(K++) = 度假村作为各国王公贵族御用场所，正是最佳疗养环境。
			WSTR:(K++) = 至于只亲近纯洁少女的特性，凭借艾拉之力应该也能解决。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「对我而言是求之不得的提议，当真可以吗？」
			CALL メッセージ欄表示用関数(LOCALS:4,"塞蕾娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 既能接触拥有本能吸引力的塞蕾娜，又能卖人情给她的家族，这提议可谓一石二鸟。
			WSTR:(K++) = 虽然暗藏私心，但天真无邪的她似乎并未察觉。
			WSTR:(K++) = 塞蕾娜浮现苦笑凝视着这边。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「……登岛以来承蒙诸多关照。这份善意就坦率接受吧。
			CALL メッセージ欄表示用関数(LOCALS:5,"塞蕾娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 　往后也请多指教，领主大人」
			CALL メッセージ欄表示用関数(LOCALS:2,"塞蕾娜",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 无论如何，山贼事件总算圆满解决。
			WSTR:(K++) = 眼下需要详细调查独角兽的饲养方法。
			WSTR:(K++) = %CALLNAME:PLAYER%一边向塞蕾娜请教饲养诀窍，一边沿着来时的道路折返……
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = [格拉齐亚大公家的小公主]塞蕾娜开始造访度假村了！

		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 10)
			;再視聴では通らない報酬部分
			CFLAG:(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜")):招待不可フラグ = 0
			
			;再視聴では通らない報酬部分
			CFLAG:(キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜")):招待不可フラグ = 0

			IF 滞在キャラ上限 - 滞在キャラ数 - 集客人数 - FLAG:滞在キャラ枠先確保分 > 0
				解放キャラ招待:(FINDELEMENT(解放キャラ招待, 0)) = キャラ検索("[格拉齐亚大公家的小公主]塞蕾娜")
				FLAG:滞在キャラ枠先確保分 += 1
			ENDIF
			ダンジョン終了状況 = 踏破達成
			ダンジョンクリアフラグ_Strayed_Princess = 1
		ENDIF
		RFLAG:ダンジョン再視聴フラグ = 0
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

