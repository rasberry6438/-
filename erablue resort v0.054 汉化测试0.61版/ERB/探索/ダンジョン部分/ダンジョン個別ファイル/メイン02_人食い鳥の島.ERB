

@ダンジョン初期処理_人食い鳥の島
;ダンジョン構造の読み込み
;0でない時、そのマスは存在する
#DIM 深度
#DIM 分岐

ダンジョンサブタイトル = WILDERNESS ISLAND
ダンジョンマス画像URL_伏せ状態 = 壁_岩
ダンジョン現在位置:0 = 0
ダンジョン現在位置:1 = 0
ダンジョン背景画像 = 背景_荒野

;スタート地点は必ず存在し、同深度に分岐無し
;初期からオープン済みなので3を入れるb ++
;ビット0：存在するか　ビット1：移動できるか　ビット2：マスをオープンするか（ビット１をONにしないと無意味）　ビット3：入れないがオープンする場合に使用
;ビット4以降：自由枠。主に宝箱の開閉やイベント達成フラグなどに使用
IF GETVAR(@"ダンジョン構造配列_%ダンジョン名%:0:0") == 0
	SETVAR @"ダンジョン構造配列_%ダンジョン名%:0:0", 3
	;巣の数を最初だけセット
	残り巣の数_人食い鳥の島 = 5
ENDIF

FOR 深度, 1, 100
	LOCAL = 0
	FOR 分岐, 0, 9
		IF GETVAR(@"ダンジョン構造配列_%ダンジョン名%:{深度}:{分岐}")
			;既にマス情報が入ってるなら飛ばす
			LOCAL = 1
			CONTINUE
		ELSEIF ENUMFUNCBEGINSWITH(@"ダンジョンマス情報_%ダンジョン名%_{深度}_{分岐}")
			LOCAL = 1
			SETVAR @"ダンジョン構造配列_%ダンジョン名%:深度:分岐", 1
		ENDIF
	NEXT
	IF LOCAL
		ダンジョン最大深度 = 深度
	ENDIF
NEXT

@ダンジョン解説文_人食い鳥の島

詳細文文字列受け渡し変数 = 
詳細文文字列受け渡し変数 += "位于度假岛附近的荒芜岛屿。<br>"
詳細文文字列受け渡し変数 += "大量食人鸟栖息于此，袭击过往船只。<br>"
詳細文文字列受け渡し変数 += "为避免损失，定期航班已改用迂回航线，导致交通不便的祸源之岛。<br>"
IF ダンジョンクリアフラグ_人食い鳥の島
	詳細文文字列受け渡し変数 += "如今食人鸟已被驱离，此处已成为安全航道。<br>"
ENDIF
詳細文文字列受け渡し変数 += "可在此采集福伦草与石材。<br>"

;推奨レベルを返す
RETURN 4


@敵討伐後処理_ダンジョン固有_人食い鳥の島(討伐エネミー数)
;ダンジョン内で戦闘した後に呼ばれる関数、主にダンジョンごとのドロップアイテム取得に使用
;まだ敵データはリセットしていないので敵BATTLE_STATEで色々情報は取得可能
#DIM 討伐エネミー数
#DIM ドロップ確率
#DIMS ドロップアイテム

ドロップ確率 = 10 * 討伐エネミー数
ドロップアイテム = 荒野石材
CALL ドロップ判定処理(ドロップ確率, ドロップアイテム)

ドロップ確率 = 10 * 討伐エネミー数
ドロップアイテム = 福伦草
CALL ドロップ判定処理(ドロップ確率, ドロップアイテム)

ドロップ確率 = 10 * 討伐エネミー数
ドロップアイテム = 普通禽肉
CALL ドロップ判定処理(ドロップ確率, ドロップアイテム)

ドロップ確率 = 5 * 討伐エネミー数
ドロップアイテム = 星晶碎片
CALL ドロップ判定処理(ドロップ確率, ドロップアイテム)

ドロップ確率 = 1 * 討伐エネミー数
ドロップアイテム = 赤铜古纹
CALL ドロップ判定処理(ドロップ確率, ドロップアイテム)


@ダンジョンマス情報_人食い鳥の島_0_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 0
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "1_1")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			IF 残り巣の数_人食い鳥の島 > 0
				KSTR:(K++) = 似乎仍有{残り巣の数_人食い鳥の島}个巢穴残留。
			ELSE
				KSTR:(K++) = 食人鸟群似乎已迁徙至其他岛屿。
			ENDIF
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = %CALLNAME:PLAYER%踏上了食人鸟之岛。
			WSTR:(K++) = 抬头望去，巨型鸟类正盘旋监视着你们。
			WSTR:(K++) = 看来是纪律严明的棘手群体。
			WSTR:(K++) = COLOR_C0C070_或许该为全体探索成员配备指环。
			KSTR:(K++) = 指环可通过将空店铺改建为饰品店购买，或通过讨伐噬石兽获取。_PAGE
			WSTR:(K++) = 根据事前情报，此岛至少存在_COLOR_c07070_五处_大型巢穴。
			WSTR:(K++) = 若全部摧毁，食人鸟群应会撤离。
			KSTR:(K++) = 岛屿面积广阔，探索需耗费不少时间。需脚踏实地推进。
			CALL メッセージ欄表示用関数()
			CALL 口上変数初期化
			SETBIT ダンジョン構造配列_人食い鳥の島:1:1, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_1_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 1
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "2_0")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "2_2")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "2_4")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 岛内遍布荒野地貌。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 岛内遍布荒野地貌。
			WSTR:(K++) = 鲜有草木，多为蕴含土风魔力的魔物。
			WSTR:(K++) = 栖息于此的食人鸟具有群体捕猎人类与魔物的棘手习性。
			WSTR:(K++) = 战斗若拖延过久可能会招来增援。
			KSTR:(K++) = 即使需要勉强也应尽早结束战斗。
			CALL メッセージ欄表示用関数()
			SETBIT ダンジョン構造配列_人食い鳥の島:2:0, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:2:2, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:2:4, 1
		ENDIF
		CALL 画面再描画
ENDSELECT

;---------------------------------------------------------------------------
;上ルート（巣一個）
;洞窟＋門＋魔物使い宝石
;---------------------------------------------------------------------------


@ダンジョンマス情報_人食い鳥の島_2_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 2
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "3_0")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			敵BATTLE_STATE_STR:0:エネミー名 = Lv4_食人鸟
			敵BATTLE_STATE_STR:1:エネミー名 = Lv4_食人鸟
			CALL 雑魚敵繰り返し戦闘処理
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			KSTR:(K++) = 向荒野深处行进时，食人鸟群自高空俯冲袭来！
			CALL メッセージ欄表示用関数()

			敵BATTLE_STATE_STR:0:エネミー名 = Lv4_食人鸟
			敵BATTLE_STATE_STR:1:エネミー名 = Lv4_食人鸟
			CALL 雑魚敵遭遇汎用処理
			
			SETBIT ダンジョン構造配列_人食い鳥の島:3:0, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_3_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 3
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "4_0")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 荒野北侧可见诸多岩峰与天然洞窟。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			WSTR:(K++) = 向荒野北部前进。
			WSTR:(K++) = 岩峰连绵不绝，山体上零星分布着绿植与洞穴。
			WSTR:(K++) = 目击到食人鸟飞入其中某处洞穴……
			KSTR:(K++) = 看来这边的巢穴位于洞窟内部。
			CALL メッセージ欄表示用関数()

			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			SETBIT ダンジョン構造配列_人食い鳥の島:4:0, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_4_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 4
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 攀越岩峰，抵达食人鸟栖息的洞窟。
			WSTR:(K++) = 所幸洞口宽敞，可步行深入探索。
			CALL 知識技能所持者検索("魔法知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				WSTR:(K++) = %CALLNAME:LOCAL%用魔法生成了光源。
			ELSE
				WSTR:(K++) = %CALLNAME:PLAYER%点燃了携带的火把。
			ENDIF
			KSTR:(K++) = 保持警惕继续探索。
			CALL メッセージ欄表示用関数()

			SETBIT ダンジョン構造配列_人食い鳥の島:8:0, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:8:0, 2
			SETBIT ダンジョン構造配列_人食い鳥の島:9:0, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:9:3, 1
		ENDIF
		ダンジョンマス画像URL_伏せ状態 = 壁_洞窟
		ダンジョン現在位置:0 = 8
		ダンジョン現在位置:1 = 0
		ダンジョン背景画像 = 背景_洞窟
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_8_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 8
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_洞窟
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "9_0")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "9_3")
	CASE "マスイベント"
		ダンジョンマス画像URL_伏せ状態 = 壁_岩
		ダンジョン背景画像 = 背景_荒野
		ダンジョン現在位置:0 = 4
		ダンジョン現在位置:1 = 0
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_9_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 9
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_洞窟
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "10_0")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "10_1")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 洞窟内寒气逼人，或许栖息着水属性魔物。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 洞窟内寒气逼人，隐约传来潺潺水声。
			WSTR:(K++) = 附近应有地下暗河，能明显感知到浓郁的水属性魔力。
			WSTR:(K++) = COLOR_c0c070_洞窟内可能栖息水属性魔物。
			KSTR:(K++) = 佩戴对应耳饰改变属性相性会使战斗更轻松。
			CALL メッセージ欄表示用関数()

			SETBIT ダンジョン構造配列_人食い鳥の島:10:1, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_10_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 10
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_洞窟
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
		ELSE
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = 什么也没有。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 在洞窟深处发现凝聚土属性魔力的矿石。
			WSTR:(K++) = 推测是地下水脉的水属性魔力排斥沉积的土属性结晶。
			WSTR:(K++) = 稍作加工即可制成耳饰。
			KSTR:(K++) = %CALLNAME:PLAYER%获得了土之耳饰！
			CALL メッセージ欄表示用関数()
			CALL 汎用耳飾り取得処理("土之耳饰")

			CALL 口上変数初期化
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_10_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 10
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_洞窟
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = エネミーアイコン
		ENDIF
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "14_0")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "11_2")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = 魔物已无踪影，可安全渡河。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			SETBIT ダンジョン構造配列_人食い鳥の島:11:2, 1
			WSTR:(K++) = 深入洞窟遭遇地下暗河。河中可见大量魔物游弋……
			WSTR:(K++) = COLOR_c0c070_需经历多场战斗，但唯有全歼敌群才能继续前进。
			KSTR:(K++) = 若沿下游绕行，或许能避开战斗深入探索。_PAGE
			KSTR:(K++) = 要与魔物群交战吗？（三连战）
			KSTR:(K++) = BUTTON_[确定]
			KSTR:(K++) = BUTTON_[取消]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[确定]"
					敵BATTLE_STATE_STR:1:エネミー名 = Lv4_水元素
					敵BATTLE_STATE_STR:2:エネミー名 = Lv3_螃蟹
					敵BATTLE_STATE_STR:3:エネミー名 = Lv4_水元素
					CALL 雑魚敵遭遇汎用処理
					IF RESULT == 0
						敵BATTLE_STATE_STR:1:エネミー名 = Lv4_水元素
						敵BATTLE_STATE_STR:3:エネミー名 = Lv4_水元素
						敵BATTLE_STATE_STR:5:エネミー名 = Lv4_水元素
						CALL 雑魚敵遭遇汎用処理
						IF RESULT == 0
							敵BATTLE_STATE_STR:1:エネミー名 = Lv4_水元素
							敵BATTLE_STATE_STR:2:エネミー名 = Lv3_螃蟹
							敵BATTLE_STATE_STR:3:エネミー名 = Lv4_水元素
							敵BATTLE_STATE_STR:4:エネミー名 = Lv3_螃蟹
							敵BATTLE_STATE_STR:5:エネミー名 = Lv4_水元素
							CALL 雑魚敵遭遇汎用処理
							IF RESULT == 0
								SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
								SETBIT ダンジョン構造配列_人食い鳥の島:14:0, 1
								CALL 口上変数初期化
								WSTR:(K++) = 你们成功驱逐魔物，安全渡过暗河。
								KSTR:(K++) = 如此规模的清剿足以确保该区域暂时安全。
								CALL メッセージ欄表示用関数()
							ENDIF
						ENDIF
					ENDIF
					CALL 口上変数初期化
				CASE "[取消]"
					CALL 口上変数初期化
				CASEELSE
					CLEARLINE 1
					REUSELASTLINE  
					GOTO LOOP_MESSAGE
			ENDSELECT

		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_11_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 11
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_洞窟
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = 会話アイコン
		ENDIF
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "12_1")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4) == 0
				CALL 知識技能所持者検索("調合知識", 1)
				IF RESULT > -1
					WSTR:(K++) = %CALLNAME:RESULT%发现此处菌类可作爆炸物原料。
					WSTR:(K++) = 简单调合即可制成对魔物特攻道具，采集部分备用。
					WSTR:(K++) = 获得３个投掷炸弹！
					SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
					CALL アイテム増減汎用処理("投掷炸弹", 3)
				ELSE
					KSTR:(K++) = 发现散发微光的菌类。
					KSTR:(K++) = 若掌握调合知识或许能制成特殊物品。
				ENDIF
				CALL メッセージ欄表示用関数(,,,0)
			ELSE
				KSTR:(K++) = 过度采集恐致生态破坏，就此收手。
				CALL メッセージ欄表示用関数(,,,0)
			ENDIF
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 沿河下行至浅滩区域，此处未见魔物踪迹。
			WSTR:(K++) = 周围遍布发光菌类，营造出梦幻般的景致。
			CALL 知識技能所持者検索("調合知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				WSTR:(K++) = %CALLNAME:LOCAL%察觉这些菌类可作为爆炸物原料。
				KSTR:(K++) = 简单调合即可制成对魔物特攻道具，采集部分备用。_PAGE
				KSTR:(K++) = 获得３个投掷炸弹！
				SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
				CALL アイテム増減汎用処理("投掷炸弹", 3)
			ELSE
				WSTR:(K++) = 虽可利用调合知识制作物品……
				KSTR:(K++) = 但未见其他异常状况，继续前进为佳。
			ENDIF
			CALL メッセージ欄表示用関数()
			SETBIT ダンジョン構造配列_人食い鳥の島:12:1, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_12_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 12
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_洞窟
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "13_1")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "13_2")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			敵BATTLE_STATE_STR:0:エネミー名 = Lv4_水母娘
			敵BATTLE_STATE_STR:3:エネミー名 = Lv4_水元素
			敵BATTLE_STATE_STR:4:エネミー名 = Lv4_水母娘
			CALL 雑魚敵繰り返し戦闘処理
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 洞窟深处湿气愈发凝重。
			WSTR:(K++) = 与此同时，喜好潮湿的魔物游荡踪迹也越发频繁。
			KSTR:(K++) = 若退路遭封堵将十分棘手，应在此处歼灭敌群。
			CALL メッセージ欄表示用関数()

			敵BATTLE_STATE_STR:0:エネミー名 = Lv4_水母娘
			敵BATTLE_STATE_STR:3:エネミー名 = Lv4_水元素
			敵BATTLE_STATE_STR:4:エネミー名 = Lv4_水母娘
			CALL 雑魚敵遭遇汎用処理

			SETBIT ダンジョン構造配列_人食い鳥の島:13:1, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:13:2, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_13_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 13
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_洞窟
		IF ダンジョン内一時変数:0 == 0
			ダンジョンマス画像URL_重ね表示 = えっちハート
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
		IF ダンジョン内一時変数:0
		ELSE
			CALL ダンジョンハプニング基本処理()
			IF RESULT
				ダンジョン内一時変数:0 = 1
			ENDIF
			CALL 口上変数初期化
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_13_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 13
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_洞窟
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "14_0")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 洞窟角落散落着碎裂的骸骨。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 洞窟角落散落着碎裂的骸骨。
			WSTR:(K++) = 无法辨识种属，或许是食人鸟猎杀的魔物或人类遗骸。
			KSTR:(K++) = 你们简短默哀后继续前进。
			CALL メッセージ欄表示用関数()

			SETBIT ダンジョン構造配列_人食い鳥の島:14:0, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_14_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 14
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_洞窟
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = エネミーアイコン
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = 食人鸟群已迁徙他处。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 洞窟深处存在高顶洞室。
			WSTR:(K++) = 室内排列着数个巨型鸟巢，聚集着大批食人鸟。
			KSTR:(K++) = 清剿巢穴将引发连续战斗，准备就绪了吗？_PAGE
			KSTR:(K++) = 要与魔物群交战吗？（二连战）
			KSTR:(K++) = BUTTON_[确定]
			KSTR:(K++) = BUTTON_[取消]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[确定]"
					敵BATTLE_STATE_STR:1:エネミー名 = Lv4_食人鸟
					敵BATTLE_STATE_STR:2:エネミー名 = Lv4_食人鸟
					敵BATTLE_STATE_STR:4:エネミー名 = Lv4_食人鸟
					CALL 雑魚敵遭遇汎用処理
					IF RESULT == 0
						敵BATTLE_STATE_STR:1:エネミー名 = Lv4_食人鸟
						敵BATTLE_STATE_STR:3:エネミー名 = Lv6_食人鸟
						敵BATTLE_STATE_STR:5:エネミー名 = Lv4_食人鸟
						敵BATTLE_STATE_STR:7:エネミー名 = Lv4_食人鸟
						CALL 雑魚敵遭遇汎用処理
						IF RESULT == 0
							SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
							残り巣の数_人食い鳥の島 -= 1
							CALL 口上変数初期化
							WSTR:(K++) = 你们成功剿灭食人鸟并摧毁巢穴。
							WSTR:(K++) = 幸存的食人鸟应不敢再返回此地。
							KSTR:(K++) = 残存巢穴数：{残り巣の数_人食い鳥の島}个
							CALL メッセージ欄表示用関数()
						ENDIF
					ENDIF
					CALL 口上変数初期化
				CASE "[取消]"
					CALL 口上変数初期化
				CASEELSE
					CLEARLINE 1
					REUSELASTLINE  
					GOTO LOOP_MESSAGE
			ENDSELECT
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_9_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 9
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_洞窟
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "10_3")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			敵BATTLE_STATE_STR:0:エネミー名 = Lv4_水元素
			敵BATTLE_STATE_STR:1:エネミー名 = Lv4_水元素
			敵BATTLE_STATE_STR:3:エネミー名 = Lv4_水元素
			CALL 雑魚敵繰り返し戦闘処理
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 洞窟行进间，水声中混杂着逼近的气息……！
			KSTR:(K++) = 元素精灵型敌人！它们正向入侵者发起攻势！
			CALL メッセージ欄表示用関数()

			敵BATTLE_STATE_STR:0:エネミー名 = Lv4_水元素
			敵BATTLE_STATE_STR:1:エネミー名 = Lv4_水元素
			敵BATTLE_STATE_STR:3:エネミー名 = Lv4_水元素
			CALL 雑魚敵遭遇汎用処理
			
			SETBIT ダンジョン構造配列_人食い鳥の島:10:3, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_10_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 10
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_洞窟
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "11_4")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "11_5")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 通道被修整得光滑平整，呈现人工开凿痕迹。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 击退精灵群后，通道呈现出明显人工修整的平整路面。
			WSTR:(K++) = 根据记录此岛已荒废五十余年……
			KSTR:(K++) = 或是古代采掘场遗迹？
			CALL メッセージ欄表示用関数()
			
			SETBIT ダンジョン構造配列_人食い鳥の島:11:4, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:11:5, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_11_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 11
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_洞窟
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 巨大门扉尚无开启迹象。
			KSTR:(K++) = ※迷宫通关后将触发调查门扉事件。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 通道尽头矗立着饰有宗教纹样的巨门。
			WSTR:(K++) = 未见门环或锁孔，推拉皆无法撼动分毫。
			WSTR:(K++) = 虽年代久远……或许艾拉知晓其中奥秘？
			KSTR:(K++) = ※迷宫通关后将触发调查门扉事件。
			CALL メッセージ欄表示用関数()
			
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_11_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 11
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_洞窟
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = 会話アイコン
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = 宝石已被剥离，此处空无一物。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 道路尽头的岩壁嵌有散发奇异光辉的宝石。
			CALL 知識技能所持者検索("錬金知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				WSTR:(K++) = %CALLNAME:LOCAL%察觉该宝石具有操纵魔物之力。
				WSTR:(K++) = 洞窟内的水元素精灵正是受其吸引聚集。
				WSTR:(K++) = 或许能借此驯化魔物……（※未实装）
				KSTR:(K++) = %CALLNAME:PLAYER%决定带回宝石进行研究。_PAGE
				KSTR:(K++) = %CALLNAME:PLAYER%获得了魔物使役宝石・E级！
				ITEM:魔物使役宝石・E级 = 1
				SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
			ELSE
				WSTR:(K++) = 虽似秘宝，但贸然触碰此类宝石极其危险。
				WSTR:(K++) = 至少应在了解其特性前保持距离。
				KSTR:(K++) = 若掌握炼金术知识或可解析……
			ENDIF
			CALL メッセージ欄表示用関数()
		ENDIF
		CALL 画面再描画
ENDSELECT

;---------------------------------------------------------------------------
;真ん中ルート（巣一個＋ボス巣）
;砂漠
;---------------------------------------------------------------------------

@ダンジョンマス情報_人食い鳥の島_2_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 2
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "4_2")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 全岛弥漫着风与土的魔力。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 全岛弥漫着风与土的魔力。
			WSTR:(K++) = 形成这片缺乏绿意的荒野地貌，或许因干燥土壤难以滋养多数植物。
			KSTR:(K++) = 即便驱逐恶鸟，这般贫瘠也难以开发利用。
			KSTR:(K++) = 除非有彻底改变岛屿属性的手段……目前显然无法实现。
			CALL メッセージ欄表示用関数()
			SETBIT ダンジョン構造配列_人食い鳥の島:4:2, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_4_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 4
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "6_3")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ == 0
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			SETBIT ダンジョン構造配列_人食い鳥の島:6:3, 1
		ENDIF
		CALL 口上変数初期化
		KSTR:(K++) = 荒野无止尽延伸，继续前进或许会有转机。
		CALL メッセージ欄表示用関数(,,,0)
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_6_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 6
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 你们向东穿越荒野。
			WSTR:(K++) = 随着行进，岩石渐稀，地表愈发干燥，砂砾越发细碎。
			KSTR:(K++) = 翻越一座沙丘后，地貌已完全转变为沙漠景观。_PAGE
			WSTR:(K++) = 食人鸟在你们头顶悠然盘旋。
			KSTR:(K++) = 沙漠某处必有巢穴。若能速速发现便好……
			CALL メッセージ欄表示用関数()

			SETBIT ダンジョン構造配列_人食い鳥の島:16:3, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:16:3, 2
			SETBIT ダンジョン構造配列_人食い鳥の島:17:2, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:17:3, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:17:4, 1
		ENDIF
		ダンジョンマス画像URL_伏せ状態 = 壁_砂漠
		ダンジョン現在位置:0 = 16
		ダンジョン現在位置:1 = 3
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_16_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 16
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "17_2")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "17_3")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "17_4")
	CASE "マスイベント"
		CALL 口上変数初期化
		ダンジョンマス画像URL_伏せ状態 = 壁_岩
		ダンジョン現在位置:0 = 6
		ダンジョン現在位置:1 = 3
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_17_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 17
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "18_1")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			敵BATTLE_STATE_STR:0:エネミー名 = Lv5_沙鱼
			敵BATTLE_STATE_STR:3:エネミー名 = Lv5_沙鱼
			CALL 雑魚敵繰り返し戦闘処理
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 看似死寂的沙漠实则暗藏独特生态。
			WSTR:(K++) = 既有汲取夜露的仙人掌，也有吞噬矿砂的沙虫。
			KSTR:(K++) = 当然……还有此刻袭来的沙海猎食者——沙鱼！
			CALL メッセージ欄表示用関数()

			敵BATTLE_STATE_STR:0:エネミー名 = Lv5_沙鱼
			敵BATTLE_STATE_STR:3:エネミー名 = Lv5_沙鱼
			CALL 雑魚敵遭遇汎用処理
			
			SETBIT ダンジョン構造配列_人食い鳥の島:18:1, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_18_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 18
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4) == 0 && GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 5) == 0
			ダンジョンマス画像URL_重ね表示 = 会話アイコン
		ENDIF
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "19_0")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = 迷惑你们的海市蜃楼已然消散。
			CALL メッセージ欄表示用関数(,,,0)
		ELSEIF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 5)
			KSTR:(K++) = 你们已掌握正确路线。不会再迷失方向。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 跋涉许久，周遭景致毫无变化。
			WSTR:(K++) = 试图深入寻找巢穴……
			KSTR:(K++) = 却不知不觉回到了原点。
			CALL メッセージ欄表示用関数()

			CALL 知識技能所持者検索("魔法知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				CALL 口上変数初期化
				WSTR:(K++) = 感知到异常魔力波动……
				WSTR:(K++) = %CALLNAME:LOCAL%察觉沙漠魔力在此汇聚，制造幻象迷惑旅人。
				WSTR:(K++) = 似乎是沙漠特有的自然现象。
				WSTR:(K++) = 数次咏唱驱魔咒文后，幻影如雾气消散。
				KSTR:(K++) = 前路已然清晰，继续前进。
				CALL メッセージ欄表示用関数()
				SETBIT ダンジョン構造配列_人食い鳥の島:19:0, 1
				SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
			ELSE
				CALL 口上変数初期化
				WSTR:(K++) = 感知到异常魔力波动……
				WSTR:(K++) = 若具备魔法知识或可勘破玄机，但此刻你们束手无策。
				KSTR:(K++) = 要强行突破吗？
				KSTR:(K++) = BUTTON_[确定]
				KSTR:(K++) = BUTTON_[取消]
				CALL メッセージ欄表示用関数(,,,0)
				CALL 口上変数初期化
				$LOOP_MESSAGE
				INPUTS
				SELECTCASE RESULTS
					CASE "[确定]"
						WSTR:(K++) = 你们以最笨拙的方式地毯式搜索沙漠路线。
						WSTR:(K++) = 虽耗尽体力，终寻得突破之法。
						KSTR:(K++) = 全员ＨＰ减少１００点。
						CALL メッセージ欄表示用関数()
						SETBIT ダンジョン構造配列_人食い鳥の島:19:0, 1
						SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 5
						FOR LOCAL, 0, 4
							IF BATTLE_STATE:LOCAL:キャラ登録番号 < 1
								BREAK
							ENDIF
							BATTLE_STATE:LOCAL:ＨＰ = MAX(BATTLE_STATE:LOCAL:ＨＰ - 100, 1)
						NEXT
					CASE "[取消]"
						WSTR:(K++) = 不必在此徒耗精力。
						KSTR:(K++) = 整备充分后再来挑战。
						CALL メッセージ欄表示用関数()
					CASEELSE
						CLEARLINE 1
					REUSELASTLINE  
						GOTO LOOP_MESSAGE
				ENDSELECT
			ENDIF
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_19_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 19
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "21_0")
	CASE "マスイベント"
		CALL 口上変数初期化
		SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
		SETBIT ダンジョン構造配列_人食い鳥の島:21:0, 1
		KSTR:(K++) = 静立亦汗如雨下。
		KSTR:(K++) = 务必注意水分补给。
		CALL メッセージ欄表示用関数(,,,0)
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_21_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 21
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = 会話アイコン
		ENDIF
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "22_0")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "22_2")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = 附近似乎存在绿洲。
			CALL メッセージ欄表示用関数(,,,0)
		ELSEIF 初来訪マス判定用フラグ == 0
			CALL 知識技能所持者検索("魔物知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				WSTR:(K++) = 小型蜥蜴型魔物在你们脚边快速窜过。
				WSTR:(K++) = %CALLNAME:LOCAL%见状想起这类魔物只栖息在水源附近。
				WSTR:(K++) = 追踪蜥蜴踪迹，在沙丘环绕的低地发现绿洲。
				KSTR:(K++) = 寻常路线定会错过此处，你们欣喜地靠近水源。
				CALL メッセージ欄表示用関数()
				SETBIT ダンジョン構造配列_人食い鳥の島:22:0, 1
				SETBIT ダンジョン構造配列_人食い鳥の島:22:0, 2
				SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
			ELSE
				KSTR:(K++) = 小型蜥蜴型魔物在你们脚边快速窜过。
				KSTR:(K++) = 若通晓魔物知识或可解析其习性。
				CALL メッセージ欄表示用関数(,,,0)
			ENDIF
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 小型蜥蜴型魔物在你们脚边快速窜过。

			CALL 知識技能所持者検索("魔物知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				WSTR:(K++) = %CALLNAME:LOCAL%见状想起这类魔物只栖息在水源附近。
				WSTR:(K++) = 追踪蜥蜴踪迹，在沙丘环绕的低地发现绿洲。
				KSTR:(K++) = 寻常路线定会错过此处，你们欣喜地靠近水源。
				CALL メッセージ欄表示用関数()
				SETBIT ダンジョン構造配列_人食い鳥の島:22:0, 1
				SETBIT ダンジョン構造配列_人食い鳥の島:22:0, 2
				SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
			ELSE
				WSTR:(K++) = 此等小型魔物放任亦无危害。
				WSTR:(K++) = 若通晓魔物知识也许能够了解更多细节。
				KSTR:(K++) = 你们目送蜥蜴离去后继续前行。
				CALL メッセージ欄表示用関数()
			ENDIF
			SETBIT ダンジョン構造配列_人食い鳥の島:22:2, 1
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_人食い鳥の島_22_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 22
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		IF ダンジョン内一時変数:1 == 0
			ダンジョンマス画像URL_重ね表示 = 回復アビ
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF ダンジョン内一時変数:1
		ELSE
			KSTR:(K++) = 沙漠中出现清泉，虽范围狭小却滋养着周边草木。
			KSTR:(K++) = 要在此稍作休整吗？
			KSTR:(K++) = （全队状态恢复・效果持续至离开迷宫）
			KSTR:(K++) = BUTTON_[确定]
			KSTR:(K++) = BUTTON_[取消]
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[确定]"
					KSTR:(K++) = 你们在绿洲充分休整恢复了体力！
					CALL メッセージ欄表示用関数()
					ダンジョン内一時変数:1 = 1
					FOR LOCAL, 0, 4
						IF BATTLE_STATE:LOCAL:キャラ登録番号 < 1
							BREAK
						ENDIF
						BATTLE_STATE:LOCAL:ＨＰ = BATTLE_STATE:LOCAL:最大ＨＰ
						BATTLE_STATE:LOCAL:ＭＰ = BATTLE_STATE:LOCAL:最大ＭＰ
					NEXT
				CASE "[取消]"
					KSTR:(K++) = 尚未疲惫到需要休息，继续前进吧。
					CALL メッセージ欄表示用関数()
				CASEELSE
					CLEARLINE 1
					REUSELASTLINE  
					GOTO LOOP_MESSAGE
			ENDSELECT
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_22_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 22
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "23_3")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			敵BATTLE_STATE_STR:0:エネミー名 = Lv5_沙鱼
			敵BATTLE_STATE_STR:3:エネミー名 = Lv5_沙鱼
			敵BATTLE_STATE_STR:4:エネミー名 = Lv4_食人鸟
			敵BATTLE_STATE_STR:5:エネミー名 = Lv4_食人鸟
			CALL 雑魚敵繰り返し戦闘処理
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 你们向沙漠腹地深入。
			WSTR:(K++) = 食人鸟在头顶盘旋示威，显然是在警告接近巢穴的入侵者。
			KSTR:(K++) = 无视威慑继续前进，鸟群与沙鱼群联合袭来！
			CALL メッセージ欄表示用関数()

			敵BATTLE_STATE_STR:0:エネミー名 = Lv5_沙鱼
			敵BATTLE_STATE_STR:3:エネミー名 = Lv5_沙鱼
			敵BATTLE_STATE_STR:4:エネミー名 = Lv4_食人鸟
			敵BATTLE_STATE_STR:5:エネミー名 = Lv4_食人鸟
			CALL 雑魚敵遭遇汎用処理
			
			WSTR:(K++) = 如此严密的警戒意味着前方可能存在族群首领巢穴。
			KSTR:(K++) = 务必做好万全准备再行深入。
			CALL メッセージ欄表示用関数()
			
			SETBIT ダンジョン構造配列_人食い鳥の島:23:3, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_23_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 23
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		IF 残り巣の数_人食い鳥の島 == 1 || ダンジョン内一時変数:4 == 0
			ダンジョンマス画像URL_重ね表示 = エネミーアイコン_赤
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
		IF 残り巣の数_人食い鳥の島 > 1
			WSTR:(K++) = 眼前矗立着格外巨大的食人鸟巢穴，但巢主似乎外出。
			WSTR:(K++) = 先去清剿其他巢穴后再折返此处吧。
			CALL メッセージ欄表示用関数()
		ELSEIF 残り巣の数_人食い鳥の島 == 1
			WSTR:(K++) = 前方出现规模惊人的食人鸟巢穴。
			WSTR:(K++) = 与巢穴相称的巨型食人鸟正踞守其中。
			KSTR:(K++) = 清剿巢穴将引发连续战斗，准备就绪了吗？_PAGE
			KSTR:(K++) = 要与食人鸟首领交战吗？（二连战＋BOSS战）
			KSTR:(K++) = BUTTON_[确定]
			KSTR:(K++) = BUTTON_[取消]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[确定]"
					敵BATTLE_STATE_STR:1:エネミー名 = Lv6_食人鸟
					敵BATTLE_STATE_STR:2:エネミー名 = Lv6_食人鸟
					敵BATTLE_STATE_STR:4:エネミー名 = Lv6_食人鸟
					CALL 雑魚敵遭遇汎用処理
					IF RESULT == 0
						敵BATTLE_STATE_STR:1:エネミー名 = Lv4_食人鸟
						敵BATTLE_STATE_STR:3:エネミー名 = Lv6_食人鸟
						敵BATTLE_STATE_STR:5:エネミー名 = Lv6_食人鸟
						敵BATTLE_STATE_STR:7:エネミー名 = Lv4_食人鸟
						CALL 雑魚敵遭遇汎用処理
						IF RESULT == 0
							敵BATTLE_STATE_STR:0:エネミー名 = Lv10_食人鸟首领
							敵BATTLE_STATE_STR:4:エネミー名 = Lv6_食人鸟
							敵BATTLE_STATE_STR:5:エネミー名 = Lv6_食人鸟
							CALL BATTLE_MAIN_LOOP
							IF RESULT == 0
								;勝利時
								ダンジョン表示モード = マップ画面
								CALL 口上変数初期化
								WSTR:(K++) = %CALLNAME:PLAYER%成功讨伐食人鸟首领！！
								WSTR:(K++) = ・因航线开放提升人气度上限！
								WSTR:(K++) = ・航线开放扩充道具店、饰品店商品种类！（未实装）
								WSTR:(K++) = ・解锁新事件！
								WSTR:(K++) = ・从食人鸟首领处获得「飞翔之戒」！
								WSTR:(K++) = ・从食人鸟首领处获得「猛禽耳饰」！
								CALL 汎用指輪取得処理("飞翔之戒", 2)
								CALL 汎用耳飾り取得処理("猛禽耳饰")
								KSTR:(K++) = 即将脱离迷宫。
								CALL メッセージ欄表示用関数()
								探索中全体カウント:追加信頼度 += 1000
								ダンジョン終了状況 = 討伐達成
								ダンジョンクリアフラグ_人食い鳥の島 = 1
								残り巣の数_人食い鳥の島 = 0
							ELSEIF RESULT == 1
								;全滅時
								ダンジョン表示モード = マップ画面
								CALL 口上変数初期化
								KSTR:(K++) = %CALLNAME:PLAYER%带着力竭的同伴们艰难脱险…
								CALL メッセージ欄表示用関数()
								ダンジョン終了状況 = 全滅
							ELSEIF RESULT == -1
								;逃走時
								ダンジョン表示モード = マップ画面
							ENDIF
						ENDIF
					ENDIF
					CALL 口上変数初期化
				CASE "[取消]"
					CALL 口上変数初期化
				CASEELSE
					CLEARLINE 1
					REUSELASTLINE  
					GOTO LOOP_MESSAGE
			ENDSELECT
		ELSEIF ダンジョンクリアフラグ_人食い鳥の島
			IF ダンジョン内一時変数:4 == 0
				KSTR:(K++) = 要回想与食人鸟首领交战的记忆吗？
				KSTR:(K++) = （与BOSS再战，二连战＋BOSS战）
				KSTR:(K++) = BUTTON_[确定]
				KSTR:(K++) = BUTTON_[取消]
				CALL メッセージ欄表示用関数(,,,0)
				$LOOP_MESSAGE2
				INPUTS
				SELECTCASE RESULTS
					CASE "[确定]"
						敵BATTLE_STATE_STR:1:エネミー名 = Lv6_食人鸟
						敵BATTLE_STATE_STR:2:エネミー名 = Lv6_食人鸟
						敵BATTLE_STATE_STR:4:エネミー名 = Lv6_食人鸟
						CALL 雑魚敵遭遇汎用処理
						IF RESULT == 0
							敵BATTLE_STATE_STR:1:エネミー名 = Lv4_食人鸟
							敵BATTLE_STATE_STR:3:エネミー名 = Lv6_食人鸟
							敵BATTLE_STATE_STR:5:エネミー名 = Lv6_食人鸟
							敵BATTLE_STATE_STR:7:エネミー名 = Lv4_食人鸟
							CALL 雑魚敵遭遇汎用処理
							IF RESULT == 0
								敵BATTLE_STATE_STR:0:エネミー名 = Lv10_食人鸟首领
								敵BATTLE_STATE_STR:4:エネミー名 = Lv6_食人鸟
								敵BATTLE_STATE_STR:5:エネミー名 = Lv6_食人鸟
								CALL BATTLE_MAIN_LOOP
								IF RESULT == 0
									;勝利時
									ダンジョン表示モード = マップ画面
									CALL 口上変数初期化
									WSTR:(K++) = %CALLNAME:PLAYER%成功讨伐食人鸟首领！！
									WSTR:(K++) = 从食人鸟首领处获得「飞翔之戒」！
									WSTR:(K++) = 从食人鸟首领处获得「猛禽耳饰」！
									WSTR:(K++) = 已通关食人鸟之岛区域，即将返回。
									CALL 汎用指輪取得処理("飞翔之戒", 2)
									CALL 汎用耳飾り取得処理("猛禽耳饰")
									CALL メッセージ欄表示用関数()
									探索中全体カウント:追加信頼度 += 1000
									ダンジョン内一時変数:4 = 1
								ELSEIF RESULT == 1
									;全滅時
									ダンジョン表示モード = マップ画面
									CALL 口上変数初期化
									KSTR:(K++) = %CALLNAME:PLAYER%带着力竭的同伴们艰难脱险…
									CALL メッセージ欄表示用関数()
									ダンジョン終了状況 = 全滅
								ELSEIF RESULT == -1
									;逃走時
									ダンジョン表示モード = マップ画面
								ENDIF
							ENDIF
						ENDIF
						CALL 口上変数初期化
					CASE "[取消]"
						CALL 口上変数初期化
					CASEELSE
						CLEARLINE 1
						REUSELASTLINE  
						GOTO LOOP_MESSAGE2
				ENDSELECT
			ENDIF
		ENDIF
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_17_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 17
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = 会話アイコン
		ENDIF
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "18_3")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = 发现布满尖刺的仙人掌，保持安全距离为妙。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 沙漠中零星分布着仙人掌群落。
			WSTR:(K++) = 在这难辨方位的死寂之地，它们是珍贵的路标。
			KSTR:(K++) = 其中发现一株异样多刺的品种。_PAGE
			WSTR:(K++) = 未见同类，实属罕见异种……
			KSTR:(K++) = 要靠近观察吗？
			KSTR:(K++) = BUTTON_[确定]
			KSTR:(K++) = BUTTON_[取消]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			CALL 口上変数初期化
			SELECTCASE RESULTS
				CASE "[确定]"
					WSTR:(K++) = 你们刚一靠近，仙人掌表皮突然爆裂！
					WSTR:(K++) = 尖刺带有繁殖用种子，乃此类植物的生存策略。
					WSTR:(K++) = 强忍疼痛拔出扎入皮肤的棘刺。下次切莫轻率接近……
					KSTR:(K++) = 全员ＨＰ减少５０点。
					CALL メッセージ欄表示用関数()
					FOR LOCAL, 0, 4
						IF BATTLE_STATE:LOCAL:キャラ登録番号 < 1
							BREAK
						ENDIF
						BATTLE_STATE:LOCAL:ＨＰ = MAX(BATTLE_STATE:LOCAL:ＨＰ - 50, 1)
					NEXT
				CASE "[取消]"
					WSTR:(K++) = 直觉警告危险逼近，明智选择绕行。
					KSTR:(K++) = 你们决定加速通过。
					CALL メッセージ欄表示用関数()
				CASEELSE
					CLEARLINE 1
					REUSELASTLINE  
					GOTO LOOP_MESSAGE
			ENDSELECT
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
			SETBIT ダンジョン構造配列_人食い鳥の島:18:3, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_18_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 18
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "19_2")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "19_4")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 巨型沙丘阻隔前路，需从左右两侧绕行。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 看似平坦的沙漠实则暗藏视野盲区。
			WSTR:(K++) = 起伏的沙丘形成复杂地形。
			WSTR:(K++) = 此刻横亘眼前的巨型沙丘尤为险峻。
			KSTR:(K++) = 强行翻越消耗过大，建议左右择路绕行。
			CALL メッセージ欄表示用関数()
			SETBIT ダンジョン構造配列_人食い鳥の島:19:2, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:19:4, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_19_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 19
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
		ELSE
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = 什么也没有。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 沙丘背面散落着吸收魔力固化的砂石。
			KSTR:(K++) = 多数触之即碎回归沙粒形态，
			WSTR:(K++) = 少数完全固化成可用魔石。
			KSTR:(K++) = %CALLNAME:PLAYER%获得了３颗魔石！
			CALL メッセージ欄表示用関数()
			CALL アイテム増減汎用処理("魔石", 3)
			CALL 口上変数初期化
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_19_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 19
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "20_2")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "20_4")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			敵BATTLE_STATE_STR:0:エネミー名 = Lv5_沙鱼
			敵BATTLE_STATE_STR:2:エネミー名 = Lv4_食人鸟
			敵BATTLE_STATE_STR:4:エネミー名 = Lv6_食人鸟
			CALL 雑魚敵繰り返し戦闘処理
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 绕行至沙丘背面时，遭遇沙鱼与食人鸟协同伏击！
			KSTR:(K++) = 二者形成共生关系，联合向你们发起进攻！
			CALL メッセージ欄表示用関数()

			敵BATTLE_STATE_STR:0:エネミー名 = Lv5_沙鱼
			敵BATTLE_STATE_STR:2:エネミー名 = Lv4_食人鸟
			敵BATTLE_STATE_STR:4:エネミー名 = Lv6_食人鸟
			CALL 雑魚敵遭遇汎用処理
			
			CALL 口上変数初期化
			WSTR:(K++) = 鱼群与鸟群皆非远途猎食状态。
			KSTR:(K++) = 推测附近必有巢穴，仔细搜索周边区域。
			CALL メッセージ欄表示用関数()
			SETBIT ダンジョン構造配列_人食い鳥の島:20:2, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:20:4, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_20_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 20
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "21_3")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:21:3, 4)
			KSTR:(K++) = 前方巢穴已被清剿完毕。
			CALL メッセージ欄表示用関数(,,,0)
		ELSEIF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 前方应存在食人鸟巢穴。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 目击食人鸟群降落在不远处沙丘阴影中。
			KSTR:(K++) = 推测该处存在巢穴。
			WSTR:(K++) = 巢内必驻守大量敌群。
			KSTR:(K++) = 将面临连续战斗，请做好万全准备。
			CALL メッセージ欄表示用関数()
			SETBIT ダンジョン構造配列_人食い鳥の島:21:3, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_20_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 20
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 暂时折返另寻他路。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 你们误入沙丘环绕的复杂地形。
			KSTR:(K++) = 强行攀越消耗过大。
			KSTR:(K++) = 暂时折返另寻他路。
			CALL メッセージ欄表示用関数()
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_21_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 21
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = エネミーアイコン
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = 食人鸟群已迁徙他处。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 沙丘阴影处存在昼夜温差较小的食人鸟巢穴。
			WSTR:(K++) = 同类型巢穴密集分布，可见大量食人鸟活动。
			KSTR:(K++) = 清剿巢穴将引发连续战斗，准备就绪了吗？_PAGE
			KSTR:(K++) = 要与魔物群交战吗？（二连战）
			KSTR:(K++) = BUTTON_[确定]
			KSTR:(K++) = BUTTON_[取消]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[确定]"
					敵BATTLE_STATE_STR:1:エネミー名 = Lv4_食人鸟
					敵BATTLE_STATE_STR:2:エネミー名 = Lv4_食人鸟
					敵BATTLE_STATE_STR:4:エネミー名 = Lv4_食人鸟
					CALL 雑魚敵遭遇汎用処理
					IF RESULT == 0
						敵BATTLE_STATE_STR:1:エネミー名 = Lv4_食人鸟
						敵BATTLE_STATE_STR:3:エネミー名 = Lv4_食人鸟
						敵BATTLE_STATE_STR:5:エネミー名 = Lv6_食人鸟
						敵BATTLE_STATE_STR:7:エネミー名 = Lv4_食人鸟
						CALL 雑魚敵遭遇汎用処理
						IF RESULT == 0
							SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
							残り巣の数_人食い鳥の島 -= 1
							CALL 口上変数初期化
							WSTR:(K++) = 你们成功剿灭食人鸟并摧毁巢穴。
							WSTR:(K++) = 幸存的食人鸟应不敢再返回此地。
							KSTR:(K++) = 残存巢穴数：{残り巣の数_人食い鳥の島}个
							CALL メッセージ欄表示用関数()
						ENDIF
					ENDIF
					CALL 口上変数初期化
				CASE "[取消]"
					CALL 口上変数初期化
				CASEELSE
					CLEARLINE 1
					REUSELASTLINE  
					GOTO LOOP_MESSAGE
			ENDSELECT
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_17_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 17
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "18_5")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 烈日炙烤下，仅是行走便汗流浃背。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 烈日炙烤下，仅是行走便汗流浃背。
			WSTR:(K++) = 听说此岛至少五十年无人定居.……
			WSTR:(K++) = 目睹如此严酷环境后顿觉合理。
			KSTR:(K++) = 你们擦拭汗水继续前行。
			CALL メッセージ欄表示用関数()
			SETBIT ダンジョン構造配列_人食い鳥の島:18:5, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_18_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 18
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
		ELSE
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱
		ENDIF
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "19_6")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = 什么也没有。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 沙漠行进间踢到坚硬物体。
			WSTR:(K++) = 拾起发现是仙人掌树脂凝固的琥珀。
			WSTR:(K++) = 虽形制粗糙，但可卖出尚可价钱。返程后变现吧。
			KSTR:(K++) = %CALLNAME:PLAYER%获得了5000卢比！
			CALL メッセージ欄表示用関数()
			MONEY += 5000
			CALL 口上変数初期化
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
			SETBIT ダンジョン構造配列_人食い鳥の島:19:6, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_19_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 19
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "21_6")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			敵BATTLE_STATE_STR:0:エネミー名 = Lv4_食人鸟
			敵BATTLE_STATE_STR:3:エネミー名 = Lv4_食人鸟
			敵BATTLE_STATE_STR:4:エネミー名 = Lv4_食人鸟
			CALL 雑魚敵繰り返し戦闘処理
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			KSTR:(K++) = 察觉你们行踪的食人鸟群自高空俯冲袭来！
			CALL メッセージ欄表示用関数()

			敵BATTLE_STATE_STR:0:エネミー名 = Lv4_食人鸟
			敵BATTLE_STATE_STR:3:エネミー名 = Lv4_食人鸟
			敵BATTLE_STATE_STR:4:エネミー名 = Lv4_食人鸟
			CALL 雑魚敵遭遇汎用処理
			
			SETBIT ダンジョン構造配列_人食い鳥の島:21:6, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_21_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 21
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "22_4")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "22_7")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 沙中掩埋着巨型骸骨。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 沙中掩埋的巨型骸骨风化严重，难以辨识物种。
			WSTR:(K++) = 探索至今未见体型如此庞大的魔物。
			WSTR:(K++) = 推测是已灭绝或他岛迁徙的物种遗骸。
			KSTR:(K++) = 你们怀古思幽间继续前行。
			CALL メッセージ欄表示用関数()
			SETBIT ダンジョン構造配列_人食い鳥の島:22:4, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:22:7, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_22_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 22
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		IF ダンジョン内一時変数:2 == 0
			ダンジョンマス画像URL_重ね表示 = えっちハート
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF ダンジョン内一時変数:2
		ELSE
			CALL ダンジョンハプニング基本処理()
			IF RESULT
				ダンジョン内一時変数:2 = 1
			ENDIF
			CALL 口上変数初期化
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_22_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 22
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
		ELSE
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = 什么也没有。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 巨骨阴影处发现野草群落。
			WSTR:(K++) = 依托微量湿气的沙地孕育着繁茂植被。
			WSTR:(K++) = 采集部分药用植物，注意保持生态平衡。
			KSTR:(K++) = %CALLNAME:PLAYER%获得了３个药草！
			CALL メッセージ欄表示用関数()
			CALL アイテム増減汎用処理("药草", 3)
			CALL 口上変数初期化
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
		ENDIF
		CALL 画面再描画
ENDSELECT



;---------------------------------------------------------------------------
;下ルート（巣２個）
;断崖
;---------------------------------------------------------------------------

@ダンジョンマス情報_人食い鳥の島_2_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 2
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "3_5")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 目睹食人鸟群自由翱翔于天际。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 向南穿越荒野时，
			WSTR:(K++) = 目睹食人鸟群自由翱翔于天际。
			WSTR:(K++) = 它们甚至具备跨岛飞行的卓越能力。
			WSTR:(K++) = 若能驯化必有大用……可惜凶性难驯。
			KSTR:(K++) = 你们收回仰望天空的视线继续前行。
			CALL メッセージ欄表示用関数()
			SETBIT ダンジョン構造配列_人食い鳥の島:3:5, 1
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_人食い鳥の島_3_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 3
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "4_7")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ == 0
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			SETBIT ダンジョン構造配列_人食い鳥の島:4:7, 1
		ENDIF
		CALL 口上変数初期化
		KSTR:(K++) = 荒野无止尽延伸，继续前进或许会有转机。
		CALL メッセージ欄表示用関数(,,,0)
ENDSELECT

@ダンジョンマス情報_人食い鳥の島_4_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 4
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 深入荒野遭遇大地裂谷。
			WSTR:(K++) = 目击食人鸟群降入谷底。
			WSTR:(K++) = 搜寻可通行路径时发现险峻小道。
			KSTR:(K++) = 需谨慎行进避免失足坠落。
			CALL メッセージ欄表示用関数()
			SETBIT ダンジョン構造配列_人食い鳥の島:24:7, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:24:7, 2
			SETBIT ダンジョン構造配列_人食い鳥の島:26:6, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:26:7, 1
		ENDIF
		ダンジョン現在位置:0 = 24
		ダンジョン現在位置:1 = 7
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_24_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 24
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "26_6")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "26_7")
	CASE "マスイベント"
		CALL 口上変数初期化
		ダンジョン現在位置:0 = 4
		ダンジョン現在位置:1 = 7
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_人食い鳥の島_26_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 26
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "27_4")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 沿崖壁缓降深入谷底。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 你们沿着崖壁蜿蜒小道谨慎下行。
			WSTR:(K++) = 随着深度增加，狭窄的落脚处逐渐开阔。
			WSTR:(K++) = 虽担忧遭遇突袭，但谨慎应对仍可战斗。
			KSTR:(K++) = 此地不宜久留，速速寻找巢穴。
			CALL メッセージ欄表示用関数()
			SETBIT ダンジョン構造配列_人食い鳥の島:27:4, 1
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_人食い鳥の島_27_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 27
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		IF !GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			ダンジョンマス画像URL_重ね表示 = 会話アイコン
		ENDIF
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "28_1")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "28_3")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = 发现牢固藤蔓结成的绳梯。
			CALL メッセージ欄表示用関数(,,,0)
		ELSEIF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 悬崖底部有一个食人鸟巢。
			CALL メッセージ欄表示用関数(,,,0)
			IF GETBIT(ダンジョン構造配列_人食い鳥の島:30:8, 4)
				WAIT
				CALL 口上変数初期化
				WSTR:(K++) = 你们收集岩壁藤蔓制成应急绳梯。
				WSTR:(K++) = 藤条强韧足以承受攀爬重量。
				KSTR:(K++) = 队员们依次降入裂谷深处。
				CALL メッセージ欄表示用関数(,,,0)
				SETBIT ダンジョン構造配列_人食い鳥の島:28:1, 1
				CLEARBIT ダンジョン構造配列_人食い鳥の島:28:1, 3
				SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
			ENDIF
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			SETBIT ダンジョン構造配列_人食い鳥の島:28:3, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:28:1, 3
			CALL 口上変数初期化
			WSTR:(K++) = 中途发现崖壁间的食人鸟巢穴。
			WSTR:(K++) = 但该处被绝壁环绕，未见下行通路。
			KSTR:(K++) = 若有特殊手段或可抵达……
			CALL メッセージ欄表示用関数()
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_28_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 28
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "30_0")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "30_1")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 自上方观测到的巢穴位于稍远位置。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 你们降入谷底。先前观测到的巢穴位于不远处。
			WSTR:(K++) = 谷底散落着食人鸟搜集的各类物品。
			WSTR:(K++) = 虽多为无用杂物，但或许埋藏可用之物。
			KSTR:(K++) = 可稍作探索。
			CALL メッセージ欄表示用関数()
			SETBIT ダンジョン構造配列_人食い鳥の島:30:0, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:30:1, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_30_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 30
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = 会話アイコン
		ENDIF
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "31_1")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 自上方观测到的巢穴位于稍远位置。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 你们向巢穴行进时，忽闻人声传来。
			WSTR:(K++) = 「这边这边！快来这里！」
			KSTR:(K++) = 循声望去，背负巨大行囊的青年藏身岩后。_PAGE
			WSTR:(K++) = 「诸位也是被恶鸟掳掠至此？还是说……」
			WSTR:(K++) = 你们摇头解释为清剿食人鸟而来。
			KSTR:(K++) = 「果然如此！诸位上看去就气度不凡！」_PAGE
			WSTR:(K++) = 「实不相瞒，在下突遭恶鸟掳至此地……」
			WSTR:(K++) = 「请你们帮助我好吗？必有重谢！」
			KSTR:(K++) = 青年深深鞠躬恳求。
			CALL メッセージ欄表示用関数()
			$LOOP_MESSAGE_2
			CALL 口上変数初期化
			KSTR:(K++) = 要救助青年吗？
			KSTR:(K++) = BUTTON_[确定]
			KSTR:(K++) = BUTTON_[取消]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[确定]"
					CALL 口上変数初期化
					WSTR:(K++) = 举手之劳且见死不救有违道义。
					WSTR:(K++) = 你们同意护送其至附近港口。
					KSTR:(K++) = 「感激不尽！」_PAGE
					WSTR:(K++) = 「请容在下略表谢意！此物奉上！」
					WSTR:(K++) = 青年打开巨型行囊展示内藏之物。
					KSTR:(K++) = 其中堆满叮当作响的徽章状物件。_PAGE
					WSTR:(K++) = 「这就是所谓的职业证，装备后可以使用各种能力」
					WSTR:(K++) = 「因为是拿来兜售的，所以种类不是很多……」
					KSTR:(K++) = 「谢谢你们不仅帮助我，还送我到港口！还请笑纳！」_PAGE
					WSTR:(K++) = 正如青年所说，这些职业证散发着神秘的力量。
					WSTR:(K++) = 预感推辞无效，你们坦然接受馈赠。
					WSTR:(K++) = 装备职业证即可_COLOR_c0c070_掌握新技能_。
					WSTR:(K++) = 因锻造工艺特殊，_COLOR_0xc0c070_复数成员可共享同种徽章。
					KSTR:(K++) = 建议为同伴们搭配测试不同组合。_PAGE
					WSTR:(K++) = 收下谢礼后你们暂返船只搭载青年。
					KSTR:(K++) = 待探索完毕再送至邻近港口。_PAGE
					WSTR:(K++) = 获得职业证「战士之证」！
					WSTR:(K++) = 获得职业证「骑士之证」！
					WSTR:(K++) = 获得职业证「祭司之证」！
					KSTR:(K++) = 获得职业证「巫师之证」！
					CALL 汎用証取得処理("斗士之证")
					CALL 汎用証取得処理("骑士之证")
					CALL 汎用証取得処理("祭司之证")
					CALL 汎用証取得処理("巫师之证")
				CASE "[取消]"
					CALL 口上変数初期化
					KSTR:(K++) = 「请不要这么说！务请收下！」
					CALL メッセージ欄表示用関数()
					GOTO LOOP_MESSAGE_2
				CASEELSE
					CLEARLINE 1
					REUSELASTLINE  
					GOTO LOOP_MESSAGE
			ENDSELECT
			CALL メッセージ欄表示用関数()
			SETBIT ダンジョン構造配列_人食い鳥の島:31:1, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_30_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 30
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
		ELSE
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = 什么也没有。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 谷底散落各式杂物：碎布片、木箱残骸、断剑……
			WSTR:(K++) = 你们从中发现闪烁微光的戒指。
			WSTR:(K++) = 戒面雕刻小鬼头像的罕见款式。
			WSTR:(K++) = 未见原主线索，作为战利品收取。
			KSTR:(K++) = %CALLNAME:PLAYER%获得了哥布林杀手之戒！
			CALL メッセージ欄表示用関数()
			CALL 汎用指輪取得処理("哥布林杀手之戒")
			CALL 口上変数初期化
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_31_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 31
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = エネミーアイコン
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = 食人鸟群已迁徙他处。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 谷底深处存在食人鸟巢穴。
			WSTR:(K++) = 同类型巢穴密集分布，可见大量食人鸟活动。
			KSTR:(K++) = 清剿巢穴将引发连续战斗，准备就绪了吗？_PAGE
			KSTR:(K++) = 要与魔物群交战吗？（三连战）
			KSTR:(K++) = BUTTON_[确定]
			KSTR:(K++) = BUTTON_[取消]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[确定]"
					敵BATTLE_STATE_STR:1:エネミー名 = Lv4_食人鸟
					敵BATTLE_STATE_STR:2:エネミー名 = Lv4_食人鸟
					敵BATTLE_STATE_STR:4:エネミー名 = Lv4_食人鸟
					敵BATTLE_STATE_STR:7:エネミー名 = Lv4_食人鸟
					CALL 雑魚敵遭遇汎用処理
					IF RESULT == 0
						敵BATTLE_STATE_STR:0:エネミー名 = Lv4_食人鸟
						敵BATTLE_STATE_STR:3:エネミー名 = Lv4_食人鸟
						敵BATTLE_STATE_STR:4:エネミー名 = Lv4_食人鸟
						CALL 雑魚敵遭遇汎用処理
						IF RESULT == 0
							敵BATTLE_STATE_STR:1:エネミー名 = Lv4_食人鸟
							敵BATTLE_STATE_STR:3:エネミー名 = Lv4_食人鸟
							敵BATTLE_STATE_STR:5:エネミー名 = Lv4_食人鸟
							敵BATTLE_STATE_STR:7:エネミー名 = Lv4_食人鸟
							CALL 雑魚敵遭遇汎用処理
							IF RESULT == 0
								SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
								残り巣の数_人食い鳥の島 -= 1
								CALL 口上変数初期化
								WSTR:(K++) = 你们成功剿灭食人鸟并摧毁巢穴。
								WSTR:(K++) = 幸存的食人鸟应不敢再返回此地。
								KSTR:(K++) = 残存巢穴数：{残り巣の数_人食い鳥の島}个
								CALL メッセージ欄表示用関数()
							ENDIF
						ENDIF
					ENDIF
					CALL 口上変数初期化
				CASE "[取消]"
					CALL 口上変数初期化
				CASEELSE
					CLEARLINE 1
					REUSELASTLINE  
					GOTO LOOP_MESSAGE
			ENDSELECT
		ENDIF
		CALL 画面再描画
ENDSELECT



@ダンジョンマス情報_人食い鳥の島_28_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 28
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "29_3")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "30_4")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			敵BATTLE_STATE_STR:0:エネミー名 = Lv5_食人植物
			敵BATTLE_STATE_STR:1:エネミー名 = Lv5_食人植物
			CALL 雑魚敵繰り返し戦闘処理
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 沿崖壁行进时，察觉岩壁藤蔓在微微移动……
			KSTR:(K++) = 不对！这是拟态藤蔓的植物魔物！
			CALL メッセージ欄表示用関数()

			敵BATTLE_STATE_STR:0:エネミー名 = Lv5_食人植物
			敵BATTLE_STATE_STR:1:エネミー名 = Lv5_食人植物
			CALL 雑魚敵遭遇汎用処理
			
			SETBIT ダンジョン構造配列_人食い鳥の島:29:3, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:30:4, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_29_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 29
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "30_2")
	CASE "マスイベント"
		CALL 口上変数初期化
		KSTR:(K++) = 崖壁小道继续向前延伸。
		CALL メッセージ欄表示用関数(,,,0)
		IF 初来訪マス判定用フラグ == 0
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			SETBIT ダンジョン構造配列_人食い鳥の島:30:2, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_30_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 30
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "31_3")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			敵BATTLE_STATE_STR:0:エネミー名 = Lv5_食人植物
			敵BATTLE_STATE_STR:1:エネミー名 = Lv5_食人植物
			敵BATTLE_STATE_STR:2:エネミー名 = Lv5_食人植物
			CALL 雑魚敵繰り返し戦闘処理
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 多条拟态魔藤封锁崖道。
			WSTR:(K++) = 接近必触发战斗，但清道势在必行。
			KSTR:(K++) = 你们摆出战斗架势迎敌。
			CALL メッセージ欄表示用関数()

			敵BATTLE_STATE_STR:0:エネミー名 = Lv5_食人植物
			敵BATTLE_STATE_STR:1:エネミー名 = Lv5_食人植物
			敵BATTLE_STATE_STR:2:エネミー名 = Lv5_食人植物
			CALL 雑魚敵遭遇汎用処理
			
			SETBIT ダンジョン構造配列_人食い鳥の島:31:3, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_31_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 31
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
		ELSE
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = 什么也没有。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 突破植物封锁后，发现地面散落青色矿石。
			WSTR:(K++) = 矿石表面持续渗水，擦拭后仍会缓慢渗出。
			WSTR:(K++) = 此乃赋予治愈之力的「愈疗之石」。
			WSTR:(K++) = 虽然体积太小卖不出去，但稍微加工一下就可以做成耳环。
			KSTR:(K++) = %CALLNAME:PLAYER%获得了治愈耳饰！
			CALL メッセージ欄表示用関数()
			CALL 汎用耳飾り取得処理("治愈耳饰")
			CALL 口上変数初期化
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_30_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 30
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		IF ダンジョン内一時変数:3 == 0
			ダンジョンマス画像URL_重ね表示 = 回復アビ
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF ダンジョン内一時変数:3
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 中途发现小型洞窟。
			KSTR:(K++) = 虽纵深有限，却是理想休憩所。_PAGE
			KSTR:(K++) = 要在此稍作休整吗？
			KSTR:(K++) = （全队状态恢复・效果持续至离开迷宫）
			KSTR:(K++) = BUTTON_[确定]
			KSTR:(K++) = BUTTON_[取消]
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[确定]"
					KSTR:(K++) = 你们在洞穴充分休整恢复了体力！
					CALL メッセージ欄表示用関数()
					ダンジョン内一時変数:3 = 1
					FOR LOCAL, 0, 4
						IF BATTLE_STATE:LOCAL:キャラ登録番号 < 1
							BREAK
						ENDIF
						BATTLE_STATE:LOCAL:ＨＰ = BATTLE_STATE:LOCAL:最大ＨＰ
						BATTLE_STATE:LOCAL:ＭＰ = BATTLE_STATE:LOCAL:最大ＭＰ
					NEXT
				CASE "[取消]"
					KSTR:(K++) = 尚未疲惫到需要休息，继续前进吧。
					CALL メッセージ欄表示用関数()
				CASEELSE
					CLEARLINE 1
					REUSELASTLINE  
					GOTO LOOP_MESSAGE
			ENDSELECT
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_26_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 26
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "27_7")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			敵BATTLE_STATE_STR:1:エネミー名 = Lv4_食人鸟
			敵BATTLE_STATE_STR:2:エネミー名 = Lv4_食人鸟
			敵BATTLE_STATE_STR:5:エネミー名 = Lv4_食人鸟
			敵BATTLE_STATE_STR:6:エネミー名 = Lv6_食人鸟
			CALL 雑魚敵繰り返し戦闘処理
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 没有下到山谷，而是决定在悬崖周围探索。
			WSTR:(K++) = 若能发现更便捷路径便好……
			KSTR:(K++) = ……然而，在探索的时候被一群食人鸟发现了！
			CALL メッセージ欄表示用関数()

			敵BATTLE_STATE_STR:1:エネミー名 = Lv4_食人鸟
			敵BATTLE_STATE_STR:2:エネミー名 = Lv4_食人鸟
			敵BATTLE_STATE_STR:5:エネミー名 = Lv4_食人鸟
			敵BATTLE_STATE_STR:6:エネミー名 = Lv6_食人鸟
			CALL 雑魚敵遭遇汎用処理
			
			SETBIT ダンジョン構造配列_人食い鳥の島:27:7, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_27_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 27
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "29_6")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "29_8")
	CASE "マスイベント"
		CALL 口上変数初期化
		KSTR:(K++) = 崩塌地形与乱岩阻碍视野。
		CALL メッセージ欄表示用関数(,,,0)
		IF 初来訪マス判定用フラグ == 0
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			SETBIT ダンジョン構造配列_人食い鳥の島:29:6, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:29:8, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_29_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 29
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "30_5")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "30_6")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 附近存在食人鸟巢穴。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			SETBIT ダンジョン構造配列_人食い鳥の島:30:5, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:30:5, 2
			WSTR:(K++) = 近在咫尺传来刺耳鸣叫。
			WSTR:(K++) = 藏身岩后窥见食人鸟巢穴。
			KSTR:(K++) = 鸟群尚未察觉，可悄然接近。
			CALL メッセージ欄表示用関数()
		ENDIF
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4) == 0 && GETBIT(ダンジョン構造配列_人食い鳥の島:30:5, 4) == 0
			CALL 知識技能所持者検索("錬金知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				CALL 口上変数初期化
				WSTR:(K++) = %CALLNAME:LOCAL%察觉附近地层蕴含砂岩。
				WSTR:(K++) = 运用炼金术将砂岩分解可引发山崩掩埋巢穴。
				KSTR:(K++) = 要引发山崩吗？
				KSTR:(K++) = BUTTON_[确定]
				KSTR:(K++) = BUTTON_[取消]
				CALL メッセージ欄表示用関数(,,,0)
				$LOOP_MESSAGE
				INPUTS
				SELECTCASE RESULTS
					CASE "[确定]"
						CALL 口上変数初期化
						WSTR:(K++) = %CALLNAME:LOCAL%施展炼金术引发山崩！
						WSTR:(K++) = 砂石洪流瞬间吞没邻近巢穴。
						WSTR:(K++) = 大多数食人鸟慌忙逃离废墟，飞向别处。
						KSTR:(K++) = 看样子它们不会再回来了。_PAGE
						WSTR:(K++) = 崩落的砂岩开辟出新通路。
						KSTR:(K++) = 或许藏有秘宝。继续探索。
						KSTR:(K++) = 残存巢穴数：{残り巣の数_人食い鳥の島}个
						残り巣の数_人食い鳥の島 -= 1
						CALL メッセージ欄表示用関数()
						SETBIT ダンジョン構造配列_人食い鳥の島:30:6, 1
						SETBIT ダンジョン構造配列_人食い鳥の島:30:5, 4
					CASE "[取消]"
						CALL 口上変数初期化
						WSTR:(K++) = 恐波及自身引发危险。
						KSTR:(K++) = 选择正面清剿巢穴。
						CALL メッセージ欄表示用関数()
					CASEELSE
						CLEARLINE 1
						REUSELASTLINE  
						GOTO LOOP_MESSAGE
				ENDSELECT
				SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
			ENDIF
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_30_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 30
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = エネミーアイコン
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = 食人鸟群已迁徙他处。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 崖壁平台分布食人鸟巢群。
			WSTR:(K++) = 同类型巢穴密集分布，可见大量食人鸟活动。
			KSTR:(K++) = 清剿巢穴将引发连续战斗，准备就绪了吗？_PAGE
			KSTR:(K++) = 要与魔物群交战吗？（三连战）
			KSTR:(K++) = BUTTON_[确定]
			KSTR:(K++) = BUTTON_[取消]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[确定]"
					敵BATTLE_STATE_STR:1:エネミー名 = Lv4_食人鸟
					敵BATTLE_STATE_STR:2:エネミー名 = Lv4_食人鸟
					敵BATTLE_STATE_STR:4:エネミー名 = Lv4_食人鸟
					敵BATTLE_STATE_STR:7:エネミー名 = Lv4_食人鸟
					CALL 雑魚敵遭遇汎用処理
					IF RESULT == 0
						敵BATTLE_STATE_STR:0:エネミー名 = Lv4_食人鸟
						敵BATTLE_STATE_STR:3:エネミー名 = Lv4_食人鸟
						敵BATTLE_STATE_STR:4:エネミー名 = Lv4_食人鸟
						CALL 雑魚敵遭遇汎用処理
						IF RESULT == 0
							敵BATTLE_STATE_STR:1:エネミー名 = Lv4_食人鸟
							敵BATTLE_STATE_STR:3:エネミー名 = Lv4_食人鸟
							敵BATTLE_STATE_STR:5:エネミー名 = Lv4_食人鸟
							敵BATTLE_STATE_STR:7:エネミー名 = Lv4_食人鸟
							CALL 雑魚敵遭遇汎用処理
							IF RESULT == 0
								SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
								残り巣の数_人食い鳥の島 -= 1
								CALL 口上変数初期化
								WSTR:(K++) = 你们成功剿灭食人鸟并摧毁巢穴。
								WSTR:(K++) = 幸存的食人鸟应不敢再返回此地。
								KSTR:(K++) = 残存巢穴数：{残り巣の数_人食い鳥の島}个
								CALL メッセージ欄表示用関数()
							ENDIF
						ENDIF
					ENDIF
					CALL 口上変数初期化
				CASE "[取消]"
					CALL 口上変数初期化
				CASEELSE
					CLEARLINE 1
					REUSELASTLINE  
					GOTO LOOP_MESSAGE
			ENDSELECT
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_30_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 30
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
		ELSE
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = 什么也没有。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 走在坍塌的砂岩废墟上。
			WSTR:(K++) = 突然，你注意到土沙中有一块颜色奇怪的石头。
			WSTR:(K++) = 这是一种特殊矿石，被压碎后会向周围散发魔力。有些人称之为「勇气药剂」。
			WSTR:(K++) = 战斗中服用可提升全员奥义槽。
			WSTR:(K++) = 对后续战斗大有裨益，把它捡起来带走吧。
			KSTR:(K++) = %CALLNAME:PLAYER%获得了勇气药剂！
			CALL メッセージ欄表示用関数()
			CALL アイテム増減汎用処理("勇气药剂", 1)
			CALL 口上変数初期化
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_人食い鳥の島_29_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 29
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "30_8")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			敵BATTLE_STATE_STR:1:エネミー名 = Lv5_食人植物
			敵BATTLE_STATE_STR:3:エネミー名 = Lv5_食人植物
			敵BATTLE_STATE_STR:5:エネミー名 = Lv5_食人植物
			CALL 雑魚敵繰り返し戦闘処理
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 崖周发现巨型植物球体。
			WSTR:(K++) = 看似普通藤蔓团，实为植物系魔物变种。
			KSTR:(K++) = 虽非目标食人鸟，撤退时若遭袭将徒增困扰。优先清剿。
			CALL メッセージ欄表示用関数()

			敵BATTLE_STATE_STR:1:エネミー名 = Lv5_食人植物
			敵BATTLE_STATE_STR:3:エネミー名 = Lv5_食人植物
			敵BATTLE_STATE_STR:5:エネミー名 = Lv5_食人植物
			CALL 雑魚敵遭遇汎用処理
			
			SETBIT ダンジョン構造配列_人食い鳥の島:30:8, 1
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_人食い鳥の島_30_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 30
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = 会話アイコン
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = 什么也没有。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			IF 初来訪マス判定用フラグ == 0
				KSTR:(K++) = 无数藤蔓散落地面。
				CALL メッセージ欄表示用関数(,,,0)
			ELSE
				;最初に訪れた時
				SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
				WSTR:(K++) = 植物魔物盘踞处后方，遍地横陈同类尸骸。
				WSTR:(K++) = 这具尸体似乎与先前的魔物是同一物种。
				WSTR:(K++) = 死者躯壳肥沃土壤，滋养新生魔物幼苗。
				KSTR:(K++) = 此乃植物系魔物常见生态循环。
				CALL メッセージ欄表示用関数()
			ENDIF
			IF GETBIT(ダンジョン構造配列_人食い鳥の島:27:4, 2)
				CALL 口上変数初期化
				WSTR:(K++) = 你们突然想到也许可以利用藤蔓作为垂降工具。
				WSTR:(K++) = 试拽藤条发现其强韧度足以承重。
				KSTR:(K++) = 折返巢穴所在崖壁，尝试以此作为应急绳索。
				CALL メッセージ欄表示用関数()
				SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
			ENDIF
		ENDIF
		CALL 画面再描画
ENDSELECT



