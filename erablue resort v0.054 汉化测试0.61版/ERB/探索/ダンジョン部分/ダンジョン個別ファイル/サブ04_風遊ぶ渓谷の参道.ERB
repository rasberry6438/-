

@ダンジョン初期処理_風遊ぶ渓谷の参道
;ダンジョン構造の読み込み
;0でない時、そのマスは存在する
#DIM 深度
#DIM 分岐

ダンジョンサブタイトル = APPROACH TO TIAMAT
ダンジョンマス画像URL_伏せ状態 = 壁_洞窟
ダンジョン現在位置:0 = 0
ダンジョン現在位置:1 = 2
ダンジョン背景画像 = 背景_山

;スタート地点は必ず存在
;初期からオープン済みなので3を入れる
;ビット0：存在するか　ビット1：移動できるか　ビット2：マスをオープンするか（ビット１をONにしないと無意味）　ビット3：入れないがオープンする場合に使用
;ビット4以降：自由枠。主に宝箱の開閉やイベント達成フラグなどに使用
IF GETVAR(@"ダンジョン構造配列_%ダンジョン名%:{ダンジョン現在位置:0}:{ダンジョン現在位置:1}") == 0
	SETVAR @"ダンジョン構造配列_%ダンジョン名%:{ダンジョン現在位置:0}:{ダンジョン現在位置:1}", 3
ENDIF

FOR 深度, 1, 100
	LOCAL = 0
	FOR 分岐, 0, 9
		IF GETVAR(@"ダンジョン構造配列_%ダンジョン名%:{深度}:{分岐}")
			;既にマス情報が入ってるなら飛ばす
			LOCAL = 1
			CONTINUE
		ELSEIF ENUMFUNCBEGINSWITH(@"ダンジョンマス情報_%ダンジョン名%_{深度}_{分岐}")
			LOCAL = 1
			SETVAR @"ダンジョン構造配列_%ダンジョン名%:深度:分岐", 1
		ENDIF
	NEXT
	IF LOCAL
		ダンジョン最大深度 = 深度
	ENDIF
NEXT

@ダンジョン解説文_風遊ぶ渓谷の参道

詳細文文字列受け渡し変数 = 
詳細文文字列受け渡し変数 += "在微风港群岛，通往祭祀星晶兽提亚玛特的神社参道上。<br>"
詳細文文字列受け渡し変数 += "沿途常有敏捷魔物出没。它们常能抢占先机，要避免受伤恐怕很难。<br>"
IF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:2:1, 2)
	詳細文文字列受け渡し変数 += "从分社巫女处获得了「风之斗篷」。<br>这下应该能下到悬崖下的道路了。<br>"
ELSE
	詳細文文字列受け渡し変数 += "悬崖下方似乎另有通路……<br>"
ENDIF

;推奨レベルを返す
RETURN 17



@敵討伐後処理_ダンジョン固有_風遊ぶ渓谷の参道(討伐エネミー数)
;ダンジョン内で戦闘した後に呼ばれる関数、主にダンジョンごとのドロップアイテム取得に使用
;まだ敵データはリセットしていないので敵BATTLE_STATEで色々情報は取得可能
#DIM 討伐エネミー数
#DIM ドロップ確率
#DIMS ドロップアイテム

ドロップ確率 = 5 * 討伐エネミー数
ドロップアイテム = 普通木材
CALL ドロップ判定処理(ドロップ確率, ドロップアイテム)

ドロップ確率 = 5 * 討伐エネミー数
ドロップアイテム = 柔软的羽毛
CALL ドロップ判定処理(ドロップ確率, ドロップアイテム)

ドロップ確率 = 3 * 討伐エネミー数
ドロップアイテム = 风伯之羽
CALL ドロップ判定処理(ドロップ確率, ドロップアイテム)

ドロップ確率 = 5 * 討伐エネミー数
ドロップアイテム = 星晶碎片
CALL ドロップ判定処理(ドロップ確率, ドロップアイテム)

ドロップ確率 = 1 * 討伐エネミー数
ドロップアイテム = 赤铜古纹
CALL ドロップ判定処理(ドロップ確率, ドロップアイテム)

;---------------------------------------------------------------------
;マップ構造
;---------------------------------------------------------------------
;上と下に分かれているマップ
;ただ下はほぼ行き止まりなので実質一本道
;---------------------------------------------------------------------

@ダンジョンマス情報_風遊ぶ渓谷の参道_0_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 0
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "2_2")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 从港口穿过城镇，抵达郊外的小山。
			WSTR:(K++) = 本是为寻求风之星晶兽——「提亚玛特」的助力而来，
			KSTR:(K++) = 但这位星晶兽似乎与寻常不同，正与空之民们和谐共生。_PAGE
			WSTR:(K++) = 据说过去连存在都被遗忘，最近因某些事件才……这些暂且不论。
			WSTR:(K++) = 关键是山顶建有提亚玛特的神社，必须登顶才能获得力量。
			WSTR:(K++) = %CALLNAME:PLAYER%一行如同其他参拜者般，踏上被踩实的山道开始攀登。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 参拜道的入口处，周围零星可见前往参拜的民众。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_1_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 0
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 小屋入口周围散落着各种工具。
			WSTR:(K++) = 值钱物品大概被带走了，留下的都是廉价器具。
			WSTR:(K++) = ……别无他物，去别处看看吧。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 小屋入口周围散落着各种工具。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_1_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 1
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 小屋深处堆放着工人遗留的私人物品。
			WSTR:(K++) = 大多是脏衣服之类的垃圾，但下面竟长出了蘑菇。
			WSTR:(K++) = ……虽说是可食用品种，但总觉得膈应。
			WSTR:(K++) = 不予采摘，任其生长吧。
		ELSE
			KSTR:(K++) = 衣物下生长着蘑菇。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_2_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 2
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = %CALLNAME:PLAYER%们造访了山脚的分社。
			WSTR:(K++) = 几位参拜者与正在清扫庭院的巫女映入眼帘。
			WSTR:(K++) = 注意到你们的巫女带着笑容迎了上来。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「您是从岛外来的吧？欢迎来到提亚玛特大人的分社。
			WSTR:(K++) = 　提亚玛特大人是司掌风的星晶兽，常有骑空士和风祷师前来参拜。
			WSTR:(K++) = 　要请个航空安全护身符吗？」
			CALL メッセージ欄表示用関数(,"分社的巫女",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 边应付推销边购买护身符，同时说明要前往本宫参拜。
			WSTR:(K++) = 询问是否有注意事项。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「啊——现在山体滑坡把登顶的路堵住了。
			WSTR:(K++) = 　山上施工进展缓慢……
			WSTR:(K++) = 　虽说另有小路可走，但不太推荐岛外来客……」
			CALL メッセージ欄表示用関数(,"分社的巫女",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 询问工期得知需一年以上。
			WSTR:(K++) = 显然等不了那么久。
			WSTR:(K++) = 边追加购买护身符边恳请告知其他路径。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「哎呀——都说到这份上就告诉您吧！
			WSTR:(K++) = 　其实参道旁有处深谷……
			WSTR:(K++) = 　使用这件『风之斗篷』就能下到谷底或从谷底上来！
			WSTR:(K++) = 　通过谷底就能绕到滑坡对面啦！」
			CALL メッセージ欄表示用関数(,"分社的巫女",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 真厉害！不过很贵吧？
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「不不，免费赠送！您买了这么多护身符呢！
			WSTR:(K++) = 　反正库存多得是。这种风力强度的岛屿仅此一处。
			WSTR:(K++) = 　请别客气多拿几件，同伴的份也带上！」
			CALL メッセージ欄表示用関数(,"分社的巫女",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 巫女哗啦啦抱来一叠斗篷。
			WSTR:(K++) = 既然如此就心怀感激收下吧。
			KSTR:(K++) = %CALLNAME:PLAYER%们挥手告别巫女，折返登顶之路。_PAGE
			WSTR:(K++) = %CALLNAME:PLAYER%一行在此迷宫可使用风之斗篷了！
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			KSTR:(K++) = 「下次也请多买护身符哦～」
			KSTR:(K++) = 巫女挂着营业式甜美笑容挥手道别。
			CALL メッセージ欄表示用関数(,"分社的巫女",,0)
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_2_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 2
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "2_1")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "4_3")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = %CALLNAME:PLAYER%们沿山路前行时，与一位气质优雅的妇人擦肩而过。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「哎呀，你们是岛外来客吧？
			WSTR:(K++) = 　若是要参拜提亚玛特大人，分社就在那边。
			KSTR:(K++) = 　本宫虽在直行方向的山顶，但沿途魔物出没，很危险哦？」_PAGE
			WSTR:(K++) = 「……不过看你们身经百战的样子，
			WSTR:(K++) = 　倒是我多虑了。呵呵呵，路上多加小心」
			CALL メッセージ欄表示用関数(,"气质高雅的中年女士",,0)
			CALL 口上変数初期化
			WSTR:(K++) = %CALLNAME:PLAYER%瞥见岔路尽头的神社建筑。
			WSTR:(K++) = 分社感受不到星晶兽的气息，看来必须登顶才能面见提亚玛特。
			WSTR:(K++) = 但此处应是管理参拜道的机构，
			WSTR:(K++) = 或许该去询问参拜流程与山路详情。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 直行通往山顶，岔路通向分社。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_2_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 2
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 小屋旁堆积着杂乱的碎石堆。
			WSTR:(K++) = 本以为是普通石子……
			KSTR:(K++) = ……！碎石中竟混有魔石！_PAGE
			WSTR:(K++) = 似是长期放置后受魔力浸染异变而成。
			WSTR:(K++) = 翻找碎石又发现数枚魔石。
			WSTR:(K++) = %CALLNAME:PLAYER%获得了６颗魔石！
			CALL アイテム増減汎用処理("魔石", 6)
		ELSE
			KSTR:(K++) = 小屋旁堆积着杂乱的碎石堆。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_2_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 2
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "2_6")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "1_6")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "1_7")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 盆地中央有座废弃小屋。
			WSTR:(K++) = 周遭空无一物，线索应尽在屋内。
			WSTR:(K++) = 进去仔细搜查吧。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 盆地中央的废弃小屋。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_2_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 2
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		SIF ダンジョン内一時変数:0 == 0
			ダンジョンマス画像URL_重ね表示 = えっちハート
	CASE "接続先"
	CASE "マスイベント"
		;えっちイベ
		;XXXXを使ってないダンジョン内一時変数の番号に変えること
		IF ダンジョン内一時変数:0
		ELSE
			CALL ダンジョンハプニング基本処理()
			IF RESULT
				ダンジョン内一時変数:0 = 1
			ENDIF
			CALL 口上変数初期化
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_3_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 3
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン_赤
	CASE "接続先"
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 深入谷底时遭遇庞然巨物。
			WSTR:(K++) = 这生物生有锐爪巨颚，凶戾目光似要撕碎猎物——
			WSTR:(K++) = 竟是霸王龙！
			WSTR:(K++) = 霸王龙察觉%CALLNAME:PLAYER%一行的身影，发出震天咆哮袭来！
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:0:エネミー名 = Lv37_霸王龙β
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = %CALLNAME:PLAYER%一行成功讨伐了强敌！
				WSTR:(K++) = 从强敌处获得若干饰品与财宝。
				WSTR:(K++) = 从霸王龙β处获得「恐龙β之戒」！
				WSTR:(K++) = 从霸王龙β处获得「古旧耳饰・金」！
				WSTR:(K++) = 从霸王龙β处获得300,000卢比！
				MONEY += 300000
				CALL 汎用指輪取得処理("恐龙β之戒", 3)
				CALL 素材入手処理("古旧耳饰・金", 1)
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4
			ELSEIF RESULT == -1
				;逃走時
				WSTR:(K++) = %CALLNAME:PLAYER%一行勉强从强敌手中逃脱。
				WSTR:(K++) = 下次变强些再来挑战吧…
				CALL メッセージ欄表示用関数(,,,0)
				CALL 口上変数初期化
			ENDIF
		ELSE
			KSTR:(K++) = 强敌早已被讨伐。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_4_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 4
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "5_4")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "5_2")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 山道旁竖着木质告示牌：
			WSTR:(K++) = 『参拜道魔物出没注意！
			WSTR:(K++) = 　无战斗经验者请至分社参拜！
			KSTR:(K++) = 　有能之士请协助剿灭魔物』_PAGE
			WSTR:(K++) = 告示牌旁漂浮着精灵系魔物。
			WSTR:(K++) = 就当为社会做贡献吧。%CALLNAME:PLAYER%一行握紧武器开始清剿。
			CALL メッセージ欄表示用関数(,,,0)
			;前のエネミーを再利用
			敵BATTLE_STATE_STR:0:エネミー名 = Lv2_风元素
			敵BATTLE_STATE:0:ランダムエネミーフラグ = 17
			敵BATTLE_STATE_STR:3:エネミー名 = Lv2_风元素
			敵BATTLE_STATE:3:ランダムエネミーフラグ = 17
			敵BATTLE_STATE_STR:4:エネミー名 = Lv2_风元素
			敵BATTLE_STATE:4:ランダムエネミーフラグ = 17
			敵BATTLE_STATE_STR:7:エネミー名 = Lv2_风元素
			敵BATTLE_STATE:7:ランダムエネミーフラグ = 17
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = %CALLNAME:PLAYER%一行肃清了周遭魔物。
				WSTR:(K++) = 精灵系魔物虽会再生，但短期内应无威胁。
				WSTR:(K++) = 后续行进也请尽量剿灭魔物。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:0:エネミー名 = Lv2_风元素
			敵BATTLE_STATE:0:ランダムエネミーフラグ = 17
			敵BATTLE_STATE_STR:3:エネミー名 = Lv2_风元素
			敵BATTLE_STATE:3:ランダムエネミーフラグ = 17
			敵BATTLE_STATE_STR:4:エネミー名 = Lv2_风元素
			敵BATTLE_STATE:4:ランダムエネミーフラグ = 17
			敵BATTLE_STATE_STR:7:エネミー名 = Lv2_风元素
			敵BATTLE_STATE:7:ランダムエネミーフラグ = 17
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_4_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 4
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "2_8")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "2_7")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 沿着山路前行，散落着几处陈旧破损的建材。
			WSTR:(K++) = 应是昔日开发此地时遗留的材料。
			WSTR:(K++) = 逐一检查后发现均已损坏无法使用。
			WSTR:(K++) = 或许深处还有可用之物？
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 陈旧破损的建材散落各处。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_5_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 5
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "7_2")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 沿着参拜道向山上攀登。
			WSTR:(K++) = 出乎意料的是，通往本宫的路上仍有不少参拜者，其中不乏身手不凡的骑空士。
			WSTR:(K++) = 对翱翔天际的骑空士而言，司掌风之力的星晶兽确是值得参拜的祥瑞象征。
			WSTR:(K++) = %CALLNAME:PLAYER%一行混在参拜者中继续前行。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 身怀绝技的骑空士们正朝本宫进发。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_5_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 5
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 岔路尽头处，散落着散发绿光的石子。
			WSTR:(K++) = 拾起细看，竟是凝结了风之魔力的魔石。
			CALL 知識技能所持者検索("魔法知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				WSTR:(K++) = %CALLNAME:LOCAL%剔除魔石多余魔力，将其加工成简易道具。
				WSTR:(K++) = %CALLNAME:PLAYER%一行获得了３颗「风之魔石」！
				CALL アイテム増減汎用処理("风之魔石", 3)
				SETBIT ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4
			ELSE
				WSTR:(K++) = 但未经精炼难堪大用。
				WSTR:(K++) = 若有掌握魔法知识的同伴在场或可进一步加工……
			ENDIF
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 已经找不到什么有价值的东西了。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_7_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 7
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 虽已攀登多时，前路依旧漫长。
			WSTR:(K++) = 此刻所处高度约莫二合目（注：日本登山术语，将山高分为十合）。
			WSTR:(K++) = 且行且歇继续攀登吧。
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(8, 2)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 8
		ダンジョン現在位置:1 = 2
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_7_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 7
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "3_6")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		ダンジョン現在位置:0 = 8
		ダンジョン現在位置:1 = 5
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_7_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 7
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "4_8")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		ダンジョン現在位置:0 = 8
		ダンジョン現在位置:1 = 7
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_8_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 8
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "10_2")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		ダンジョン現在位置:0 = 7
		ダンジョン現在位置:1 = 2
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_8_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 8
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(7, 5)
		ENDIF
		ダンジョン現在位置:0 = 7
		ダンジョン現在位置:1 = 5
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_8_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 8
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 查阅地图发现前方是片盆地。
			WSTR:(K++) = 因靠近山麓曾考虑开发，终因交通不便遭废弃。
			WSTR:(K++) = ……曾在附近城镇听闻此事。
			WSTR:(K++) = 既有开发规划想必危险性不高，大可放心前行。
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(7, 7)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 7
		ダンジョン現在位置:1 = 7
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_9_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 9
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "8_7")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 行至此地风力渐强。
			WSTR:(K++) = 强敌盘踞其他路径，此处相对安全。
			WSTR:(K++) = 但普通魔物亦不可小觑，仍需谨慎行进。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 行至此地风力渐强。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_10_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 10
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "12_0")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "11_3")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 山道岔口处，遇见怀抱大量素材席地而坐的青年。
			WSTR:(K++) = 关切询问后，青年回以爽朗笑容。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「只是采集过量稍作歇息。
			WSTR:(K++) = 　右岔道通往『风切四叶草』采集场。」
			CALL メッセージ欄表示用関数(,"带着大行李的青年",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 风切四叶草乃蕴含风之力的珍稀植物。
			WSTR:(K++) = 需常年劲风滋养方能生长，市价颇高。
			WSTR:(K++) = 据青年所言，适量采集无妨。
			WSTR:(K++) = 若有兴趣，不妨绕道前往。采集场位于右侧岔道。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 右往采集场，左通山顶。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_10_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 10
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "8_5")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 沿山路前行，发现前方有精灵系魔物。
			WSTR:(K++) = 照例摆出讨伐架势，但……总觉得有些异样。
			WSTR:(K++) = 那并非风之精灵……而是暗之精灵！
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:3:エネミー名 = Lv21_暗元素
			敵BATTLE_STATE_STR:4:エネミー名 = Lv21_暗元素
			敵BATTLE_STATE_STR:7:エネミー名 = Lv21_暗元素
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 既有暗之精灵出没，足见事态严重。
				WSTR:(K++) = 前方必有强力魔物盘踞。
				WSTR:(K++) = 若欲挑战，需充分历练与准备。
				WSTR:(K++) = 若已下定决心，便勇往直前吧。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:3:エネミー名 = Lv21_暗元素
			敵BATTLE_STATE_STR:4:エネミー名 = Lv21_暗元素
			敵BATTLE_STATE_STR:7:エネミー名 = Lv21_暗元素
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_11_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 11
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "13_4")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "11_4")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 拐入岔道，果然见风切四叶草簇簇丛生。
			WSTR:(K++) = 但靠近主道的区域似已被采摘殆尽。
			WSTR:(K++) = 竭泽而渔非我所愿，再往深处探寻吧。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 风切四叶草簇簇丛生。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_11_4(ARGS)
#DIM マス深度
#DIM マス分岐
#DIM 採取量
マス深度 = 11
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		IF ダンジョン内一時変数:3
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
		ELSE
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 此处是生长繁茂的风切四叶草群落。
			WSTR:(K++) = 如此长势即便适量采摘亦无妨。
			採取量 = RAND:3 + 3
			KSTR:(K++) = %CALLNAME:PLAYER%获得了{採取量}株「风切四叶草」！_PAGE
			CALL 素材入手処理("风切四叶草", 採取量)
			WSTR:(K++) = 或因地形之故，此地风之魔力尤为强劲。
			WSTR:(K++) = 假以时日，风切四叶草定会再生。
			KSTR:(K++) = 牢记此处坐标或有所裨益。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
			ダンジョン内一時変数:3 = 1
		ELSEIF ダンジョン内一時変数:3 == 0
			WSTR:(K++) = 风切四叶草长势喜人。
			WSTR:(K++) = 以此长势即便再度采摘亦无大碍。
			採取量 = RAND:3 + 3
			WSTR:(K++) = %CALLNAME:PLAYER%获得了{採取量}株「风切四叶草」！
			CALL 素材入手処理("风切四叶草", 採取量)
			ダンジョン内一時変数:3 = 1
		ELSE
			KSTR:(K++) = 素材尚未生长至可采摘程度。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_11_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 11
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 兽类残骸支离破碎散落一地。
			WSTR:(K++) = 初疑是本地魔物巢穴，然尸骸种类异常繁杂。
			KSTR:(K++) = 兔类、球球兽、双足飞龙，乃至非魔物兽种亦在其列。_PAGE
			WSTR:(K++) = 至少存在能单方面虐杀双足飞龙的魔物。
			WSTR:(K++) = 所幸周遭未见骚动，该魔物似未肆虐。
			WSTR:(K++) = 若战力不足，折返亦不失为良策。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 兽类残骸支离破碎散落一地。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_11_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 11
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "9_8")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "10_7")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 两侧崖壁遮蔽日光，周遭光线昏沉。
			WSTR:(K++) = 此地氛围阴郁，速速通过为妙。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 两侧崖壁遮蔽日光，周遭光线昏沉。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_12_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 12
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "12_2")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "14_1")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 道旁有骑空士正进行体能训练。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「哦！你们也在特训吗！
			WSTR:(K++) = 　这条山路超棒！坡度适中魔物强度正好！实乃训练圣地！」
			CALL メッセージ欄表示用関数(,"锻炼肌肉的骑空士",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「不过因风之魔力浓郁，高机动魔物频现。
			WSTR:(K++) = 　常被抢占先机损耗体力。陷入危机时及时撤退也很重要！」
			CALL メッセージ欄表示用関数(,"锻炼肌肉的骑空士",,0)
			CALL 口上変数初期化
			WSTR:(K++) = ……虽言行奇特，却非恶徒。
			WSTR:(K++) = %CALLNAME:PLAYER%一行辞别骑空士继续前行。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 据悉此域多高机动魔物。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_12_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 12
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 沿着山路前行，方才的骑空士训练伙伴们正在附近挥洒汗水。
			WSTR:(K++) = 浑身腱子肉的猛男们正嘿咻嘿咻地锤炼肉体！
			WSTR:(K++) = 周遭空气仿佛都变得湿热起来……还是别打扰他们吧。
		ELSE
			KSTR:(K++) = 肌肉训练团正在附近进行特训。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_12_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 12
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "11_6")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "11_8")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 行至中途，风之精灵型魔物随风显现。
			WSTR:(K++) = 但不知为何显得虚弱且数量稀少。
			WSTR:(K++) = %CALLNAME:PLAYER%一行虽感蹊跷，仍摆开架势迎战。
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:0:エネミー名 = Lv2_风元素
			敵BATTLE_STATE:0:ランダムエネミーフラグ = 14
			敵BATTLE_STATE_STR:5:エネミー名 = Lv2_风元素
			敵BATTLE_STATE:5:ランダムエネミーフラグ = 14
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 果然能感受到精灵们状态异常。
				WSTR:(K++) = 可能原因是「附近存在其他属性的强力魔物」……
				WSTR:(K++) = ……但关键魔物的气息尚未察觉，继续前进应无大碍。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:0:エネミー名 = Lv2_风元素
			敵BATTLE_STATE:0:ランダムエネミーフラグ = 14
			敵BATTLE_STATE_STR:5:エネミー名 = Lv2_风元素
			敵BATTLE_STATE:5:ランダムエネミーフラグ = 14
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_13_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 13
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "15_4")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "14_3")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 深入采集场时，数只沙沙作响的兔型魔物现身。
			WSTR:(K++) = 嘴角衔着叶片，难道是草食系魔物？
			WSTR:(K++) = %CALLNAME:PLAYER%被其可爱模样吸引伸手示好，兔群却突然龇牙扑来！！
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:2:エネミー名 = Lv18_风暴兔
			敵BATTLE_STATE_STR:4:エネミー名 = Lv18_风暴兔
			敵BATTLE_STATE_STR:6:エネミー名 = Lv18_风暴兔
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 看来是杂食性魔物而非草食。
				WSTR:(K++) = %CALLNAME:PLAYER%一行边感慨以貌取魔要不得边继续前行。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:2:エネミー名 = Lv18_风暴兔
			敵BATTLE_STATE_STR:4:エネミー名 = Lv18_风暴兔
			敵BATTLE_STATE_STR:6:エネミー名 = Lv18_风暴兔
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_13_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 13
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "12_7")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 碎裂的岩块向两侧堆积。
			WSTR:(K++) = 虽便于通行，但视野开阔也易遭魔物察觉。
			WSTR:(K++) = 周遭未见异常，造成此景的元凶似乎不在附近。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 岩块碎裂堆积于道路两侧。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_14_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 14
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "15_2")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			LOCAL = 味方ランダム選出()
			WSTR:(K++) = 行进间忽起劲风。
			WSTR:(K++) = %CALLNAME:(BATTLE_STATE:LOCAL:0)%猛然将%CALLNAME:PLAYER%扑倒在地！
			WSTR:(K++) = 环顾四周发现，原是替众人挡下了兔型魔物的突袭。
			WSTR:(K++) = 偷袭失败的魔物径直扑向%CALLNAME:PLAYER%一行！
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:1:エネミー名 = Lv18_风暴兔
			敵BATTLE_STATE_STR:2:エネミー名 = Lv18_风暴兔
			敵BATTLE_STATE_STR:7:エネミー名 = Lv18_风暴兔
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 击退魔物后警戒四周……似乎暂无其他威胁。
				WSTR:(K++) = 若非%CALLNAME:(BATTLE_STATE:LOCAL:0)%相救，恐怕早已身首异处。
				WSTR:(K++) = %CALLNAME:PLAYER%向救命恩人道谢，保持高度警戒继续前行。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:1:エネミー名 = Lv18_风暴兔
			敵BATTLE_STATE_STR:2:エネミー名 = Lv18_风暴兔
			敵BATTLE_STATE_STR:7:エネミー名 = Lv18_风暴兔
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_14_3(ARGS)
#DIM マス深度
#DIM マス分岐
#DIM 採取量
マス深度 = 14
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		IF ダンジョン内一時変数:4
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
		ELSE
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 此处是生长繁茂的风切四叶草群落。
			WSTR:(K++) = 如此长势即便适量采摘亦无妨。
			採取量 = RAND:3 + 3
			KSTR:(K++) = %CALLNAME:PLAYER%获得了{採取量}株「风切四叶草」！_PAGE
			CALL 素材入手処理("风切四叶草", 採取量)
			WSTR:(K++) = 或因地形之故，此地风之魔力尤为强劲。
			WSTR:(K++) = 假以时日，风切四叶草定会再生。
			KSTR:(K++) = 牢记此处坐标或有所裨益。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
			ダンジョン内一時変数:4 = 1
		ELSEIF ダンジョン内一時変数:4 == 0
			WSTR:(K++) = 风切四叶草长势喜人。
			WSTR:(K++) = 以此长势即便再度采摘亦无大碍。
			採取量 = RAND:3 + 3
			WSTR:(K++) = %CALLNAME:PLAYER%获得了{採取量}株「风切四叶草」！
			CALL 素材入手処理("风切四叶草", 採取量)
			ダンジョン内一時変数:4 = 1
		ELSE
			KSTR:(K++) = 素材尚未生长至可采摘程度。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_15_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 15
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 攀登至半山腰时，前方显现宏伟吊桥。
			WSTR:(K++) = 距离尚远却已清晰可见的壮丽建筑，想必能饱览绝景。
			WSTR:(K++) = 或许度假村也该规划能欣赏雄奇自然风光的观景路线。
			WSTR:(K++) = %CALLNAME:PLAYER%一行怀揣这般构想向吊桥进发。
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(16, 2)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 16
		ダンジョン現在位置:1 = 2
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_15_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 15
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = %CALLNAME:PLAYER%们正在采集素材时，突然感知到上空有魔物气息！
			WSTR:(K++) = 从云端现身的亚龙种魔物——双足飞龙！
			WSTR:(K++) = 飞龙径直向%CALLNAME:PLAYER%们袭来！
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:3:エネミー名 = Lv22_双足飞龙
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 击退双足飞龙后，你们发现地面散落着晶莹颗粒。
				WSTR:(K++) = 拾起一粒查看，竟是风之魔力结晶化的矿石碎屑。
				WSTR:(K++) = 想必是魔物掉落之物，恭敬不如从命收下吧。
				WSTR:(K++) = %CALLNAME:PLAYER%获得了「翡翠星尘」1个！
				CALL 素材入手処理("翡翠星尘", 1)
				CALL メッセージ欄表示用関数(,,,0)
				SETBIT ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:3:エネミー名 = Lv22_双足飞龙
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_15_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 15
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "13_8")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		ダンジョン現在位置:0 = 48
		ダンジョン現在位置:1 = 7
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_16_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 16
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "18_3")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		ダンジョン現在位置:0 = 15
		ダンジョン現在位置:1 = 2
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT



@ダンジョンマス情報_風遊ぶ渓谷の参道_18_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 18
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "18_4")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 抵达吊桥时，手持告示牌的大叔向%CALLNAME:PLAYER%一行靠近。
			WSTR:(K++) = 牌子上写着「飞翔大叔」。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「飞翔————！！（问候）
			WSTR:(K++) = 　各位，想不想翱翔天际啊——！」
			CALL メッセージ欄表示用関数(,"飞翔大叔",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 可疑人物。
			WSTR:(K++) = %CALLNAME:PLAYER%一行试图绕开这个怪人继续前行。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「请、请等一下！不好意思！
			WSTR:(K++) = 　这是为了营造观光特色人设啦！
			WSTR:(K++) = 　我在讲解前方地形，请务必听我说！」
			CALL メッセージ欄表示用関数(,"飞翔大叔",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 虽不解其人设定位，但似乎并无恶意。
			WSTR:(K++) = 姑且听之任之吧。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「那么占用各位一点时间……
			WSTR:(K++) = 　前方区域风力将显著增强。
			KSTR:(K++) = 　身着『风之斗篷』便可跃下悬崖或从谷底飞升。」_PAGE
			IF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:2:1, 2)
				WSTR:(K++) = 「啊，看来各位已经备好了。准备周全！
				WSTR:(K++) = 　现在传授安全降落地形特征。
				WSTR:(K++) = 　从此你们也能体验飞翔————！！（问候）」
				CALL メッセージ欄表示用関数(,"飞翔大叔",,0)
				CALL 口上変数初期化
				WSTR:(K++) = 虽对其人设定位存疑，但总算学到了风之斗篷的使用技巧。
				WSTR:(K++) = 这下可以探索悬崖下方区域了。
				WSTR:(K++) = 巫女所说的滑坡对面区域也能抵达。
				WSTR:(K++) = %CALLNAME:PLAYER%一行以普通问候回应飞翔大叔，继续前进。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 口上変数初期化
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4
			ELSE
				WSTR:(K++) = 「若前往山麓分社应该能获得斗篷，建议先去那里。
				WSTR:(K++) = 　在获得前恕我无法放行。
				WSTR:(K++) = 　万一失足坠落可就无法挽回了。」
				CALL メッセージ欄表示用関数(,"飞翔大叔",,0)
				CALL 口上変数初期化
				WSTR:(K++) = 如果涉及安全问题那也没办法，暂且前往分社吧。
			ENDIF
		ELSEIF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:2:1, 2) == 0
			WSTR:(K++) = 「看来尚未获得风之斗篷。
			WSTR:(K++) = 　我想你应该可以在山脚下的分社买到，所以一定要先去那里看看。
			WSTR:(K++) = 　在获得前恕我无法放行。」
			CALL メッセージ欄表示用関数(,"飞翔大叔",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 如果涉及安全问题那也没办法，暂且前往分社吧。
		ELSEIF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4) == 0
			WSTR:(K++) = 「哦呀！看来顺利获得风之斗篷了！
			WSTR:(K++) = 　现在传授安全降落地形特征。
			WSTR:(K++) = 　从此你们也能体验飞翔————！！（问候）」
			CALL メッセージ欄表示用関数(,"飞翔大叔",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 虽对其人设定位存疑，但总算学到了风之斗篷的使用技巧。
			WSTR:(K++) = 这下可以探索悬崖下方区域了。
			WSTR:(K++) = 巫女所说的滑坡对面区域也能抵达。
			WSTR:(K++) = %CALLNAME:PLAYER%一行以普通问候回应飞翔大叔，继续前进。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			CALL 接続ルート全開放処理(マス深度, マス分岐)
			SETBIT ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4
		ELSE
			KSTR:(K++) = 今日飞翔大叔仍在向参拜客传授飞降技巧。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_18_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 18
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "21_4")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "18_8")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 正欲踏上宏伟吊桥时，%CALLNAME:PLAYER%察觉此处地形适合使用风之斗篷。
			WSTR:(K++) = 飞翔大叔在前方讲解正因附近有此特殊地形。
			WSTR:(K++) = 不妨先试飞体验一番。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 此处可施展风之斗篷。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_18_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 18
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 下アイコン
	CASE "接続先"
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = %CALLNAME:PLAYER%一行披上风之斗篷，乘着强风纵身跃下悬崖！
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(49, 0)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 49
		ダンジョン現在位置:1 = 0
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT




@ダンジョンマス情報_風遊ぶ渓谷の参道_21_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 21
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "23_2")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 沿山道行进时，迎面冲来狂奔的青年。
			WSTR:(K++) = 正疑惑间，后方涌现蜂群魔物！
			WSTR:(K++) = 亢奋的魔物们径直扑向%CALLNAME:PLAYER%一行！
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:2:エネミー名 = Lv17_风蜂
			敵BATTLE_STATE_STR:3:エネミー名 = Lv17_风蜂
			敵BATTLE_STATE_STR:4:エネミー名 = Lv20_风蜂女王
			敵BATTLE_STATE_STR:5:エネミー名 = Lv17_风蜂
			敵BATTLE_STATE_STR:6:エネミー名 = Lv17_风蜂
			敵BATTLE_STATE_STR:7:エネミー名 = Lv17_风蜂
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 成功击退蜂群。
				WSTR:(K++) = 想来青年是在躲避魔物追击。
				WSTR:(K++) = 虽说是被卷入，但幸好我们具备战斗力。%CALLNAME:PLAYER%一行继续前行。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:2:エネミー名 = Lv17_风蜂
			敵BATTLE_STATE_STR:3:エネミー名 = Lv17_风蜂
			敵BATTLE_STATE_STR:4:エネミー名 = Lv20_风蜂女王
			敵BATTLE_STATE_STR:5:エネミー名 = Lv17_风蜂
			敵BATTLE_STATE_STR:6:エネミー名 = Lv17_风蜂
			敵BATTLE_STATE_STR:7:エネミー名 = Lv17_风蜂
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_21_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 21
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "21_3")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 穿过吊桥后，修剪整齐的山道蜿蜒向前。
			WSTR:(K++) = 日常维护得当，足见岛上居民对星晶兽提亚玛特的尊崇。
			WSTR:(K++) = 若得见本尊（星晶兽本体？）定要谨守礼仪。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 修剪整齐的山道延伸向远方。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT



@ダンジョンマス情報_風遊ぶ渓谷の参道_23_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 23
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 此刻约莫行至山腰。
			WSTR:(K++) = 回望来路，山麓平原的屋舍田畴尽收眼底。
			WSTR:(K++) = 虽堪称绝景，想必山顶风光更胜一筹。
			WSTR:(K++) = 重整行装继续攀登。
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(24, 2)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 24
		ダンジョン現在位置:1 = 2
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_24_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 24
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "26_0")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "25_4")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		ダンジョン現在位置:0 = 23
		ダンジョン現在位置:1 = 2
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_25_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 25
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "29_4")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 岔道处可见兔型魔物与风之精灵。
			WSTR:(K++) = 虽非主道，放任魔物恐危及他人。
			WSTR:(K++) = 稍作清剿吧。%CALLNAME:PLAYER%一行执刃迎战！
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:0:エネミー名 = Lv2_风元素
			敵BATTLE_STATE:0:ランダムエネミーフラグ = 19
			敵BATTLE_STATE_STR:2:エネミー名 = Lv18_风暴兔
			敵BATTLE_STATE_STR:5:エネミー名 = Lv2_风元素
			敵BATTLE_STATE:5:ランダムエネミーフラグ = 19
			敵BATTLE_STATE_STR:7:エネミー名 = Lv18_风暴兔
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 因是岔道疏于修整。
				WSTR:(K++) = 看似无甚特别，若有兴趣不妨一探。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:0:エネミー名 = Lv2_风元素
			敵BATTLE_STATE:0:ランダムエネミーフラグ = 19
			敵BATTLE_STATE_STR:2:エネミー名 = Lv18_风暴兔
			敵BATTLE_STATE_STR:5:エネミー名 = Lv2_风元素
			敵BATTLE_STATE:5:ランダムエネミーフラグ = 19
			敵BATTLE_STATE_STR:7:エネミー名 = Lv18_风暴兔
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_26_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 26
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "27_2")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "28_1")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 主道旁发现简易木牌：
			WSTR:(K++) = 「右侧岔道通往休憩所」
			WSTR:(K++) = 前路漫漫，疲乏者可稍作停歇。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 「右侧岔道通往休憩所」的告示牌矗立道旁。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_26_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 26
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "26_8")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 绕至休憩所后方，可见适宜风之斗篷的断崖。
			WSTR:(K++) = 已有参拜客在此体验飞降乐趣。
			WSTR:(K++) = 为避免干扰，请排队等候使用。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 休憩所后方断崖可供风之斗篷施展。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_26_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 26
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 下アイコン
	CASE "接続先"
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = %CALLNAME:PLAYER%一行披上风之斗篷，乘着强风纵身跃下悬崖！
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(50, 5)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 50
		ダンジョン現在位置:1 = 5
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_27_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 27
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "26_2")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "27_3")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "28_2")
	CASE "マスイベント"
		IF ダンジョン内一時変数:6
			KSTR:(K++) = 不要贪得无厌，休息所的使用一天一次就够了。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			IF 初来訪マス判定用フラグ
				;最初に訪れた時
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				WSTR:(K++) = 「你好——欢迎光临！
				WSTR:(K++) = 　是参拜客吗？休息所提供简餐，团体价总共1000卢比哦！」
				CALL メッセージ欄表示用関数(,"休息所店员",,0)
				CALL 口上変数初期化
				WSTR:(K++) = 按照告示牌来到休息所，元气满满的店员向我们打招呼。
				WSTR:(K++) = 虽然在这里休息需要花钱，但应该能好好放松。
				KSTR:(K++) = 不仅能恢复体力魔力，_COLOR_%カラーパレット_HTML("黄")%_奥义槽也会恢复_吧。_PAGE
			ELSE
				KSTR:(K++) = 这是休息所。除了体力魔力外_COLOR_%カラーパレット_HTML("黄")%_奥义槽也会恢复_吧。
			ENDIF
			KSTR:(K++) = 要支付1000卢比进行休息吗？
			KSTR:(K++) = BUTTON_[确定]
			KSTR:(K++) = BUTTON_[取消]
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[确定]"
					IF MONEY < 1000
						WSTR:(K++) = 本想休息……但发现钱没带够。
						WSTR:(K++) = 真遗憾，下次再说吧。
					ELSE
						WSTR:(K++) = %CALLNAME:PLAYER%一行决定支付卢比使用休息所。
						CALL メッセージ欄表示用関数(,,,0)
						CALL 口上変数初期化
						WSTR:(K++) = 「非常感谢！
						WSTR:(K++) = 　菜单在这里，午睡室在里面的单间！请慢慢享受！」
						CALL メッセージ欄表示用関数(,"休息所店员",,0)
						CALL 口上変数初期化
						WSTR:(K++) = …………！
						WSTR:(K++) = 经过充分休息，%CALLNAME:PLAYER%们恢复了元气！
						CALL メッセージ欄表示用関数(,,,0)
						FOR LOCAL, 0, 14
							SIF LOCAL > 3 && LOCAL < 10
								CONTINUE
							SIF BATTLE_STATE:LOCAL:キャラ登録番号 < 1
								CONTINUE
							BATTLE_STATE:LOCAL:ＨＰ = BATTLE_STATE:LOCAL:最大ＨＰ
							BATTLE_STATE:LOCAL:ＭＰ = BATTLE_STATE:LOCAL:最大ＭＰ
							BATTLE_STATE:LOCAL:奥義ゲージ = BATTLE_STATE:LOCAL:ゲージ最大値
						NEXT
						CALL 口上変数初期化
						MONEY -= 1000
						ダンジョン内一時変数:6 = 1
					ENDIF
				CASE "[取消]"
					WSTR:(K++) = 还没累到需要休息的程度。
					WSTR:(K++) = 现在还是抓紧赶路吧。
				CASEELSE
					CLEARLINE 1
					REUSELASTLINE  
					GOTO LOOP_MESSAGE
			ENDSELECT
			CALL メッセージ欄表示用関数(,,,0)
			IF 初来訪マス判定用フラグ
				;最初に訪れた時
				CALL 口上変数初期化
				WSTR:(K++) = 「休息所后面有能用风之斗篷的悬崖，还有露营用的帐篷区哦！
				WSTR:(K++) = 　有兴趣的话请务必去看看！」
				CALL メッセージ欄表示用関数(,"休息所店员",,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
			ENDIF
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_27_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 27
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 这边的后院似乎没什么特别用途。
			KSTR:(K++) = 虽然做了基本整理，但树木太多视野不好，顶多适合随便散散步吧。_PAGE
			WSTR:(K++) = …………！
			WSTR:(K++) = 沙沙地散步时，从树荫里跑出衣衫不整的男女慌慌张张逃走了。
			WSTR:(K++) = 看来是打扰了别人的好事，%CALLNAME:PLAYER%感到有些抱歉。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 这个后院死角很多，可能有正在亲热的情侣。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_28_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 28
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "30_1")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			IF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:27:2, 4) == 0
				;休憩所行ってない
				WSTR:(K++) = 走在山路上，看到元气十足地狩猎兔子的少女。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 口上変数初期化
				WSTR:(K++) = 「啊，你好！是参拜客吗？
				WSTR:(K++) = 　我在为休息所晚餐准备食材打兔子呢。请不用在意直接过去吧」
				CALL メッセージ欄表示用関数(,"休息所店员",,0)
				CALL 口上変数初期化
				WSTR:(K++) = 看来少女是附近休息所的店员。
				WSTR:(K++) = 向笑着扑杀兔子的少女点头致意准备通过时……
				WSTR:(K++) = 却发现草丛深处有兔形魔物正要偷袭少女！
				WSTR:(K++) = %CALLNAME:PLAYER%一行瞬间架起武器，为保护少女进入战斗！
			ELSE
				;休憩所行ってる
				WSTR:(K++) = 走在山路上，看到元气十足地狩猎兔子的少女。
				WSTR:(K++) = 那是……刚才休息所里的店员少女。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 口上変数初期化
				WSTR:(K++) = 「啊，客人！是要去山顶参拜吗？
				WSTR:(K++) = 　我在为晚餐打兔子呢。请不用在意直接过去吧」
				CALL メッセージ欄表示用関数(,"休息所店员",,0)
				CALL 口上変数初期化
				WSTR:(K++) = 向笑着扑杀兔子的少女点头致意准备通过时……
				WSTR:(K++) = 却发现草丛深处有兔形魔物正要偷袭少女！
				WSTR:(K++) = %CALLNAME:PLAYER%一行瞬间架起武器，为保护少女进入战斗！
			ENDIF
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:1:エネミー名 = Lv18_风暴兔
			敵BATTLE_STATE_STR:3:エネミー名 = Lv18_风暴兔
			敵BATTLE_STATE_STR:5:エネミー名 = Lv18_风暴兔
			敵BATTLE_STATE_STR:7:エネミー名 = Lv18_风暴兔
			敵BATTLE_STATE_STR:9:エネミー名 = Lv18_风暴兔
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 把企图偷袭的兔子们打倒了。
				WSTR:(K++) = 少女没有受伤，看来成功保护了她。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 口上変数初期化
				WSTR:(K++) = 「哇！谢谢，刚才大意了。
				WSTR:(K++) = 　作为谢礼，把客人打到的兔子也一起处理了吧。
				WSTR:(K++) = 　这座山的兔子很好吃哦！」
				CALL メッセージ欄表示用関数(,"休息所店员",,0)
				CALL 口上変数初期化
				WSTR:(K++) = 少女笑盈盈地取出刀具，利落地处理兔子。
				WSTR:(K++) = 转眼间兔子就被分解成方便烹饪的肉块。
				KSTR:(K++) = %CALLNAME:PLAYER%获得了４块「新鲜兔肉」！_PAGE
				CALL 素材入手処理("新鲜兔肉", 4)
				WSTR:(K++) = 与挥手说着「再来休息所哦」的少女告别，%CALLNAME:PLAYER%们继续前进。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:1:エネミー名 = Lv18_风暴兔
			敵BATTLE_STATE_STR:3:エネミー名 = Lv18_风暴兔
			敵BATTLE_STATE_STR:5:エネミー名 = Lv18_风暴兔
			敵BATTLE_STATE_STR:7:エネミー名 = Lv18_风暴兔
			敵BATTLE_STATE_STR:9:エネミー名 = Lv18_风暴兔
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_28_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 28
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 参观与休息区相邻的帐篷营地。
			WSTR:(K++) = 虽然位于山顶这种有限的空间，但面积足以容纳几组人住宿。
			WSTR:(K++) = 实际搭建帐篷使用的客人也不少，他们正开心地喝着酒。
			WSTR:(K++) = 注意到我们的住宿客情绪高涨地搭话了。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「哟哈——！你们也要搭帐篷过夜吗？
			WSTR:(K++) = 　啊，不是？那真是失礼啦！不过帐篷超推荐的哦！
			KSTR:(K++) = 　在大自然里悠闲喝酒超美味！不过山脚的酒也很棒啦！」_PAGE
			WSTR:(K++) = 「要不要干脆一起开宴会？
			WSTR:(K++) = 　酒和食物都管够，临时加入完全欢迎哦！」
			CALL メッセージ欄表示用関数(,"醉汉",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 住宿客们咯咯笑着心情很好的样子。
			WSTR:(K++) = 但实在没时间参加宴会。
			WSTR:(K++) = 虽然遗憾……还是向醉客表达了拒绝之意。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「啊——看起来很忙的样子？真可惜啊——
			WSTR:(K++) = 　对了，难得有缘就分点酒给你们吧！
			WSTR:(K++) = 　来嘛来嘛！请务必收下！！」
			CALL メッセージ欄表示用関数(,"醉汉",,0)
			CALL 口上変数初期化
			WSTR:(K++) = %CALLNAME:PLAYER%虽然推辞，醉客却说着别客气别客气！硬塞了酒过来。
			WSTR:(K++) = 登山途中喝醉太危险，等回去再心怀感激地享用吧。
			WSTR:(K++) = %CALLNAME:PLAYER%获得了６瓶「碳酸麦酒」！
			CALL 素材入手処理("碳酸麦酒", 6)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 住宿客们正欢快地开着宴会。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_29_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 29
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		SIF ダンジョン内一時変数:1 == 0
			ダンジョンマス画像URL_重ね表示 = えっちハート
	CASE "接続先"
	CASE "マスイベント"
		;えっちイベ
		;XXXXを使ってないダンジョン内一時変数の番号に変えること
		IF ダンジョン内一時変数:1
		ELSE
			CALL ダンジョンハプニング基本処理()
			IF RESULT
				ダンジョン内一時変数:1 = 1
			ENDIF
			CALL 口上変数初期化
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_29_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 29
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "29_3")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "29_8")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "31_4")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 踩着被踏实的低矮草丛沿兽径前行。
			WSTR:(K++) = 这附近的地形似乎能用风之斗篷降下悬崖。
			WSTR:(K++) = 另外还能看到兽径隐约分成两股。
			WSTR:(K++) = 要注意别找不到回去的路。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 似乎能用风之斗篷降下悬崖。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_29_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 29
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 下アイコン
	CASE "接続先"
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = %CALLNAME:PLAYER%一行披上风之斗篷，乘着强风纵身跃下悬崖！
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(55, 7)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 55
		ダンジョン現在位置:1 = 7
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_30_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 30
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "31_1")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "30_8")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 有块岩石像跳水平台般从悬崖大幅突出。
			WSTR:(K++) = 乍看像要崩塌，但据说连接着地下岩盘很安全。
			WSTR:(K++) = 从岩顶用风之斗篷跳下在观光客中很流行……
			WSTR:(K++) = ……附近的告示牌这么写着。
			WSTR:(K++) = 确实用斗篷应该能下到崖底，有兴趣的话可以顺路试试。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 有块从悬崖大幅突出的岩石。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_30_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 30
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 下アイコン
	CASE "接続先"
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = %CALLNAME:PLAYER%一行披上风之斗篷，乘着强风纵身跃下悬崖！
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(53, 1)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 53
		ダンジョン現在位置:1 = 1
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_31_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 31
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 总算来到七合目附近了吧。
			WSTR:(K++) = 山顶的提亚玛特神社已经能用肉眼确认了。
			WSTR:(K++) = 不过听说越是接近终点越容易松懈出事。
			WSTR:(K++) = 保持紧张感继续攀登到最后吧。
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(32, 1)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 32
		ダンジョン現在位置:1 = 1
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_31_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 31
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
	CASE "マスイベント"
		IF ダンジョン内一時変数:5 >= 3
			KSTR:(K++) = 巨树的魔力平稳安定。
			KSTR:(K++) = 过段时间应该就能再次积蓄了。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			IF 初来訪マス判定用フラグ
				;最初に訪れた時
				WSTR:(K++) = 兽径尽头生长着一棵巨树。
				WSTR:(K++) = 粗壮到数人合抱都无法环绕，可见其扎根于此已历经漫长岁月。
				WSTR:(K++) = 充盈着丰沛的风之魔力，动物们被魔力吸引聚集在周围。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 口上変数初期化
			ENDIF
			IF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4) == 0
				CALL 知識技能所持者検索("錬金知識", 2)
				LOCAL = RESULT
				IF LOCAL > -1
					WSTR:(K++) = %CALLNAME:LOCAL%发现可以利用魔力进行物品转化。
					WSTR:(K++) = _COLOR_FFD900_若持有「魔石」，可将其转化为「风之魔石」_。
					WSTR:(K++) = 或者中和魔力，_COLOR_FFD900_可将「土之魔石」转化为「魔石」_。
					WSTR:(K++) = 或许可以稍作尝试。
					CALL メッセージ欄表示用関数(,,,0)
					CALL 口上変数初期化
					SETBIT ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4
				ELSE
					WSTR:(K++) = 若有高超炼金术知识或许能活用这股魔力……
					WSTR:(K++) = 但目前似乎无能为力。别惊扰动物，静静离开吧。
					CALL メッセージ欄表示用関数(,,,0)
					CALL 口上変数初期化
				ENDIF
			ENDIF
			IF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4)
				$イベントループ
				CALL 口上変数初期化
				KSTR:(K++) = ・每日可使用巨树魔力转化物品３次。剩余：{3 - ダンジョン内一時変数:5}次
				IF DT_CELL_GET("所持アイテムデータベース", 0, "魔石")
					KSTR:(K++) = BUTTON_[将魔石变为风之魔石]
				ELSE
					KSTR:(K++) = COLOR_%カラーパレット_HTML("グレーアウト")%_[将魔石变为风之魔石]
				ENDIF
				IF DT_CELL_GET("所持アイテムデータベース", 0, "土之魔石")
					KSTR:(K++) = BUTTON_[将土之魔石变为魔石]
				ELSE
					KSTR:(K++) = COLOR_%カラーパレット_HTML("グレーアウト")%_[将魔石变为风之魔石]
				ENDIF
				KSTR:(K++) = BUTTON_[什么也不做]
				CALL メッセージ欄表示用関数(,,,0)
				$LOOP_MESSAGE
				INPUTS
				SELECTCASE RESULTS
					CASE "[将魔石变为风之魔石]"
						CALL 口上変数初期化
						IF DT_CELL_GET("所持アイテムデータベース", 0, "魔石") <= 0
							WSTR:(K++) = 魔石不足。
						ELSE
							WSTR:(K++) = %CALLNAME:PLAYER%运用巨树魔力，将１个魔石转化为「风之魔石」！
							CALL アイテム増減汎用処理("魔石", -1)
							CALL アイテム増減汎用処理("风之魔石", 1)
							ダンジョン内一時変数:5 ++
						ENDIF
						CALL メッセージ欄表示用関数(,,,0)
						IF ダンジョン内一時変数:5 < 3
							GOTO イベントループ
						ELSE
							CALL 口上変数初期化
							WSTR:(K++) = 今日已无法继续使用魔力。
							CALL メッセージ欄表示用関数(,,,0)
						ENDIF
					CASE "[将土之魔石变为魔石]"
						CALL 口上変数初期化
						IF DT_CELL_GET("所持アイテムデータベース", 0, "土之魔石") <= 0
							WSTR:(K++) = 土之魔石不足。
						ELSE
							WSTR:(K++) = %CALLNAME:PLAYER%运用巨树魔力，将１个土之魔石转化为「魔石」！
							CALL アイテム増減汎用処理("魔石", 1)
							CALL アイテム増減汎用処理("土之魔石", -1)
							ダンジョン内一時変数:5 ++
						ENDIF
						CALL メッセージ欄表示用関数(,,,0)
						IF ダンジョン内一時変数:5 < 3
							GOTO イベントループ
						ELSE
							CALL 口上変数初期化
							WSTR:(K++) = 今日已无法继续使用魔力。
							CALL メッセージ欄表示用関数(,,,0)
						ENDIF
					CASE "[什么也不做]"
						CALL 口上変数初期化
						WSTR:(K++) = 应该不需要再转化了，%CALLNAME:PLAYER%一行离开了巨树。
						CALL メッセージ欄表示用関数(,,,0)
					CASEELSE
						CLEARLINE 1
						REUSELASTLINE  
						GOTO LOOP_MESSAGE
				ENDSELECT
			ENDIF
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_32_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 32
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "34_1")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "33_3")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		ダンジョン現在位置:0 = 31
		ダンジョン現在位置:1 = 1
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_33_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 33
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "35_4")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "34_2")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 道路中央聚集着精灵群。
			WSTR:(K++) = 似乎被某种物品吸引，但看不清具体目标。
			WSTR:(K++) = 无论如何必须处理掉障碍才能通行。
			WSTR:(K++) = %CALLNAME:PLAYER%一行摆出战斗架势。
			CALL メッセージ欄表示用関数(,,,0)

			敵BATTLE_STATE_STR:1:エネミー名 = Lv2_风元素
			敵BATTLE_STATE:1:ランダムエネミーフラグ = 19
			敵BATTLE_STATE_STR:2:エネミー名 = Lv2_风元素
			敵BATTLE_STATE:2:ランダムエネミーフラグ = 19
			敵BATTLE_STATE_STR:3:エネミー名 = Lv2_风元素
			敵BATTLE_STATE:3:ランダムエネミーフラグ = 19
			敵BATTLE_STATE_STR:5:エネミー名 = Lv2_风元素
			敵BATTLE_STATE:5:ランダムエネミーフラグ = 19
			敵BATTLE_STATE_STR:6:エネミー名 = Lv2_风元素
			敵BATTLE_STATE:6:ランダムエネミーフラグ = 19
			敵BATTLE_STATE_STR:7:エネミー名 = Lv2_风元素
			敵BATTLE_STATE:7:ランダムエネミーフラグ = 19
			敵BATTLE_STATE_STR:9:エネミー名 = Lv2_风元素
			敵BATTLE_STATE:9:ランダムエネミーフラグ = 19
			CALL 雑魚敵遭遇汎用処理

			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 驱散挡路的精灵后，发现路中央有块绿色原石。
				WSTR:(K++) = 精灵们大概是被这块原石的魔力吸引而来。
				KSTR:(K++) = 放任不管又会聚集精灵，为安全起见回收并封印魔力吧。_PAGE
				WSTR:(K++) = %CALLNAME:PLAYER%获得了１颗宝晶原石！
				CALL 素材入手処理("宝晶原石", 1)
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:1:エネミー名 = Lv2_风元素
			敵BATTLE_STATE:1:ランダムエネミーフラグ = 19
			敵BATTLE_STATE_STR:2:エネミー名 = Lv2_风元素
			敵BATTLE_STATE:2:ランダムエネミーフラグ = 19
			敵BATTLE_STATE_STR:3:エネミー名 = Lv2_风元素
			敵BATTLE_STATE:3:ランダムエネミーフラグ = 19
			敵BATTLE_STATE_STR:5:エネミー名 = Lv2_风元素
			敵BATTLE_STATE:5:ランダムエネミーフラグ = 19
			敵BATTLE_STATE_STR:6:エネミー名 = Lv2_风元素
			敵BATTLE_STATE:6:ランダムエネミーフラグ = 19
			敵BATTLE_STATE_STR:7:エネミー名 = Lv2_风元素
			敵BATTLE_STATE:7:ランダムエネミーフラグ = 19
			敵BATTLE_STATE_STR:9:エネミー名 = Lv2_风元素
			敵BATTLE_STATE:9:ランダムエネミーフラグ = 19
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_34_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 34
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "36_0")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "35_2")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 竖立着写有「前方塌方，注意！！」的大型告示牌。
			WSTR:(K++) = 右侧可见工程人员使用的临时工棚。
			WSTR:(K++) = 据山脚巫女所说，可通过谷底绕到塌方另一侧……
			WSTR:(K++) = 工程人员或许知道正确路线，试着打听看看吧。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 竖立着写有「前方塌方，注意！！」的大型告示牌。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_34_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 34
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		SIF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:34:2, 5) == 0
			ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "34_8")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:34:2, 5)
			;通れるイベント後
			KSTR:(K++) = 通往山顶迂回路线的悬崖。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSEIF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:34:2, 4) == 0
			;まだフラグ立ってない
			WSTR:(K++) = 路边悬崖上滚落着形状奇特的岩石。
			WSTR:(K++) = 乍看像黑桃形状的怪异岩石。
		ELSEIF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:34:2, 4)
			;ここだぜ！イベント
			WSTR:(K++) = 路边悬崖上散落着黑桃形岩石。
			WSTR:(K++) = 因地势关系不易察觉，但似乎可用风之斗篷从此处降落。
			WSTR:(K++) = 工地打听到的迂回路线应该就是这里。
			WSTR:(K++) = 实际跳下去试试看吧。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
			SETBIT ダンジョン構造配列_風遊ぶ渓谷の参道:34:2, 5
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_34_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 34
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 下アイコン
	CASE "接続先"
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = %CALLNAME:PLAYER%一行披上风之斗篷，乘着强风纵身跃下悬崖！
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(52, 0)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 52
		ダンジョン現在位置:1 = 0
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_35_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 35
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "37_3")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 工程人员使用的临时工棚在此。
			WSTR:(K++) = 粗木搭建的工棚异常坚固，完全不像临时建筑。
			WSTR:(K++) = 入口处有位正在休息的多拉夫族男性。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「哦？你们是谁。参拜道因塌方禁止通行啊」
			CALL メッセージ欄表示用関数(,"多拉夫族男性",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 询问是否知晓通过谷底登顶的路线。
			WSTR:(K++) = 德拉夫族男性发出啊——的恍然声，摇了摇头。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「说起来年轻崽子们提过这茬。
			WSTR:(K++) = 　抱歉俺可不知道，去问里面的人吧。
			WSTR:(K++) = 　工棚随便进没关系」
			CALL メッセージ欄表示用関数(,"多拉夫族男性",,0)
			CALL 口上変数初期化
			WSTR:(K++) = %CALLNAME:PLAYER%向多拉夫族男性道谢后进入工棚。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 多拉夫族男性正在休息，似乎可以自由进入工棚。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_35_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 35
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 沿山路前行时，修缮过的道路突然中断。
			WSTR:(K++) = 看来这里并非通往山顶的路线。
			WSTR:(K++) = %CALLNAME:PLAYER%正要折返……山上突然滚落岩石！
			CALL 得意武器所持者検索("銃")
			SIF RESULT == -1
				CALL 得意武器所持者検索("弓")
			LOCAL = RESULT
			IF RESULT >= 0
				WSTR:(K++) = %CALLNAME:LOCAL%瞬间用武器击打岩石弹开了落石！
			ELSE
				WSTR:(K++) = %CALLNAME:PLAYER%一行因落石损失半数ＨＰ！
				CALL メッセージ欄表示用関数(,,,0)
				CALL 口上変数初期化
				CALL 探索中全体ダメージ_ＨＰ_割合(50)
			ENDIF
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 仔细查看发现路边有块「落石注意！」的告示牌，似乎因年久失修损坏了。
			WSTR:(K++) = 用随身绳索将告示牌绑在显眼位置，%CALLNAME:PLAYER%一行迅速撤离现场。
		ELSE
			KSTR:(K++) = 「落石注意！」告示牌被牢牢固定着。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_36_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 36
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "38_0")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "36_8")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 塌方修复施工现场。
			WSTR:(K++) = 此刻或许是工人休息时间，不见人影。
			WSTR:(K++) = 若登上路边堆积如山的土堆，似乎可用风之斗篷降落。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 若登上路边堆积如山的土堆，似乎可用风之斗篷降落。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_36_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 36
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 下アイコン
	CASE "接続先"
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = %CALLNAME:PLAYER%一行披上风之斗篷，乘着强风纵身跃下悬崖！
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(51, 2)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 51
		ダンジョン現在位置:1 = 2
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_37_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 37
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 正在喝茶的哈文族男性回答了询问。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「嗯？你们有什么事吗？……去山顶的路线？
			KSTR:(K++) = 　这种时候特意去本宫，真是有兴致啊」_PAGE
			WSTR:(K++) = 「我也不太清楚详情……
			WSTR:(K++) = 　记得听说过『从黑桃形岩石处跳下去』。
			WSTR:(K++) = 　希望能帮到你们」
			CALL メッセージ欄表示用関数(,"哈文族男性",,0)
			CALL 口上変数初期化
			WSTR:(K++) = %CALLNAME:PLAYER%道谢后离开了哈文族男性。
			CALL メッセージ欄表示用関数(,,,0)
			SETBIT ダンジョン構造配列_風遊ぶ渓谷の参道:34:2, 4
		ELSEIF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:34:2, 5) == 0
			KSTR:(K++) = 「哟，找到山顶路线了吗？
			KSTR:(K++) = 　记得是『从黑桃形岩石处跳下去』哦」
			CALL メッセージ欄表示用関数(,"哈文族男性",,0)
		ELSE
			KSTR:(K++) = 哈文族男性正喝茶休息。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_37_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 37
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "38_3")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "37_2")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "37_4")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 进入工棚后，看到三名工人正在悠闲休息。
			WSTR:(K++) = 分别询问他们是否知晓山顶路线。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 三名工人正在悠闲休息。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_37_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 37
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 向摆弄工具的人类女性询问。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「嗯？你们干嘛？……山顶路线？
			KSTR:(K++) = 　急性子啊，等不及完工了吗」_PAGE
			WSTR:(K++) = 「听本地参拜客说……
			WSTR:(K++) = 　应该就在『这个工地附近』吧，我是不感兴趣啦。
			WSTR:(K++) = 　好了别妨碍检修，快走快走！」
			CALL メッセージ欄表示用関数(,"人类女性",,0)
			CALL 口上変数初期化
			WSTR:(K++) = %CALLNAME:PLAYER%道谢后离开了人类女性。
			CALL メッセージ欄表示用関数(,,,0)
		ELSEIF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:34:2, 5) == 0
			KSTR:(K++) = 「山顶路线好像在这个工地附近，剩下的自己找吧」
			CALL メッセージ欄表示用関数(,"人类女性",,0)
		ELSE
			KSTR:(K++) = 人类女性正在检修工具。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_38_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 38
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 参拜道被大规模塌方完全掩埋。
			WSTR:(K++) = 不知何时会再次崩塌，根本无法强行穿越。
			WSTR:(K++) = 放弃这里另寻路线吧。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 参拜道被大规模塌方完全掩埋。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_38_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 38
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 向吃着便当的艾伦族青年打听。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「嗯，什么事？……啊，山顶路线？
			WSTR:(K++) = 　抱歉，我啥也不知道。我有恐高症。
			KSTR:(K++) = 　要是有漂亮姐姐的店我倒清楚哦——」_PAGE
			IF TALENT:PLAYER:性別 == 2
				WSTR:(K++) = 「对那种情报感兴趣吗？
				WSTR:(K++) = 　给你介绍要不要一起？呐，请我喝杯酒就——」
			ELSE
				WSTR:(K++) = 「啊，还是说有帅气哥哥的店更好？
				WSTR:(K++) = 　不巧手头没那种情报，想要的话可以查查看。
				WSTR:(K++) = 　呐，请我喝杯酒就——」
			ENDIF
			CALL メッセージ欄表示用関数(,"艾伦族青年",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 同屋的人类女性咚咚走近，狠狠敲了艾伦族青年的头。
			WSTR:(K++) = 「够——了——！！！」
			CALL メッセージ欄表示用関数(,"艾伦族青年",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「你净跟客人说些没营养的话！
			WSTR:(K++) = 　赶紧吃完便当回去工作！！」
			CALL メッセージ欄表示用関数(,"人类女性",,0)
			CALL 口上変数初期化
			WSTR:(K++) = %CALLNAME:PLAYER%在卷入纷争前道谢离开。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			KSTR:(K++) = 顶着肿包的艾伦族青年继续吃着便当。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT




@ダンジョンマス情報_風遊ぶ渓谷の参道_41_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 41
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 参拜道被大规模塌方完全掩埋。
			WSTR:(K++) = 不知何时会再次崩塌，根本无法强行穿越。
			WSTR:(K++) = 放弃这里改从谷底路线折返吧。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 参拜道被大规模塌方完全掩埋。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_42_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 42
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "41_4")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "46_3")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 乘着强风成功从崖底一跃而上。
			WSTR:(K++) = 根据当前高度与周边地形判断，似乎平安抵达塌方另一侧。
			WSTR:(K++) = 星晶兽提亚玛特的神社已近在眼前。
			WSTR:(K++) = 只剩最后一段路程，加油吧。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 星晶兽提亚玛特的神社已近在眼前。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_42_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 42
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 下アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "42_4")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		ダンジョン現在位置:0 = 55
		ダンジョン現在位置:1 = 2
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_43_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 43
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "45_1")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 通往神社的路上，有头双足飞龙拦路。
			WSTR:(K++) = 似乎想独占从提亚玛特溢出的风之魔力，阻挠接近山顶者。
			WSTR:(K++) = 没有退缩的理由。敢挡路就踹飞它！
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:3:エネミー名 = Lv22_双足飞龙
			敵BATTLE_STATE_STR:5:エネミー名 = Lv22_双足飞龙
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 击退双足飞龙后，你们发现地面散落着晶莹颗粒。
				WSTR:(K++) = 拾起一粒查看，竟是风之魔力结晶化的矿石碎屑。
				WSTR:(K++) = 想必是魔物掉落之物，恭敬不如从命收下吧。
				WSTR:(K++) = %CALLNAME:PLAYER%获得了「翡翠星尘」1个！
				CALL 素材入手処理("翡翠星尘", 1)
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:3:エネミー名 = Lv22_双足飞龙
			敵BATTLE_STATE_STR:5:エネミー名 = Lv22_双足飞龙
			CALL 雑魚敵繰り返し戦闘処理
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_44_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 44
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		SIF ダンジョンクリアフラグ_風遊ぶ渓谷の参道 && ダンジョン内一時変数:7 == 0
			ダンジョンマス画像URL_重ね表示 = エネミーアイコン_赤
	CASE "接続先"
	CASE "マスイベント"
		IF ダンジョンクリアフラグ_風遊ぶ渓谷の参道 == 0
			;立ち絵リソース記録に必要な画像のリソースを生成する
			CALLF 顔グラ表示用文字列関数(キャラ検索("[风之守护者]提亚玛特"),100,,,1,1)
			LOCALS = %立ち絵リソース記録%
			;最初に訪れた時
			WSTR:(K++) = %CALLNAME:PLAYER%们登上山路，终于抵达山顶神社。
			WSTR:(K++) = 踏入神社境内的瞬间，强烈旋风在周遭呼啸！
			WSTR:(K++) = 风势持续数秒后……凝聚成巨大的女性身姿！
			WSTR:(K++) = 这正是司掌风之力的星晶兽提亚玛特无疑。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「──────」
			CALL メッセージ欄表示用関数(LOCALS,"星晶兽提亚玛特",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 铃音般清脆的声响中，%CALLNAME:PLAYER%心中涌入提亚玛特的意志。
			WSTR:(K++) = 她似乎是艾拉的故友，正在欢迎契约者身份的%CALLNAME:PLAYER%。
			IF 高速船作成済フラグ
				WSTR:(K++) = 于是将受星晶兽艾拉指引来此的缘由娓娓道来。
			ELSE
				WSTR:(K++) = 又将来访目的——关于高速船的事宜详细说明。
			ENDIF
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「──────♪」
			CALL メッセージ欄表示用関数(LOCALS,"星晶兽提亚玛特",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 提亚玛特会心微笑，向%CALLNAME:PLAYER%赐予风之加护。
			IF 高速船作成済フラグ
				WSTR:(K++) = 因提亚玛特加护，度假区高速船性能提升！
				WSTR:(K++) = 高速船可容纳角色上限再＋１０！
				KSTR:(K++) = 道具店新增「风之魔石」！_PAGE
			ELSE
				WSTR:(K++) = 因提亚玛特加护，现有船只升级为高速船！
				WSTR:(K++) = 可容纳角色上限＋２０！
				KSTR:(K++) = 道具店新增「风之魔石」！_PAGE
			ENDIF
			WSTR:(K++) = %CALLNAME:PLAYER%向赐予加护的提亚玛特鞠躬致谢。
			WSTR:(K++) = 提亚玛特再度发出风铃般的笑声。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「──────？」
			WSTR:(K++) = 原来……提亚玛特对艾拉所在的度假区颇感兴趣。
			WSTR:(K++) = 询问是否可创造人类大小的分身前去游玩。
			CALL メッセージ欄表示用関数(LOCALS,"星晶兽提亚玛特",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 没有拒绝访客的理由。
			WSTR:(K++) = %CALLNAME:PLAYER%告知提亚玛特度假岛坐标，表示随时欢迎。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「────♪」
			WSTR:(K++) = 她似乎十分欣喜，想必不久便会造访。
			KSTR:(K++) = [风之守护者]提亚玛特开始造访度假村了！_PAGE
			WSTR:(K++) = 此外提亚玛特还愿意协助战斗训练。
			WSTR:(K++) = 再次造访此地便可与星晶兽提亚玛特切磋。
			WSTR:(K++) = 胜利后或将获得稀有报酬，就像以前的BOSS一样。
			WSTR:(K++) = 闲暇时不妨前来挑战。
			CALL メッセージ欄表示用関数(LOCALS,"星晶兽提亚玛特",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 达成目的的%CALLNAME:PLAYER%告别提亚玛特，离开神社。
			WSTR:(K++) = 已通关沿岸风之溪谷参拜道，即将返回。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			高速船作成済フラグ = 1
			ダンジョンクリアフラグ_風遊ぶ渓谷の参道 = 1
			;即座に反映させるために再計算を呼ぶ
			CALL 滞在可能キャラ数再計算()
			LOCAL = GETCHARA(225)
			CFLAG:LOCAL:招待不可フラグ = 0
			ダンジョン終了状況 = 討伐達成
		ELSEIF ダンジョン内一時変数:7 == 0
			;立ち絵リソース記録に必要な画像のリソースを生成する
			CALLF 顔グラ表示用文字列関数(キャラ検索("[风之守护者]提亚玛特"),100,,,1,1)
			LOCALS = %立ち絵リソース記録%

			WSTR:(K++) = 「──────」
			CALL メッセージ欄表示用関数(LOCALS,"星晶兽提亚玛特",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 提亚玛特询问%CALLNAME:PLAYER%是否为训练而来。
			WSTR:(K++) = 如何选择？
			KSTR:(K++) = BUTTON_[前来接受训练]
			KSTR:(K++) = BUTTON_[只是来游玩]
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[前来接受训练]"
					WSTR:(K++) = %CALLNAME:PLAYER%们执起武器，开启与提亚玛特的训练战！
					CALL メッセージ欄表示用関数(,,,0)
					CALL 口上変数初期化
					敵BATTLE_STATE_STR:0:エネミー名 = Lv24_提亚玛特
					CALL 雑魚敵遭遇汎用処理

					IF RESULT == 0
						;勝利時のみ報酬
						CALL 口上変数初期化
						WSTR:(K++) = 赢得与提亚玛特的训练战！
						KSTR:(K++) = 提亚玛特以歌咏般的语调盛赞诸位，赐予嘉奖。_PAGE
						IF !搭載兵器所持チェック("战术指示器")
							;周回プレイをしようとも全体で1個まで
							WSTR:(K++) = 获得搭载兵器「战术指示器」！
							CALL 汎用搭載兵器取得処理("战术指示器")
						ENDIF
						SELECTCASE RAND:6
							CASE 5
								WSTR:(K++) = 获得了「征伐之戒・渔」！
								CALL 汎用指輪取得処理("征伐之戒・渔", 4)
							CASE 4
								WSTR:(K++) = 获得了「征伐之戒・采」！
								CALL 汎用指輪取得処理("征伐之戒・采", 4)
							CASE 3
								WSTR:(K++) = 获得了「征伐之戒・狩」！
								CALL 汎用指輪取得処理("征伐之戒・狩", 4)
							CASE 2
								WSTR:(K++) = 获得了「征伐之戒・匠」！
								CALL 汎用指輪取得処理("征伐之戒・匠", 4)
							CASE 1
								WSTR:(K++) = 获得了「征伐之戒・镇」！
								CALL 汎用指輪取得処理("征伐之戒・镇", 4)
							CASE 0
								WSTR:(K++) = 获得了「征伐之戒・祓」！
								CALL 汎用指輪取得処理("征伐之戒・祓", 4)
						ENDSELECT
						SELECTCASE RAND:6
							CASE 5
								WSTR:(K++) = 获得了「征伐之戒・渔」！
								CALL 汎用指輪取得処理("征伐之戒・渔", 3)
							CASE 4
								WSTR:(K++) = 获得了「征伐之戒・采」！
								CALL 汎用指輪取得処理("征伐之戒・采", 3)
							CASE 3
								WSTR:(K++) = 获得了「征伐之戒・狩」！
								CALL 汎用指輪取得処理("征伐之戒・狩", 3)
							CASE 2
								WSTR:(K++) = 获得了「征伐之戒・匠」！
								CALL 汎用指輪取得処理("征伐之戒・匠", 3)
							CASE 1
								WSTR:(K++) = 获得了「征伐之戒・镇」！
								CALL 汎用指輪取得処理("征伐之戒・镇", 3)
							CASE 0
								WSTR:(K++) = 获得了「征伐之戒・祓」！
								CALL 汎用指輪取得処理("征伐之戒・祓", 3)
						ENDSELECT
						CALL メッセージ欄表示用関数(,,,0)
						CALL 口上変数初期化
						CALL 接続ルート全開放処理(マス深度, マス分岐)
						ダンジョン内一時変数:7 = 1
					ENDIF
				CASE "[只是来游玩]"
					WSTR:(K++) = 「──────♪」
					WSTR:(K++) = 与提亚玛特闲话家常相谈甚欢。
					CALL メッセージ欄表示用関数(LOCALS,"星晶兽提亚玛特",,0)
					CALL 口上変数初期化
			ENDSELECT
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_45_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 45
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "44_0")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 抵达神社入口时，内部传来的星晶兽气息愈发强烈！
			WSTR:(K++) = 对方似乎也感知到了身为艾拉契约者的%CALLNAME:PLAYER%来访。
			WSTR:(K++) = 虽无恶意，但谨慎为上，小心前进。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 神社内传来强烈的星晶兽气息。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_46_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 46
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "43_2")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 路边岩石上坐着悠闲喝茶休息的青年。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「哎呀，日安。
			KSTR:(K++) = 　你们也是从谷底路线爬上来的？挺厉害嘛」_PAGE
			WSTR:(K++) = 「不过要当心哦。
			WSTR:(K++) = 　今天风势异常强劲，提亚玛特大人可能感应到了什么。
			WSTR:(K++) = 　感觉危险的话千万别勉强。」
			CALL メッセージ欄表示用関数(,"登山家小哥",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 确实越接近山顶越能感受到风力的增强。
			WSTR:(K++) = 但隐约察觉风中蕴含着温柔的意志……
			WSTR:(K++) = 向提醒的青年道谢后，%CALLNAME:PLAYER%一行继续前行。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 路边岩石上坐着悠闲喝茶休息的青年。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT



@ダンジョンマス情報_風遊ぶ渓谷の参道_48_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 48
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "48_5")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 行至谷底时，发现坐在小岩上啃水果的少年。
			WSTR:(K++) = 少年看到%CALLNAME:PLAYER%一行慌忙起身。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「啊！土方作业已经完成了老大……什么嘛，是参拜客啊。
			WSTR:(K++) = 　别吓人啊。」
			CALL メッセージ欄表示用関数(,"多拉夫族少年",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 听口吻像是上面工地的帮工。
			WSTR:(K++) = 在此处偷闲……看来是在巧妙摸鱼。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「喂，别告密啊？
			WSTR:(K++) = 　不这样喘口气工地真会累死人的，真的真的。
			WSTR:(K++) = 　帮我保密的话给你好东西，怎样？」
			CALL メッセージ欄表示用関数(,"多拉夫族少年",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 多拉夫族少年油嘴滑舌地央求……
			WSTR:(K++) = 如何选择？
			KSTR:(K++) = BUTTON_[偷懒是不对的。威胁要举报他]
			KSTR:(K++) = BUTTON_[偶尔放松无妨。放他一马]
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[偷懒是不对的。威胁要举报他]"
					WSTR:(K++) = 「可恶——！」多拉夫族少年骂骂咧咧返回上方。
					WSTR:(K++) = 认真工作未来才有好出路……希望那少年能明白这个道理。
					WSTR:(K++) = %CALLNAME:PLAYER%一行目送少年后继续探索。
				CASE "[偶尔放松无妨。放他一马]"
					WSTR:(K++) = 偶尔放松谁都需要。
					WSTR:(K++) = 反正我们不是工程人员，睁只眼闭只眼吧。
					CALL メッセージ欄表示用関数(,,,0)
					CALL 口上変数初期化
					IF TALENT:PLAYER:性別 == 2
						WSTR:(K++) = 「太好啦！这份恩情我记着啦老哥！
					ELSE
						WSTR:(K++) = 「太好啦！这份恩情我记着啦大姐！
					ENDIF
					WSTR:(K++) = 　对了对了，说好的好东西。从这岩缝能到个宽敞地方。
					KSTR:(K++) = 　那边的崖壁里嵌着星晶矿哦！」_PAGE
					WSTR:(K++) = 「我不懂开采就留着没动，想要的话尽管拿。
					WSTR:(K++) = 　反正谷底挖到的东西都是无主之物」
					CALL メッセージ欄表示用関数(,"多拉夫族少年",,0)
					CALL 口上変数初期化
					WSTR:(K++) = 得到了重要情报，立刻前往深处吧。
					WSTR:(K++) = %CALLNAME:PLAYER%向多拉夫族少年道别后分开。
					CALL メッセージ欄表示用関数(,,,0)
					CALL 口上変数初期化
					CALL 接続ルート全開放処理(マス深度, マス分岐)
				CASEELSE
					CLEARLINE 1
					REUSELASTLINE  
					GOTO LOOP_MESSAGE
			ENDSELECT
			SETBIT ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4
		ELSE
			KSTR:(K++) = 多拉夫族少年已不见踪影。
			KSTR:(K++) = 不知是在认真工作，还是换了地方偷懒。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_48_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 48
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 穿过多拉夫族少年告知的岩缝，来到开阔岩场。
			WSTR:(K++) = 岩壁各处闪烁着晶亮光芒……想必就是他所说的星晶矿。
			WSTR:(K++) = %CALLNAME:PLAYER%一行开始采掘可用矿块……
			KSTR:(K++) = %CALLNAME:PLAYER%获得了３块「星晶块」！_PAGE
			WSTR:(K++) = 竟以原矿形态获取了星晶！
			WSTR:(K++) = 使用这些可大幅提升同伴经验值。
			WSTR:(K++) = %CALLNAME:PLAYER%一行心满意足离开此地。
			CALL 素材入手処理("星晶块", 3)
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 岩场已无值得开采的矿脉。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_48_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 48
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 此处岩石较少，视野开阔。
			WSTR:(K++) = 不似人工修整，倒像被庞然大物强行开辟的痕迹……
			WSTR:(K++) = 总之难以判断。继续前进吧。
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(15, 7)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 15
		ダンジョン現在位置:1 = 7
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_49_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 49
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 上アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "49_2")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		ダンジョン現在位置:0 = 18
		ダンジョン現在位置:1 = 8
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_49_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 49
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "50_2")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "49_3")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 按飞翔大叔所言纵身跃下，平安着陆谷底。
			WSTR:(K++) = 悬崖跳跃的刺激与爽快感令人愉悦。
			WSTR:(K++) = 若开发更安全便捷的跳崖设施或许会受游客欢迎。
			WSTR:(K++) = %CALLNAME:PLAYER%将这份灵感铭记于心，或许日后能用上。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 悬崖跳跃的体验相当有趣。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_49_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 49
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "50_3")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 谷底遍布乱石地形，道路支离破碎。
			WSTR:(K++) = 或许某处暗藏通路，
			WSTR:(K++) = 但基本无法远离降落点太远。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 谷底乱石嶙峋，道路断续难行。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_50_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 50
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		SIF ダンジョン内一時変数:2 == 0
			ダンジョンマス画像URL_重ね表示 = えっちハート
	CASE "接続先"
	CASE "マスイベント"
		;えっちイベ
		;XXXXを使ってないダンジョン内一時変数の番号に変えること
		IF ダンジョン内一時変数:2
		ELSE
			CALL ダンジョンハプニング基本処理()
			IF RESULT
				ダンジョン内一時変数:2 = 1
			ENDIF
			CALL 口上変数初期化
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_50_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 50
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 行至谷底尽头，发现面露愁容的独坐女性。
			WSTR:(K++) = %CALLNAME:PLAYER%上前询问，女子顿时容光焕发。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「啊，太好了！有人来了！
			WSTR:(K++) = 　在谷底行走时，斗篷不小心被强风卷走……
			KSTR:(K++) = 　困在这里上不去啦！」_PAGE
			WSTR:(K++) = 「定会答谢，能带我上去吗？」
			CALL メッセージ欄表示用関数(,"哈文族女性",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 没有拒绝的理由。
			WSTR:(K++) = %CALLNAME:PLAYER%欣然应允，抱着女子跃上山顶。
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			ダンジョン現在位置:0 = 18
			ダンジョン現在位置:1 = 8
			CALL 画面再描画
			WSTR:(K++) = 「真的太感谢了！还以为要在谷底过夜了！
			WSTR:(K++) = 　按约定送上谢礼。
			WSTR:(K++) = 　虽不知用途，但听说空骑士们很推崇这对耳饰哦」
			CALL メッセージ欄表示用関数(,"哈文族女性",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 哈文族女性从行囊取出成对耳饰交给%CALLNAME:PLAYER%。
			WSTR:(K++) = 牵牛花造型的耳饰散发着炽热火焰之力。
			KSTR:(K++) = 正是攀登参拜道的绝佳装备。_PAGE
			KSTR:(K++) = %CALLNAME:PLAYER%获得了「牵牛花耳饰」！_PAGE
			WSTR:(K++) = 目送哈文族女性踏上归途，%CALLNAME:PLAYER%一行继续登山。
			CALL 汎用耳飾り取得処理("牵牛花耳饰")
		ELSE
			KSTR:(K++) = 道路在此处似乎已是尽头。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_50_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 50
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 上アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "50_7")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		ダンジョン現在位置:0 = 26
		ダンジョン現在位置:1 = 8
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_50_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 50
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "48_7")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "52_7")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "51_6")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 周围被岩石阻隔，道路分成数条。
			WSTR:(K++) = 谷底罕见地延伸着一条长路。
			WSTR:(K++) = 虽非通往山顶的路线，但若有兴趣不妨稍作探索。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 周围被岩石阻隔，道路分成数条。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_50_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 50
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 被妖精引领至深处，眼前是五彩缤纷的花田。
			KSTR:(K++) = 大概是妖精们在照料吧。盛放的鲜花绚烂夺目。_PAGE
			WSTR:(K++) = 正为意外美景沉醉时，方才的妖精采撷花朵编织着什么。
			WSTR:(K++) = ……似乎是花冠。
			WSTR:(K++) = 妖精将编好的花冠轻轻戴在%CALLNAME:PLAYER%头上。
			WSTR:(K++) = 应是表达谢意，美好的礼物就欣然收下吧。
			KSTR:(K++) = %CALLNAME:PLAYER%获得了「花冠」！_PAGE
			WSTR:(K++) = 经历意外邂逅的%CALLNAME:PLAYER%一行告别妖精，折返原路。
			CALL 素材入手処理("花冠", 1)
		ELSE
			KSTR:(K++) = 花田中盛放的鲜花绚烂夺目。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_51_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 51
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 上アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "51_4")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		ダンジョン現在位置:0 = 36
		ダンジョン現在位置:1 = 8
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_51_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 51
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "48_4")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 行至谷底时，头顶传来物体滚落声。
			IF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:52:6, 4) == 0
				WSTR:(K++) = 落石吗？%CALLNAME:PLAYER%一行驻足仰视。
				WSTR:(K++) = ……不，那是蜷缩成团滚落悬崖的魔物群！
			ELSE
				WSTR:(K++) = 这声音……！%CALLNAME:PLAYER%迅速抬头。
				WSTR:(K++) = 果然！是球球兽群！
			ENDIF
			CALL メッセージ欄表示用関数(,,,0)

			敵BATTLE_STATE_STR:0:エネミー名 = Lv19_球球兽
			敵BATTLE_STATE_STR:1:エネミー名 = Lv19_球球兽
			敵BATTLE_STATE_STR:4:エネミー名 = Lv19_球球兽
			敵BATTLE_STATE_STR:5:エネミー名 = Lv19_球球兽
			CALL 雑魚敵遭遇汎用処理

			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				IF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:52:6, 4) == 0
					WSTR:(K++) = 击退滚落魔物，确认周边安全。
					WSTR:(K++) = 据说这种魔物惯用滚落突袭捕猎。
					WSTR:(K++) = 谷底需警惕的不仅是前后左右，还有头顶。小心前进吧。
				ELSE
					WSTR:(K++) = 谷底因易受滚落袭击，栖息着大量球球兽。
					WSTR:(K++) = 注意物体滚落声，谨防突袭。
				ENDIF
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:0:エネミー名 = Lv19_球球兽
			敵BATTLE_STATE_STR:1:エネミー名 = Lv19_球球兽
			敵BATTLE_STATE_STR:4:エネミー名 = Lv19_球球兽
			敵BATTLE_STATE_STR:5:エネミー名 = Lv19_球球兽
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_51_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 51
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 发现结着诱人果实的树木。
			WSTR:(K++) = 正欲摘取充饥时……树后惊现巨型蜂巢！
			WSTR:(K++) = 这般巨蜂定会袭击人类，最好先行清除。
			WSTR:(K++) = %CALLNAME:PLAYER%一行摆出战斗架势！
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:2:エネミー名 = Lv17_风蜂
			敵BATTLE_STATE_STR:3:エネミー名 = Lv17_风蜂
			敵BATTLE_STATE_STR:4:エネミー名 = Lv20_风蜂女王
			敵BATTLE_STATE_STR:5:エネミー名 = Lv17_风蜂
			敵BATTLE_STATE_STR:6:エネミー名 = Lv17_风蜂
			敵BATTLE_STATE_STR:7:エネミー名 = Lv17_风蜂
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 驱散蜂群，捣毁巢穴。
				WSTR:(K++) = 这样路人就不会遇袭了。
				WSTR:(K++) = 顺带摘些果实带走罢。
				WSTR:(K++) = %CALLNAME:PLAYER%获得了３个「苹果」！
				CALL 素材入手処理("苹果", 3)
				CALL メッセージ欄表示用関数(,,,0)
				SETBIT ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:0:エネミー名 = Lv17_风蜂
			敵BATTLE_STATE_STR:3:エネミー名 = Lv17_风蜂
			敵BATTLE_STATE_STR:4:エネミー名 = Lv20_风蜂女王
			敵BATTLE_STATE_STR:5:エネミー名 = Lv17_风蜂
			敵BATTLE_STATE_STR:7:エネミー名 = Lv17_风蜂
			敵BATTLE_STATE_STR:8:エネミー名 = Lv17_风蜂
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_52_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 52
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 上アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "52_4")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		ダンジョン現在位置:0 = 34
		ダンジョン現在位置:1 = 8
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_52_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 52
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "52_6")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 若情报无误，此路应通往登顶节点。
			WSTR:(K++) = 但周遭崖石遮挡视线，唯有亲探方知虚实。
			WSTR:(K++) = 注意别迷路谨慎前行。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 周围崖石嶙峋视野极差。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_52_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 52
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "53_5")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "54_6")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 行至谷底时，头顶传来物体滚落声。
			IF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:51:4, 4) == 0
				WSTR:(K++) = 落石吗？%CALLNAME:PLAYER%一行驻足仰视。
				WSTR:(K++) = ……不，那是蜷缩成团滚落悬崖的魔物群！
			ELSE
				WSTR:(K++) = 这声音……！%CALLNAME:PLAYER%迅速抬头。
				WSTR:(K++) = 果然！是球球兽群！
			ENDIF
			CALL メッセージ欄表示用関数(,,,0)

			敵BATTLE_STATE_STR:0:エネミー名 = Lv19_球球兽
			敵BATTLE_STATE_STR:2:エネミー名 = Lv19_球球兽
			敵BATTLE_STATE_STR:5:エネミー名 = Lv19_球球兽
			CALL 雑魚敵遭遇汎用処理

			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				IF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:51:4, 4) == 0
					WSTR:(K++) = 击退滚落魔物，确认周边安全。
					WSTR:(K++) = 据说这种魔物惯用滚落突袭捕猎。
					WSTR:(K++) = 谷底需警惕的不仅是前后左右，还有头顶。小心前进吧。
				ELSE
					WSTR:(K++) = 谷底因易受滚落袭击，栖息着大量球球兽。
					WSTR:(K++) = 注意物体滚落声，谨防突袭。
				ENDIF
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:0:エネミー名 = Lv19_球球兽
			敵BATTLE_STATE_STR:2:エネミー名 = Lv19_球球兽
			敵BATTLE_STATE_STR:5:エネミー名 = Lv19_球球兽
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_52_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 52
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 谷底散落着破碎的石板状物体。
			WSTR:(K++) = 似乎是相当古老的遗物……至少有数百年历史。
			CALL 知識技能所持者検索("歴史知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1 && CSTR:LOCAL:出演作品 == ""
				WSTR:(K++) = %CALLNAME:PLAYER%成功辨识出保存较完整的文字。
				WSTR:(K++) = 按文意排列后大致如下：
				KSTR:(K++) = 「星之民，将欢愉之兽────，然──────封印────
				KSTR:(K++) = 　────切莫唤醒──────苍穹崩坏────」_PAGE
				WSTR:(K++) = ……难以解读更多内容。
				WSTR:(K++) = %CALLNAME:PLAYER%一行放弃破译，继续探索。
				SETBIT ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4
			ELSE
				WSTR:(K++) = 因文字形制古旧且石板碎裂，未能完整解读。
				WSTR:(K++) = 若具备空之世界的历史知识或许能破译……
			ENDIF
		ELSE
			KSTR:(K++) = 谷底散落着破碎的石板状物体。
			KSTR:(K++) = 「星之民，将欢愉之兽────，然──────封印────
			KSTR:(K++) = 　────切莫唤醒──────苍穹崩坏────」字样。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_52_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 52
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		SIF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "50_8")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 沿狭窄小径前行，发现两侧岩壁布满孔洞。
			WSTR:(K++) = 探头查看发现其中栖息着精灵类魔物——妖精！
			KSTR:(K++) = %CALLNAME:PLAYER%们瞬间摆出战斗姿态……但妖精们举止异常。_PAGE
			WSTR:(K++) = 毫无敌意，反而好奇地环绕%CALLNAME:PLAYER%一行飞舞。
			WSTR:(K++) = 或许因久居僻壤，对人类并无恶意。
			KSTR:(K++) = 妖精们似乎特别对你们的食物感兴趣……_PAGE
			WSTR:(K++) = 如何选择？
			KSTR:(K++) = BUTTON_[分些食物给它们]
			KSTR:(K++) = BUTTON_[魔物终究危险。不可松懈]
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[分些食物给它们]"
					WSTR:(K++) = %CALLNAME:PLAYER%一行将随身食物分给妖精。
					WSTR:(K++) = 妖精们欢欣雀跃，啃着食物绕空飞舞。
					KSTR:(K++) = 其中体型较大的妖精突然拽住%CALLNAME:PLAYER%的手。_PAGE
					WSTR:(K++) = 似乎要带你们前往深处。
					WSTR:(K++) = 仍未感受到敌意。或许可以稍作探访。
					CALL 接続ルート全開放処理(マス深度, マス分岐)
					SETBIT ダンジョン構造配列_風遊ぶ渓谷の参道:マス深度:マス分岐, 4
				CASE "[魔物终究危险。不可松懈]"
					WSTR:(K++) = 看似温顺终究是魔物，可能是诱敌之计。
					WSTR:(K++) = 就此折返。
				CASEELSE
					CLEARLINE 1
					REUSELASTLINE  
					GOTO LOOP_MESSAGE
			ENDSELECT
		ELSE
			KSTR:(K++) = 妖精们正平静生活。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_53_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 53
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 上アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "54_0")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "54_2")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "53_3")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		ダンジョン現在位置:0 = 30
		ダンジョン現在位置:1 = 8
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_53_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 53
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 「耶——！」年轻人们披着风之斗篷喧闹作乐。
			WSTR:(K++) = 应是来体验跳崖的观光团。
			WSTR:(K++) = 支起帐篷燃起篝火，打算在此露营。
			WSTR:(K++) = 不便打扰兴致，另寻他处探索吧。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 「耶——！」年轻人们披着风之斗篷喧闹作乐。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_53_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 53
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 岩隙阴影处发现散落着魔物粪便与兔骨。
			WSTR:(K++) = 应是先前球状魔物的巢穴，所幸除已击退的群体外别无威胁。
			WSTR:(K++) = 简单搜寻后未发现人类遇害痕迹。
			WSTR:(K++) = 暂无伤亡可稍安心，%CALLNAME:PLAYER%一行离开魔物巢穴。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 魔物粪便与兔骨散落满地。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_54_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 54
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 在谷底前进时，发现岩石阴影处隐藏着数米深的浅洞窟。
			WSTR:(K++) = 窥视洞窟内部，可见破损的椅子和几件玩具。
			WSTR:(K++) = 似乎是当地孩子们的秘密基地。
			WSTR:(K++) = 还发现了破旧的色情杂志……还是别打扰为妙。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 这里有洞窟，似乎是当地孩子们的秘密基地。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_54_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 54
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 谷底种植着具有驱魔效果的树木。
			WSTR:(K++) = 虽然作用范围有限，但会散发魔物厌恶气味的香木。
			WSTR:(K++) = 可能是为了保障游客跳崖区域的安全而种植。
			WSTR:(K++) = 注意不要随意折断树枝，尽量别触碰。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 谷底种植着具有驱魔效果的树木。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_54_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 54
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "55_5")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 这片区域相比其他谷底道路更为平整。
			WSTR:(K++) = 除了%CALLNAME:PLAYER%一行，偶尔也会有参拜客经过。
			WSTR:(K++) = 虽然要绕远路又有魔物出没，但依然有人为参拜提亚玛特而来。
			WSTR:(K++) = 和我们家的星晶兽待遇真是天差地别啊，%CALLNAME:PLAYER%一行边想边前进。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 这片区域相比其他谷底道路更为平整。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_54_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 54
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "52_8")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 降落到谷底后是绵延的狭窄小道。
			WSTR:(K++) = 难以两人并行，需要排成纵队前进。
			WSTR:(K++) = 注意保持退路畅通，谨慎前行。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 降落到谷底后是绵延的狭窄小道。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_風遊ぶ渓谷の参道_55_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 55
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 上アイコン
	CASE "接続先"
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = %CALLNAME:PLAYER%一行披上风之斗篷，乘着强风跃上悬崖！
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(42, 8)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 42
		ダンジョン現在位置:1 = 8
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_55_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 55
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "55_2")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 谷底道路前方可见特征性地形。
			WSTR:(K++) = 聚集着足以托起人体的强风区域……正是使用风之斗篷的地形。
			WSTR:(K++) = 这应该连接着通往山顶的路线，立刻上去看看吧。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 谷底道路前方可见适合使用风之斗篷的地形。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_風遊ぶ渓谷の参道_55_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 55
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
		ダンジョンマス画像URL_重ね表示 = 上アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "54_8")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		ダンジョン現在位置:0 = 29
		ダンジョン現在位置:1 = 8
		CALL 画面再描画
ENDSELECT

