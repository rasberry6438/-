;-------------------------------------------------------------------------------
;    BARの色違え版
;-------------------------------------------------------------------------------
;    例  PRINTFORM %PRINT_COLORBAR(40,100,8,%UNICODE(0x2584)%,%UNICODE(0x2584)%,,0x404040)% 
;        [===     ]
;    引数はBARとほぼ一緒 + ARGSで描写文字の変更が可能(指定しない場合はBARと同じ仕様)
;    ARG:3はバーの色(0xFFFFFF形式で指定),ARG:4はバーの背景色(0xFFFFFF形式で指定)
;===============================================================================
;@PRINT_COLORBAR(ARG, ARG:1, ARG:2, ARGS = "*", ARGS:1 = ".", ARG:3, ARG:4)
;#LOCALSIZE 5
;LOCAL:1 = ARG * ARG:2 / ARG:1
;LOCAL:2 = GETCOLOR()
;FOR LOCAL, 1, ARG:2 + 1
;	IF LOCAL:1 >= LOCAL
;		IF !LOCAL:3
;			SETCOLOR ARG:3
;;			LOCAL:3 = 1
;		ENDIF
;		PRINTFORM %ARGS%
;	ELSE
;		IF !LOCAL:4
;			SETCOLOR ARG:4
;			LOCAL:4 = 1
;		ENDIF
;		PRINTFORM %ARGS:1%
;	ENDIF
;NEXT
;SETCOLOR LOCAL:2
;VARSET LOCAL

;-------------------------------------------------------------------------------
;    ゲージの表示
;-------------------------------------------------------------------------------
;0起点は左側
;横幅：％で記載すること。100で1文字分、1000で10文字分
;縦幅：下揃えで縦幅指定。％で記載すること。100より上を指定するとエラー吐くので注意
;===============================================================================
@PRINT_COLORBAR(現在値, 上限値, 横幅, 縦幅, 残ゲージ色, 失ゲージ色)
#DIM 現在値
#DIM 上限値
#DIM 横幅
#DIM 縦幅
#DIM 残ゲージ色
#DIM 失ゲージ色

IF 現在値 && (現在値 * 横幅 / 上限値) > 0
	SETCOLOR 残ゲージ色
	PRINT_RECT 0, (100 - 縦幅), (現在値 * 横幅 / 上限値), 縦幅
	RESETCOLOR
ENDIF

IF 上限値 - 現在値 && (横幅 - (現在値 * 横幅 / 上限値)) > 0
	SETCOLOR 失ゲージ色
	PRINT_RECT 0, (100 - 縦幅), (横幅 - (現在値 * 横幅 / 上限値)), 縦幅
	RESETCOLOR
ENDIF

;-------------------------------------------------------------------------------
;    ゲージの表示（HTML版）
;-------------------------------------------------------------------------------
;0起点は左側
;横幅：％で記載すること。100で1文字分、1000で10文字分
;縦幅：下揃えで縦幅指定。％で記載すること。100より上を指定するとエラー吐くので注意
;===============================================================================
@PRINT_COLORBAR_HTML(現在値, 上限値, 横幅, 縦幅, 残ゲージ色, 失ゲージ色)
#DIM 現在値
#DIM 上限値
#DIM 横幅
#DIM 縦幅
#DIMS 残ゲージ色
#DIMS 失ゲージ色

LOCALS = 

IF 現在値 && (現在値 * 横幅 / 上限値) > 0
	LOCALS += @"<shape type='rect' param='0, {100 - 縦幅}, {現在値 * 横幅 / 上限値}, {縦幅}' color='#%残ゲージ色%'>"
ENDIF

IF 上限値 - 現在値 && (横幅 - (現在値 * 横幅 / 上限値)) > 0
	LOCALS += @"<shape type='rect' param='0, {100 - 縦幅}, {横幅 - (現在値 * 横幅 / 上限値)}, {縦幅}' color='#%失ゲージ色%'>"
ENDIF

RESULTS = %LOCALS%
