;--------------------------------------------------
;ダンジョン探索中に条件を満たしていた時表示される文章
;--------------------------------------------------
;・使い方
;「27」をキャラクター番号に置換し、それぞれの関数に処理を入れる
;--------------------------------------------------

;--------------------------------------------------
;「仲間と会話」ボタン押下時
;簡単に何度も見られるので、条件分岐やランダム化で複数パターンの登録を推奨
;--------------------------------------------------
@KOJO_DUNGEON_仲間と会話_27(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)
SELECTCASE RAND:5
	CASE 0
		WSTR:(K++) = 「爸爸现在会在哪里呢……」
	CASE 1
		WSTR:(K++) = 「说起来，碧到底是什么生物…龙吗？」
	CASE 2
		WSTR:(K++) = 「没想到能走到这里，在赞克汀泽时根本不敢想象呢」
		KSTR:(K++) = 「好想和大家一起冒险到天空尽头啊」
	CASE 3
		WSTR:(K++) = 「碧、卡塔莉娜小姐、拉卡姆先生、欧根先生、露莉亚、%CALLNAME:MASTER%……」
		KSTR:(K++) = 「我要和大家继续天空之旅！」
	CASE 4
		WSTR:(K++) = 「今天该用什么装备呢……根据委托灵活使用各种武器才算合格的骑空士……」
		KSTR:(K++) = 「新入手的那件也想试试看呢……唔……」
ENDSELECT
CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ,,0)




;--------------------------------------------------
;戦闘中特定タイミングで表示される文章
;--------------------------------------------------
;固有スキル発動時
;「（キャラ名）の（アビ名）！」よりも前に表示される
;汎用アビや衣装アビだと発動しないので注意
;--------------------------------------------------
@KOJO_DUNGEON_固有アビ発動時_27_1(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ

;YYYYを固有アビ関数の「@固有アビ_XXXX_YYYY」のYYYYと同じに変更する
;使用したアビリティの名前は「使用アビ名」に入ってくる
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)
STRDATA KSTR:(K++)
	DATA 「狂怒！」
	DATA 「好嘞！打起精神上吧！」
	DATA 「要动真格了！」
ENDDATA
CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

@KOJO_DUNGEON_固有アビ発動時_27_2(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ

;YYYYを固有アビ関数の「@固有アビ_XXXX_YYYY」のYYYYと同じに変更する
;使用したアビリティの名前は「使用アビ名」に入ってくる
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)
STRDATA KSTR:(K++)
	DATA 「瑞吉蕾芙！」
	DATA 「破——！」
	DATA 「嘿咻！」
ENDDATA
CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

@KOJO_DUNGEON_固有アビ発動時_27_3(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ

;YYYYを固有アビ関数の「@固有アビ_XXXX_YYYY」のYYYYと同じに変更する
;使用したアビリティの名前は「使用アビ名」に入ってくる
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)
STRDATA KSTR:(K++)
	DATA 「粉碎——切割！」
	DATA 「冲呀！」
	DATA 「看招！」
ENDDATA
CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)
	
@KOJO_DUNGEON_固有アビ発動時_27_4(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ

;YYYYを固有アビ関数の「@固有アビ_XXXX_YYYY」のYYYYと同じに変更する
;使用したアビリティの名前は「使用アビ名」に入ってくる
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)
STRDATA KSTR:(K++)
	DATA 「盾墙阵列！」
	DATA 「大家由我来守护！」
	DATA 「这招如何！」
	ENDDATA
CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)


;--------------------------------------------------
;奥義発動時
;「（キャラ名）の奥義：（奥義名）！」よりも前に表示される
;--------------------------------------------------
@KOJO_DUNGEON_奥義発動時_27(対象キャラ, 使用奥義名)
#DIMS 使用奥義名
#DIM 対象キャラ

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

SELECTCASE RAND:5
	CASE 0
		WSTR:(K++) = 「火力全开！我要使出全力了！」
	CASE 1
		WSTR:(K++) = 「这可是珍藏绝招哦！」
	CASE 2
		KSTR:(K++) = 「就用这招一决胜负吧！」
	CASE 3
		KSTR:(K++) = 「现在就是决胜时刻啦——！」
	CASE 4
		KSTR:(K++) = 「好嘞！那我也全力以赴！看招——！」
ENDSELECT

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;チェンバースト発動時
;「チェインバースト！」（フルチェイン！）よりも前に表示される
;該当キャラが起点になった時（＝ターンで最初に奥義を撃った）にしか呼ばれないので注意
;--------------------------------------------------
@KOJO_DUNGEON_チェンバ発動時_27(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

;掛け合いの作り方
;ZZZZ = 掛け合い相手のCSVに記載してあるキャラ番号とする
LOCAL:2 = GETCHARA(28)
IF キャラ隊列検索(LOCAL:2) > -1 && MATCH(チェンバ基準キャラ保存, キャラ隊列検索(LOCAL:2))
	KSTR:(K++) = ++++
	切り替え名前:0 = %CALLNAME:(LOCAL:2)%
	切り替え顔グラリソース:0 = 探索用_{キャラ隊列検索(LOCAL:2)}_顔
	KSTR:(K++) = 「姬塔！要上了！」

	KSTR:(K++) = ++++
	切り替え名前:1 = %CALLNAME:対象キャラ%
	切り替え顔グラリソース:1 = 探索用_{LOCAL}_顔
	KSTR:(K++) = 「明白，露莉亚！预备——起！」
ELSE
	KSTR:(K++) = 「大家一起上！预备——起！」
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;と記述すると下に一個、掛け合い相手の顔グラと名前が表示されたメッセージ欄を増やせるので、そこで掛け合いを行う
;複数個メッセージ欄を増やす場合、切り替え顔グラリソース:1、切り替え名前:1のように配列番号を１つずつ増やすこと
;--------------------------------------------------
;トドメ時
;行動の結果（◯◯は倒れた！など）の後に表示される
;複数攻撃時は一人でも倒していれば表示される
;--------------------------------------------------
;口上用トドメフラグ には倒した敵の数が入っている
;口上用技名保存 には奥義名・アビ名が入っている
;       通常攻撃の場合は「通常攻撃」、チェンバの場合は「チェインバースト」が入っている
@KOJO_DUNGEON_トドメ時_27(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「成功啦！」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)
;--------------------------------------------------
;味方から回復を受けた時
;「（キャラ名）のＨＰが」の直後に表示される
;複数人回復した場合、ランダムで一人の分が表示される
;--------------------------------------------------
@KOJO_DUNGEON_被回復時_27(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

;回復した側のキャラは「BATTLE_STATE:戦闘行動キャラ:キャラ登録番号」でキャラ番号が
;「戦闘行動キャラ」で隊列番号が取れる

KSTR:(K++) = 「好！继续加油！」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;戦闘勝利時
;ルピやEXPの取得よりも前に表示される
;--------------------------------------------------
@KOJO_DUNGEON_戦闘勝利時_27(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)


SELECTCASE RAND:4
	CASE 0
		WSTR:(K++) = 「只要我们在一起，无论发生什么都不怕！！」
	CASE 1
		WSTR:(K++) = 「见识到了吧！」
	CASE 2
		KSTR:(K++) = 「不过如此嘛！」
	CASE 3
		KSTR:(K++) = 「好，这下尘埃落定了！」
ENDSELECT

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;全滅時
;--------------------------------------------------
@KOJO_DUNGEON_全滅時_27(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「呜啊……撑不住了……」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;逃走時
;--------------------------------------------------
@KOJO_DUNGEON_逃走時_27(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「这点程度不算什么……！」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)
