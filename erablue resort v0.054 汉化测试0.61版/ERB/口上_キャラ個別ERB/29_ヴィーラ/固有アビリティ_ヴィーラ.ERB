;レイヤーライズⅡ
@固有アビ_29_1(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名

アビ名 = レイヤーライズⅡ
消費ＭＰ = 40


SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>敵単体に［累積10％最大30％］（累積枠・5ターン）の攻撃力減少効果を与える。
		詳細文文字列受け渡し変数 += @"<br>［累積10％最大30％］（累積枠・5ターン）の防御力減少効果を与える。"
		詳細文文字列受け渡し変数 += @"<br>自身に［累積10％最大30％］（累積枠）の攻撃力増加効果を与える。"
		詳細文文字列受け渡し変数 += @"<br>自身に［累積10％最大30％］（累積枠）の防御力増加効果を与える。"
		RETURN 消費ＭＰ
	CASE "アビ効果"
		;攻防弱体部分
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_敵単体
		アビ汎用文字列:バフ・デバフ枠 = 攻撃力累積
		アビ汎用文字列:バフ・デバフ対象能力 = 攻撃力
		アビ汎用変数:効果割合 = 10
		アビ汎用変数:累積上限_割合 = 30
		アビ汎用変数:持続ターン = 5
		CALL アビテンプレート_不利効果_累積デバフ効果セット

		アビ汎用文字列:バフ・デバフ枠 = 防御力累積
		アビ汎用文字列:バフ・デバフ対象能力 = 防御力
		CALL アビテンプレート_不利効果_累積デバフ効果セット
		
		;攻防強化部分
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_自己のみ
		アビ汎用文字列:バフ・デバフ枠 = 攻撃力_累積
		アビ汎用文字列:バフ・デバフ対象能力 = 攻撃力
		アビ汎用変数:効果割合 = 10
		アビ汎用変数:累積上限_割合 = 30
		アビ汎用変数:持続ターン = -1
		CALL アビテンプレート_有利効果_累積バフ効果セット

		アビ汎用文字列:バフ・デバフ枠 = 防御力_累積
		アビ汎用文字列:バフ・デバフ対象能力 = 防御力
		CALL アビテンプレート_有利効果_累積バフ効果セット
ENDSELECT

;イーヴィング･イグジスタンス　即発動なので重め
@固有アビ_29_2(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
IF 基礎BATTLE_STATE:キャラ番号:Lv >= 40
	アビ名 = イーヴィング・イグジスタンス＋
	消費ＭＰ = 80
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 15
	アビ名 = イーヴィング・イグジスタンス
	消費ＭＰ = 50
ELSE
	アビ名 = 
ENDIF

SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>味方全体に（1回）の弱体無効効果を与える。
		IF アビ名 == "イーヴィング・イグジスタンス＋"
			詳細文文字列受け渡し変数 += @"<br>自身に［100％］（Ａ枠・2ターン）のTA率上昇効果を与える。"
		ELSEIF アビ名 == "イーヴィング・イグジスタンス"
			詳細文文字列受け渡し変数 += @"<br>自身に［100％］（Ａ枠・1ターン）のTA率上昇効果を与える。"
		ENDIF
		詳細文文字列受け渡し変数 += @"<br>このアビリティでは行動回数を消費しない。"
		RETURN 消費ＭＰ
	CASE "アビ効果"
		;マウント部分
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_味方全体_生者のみ
		アビ汎用文字列:バフ・デバフ枠 = 弱体無効
		アビ汎用文字列:バフ・デバフ対象能力 = 弱体無効
		アビ汎用変数:持続回数 = 1
		CALL アビテンプレート_有利効果_バフ効果セット
		
		;TA確定部分
		IF アビ名 == "イーヴィング・イグジスタンス＋"
			CALL アビ汎用変数文字列リセット
			CALL アビ対象選択テンプレート_自己のみ
			アビ汎用変数:効果量 = 100
			アビ汎用変数:持続ターン = 2
			アビ汎用文字列:バフ・デバフ枠 = TA率A
			アビ汎用文字列:バフ・デバフ対象能力 = TA率
			CALL アビテンプレート_有利効果_バフ効果セット
		ELSEIF アビ名 == "イーヴィング・イグジスタンス"
			CALL アビ汎用変数文字列リセット
			CALL アビ対象選択テンプレート_自己のみ
			アビ汎用変数:効果量 = 100
			アビ汎用変数:持続ターン = 1
			アビ汎用文字列:バフ・デバフ枠 = TA率A
			アビ汎用文字列:バフ・デバフ対象能力 = TA率
			CALL アビテンプレート_有利効果_バフ効果セット
		ENDIF
		アビテンプレート用_行動消費無しフラグ = 1
ENDSELECT


;アフェクション・オース　付加効果が強いので火力は控えめ。まぁ二回攻撃してるんで火力はあるんですけどね。
@固有アビ_29_3(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIM 効果数値
#DIMS アビ名
#DIM 攻撃対象一時退避
IF 基礎BATTLE_STATE:キャラ番号:Lv >= 40
	アビ名 = アフェクション・オース＋
	効果数値 = 300
	消費ＭＰ = 200
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 30
	アビ名 = アフェクション・オース
	効果数値 = 200
	消費ＭＰ = 150
ELSE
	アビ名 = 
ENDIF

SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>敵単体に［攻撃力✕{効果数値}％］の闇属性ダメージを与える。
		詳細文文字列受け渡し変数 += @"<br>［攻撃力✕{効果数値}％］の光属性ダメージを与える。"
		詳細文文字列受け渡し変数 += @"<br>自身に［{効果数値}］のＨＰ回復を与える。"
		詳細文文字列受け渡し変数 += @"<br>攻撃した敵の光・闇属性の攻撃・耐性減少効果を与える。"
		RETURN 消費ＭＰ
	CASE "アビ説明文_詳細"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>敵単体に［攻撃力✕{効果数値}％］の闇属性ダメージを与える。
		詳細文文字列受け渡し変数 += @"<br>［攻撃力✕{効果数値}％］の光属性ダメージを与える。"
		詳細文文字列受け渡し変数 += @"<br>自身に［{効果数値}］のＨＰ回復を与える。"
		詳細文文字列受け渡し変数 += @"<br>攻撃した敵に［10］（通常枠・5ターン）の光属性攻撃減少効果を与える。"
		詳細文文字列受け渡し変数 += @"<br>攻撃した敵に［10］（通常枠・5ターン）の闇属性攻撃減少効果を与える。"
		詳細文文字列受け渡し変数 += @"<br>攻撃した敵に［15］（通常枠・5ターン）の光属性耐性減少効果を与える。"
		詳細文文字列受け渡し変数 += @"<br>攻撃した敵に［15］（通常枠・5ターン）の闇属性耐性減少効果を与える。"
	CASE "アビ効果"
		CALL アビ汎用変数文字列リセット
		;攻撃部分
		CALL アビ対象選択テンプレート_敵単体
		;後半のデバフに向けて対象の保存
		攻撃対象一時退避 = アビテンプレート用_対象保存:0
		アビ汎用変数:効果割合 = 効果数値
		CALL アビテンプレート_ダメージ処理_光属性
		CALL アビテンプレート_ダメージ処理_闇属性
		
		;回復部分
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_自己のみ
		アビ汎用変数:効果量 = 効果数値
		CALL アビテンプレート_回復処理_MAXでも回復
		
		;弱体・攻撃部分
		CALL アビ汎用変数文字列リセット
		;リセットしてから保存してた対象にデバフ掛けてく
		CALL アビ対象選択テンプレート_指定(攻撃対象一時退避)

		アビ汎用文字列:バフ・デバフ枠 = 属性与ダメージ_光
		アビ汎用文字列:バフ・デバフ対象能力 = 属性与ダメージ_光
		アビ汎用変数:効果割合 = 10
		アビ汎用変数:基礎成功確率 = 100
		アビ汎用変数:持続ターン = 5
		CALL アビテンプレート_不利効果_デバフ効果セット

		CALL アビ汎用変数文字列リセット
		アビ汎用文字列:バフ・デバフ枠 = 属性与ダメージ_闇
		アビ汎用文字列:バフ・デバフ対象能力 = 属性与ダメージ_闇
		アビ汎用変数:効果割合 = 10
		アビ汎用変数:基礎成功確率 = 100
		アビ汎用変数:持続ターン = 5
		CALL アビテンプレート_不利効果_デバフ効果セット

		;弱体・防御部分
		CALL アビ汎用変数文字列リセット
		アビ汎用文字列:バフ・デバフ枠 = 属性被ダメージ_光
		アビ汎用文字列:バフ・デバフ対象能力 = 属性被ダメージ_光
		アビ汎用変数:効果割合 = 15
		アビ汎用変数:基礎成功確率 = 100
		アビ汎用変数:持続ターン = 5
		CALL アビテンプレート_不利効果_デバフ効果セット
		
		CALL アビ汎用変数文字列リセット
		アビ汎用文字列:バフ・デバフ枠 = 属性被ダメージ_闇
		アビ汎用文字列:バフ・デバフ対象能力 = 属性被ダメージ_闇
		アビ汎用変数:効果割合 = 15
		アビ汎用変数:基礎成功確率 = 100
		アビ汎用変数:持続ターン = 5
		CALL アビテンプレート_不利効果_デバフ効果セット
ENDSELECT

