;****************************************
;コマンド実行後に表示される文章
;該当のキャラが「TARGET」の時に呼ばれる
;****************************************
;・使い方
;「XXXX」をキャラクター番号に置換、コマンド番号の所に任意のコマンド番号を入れ、中身に処理を記述する
;テンプレート中にある分岐は例示としておいてあるものなので、必要な場合は各自でコピペをお願いします
;****************************************
;・わかりづらい変数
;・コマンド実行による各部位の快楽量
	;CUP:対象キャラ:快Ｃ
	;CUP:対象キャラ:快Ｖ
	;CUP:対象キャラ:快Ａ
	;CUP:対象キャラ:快Ｂ
	;CUP:対象キャラ:快Ｓ

;TCVAR:対象キャラ:弱点コマンドフラグ
	;該当コマンドが弱点かどうか
	;現在弱点コマンドをゲーム中に変更する手段は無く、パラメータ設定ファイルで指定するか、指定の無い場所は開始時にランダムで決定される
	;口上テンプレートのパラメータ設定ファイルで全部弱点指定してしまえば弱点コマンドフラグで分岐する必要がない

;コマンド初回実行
	;IF STRFIND(コマンド初回フラグ:対象キャラ:0, @"-コマンド番号-") < 0
	;コマンド番号は任意に変更のこと

;カタリナをLOCALに登録
;LOCAL = キャラ検索("[苍穹的守护骑士]卡塔莉娜・阿利泽")
;カタリナが島にいるかどうか
;CFLAG:LOCAL):滞在期間 > 0
;カタリナが同じ場所にいるかどうか
;CFLAG:LOCAL:現在位置 == CFLAG:MASTER:現在位置 && CFLAG:LOCAL:現在マップ種別 == CFLAG:MASTER:現在マップ種別


@お姉様レーダー()
#FUNCTION
#DIM お姉様
お姉様 = キャラ検索("[苍穹的守护骑士]卡塔莉娜・阿利泽")
IF CFLAG:お姉様:現在位置 == CFLAG:MASTER:現在位置 && CFLAG:お姉様:現在マップ種別 == CFLAG:MASTER:現在マップ種別
	RETURNF 2
ELSEIF CFLAG:お姉様:滞在期間 > 0
	RETURNF 1
ELSE
	RETURNF 0
ENDIF

;IF お姉様レーダー() == 2が「自分と同じ場所にカタリナがいる場合」
;IF お姉様レーダー() >= 1が「この島にカタリナが滞在している場合」
;IF お姉様レーダー() == 1が「カタリナが島にはいるが、同じ場所にはいない時のみ」。「はぁ……さっさと済ませてしまいましょう。ここにお姉様が来てしまう前に……」って溜め息交じりに事務っクスしてくれる時とか
;IF お姉様レーダー() == 0が「島にカタリナがおらずヴィーラが大人しい場合」
;()をつけることで、()の前の部分が関数名であることをemuera.exeに指示することになるので。無いと「お姉様レーダーって単語は登録されてないぞオルァ！」ってエラーでます(rsp暇人先生の講義より抜粋)

;よく使いそうなやつ
;IF BASE:対象キャラ:酩酊 > 500
;IF お姉様レーダー() == 2
;IF 陥落チェック(GETCHARA(149)) >= 1
;1なら恋慕、2ならセフレ


;--------------------------------------------------
;COM300_会話
;--------------------------------------------------
;RFLAG:コマンド結果受渡し変数
	;-1:失敗  0:通常成功  1:大成功
;ABL:MASTER:話術技能によって効果上昇

@KOJO_COM_29_300(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
SELECTCASE RFLAG:コマンド結果受渡し変数
	CASE -1
		;失敗
		SIF お姉様レーダー() == 2
			KSTR:(K++) = ヴィーラはカタリナとの会話に夢中で、%CALLNAME:PLAYER%が話しかけても反応を示さない。
			;好感度ちょびっと低下も入れるか？って話になった。どうしよっか？
		SELECTCASE RAND:4
		CASE 0
			KSTR:(K++) = 「……ん？　今なんと？」
			KSTR:(K++) = 　
			KSTR:(K++) = 多少は興味の湧く話題だったようだ。あまり聞いてはいなかったようだが……。
		CASEELSE
			KSTR:(K++) = 「ああ……はい……そうですか……」
			KSTR:(K++) = 　
				SELECTCASE RAND:2
				CASE 0
					KSTR:(K++) = 話しかけても、ヴィーラからは生返事しか返ってこない。
				CASE 1
					KSTR:(K++) = 冷たい生返事からは%TEXTR("退屈/拒絶")%の意思を感じる……
				ENDSELECT
		ENDSELECT
	CASE 0
		;成功
		IF お姉様レーダー() == 2
			IF TALENT:対象キャラ:恋慕
				SELECTCASE RAND:2
				CASE 0
					KSTR:(K++) = 「こら。　思わずお姉さまに見とれてしまうのはわかりますが……%TEXTR("あなたの恋人はわたくしですよ/恋人を前に視線で浮気とは、お仕置きが必要でしょうか")%？」
				CASE 1
					KSTR:(K++) = 「……心なしか、視線がお姉さまの%TEXTR("胸に/ほうばかり")%向いているように見えるのはわたくしの気のせいですか？」
					KSTR:(K++) = 　
					KSTR:(K++) = 「%TEXTR("……あとで話があります。　いいですね？/見るならわたくしのにしなさいな。　まったく……")%」
				ENDSELECT
			ELSE
				SELECTCASE RAND:2
				CASE 0
					KSTR:(K++) = 「まさかとは思いますが……今お姉様に、不埒な視線を送っていたのではありませんよね？」
				CASE 1
					KSTR:(K++) = 「……一度、場所を変えましょうか。　いえ、お姉様を舐めるように見るあなたの視線が、少々気になったものですから」
					KSTR:(K++) = 　
					KSTR:(K++) = 「……誤解かどうかはわたくしが決めます。 おとなしくついてきなさい。 いいですね？」
				ENDSELECT
			ENDIF
		ELSE
			IF TALENT:対象キャラ:恋慕 && RAND:2 == 0
				SELECTCASE RAND:10
				CASE 0
					KSTR:(K++) = 「こら。　わたくしの胸ばかり見て話すのをおやめなさい！　はしたない」
					IF RAND:4 == 0
						WSTR:(K++) = 　
						KSTR:(K++) = 「……そうあからさまに見ずとも、好きなだけ触れる立場でしょうに。　まったく……」
					ENDIF
				CASE 1
					KSTR:(K++) = 「……その顔。またいやらしいことを考えていましたね？」
					KSTR:(K++) = 　
					KSTR:(K++) = 「まったく……そういう視線はわたくし以外にみだりに向けるものではありません！」
				CASEELSE
					WSTR:(K++) = 「うふふっ_H_ 今日はあなたと、%TEXTR("何をいたしましょう/どこへ行きましょう")%か？」
					KSTR:(K++) = 　
					NSTR:(K++) = 「そうですねぇ……
					SELECTCASE RAND:8
					CASE 0
						KSTR:(K++) = 遊技場でカードでもいたしましょうか？」
						SELECTCASE RAND:2
						CASE 0
							KSTR:(K++) = 「ふふ、今日こそは勝たせていただきますので♪」
						CASE 1
							KSTR:(K++) = 「ふふ、今日は罰ゲームと称して、いったい何をさせられてしまうのでしょう……_H_」
						ENDSELECT
					CASE 1
						KSTR:(K++) = お庭でのんびりと、お散歩でもいかがでしょう？」
						KSTR:(K++) = 　
						KSTR:(K++) = 「わたくしとふたり、手と手を繋いで共に穏やかな時間を……。望んでくださるなら、さあ、どうかお手を……_H_」
					CASE 2
						KSTR:(K++) = プールでひと泳ぎいたしますか？」
						KSTR:(K++) = 　
						SELECTCASE RAND:2
						CASE 0
							KSTR:(K++) = 「……ふふ、それともわたくしの泳装姿のほうがあなたの心を惹けるでしょうか？_H_%TEXTR("ダメです/いけません")%よ？プールサイドでもよおしては……_H_」
						CASE 1
							KSTR:(K++) = 「いけませんよ？たまにはちゃんと運動しなくては。%TEXTR("ほら、泳ぎはわたくしが見て/多少のお触りは許して")%さしあげますから、ね♪」
						ENDSELECT
					CASE 3
						KSTR:(K++) = 遊技場で卓球でもいたしましょうか♪」
						SELECTCASE RAND:2
						CASE 0
							KSTR:(K++) = 「うふふっ、心配せずともハンデはさしあげましょう。では、わたくしだけラケットの打面とグリップを逆に持つ、あたりでいかがです？」
						CASE 1
							KSTR:(K++) = 「もっとも、運動能力に差がありますから。あなたが勝った場合のご褒美は盛大に♪」
							KSTR:(K++) = 　
							KSTR:(K++) = 「なんでもひとつ、願いをかなえてさしあげます。……ええ、なんでも、です_H_ ふふ、やる気が出ましたか？」
						ENDSELECT
					CASE 4
						KSTR:(K++) = 空艇港のあたりで一緒にショッピングデートでも、いかがですか？」
						KSTR:(K++) = 　
						KSTR:(K++) = 「……ふふ、デートですもの。『お持ち帰り』も、ご自由に……_H_」
					CASE 5
						KSTR:(K++) = 一緒に温泉など浸かって、のんびりといたしませんか？」
						KSTR:(K++) = 　
						KSTR:(K++) = 「うふふ、わたくし、この島の温泉は格別好きなのです♪」
					CASE 6
						KSTR:(K++) = マッサージでも、していただきたい気分です_H_」
						KSTR:(K++) = 　
						KSTR:(K++) = 「ふふっ、ここのマッサージは『気持ちいい』と評判ですから♪ どのような『施術』でも、あなたにしていただけるのなら、喜んで……_H_」
					CASE 7
						KSTR:(K++) = おや？ まったく、なんですかそのわかりやすい視線は……」
						KSTR:(K++) = 　
						KSTR:(K++) = 「臆面もなく胸元を見過ぎです！ まったく……向かうのは%TEXTR("あなた/わたくし")%の部屋でよいですか？」
					ENDSELECT
				ENDSELECT
			ELSE
				SELECTCASE RAND:3
				CASE 0
					KSTR:(K++) = 「あら、そうなんですか？　ふふ、なら後で%TEXTR("行ってみる/見てみる/やってみる/食べてみる")%こと%TEXTR("に/と")%しましょうか」
				CASE 1
					KSTR:(K++) = 「ふむ、この%TEXTR("空域/島")%にはそのような%TEXTR("場所/特産/魔物")%が……」
				CASE 2
					KSTR:(K++) = 「ふふ、たまにはこういったバカンスも、悪くないものですね」
				ENDSELECT
					KSTR:(K++) = 　
				SIF お姉様レーダー() == 0 && RAND:5 == 0
					KSTR:(K++) = 「あぁ……お姉さま%TEXTR("と/も")%来れたらよかったのに」
			ENDIF
		ENDIF
	CASE 1
		;大成功
		IF CFLAG:好感度レベル > 25 && RAND:2 == 0
			KSTR:(K++) = 「まぁ。　ふふ、お上手ですね♪」
			KSTR:(K++) = 　
			KSTR:(K++) = ヴィーラは機嫌よさそうに微笑んでいる。
		ELSE
		;スズラン構文
			KSTR:(K++) = 「──ええ、そうです。　カタリナお姉さまはわたくしの光であり──」
			KSTR:(K++) = 　
			KSTR:(K++) = ヴィーラはカタリナについて熱く語りだした。止められるものは……いない。
		ENDIF
ENDSELECT

CALL 口上変数表示(対象キャラ, 0)



;--------------------------------------------------
;COM301_お茶を淹れる
;--------------------------------------------------
;RFLAG:コマンド結果受渡し変数
	;-1:失敗  0:通常成功  1:大成功
;その場にいる全員が対象だが、口上は対面している相手のみ

@KOJO_COM_29_301(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
SELECTCASE RFLAG:コマンド結果受渡し変数
	CASE -1
		;失敗
		SELECTCASE RAND:2
		CASE 0
			KSTR:(K++) = 「いえ、どうぞお気持ちだけで」
		CASE 1
			KSTR:(K++) = 「はぁ……淹れ方がまるでなっていませんね。　これでは茶葉に失礼というものです」
		ENDSELECT
	CASE 0
		;通常成功
		SELECTCASE RAND:2
		CASE 0
			KSTR:(K++) = 「ふむ……よいお味です」
		CASE 1
			KSTR:(K++) = 「あら、気が利きますね」
		ENDSELECT
	CASEELSE
		;大成功
		KSTR:(K++) = 「ふむ……この茶葉は、この島の特産ですか？　お姉さまへのお土産に──」
ENDSELECT

CALL 口上変数表示(対象キャラ, 0)



;--------------------------------------------------
;COM302_スキンシップ
;--------------------------------------------------
;RFLAG:コマンド結果受渡し変数
	;-1:失敗  0:通常成功  1:大成功

@KOJO_COM_29_302(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
SELECTCASE RFLAG:コマンド結果受渡し変数
	CASE -1
		;失敗
		IF GET_TARGETNUM() > 1
			KSTR:(K++) = 「……っ！　人前でどこを触っているのですか！」
		ELSE
			KSTR:(K++) = 「……%TEXTR("触り方が/")%不快です。　今すぐにやめなさい」
		ENDIF
	CASE 0
		;通常成功
		IF TALENT:対象キャラ:恋慕
			IF GET_TARGETNUM() > 1
				KSTR:(K++) = 「……っ_H_　まったく……そういうのは、二人きりの時にしてくださいな」
			ELSE
				KSTR:(K++) = 「ふふ、わたくしに触れたいのですか？　どうぞ、お好きに……_H_」
			ENDIF
		ELSEIF TALENT:対象キャラ:セフレ
			KSTR:(K++) = 「っ_H_　……ふふ。　あなたとならば、こういった触れ合いも悪くないものですね」
			KSTR:(K++) = 　
			SIF RAND:5 == 0
				KSTR:(K++) = 「あぁ……お姉様とも、もっと触れ合いたいものです」
		ELSEIF CFLAG:TARGET:お願いックス回数 >= 1 || CFLAG:TARGET:泥酔ックス回数 >= 1
			;ヤって、意識して、拒絶の言葉が強くなる？
			KSTR:(K++) = 「っ！_H_　……あまりべたべたと触らないでいただけますか？」
			KSTR:(K++) = 　
			KSTR:(K++) = 軽く肌に触れただけで、ヴィーラに強く睨まれてしまった。
			KSTR:(K++) = どうやら彼女は%CALLNAME:PLAYER%と肌を重ねたことで、%CALLNAME:PLAYER%を強く意識してしまっているようだ。
		ELSE
			SELECTCASE RAND:2
			CASE 0
				KSTR:(K++) = 「……馴れ馴れしいですよ」
			CASE 1
				KSTR:(K++) = 「……少々、馴れ馴れしくし過ぎではないですか？」
			ENDSELECT
		ENDIF
	CASEELSE
		;大成功
		WSTR:(K++) = 「……%TEXTR("っ！/っ！/っん！/っあ")%_H_」
		KSTR:(K++) = 　
		KSTR:(K++) = ヴィーラはぴくん_H_と小さく体を跳ねさせると、じろりと強く睨みつけてきた。
ENDSELECT

CALL 口上変数表示(対象キャラ, 0)



;--------------------------------------------------
;COM303_口説く
;--------------------------------------------------
;RFLAG:コマンド結果受渡し変数
	;-1:失敗  0:通常成功  1:大成功
;ABL:MASTER:話術技能によって効果上昇

@KOJO_COM_29_303(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

SELECTCASE RFLAG:コマンド結果受渡し変数
	CASE -1
		;失敗
		KSTR:(K++) = 「まぁ、お世辞がお上手ですこと」
		KSTR:(K++) = 　
		KSTR:(K++) = 社交で言われ慣れているのだろう。ヴィーラは%CALLNAME:PLAYER%の言葉に感情の籠らない笑みを浮かべるばかりだ。
	CASE 0
		;通常成功
		KSTR:(K++) = 「まぁ、お世辞がお上手ですこと」
		KSTR:(K++) = 　
		KSTR:(K++) = 社交で言われ慣れているのだろう。ヴィーラは%CALLNAME:PLAYER%の言葉を笑顔で受け流した。
	CASEELSE
		;大成功
		KSTR:(K++) = 「っ……_H_　ふふ、お上手ですこと」
		KSTR:(K++) = 　
		KSTR:(K++) = なにかの琴線に触れたのだろうか。%CALLNAME:PLAYER%の言葉に、ヴィーラは僅かに頬を染めた。
ENDSELECT

CALL 口上変数表示(対象キャラ, 0)



;--------------------------------------------------
;COM304_知識を教わる
;--------------------------------------------------
;RFLAG:コマンド結果受渡し変数
	;-1:失敗  0:通常成功  1:大成功
;RFLAG:コマンド結果受渡し変数２=教えてもらう知識種類
	;230:調合知識  231:魔法知識  232:機械知識  233:錬金知識  234:魔物知識  236:絵師  237:高貴  238:釣り好き  239:踊り子  240:歌唱技能
;TALENT:(RFLAG:コマンド結果受渡し変数２)でキャラの知識のLv値が得られる
	;教えられるのは「そのキャラが持っている知識素質が、あなたよりLvが高い時のみ」なので、持っていない知識に関して記述する必要はない

@KOJO_COM_29_304(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
SIF STRFIND(コマンド初回フラグ:対象キャラ:0, @"-304-") < 0
			KSTR:(K++) = 「……わたくしに教えを乞いたい、と。　ふふ、殊勝な心がけですね。　……いいでしょう、教えて差し上げます」
SELECTCASE RFLAG:コマンド結果受渡し変数２
	CASE 1
		;調合知識
		SELECTCASE RFLAG:コマンド結果受渡し変数
			CASE -1
				;失敗
				KSTR:(K++) = 
			CASE 0
				;通常成功
				KSTR:(K++) = 
			CASEELSE
				;大成功
				KSTR:(K++) = 
		ENDSELECT
	CASE 2
		;魔法知識
	CASE 3
		;機械知識
	CASE 4
		;錬金知識
	CASE 5
		;魔物知識
		KSTR:(K++) = 「では魔物学の授業を始めるといたしましょう。　もっとも、内容はアルビオン流となりますが」
	CASE 6
		;絵師
	CASE 7
		;高貴
		SELECTCASE RFLAG:コマンド結果受渡し変数
			CASE -1
				;失敗
				KSTR:(K++) = 「ふむ……どうやらあなたに貴人たる才はあまりなさそうですね」
			CASE 0
				;通常成功
				KSTR:(K++) = 「──ええ、そうです。　ではそのままの体勢で、次のステップへ進むとしましょうか」
			CASEELSE
				;大成功
				KSTR:(K++) = 「あら。　ふふ、飲み込みが早いですね」
		ENDSELECT
	CASE 8
		;釣り好き
	CASE 9
		;踊り子
	CASE 10
		;歌唱技能
	CASE 11
		;料理人
		KSTR:(K++) = 「料理、ですか。　わたくしが教えてさしあげられるのは人並み程度ですよ？」
		KSTR:(K++) = 　
		KSTR:(K++) = 「本気で学びたいのならわたくしよりも料理人に教えを乞うことです」
ENDSELECT

CALL 口上変数表示(対象キャラ, 0)



;--------------------------------------------------
;COM313_ハグする
;--------------------------------------------------
;RFLAG:コマンド結果受渡し変数
	;-1:失敗  0:通常成功  1:大成功

@KOJO_COM_29_313(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
SELECTCASE RFLAG:コマンド結果受渡し変数
	CASE -1
		;失敗
		KSTR:(K++) = 「っ……！　離しなさいっ！」
		KSTR:(K++) = 　
		KSTR:(K++) = ヴィーラにドスのきいた声で怒られてしまった……。
	CASEELSE
		;通常成功と大成功を統合
		IF TALENT:対象キャラ:恋慕
			IF GET_TARGETNUM() > 1
				KSTR:(K++) = 「……っ_H_　まったく、所構わず……もう少し慎みを覚えなさいな」
			ELSE
				KSTR:(K++) = 「ん……_H_　ふふ、こうしてあなたに抱きしめられて、安らぐ日が来るだなんて。　我ながら、絆されたものですね……_H_」
			ENDIF
		ELSEIF TALENT:対象キャラ:セフレ
			KSTR:(K++) = 「っ_H_　……まったく、あなたときたらすぐにこうもべたべたと……っ_H_」
		ELSEIF CFLAG:TARGET:お願いックス回数 >= 1 || CFLAG:TARGET:泥酔ックス回数 >= 1
			;ヤって、意識して、拒絶の言葉が強くなる？
			;そこまで許したつもりは的な？
			KSTR:(K++) = 「っ！_H_　……わたくしと寝たからと、調子に乗っているようですね_A_」
			KSTR:(K++) = 　
			KSTR:(K++) = 軽くハグをしただけで、ヴィーラに強く睨まれてしまった。
			KSTR:(K++) = どうやら彼女は%CALLNAME:PLAYER%と肌を重ねたことで、%CALLNAME:PLAYER%を強く意識してしまっているようだ。
		ELSE
			SELECTCASE RAND:3
			CASE 0
				KSTR:(K++) = 「……鬱陶しいですよ」
			CASE 1
				KSTR:(K++) = 「……少々、調子に乗りすぎているようですね？　お灸を据えてさしあげましょうか」
			CASE 2
				KSTR:(K++) = 「少しばかり仲良くなったとて、少々気安いのではないですか？」
			ENDSELECT
		ENDIF
ENDSELECT

CALL 口上変数表示(対象キャラ, 0)



;--------------------------------------------------
;COM314_プレゼントを渡す
;--------------------------------------------------
;RFLAG:コマンド結果受渡し変数
	;0:通常成功  1:大成功  2:特殊反応

@KOJO_COM_29_314(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
SELECTCASE RFLAG:コマンド結果受渡し変数
	CASE 0
		;通常成功
		KSTR:(K++) = 
	CASE 1
		;大成功
		KSTR:(K++) = 
	CASE 2
		;特殊反応
		IF RSTR:コマンド結果受渡し文字列 == "任意のアイテム名"
			KSTR:(K++) = 
		ENDIF
ENDSELECT

CALL 口上変数表示(対象キャラ, 0)



;--------------------------------------------------
;COM305_雑務をこなす
;--------------------------------------------------
;雑務ゲージ:(CFLAG:PLAYER:現在位置)で雑務をこなした後の雑務ゲージの残りが取得可能

@KOJO_COM_29_305(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

KSTR:(K++) = 

CALL 口上変数表示(対象キャラ, 0)



;--------------------------------------------------
;COM351_連れ出す
;--------------------------------------------------
;RFLAG:コマンド結果受渡し変数が１だと手を繋ぐ方

@KOJO_COM_29_351(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

IF RFLAG:コマンド結果受渡し変数
	IF TALENT:TARGET:恋慕
		;恋人繋ぎ
		KSTR:(K++) = 「ふふ_H_　素敵な時間が過ごせそうです」
	ELSE
		;手をつなぐ
		KSTR:(K++) = 「ふふ、どこへ連れて行ってくださるのです？」
	ENDIF
ELSE
	;連れ出す
	IF お姉様レーダー() == 2
		KSTR:(K++) = 「あら、お出かけですか？　……仕方ありませんね。　お姉さま、わたくし少々行ってまいりますので、また」
	ELSE
		KSTR:(K++) = 「あら、お出かけですか？　喜んで」
	ENDIF
ENDIF

CALL 口上変数表示(対象キャラ, 0)



;--------------------------------------------------
;COM353_許しを乞う
;--------------------------------------------------
;BASE:対象キャラ:怒り > 0の時、まだ許してくれてない
;BASE:対象キャラ:怒り <= 0で許してくれた

@KOJO_COM_29_354(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

IF BASE:対象キャラ:怒り > 0
	KSTR:(K++) = 「……その程度でわたくしの%TEXTR("溜飲が下がるとでも？/機嫌を取れるとでも？/怒りが収まるとでも？")%」
ELSE
	KSTR:(K++) = 「%TEXTR("……はぁ。 許すのは今回限りですよ？/……二度は、ありませんよ？")%」
ENDIF

CALL 口上変数表示(対象キャラ, 0)



;--------------------------------------------------
;COM355_遊びに誘う
;--------------------------------------------------
;連れ出すの長時間バージョン
;恋慕対象者だと「デートに誘う」に変化
;コマンドそのものの使用条件にある程度の好感度レベルがあるので、失敗パターンは無い

@KOJO_COM_29_355(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

;IF RFLAG:コマンド結果受渡し変数
	;デートに誘う
	KSTR:(K++) = 「ふふ_H_　素敵な時間が過ごせそうです」
; ELSE
; 	;遊びに誘う
; 	KSTR:(K++) = 「ふふ、どこへ連れて行ってくださるのです？」
; ENDIF

CALL 口上変数表示(対象キャラ, 0)



;--------------------------------------------------
;COM356_同行解除
;--------------------------------------------------
;連れ出す、遊びに誘うを解除する
;デートかどうかはCFLAG:対象キャラ:デート == MASTER + 100で取れる

@KOJO_COM_29_356(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

IF CFLAG:対象キャラ:デート == MASTER + 100
	;デートを終える
	KSTR:(K++) = 
ELSE
	;同行を終える
	KSTR:(K++) = 
ENDIF

CALL 口上変数表示(対象キャラ, 0)



;--------------------------------------------------
;COM370-374_キャラ固有コマンド枠
;--------------------------------------------------
@KOJO_COM_29_370_29(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

KSTR:(K++) = 

CALL 口上変数表示(対象キャラ, 0)

@KOJO_COM_29_371_29(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

KSTR:(K++) = 

CALL 口上変数表示(対象キャラ, 0)

@KOJO_COM_29_372_29(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

KSTR:(K++) = 

CALL 口上変数表示(対象キャラ, 0)

@KOJO_COM_29_373_29(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

KSTR:(K++) = 

CALL 口上変数表示(対象キャラ, 0)

@KOJO_COM_29_374_29(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

KSTR:(K++) = 

CALL 口上変数表示(対象キャラ, 0)



;--------------------------------------------------
;COM380_0_3 庭で一緒に遊ぶ
;--------------------------------------------------
;RFLAG:コマンド結果受渡し変数３
	;１：ボール遊び  ２：模擬戦  ３：散歩
;RFLAG:コマンド結果受渡し変数
	;0未満:失敗  1～9:通常成功  10以上:大成功

@KOJO_COM_29_380_0_3(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
SELECTCASE RFLAG:コマンド結果受渡し変数３
	CASE 1
		;ボール遊び
		SELECTCASE RFLAG:コマンド結果受渡し変数
			CASE IS < 0
				;失敗
				KSTR:(K++) = 
			CASE IS >= 10
				;大成功
				KSTR:(K++) = 
			CASEELSE
				;通常成功
				KSTR:(K++) = 
		ENDSELECT
	CASE 2
		;模擬戦
	CASE 3
		;散歩
ENDSELECT

CALL 口上変数表示(対象キャラ, 0)



;--------------------------------------------------
;COM380_0_303 メインテントで一緒に遊ぶ
;--------------------------------------------------
;RFLAG:コマンド結果受渡し変数３
	;１：ボール遊び  ２：模擬戦  ３：散歩
;RFLAG:コマンド結果受渡し変数
	;0未満:失敗  1～9:通常成功  10以上:大成功

@KOJO_COM_29_380_0_303(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
SELECTCASE RFLAG:コマンド結果受渡し変数３
	CASE 1
		;ボール遊び
		SELECTCASE RFLAG:コマンド結果受渡し変数
			CASE IS < 0
				;失敗
				KSTR:(K++) = 
			CASE IS >= 10
				;大成功
				KSTR:(K++) = 
			CASEELSE
				;通常成功
				KSTR:(K++) = 
		ENDSELECT
	CASE 2
		;模擬戦
	CASE 3
		;散歩
ENDSELECT

CALL 口上変数表示(対象キャラ, 0)



;--------------------------------------------------
;COM380_0_304 バーベキューエリアで食事をする
;--------------------------------------------------
;RFLAG:コマンド結果受渡し変数
	;-2:大失敗 -1:失敗  0:通常成功  1:大成功
;RFLAG:コマンド結果受渡し変数２
	;誰が料理したかのキャラ番号が入る（＝その場にいるなかで最も料理人Lvが高い人）（同一値の際はランダム）
;提供食材:0,提供食材:1,提供食材:2
	;提供した食材の番号が入る

@KOJO_COM_29_380_0_304(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
SELECTCASE RFLAG:コマンド結果受渡し変数
	CASE -2
		;大失敗
		KSTR:(K++) =
	CASE -1
		;失敗
		KSTR:(K++) = 
	CASE 0
		;通常成功
		KSTR:(K++) = 
	CASEELSE
		;大成功
		KSTR:(K++) = 
ENDSELECT

CALL 口上変数表示(対象キャラ, 0)



;--------------------------------------------------
;COM381_304 バーベキューエリアで飲み会をする
;--------------------------------------------------
;RFLAG:コマンド結果受渡し変数
	;飲み会が始まったかどうか  1:始まった  0:断られた
;RFLAG:コマンド結果受渡し変数２
	;その場にいて飲み会に参加した人の人数（TARGETは除く）

@KOJO_COM_29_381_0_304(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
SELECTCASE RFLAG:コマンド結果受渡し変数
	CASE 0
		;断る場合
		KSTR:(K++) = 
	CASE 1
		;飲み会を始める場合
		KSTR:(K++) = 
ENDSELECT

CALL 口上変数表示(対象キャラ, 0)



;--------------------------------------------------
;COM380_0_305 渓流エリアで釣りをする
;--------------------------------------------------
;RFLAG:コマンド結果受渡し変数
	;ミニゲームの種類  1:簡易釣りモード  2:ちゃんと釣りモード
;RFLAG:コマンド結果受渡し変数２
	;どのくらい釣れたか、魚の数が直接入る  10以上で大漁、5以上で上々、0でボウズ

@KOJO_COM_29_380_0_305(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
SELECTCASE RFLAG:コマンド結果受渡し変数２
	CASE IS >= 10
		;大漁
		KSTR:(K++) =
	CASE IS >= 5
		;上々
		KSTR:(K++) = 
	CASE IS > 0
		;普通
		KSTR:(K++) = 
	CASEELSE
		;釣果ゼロ
		KSTR:(K++) = 
ENDSELECT

CALL 口上変数表示(対象キャラ, 0)



;--------------------------------------------------
;COM381_305 渓流エリアで水遊びをする
;--------------------------------------------------
;RFLAG:コマンド結果受渡し変数
	;-1:失敗  1:通常成功  10:大成功
;その場にいる全員が対象だが、口上は対面している相手のみ

@KOJO_COM_29_381_0_305(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
SELECTCASE RFLAG:コマンド結果受渡し変数
	CASE -1
		;失敗
		KSTR:(K++) = 
	CASE 1
		;通常成功
		KSTR:(K++) = 
	CASEELSE
		;大成功
		KSTR:(K++) = 
ENDSELECT

CALL 口上変数表示(対象キャラ, 0)



;--------------------------------------------------
;COM380_0_307 キャンプファイアでダンスをする
;--------------------------------------------------
;RFLAG:コマンド結果受渡し変数
	;-1:失敗  1:通常成功  10:大成功

@KOJO_COM_29_380_0_307(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
SELECTCASE RFLAG:コマンド結果受渡し変数
	CASE -1
		;失敗
		KSTR:(K++) = 
	CASE 1
		;通常成功
		KSTR:(K++) = 
	CASEELSE
		;大成功
		KSTR:(K++) = 
ENDSELECT

CALL 口上変数表示(対象キャラ, 0)



;--------------------------------------------------
;COM381_0_307 七夕の短冊を見る
;--------------------------------------------------
;お祭り「七夕祭り」の時のみ
;TARGETがいる時は必ず相手の短冊を見るので、「自分の短冊が見られた」時の反応

@KOJO_COM_29_381_0_307(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

KSTR:(K++) = 

CALL 口上変数表示(対象キャラ, 0)




;--------------------------------------------------
;COM380_0_5 遊戯室でカードで遊ぶ
;--------------------------------------------------
;RFLAG:コマンド結果受渡し変数が０の時のみ＝賭け事をしてない時のみ呼ぶ
;賭け事時の口上は「イベント発生時」口上の「罰ゲーム」で記述

@KOJO_COM_29_380_0_5(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

IF !RFLAG:コマンド結果受渡し変数
	KSTR:(K++) = 「ふふ、こういったゲームや賭け事は嫌いではありません。 手加減はいたしませんよ？」
ENDIF

CALL 口上変数表示(対象キャラ, 0)




;--------------------------------------------------
;COM380_0_503 バーエリアでカードで遊ぶ
;--------------------------------------------------
;RFLAG:コマンド結果受渡し変数が０の時のみ＝賭け事をしてない時のみ呼ぶ
;賭け事時の口上は「イベント発生時」口上の「罰ゲーム」で記述

@KOJO_COM_29_380_0_503(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

IF !RFLAG:コマンド結果受渡し変数
	KSTR:(K++) = 「ふふ、こういったゲームや賭け事は嫌いではありません。 手加減はいたしませんよ？」
ENDIF

CALL 口上変数表示(対象キャラ, 0)



;--------------------------------------------------
;COM381_503 バーエリアで飲み会をする
;--------------------------------------------------
;RFLAG:コマンド結果受渡し変数
	;飲み会が始まったかどうか  1:始まった  0:断られた
;RFLAG:コマンド結果受渡し変数２
	;その場にいて飲み会に参加した人の人数（TARGETは除く）

@KOJO_COM_29_381_0_503(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
SELECTCASE RFLAG:コマンド結果受渡し変数
	CASE 0
		;断る場合 あんま親しくない時かな？
		KSTR:(K++) = 「遠慮させていただきます」
	CASE 1
		;飲み会を始める場合
		KSTR:(K++) = 「お酒、ですか……。 では、少しだけ」
ENDSELECT

CALL 口上変数表示(対象キャラ, 0)



;--------------------------------------------------
;COM380_0_504 ボドゲエリアですごろくで遊ぶ
;--------------------------------------------------
;ここはすごろく終了後の口上であり、すごろく中の口上は「イベント発生時」のテンプレートを参照のこと

;RFLAG:コマンド結果受渡し変数
	;勝利者のキャラ番号が入る  あなた勝利の場合は-1が入る

@KOJO_COM_29_380_0_504(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
IF RFLAG:コマンド結果受渡し変数 < 0
	;あなた勝利
	KSTR:(K++) = 
	CALL 口上変数表示(対象キャラ, 0)
ELSEIF RFLAG:コマンド結果受渡し変数 == 対象キャラ
	;TARGET勝利
	KSTR:(K++) = 
	CALL 口上変数表示(対象キャラ, 0)
ELSE
	;あなたでもTARGETでもないキャラが勝利
	;そのキャラの勝利口上に飛ばす
	TRYCALLFORM KOJO_COM_{NO:(RFLAG:コマンド結果受渡し変数)}_380_0_504(RFLAG:コマンド結果受渡し変数)
ENDIF



;--------------------------------------------------
;COM380_0_505 卓球場で遊ぶ
;--------------------------------------------------
;RFLAG:コマンド結果受渡し変数が０の時のみ＝賭け事をしてない時のみ呼ぶ
;賭け事時の口上は「イベント発生時」口上の「罰ゲーム」で記述

@KOJO_COM_29_380_0_505(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

IF !RFLAG:コマンド結果受渡し変数
	KSTR:(K++) = 
ENDIF

CALL 口上変数表示(対象キャラ, 0)



;--------------------------------------------------
;COM380_0_15 プールで一緒に遊ぶ
;--------------------------------------------------
;RFLAG:コマンド結果受渡し変数３
	;１：普通に遊ぶ  ;２：泳ぎで競争  ;３：浮き輪でのんびり浮かぶ
;RFLAG:コマンド結果受渡し変数
	;0未満:失敗  1～9:通常成功  10以上:大成功

@KOJO_COM_29_380_0_15(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
SELECTCASE RFLAG:コマンド結果受渡し変数３
	CASE 1
		;普通に遊ぶ
		SELECTCASE RFLAG:コマンド結果受渡し変数
			CASE IS < 0
				;失敗
				KSTR:(K++) = 
			CASE IS >= 10
				;大成功
				KSTR:(K++) = 
			CASEELSE
				;通常成功
				KSTR:(K++) = 
		ENDSELECT
	CASE 2
		;泳ぎで競争
	CASE 3
		;浮き輪でのんびり浮かぶ
ENDSELECT

CALL 口上変数表示(対象キャラ, 0)



;--------------------------------------------------
;COM380_0_1504 メインプールで一緒に遊ぶ
;--------------------------------------------------
;RFLAG:コマンド結果受渡し変数３
	;１：普通に遊ぶ  ;２：泳ぎで競争  ;３：浮き輪でのんびり浮かぶ
;RFLAG:コマンド結果受渡し変数
	;0未満:失敗  1～9:通常成功  10以上:大成功

@KOJO_COM_29_380_0_1504(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
SELECTCASE RFLAG:コマンド結果受渡し変数３
	CASE 1
		;普通に遊ぶ
		SELECTCASE RFLAG:コマンド結果受渡し変数
			CASE IS < 0
				;失敗
				KSTR:(K++) = 
			CASE IS >= 10
				;大成功
				KSTR:(K++) = 
			CASEELSE
				;通常成功
				KSTR:(K++) = 
		ENDSELECT
	CASE 2
		;泳ぎで競争
	CASE 3
		;浮き輪でのんびり浮かぶ
ENDSELECT

CALL 口上変数表示(対象キャラ, 0)



;--------------------------------------------------
;COM380_0_1505 ボールプールで水鉄砲で遊ぶ
;--------------------------------------------------
;RFLAG:コマンド結果受渡し変数
	;ミニゲームの成果を保存  15以上:ハイレベルな熱戦  10以上:激戦  6以上:水鉄砲バトルとして成立  3以上:カジュアルに楽しむ  2以下:敗北
	;運動が苦手なキャラの場合は15以上や10以上は場合分けせず、6以上に統合してしまうのも手

@KOJO_COM_29_380_0_1505(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
SELECTCASE RFLAG:コマンド結果受渡し変数
	CASE IS <= 2
		;敗北
		KSTR:(K++) = 
	CASE IS <= 5
		;カジュアルに楽しむ
		KSTR:(K++) = 
	CASE IS <= 9
		;水鉄砲バトルとして成立
		KSTR:(K++) = 
	CASE IS <= 14
		;激戦
		KSTR:(K++) = 
	CASEELSE
		;ハイレベルな熱戦
		KSTR:(K++) = 
ENDSELECT

CALL 口上変数表示(対象キャラ, 0)



;--------------------------------------------------
;COM402 就寝
;--------------------------------------------------
;あなたが寝る時、一緒にいるキャラが喋る
@KOJO_COM_29_402(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

IF CFLAG:対象キャラ:睡眠 == 0
	;寝てない時に喋る
	IF TALENT:対象キャラ:恋慕
		KSTR:(K++) = 
	ELSEIF TALENT:対象キャラ:セフレ
		KSTR:(K++) = 
	ELSE
		KSTR:(K++) = 
	ENDIF
ELSE
ENDIF

CALL 口上変数表示(対象キャラ, 0)



;--------------------------------------------------
;COM404 覗く
;--------------------------------------------------
;RFLAG:コマンド結果受渡し変数
	;覗き方  1:脱衣所・更衣室から反対側  2:脱衣所・更衣室に隠れて
	;　　　　3:野外オナをしてる人をこっそり　4:温泉施設で覗き用場所から
;RFLAG:コマンド結果受渡し変数３
	;風呂を覗いた時  0:湯船に浸かる姿  1:体を洗う姿
;RFLAG:コマンド結果受渡し変数４
@KOJO_COM_29_404(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

SELECTCASE RFLAG:コマンド結果受渡し変数
	CASE 1
		;脱衣所・更衣室から反対側
		;CASE 2と共通でもいいかも
		SELECTCASE CFLAG:PLAYER:現在位置
			CASE 7, 8
				; 服を脱いでいる様子が見える…
			CASE 9, 11
				; 裸で湯船に浸かっている様子 or 石鹸で体を洗っている様子が見える…
			CASE 13, 14
				; 泳装に着替えている様子が見える…
		ENDSELECT
	CASE 2
		;脱衣所・更衣室に隠れて
		;CASE 1と共通でもいいかも
		SELECTCASE CFLAG:PLAYER:現在位置
			CASE 7, 8
				; 服を脱いでいる姿をこっそり覗き見た…
			CASE 9, 11
				; 裸で湯船に浸かっている or 石鹸で体を洗っている姿をこっそり覗き見た…
			CASE 13, 14
				; 泳装に着替えている姿をこっそり覗き見た…
		ENDSELECT
	CASE 3
		;野外オナニー
		;TCVAR:対象キャラ:野外オナニー_部位でどこで自慰しているのかが取れる
		IF TCVAR:対象キャラ:野外オナニー_絶頂
			;絶頂シーン
		ELSE
			;オナニーシーン
			IF ABL:対象キャラ:(TCVAR:対象キャラ:野外オナニー_部位) > 4
				KSTR:(K++) = 
			ELSEIF ABL:対象キャラ:(TCVAR:対象キャラ:野外オナニー_部位) > 2
				KSTR:(K++) = 
			ELSE
				KSTR:(K++) = 
			ENDIF
		ENDIF
	CASE 4
		;温泉施設の覗き用場所で
		SELECTCASE CFLAG:対象キャラ:現在位置
			CASE 702, 802
				; 服を脱いでいる様子が見える…
				KSTR:(K++) = 
			CASE 703, 803
				; 石鹸で体を洗っている様子が見える…
				KSTR:(K++) = 
			CASE 704, 804
				; 裸で湯船に浸かっている様子が見える…
				KSTR:(K++) = 
			CASE 705, 805
				; 裸で変わり湯に浸かっている様子が見える…
				KSTR:(K++) = 
			CASE 706, 806
				; サウナで汗を流している様子が見える…
				KSTR:(K++) = 
			CASE 707, 807
				; 裸で露天風呂に浸かっている様子が見える…
				KSTR:(K++) = 
			CASE 708, 808
				; 裸で壺湯に浸かっている様子が見える…
				KSTR:(K++) = 
		ENDSELECT
ENDSELECT

CALL 口上変数表示(対象キャラ, 0)



;--------------------------------------------------
;COM414 写真を撮る
;--------------------------------------------------
;RFLAG:コマンド結果受渡し変数３ 写真のシチュエーション
@KOJO_COM_29_414(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

SELECTCASE RFLAG:コマンド結果受渡し変数３
	CASE 1
		;寝てる、相手は気づいてない
	CASE 2
		;ハメ撮り、相手は気づいている
		KSTR:(K++) = 「っ！_H_　ぉ、お姉さまに見せたりなどしたら%TEXTR("、絶対に許しませんから、っ/殺します……っ！")%_H__H_」
	CASE 3
		;覗き、相手は気づいてない
		;覗きの口上に飛ばしていいんじゃね？　と思うので飛ばす
		TRYCALLFORM KOJO_COM_{NO:対象キャラ}_404(対象キャラ)
		RETURN 0
	CASE 4
		;仕事中、相手は気づいている
		SELECTCASE 現在仕事:対象キャラ:0
			CASE 1
				;雑務
				KSTR:(K++) = 
			CASE 2
				;常駐業務
				;今仕事場にいるかで分岐
				IF GETPLACENAME(CFLAG:対象キャラ:現在マップ種別, CFLAG:対象キャラ:現在位置) == GETPLACENAME(現在仕事:対象キャラ:1 / 10000, 現在仕事:対象キャラ:1 % 10000)
					KSTR:(K++) = 
				ELSE
					KSTR:(K++) = 
				ENDIF
			CASE 3
				;秘書
				KSTR:(K++) = 
			CASE 4
				;宣伝
				KSTR:(K++) = 
			CASE 5
				;訓練
				;今仕事場にいるかで分岐
				IF CFLAG:対象キャラ:現在マップ種別 == 0 && CFLAG:対象キャラ:現在位置 == 308
					KSTR:(K++) = 
				ELSE
					KSTR:(K++) = 
				ENDIF
		ENDSELECT
	CASE 5
		;日常のスナップショット、相手は気づいている
		KSTR:(K++) = 
ENDSELECT

CALL 口上変数表示(対象キャラ, 0)



;--------------------------------------------------
;COM600 探索に誘う
;--------------------------------------------------
@KOJO_COM_29_600(対象キャラ)
#DIM 対象キャラ
;探索PTに誘った時の反応
;好感度レベル11以上必須、足りないと断られる

CALL 口上変数初期化

SELECTCASE RFLAG:コマンド結果受渡し変数
	CASE 0
		;成功
		KSTR:(K++) = 
	CASE 1
		;失敗
		KSTR:(K++) = 
ENDSELECT

CALL 口上変数表示(対象キャラ, 0)



;--------------------------------------------------
;COM602 長期雇用の依頼
;--------------------------------------------------
@KOJO_COM_29_602(対象キャラ)
#DIM 対象キャラ
;長期雇用（島にずっといるようになる）に誘った時の反応
;現状はコマンド実行したら必ず成功する
;好感度レベル11以上必須

CALL 口上変数初期化

IF CFLAG:対象キャラ:長期雇用
	;雇用した後
	KSTR:(K++) = 
ELSE
	;雇用を解除した後
	KSTR:(K++) = 
ENDIF

CALL 口上変数表示(対象キャラ, 0)



;--------------------------------------------------
;COM603 従業員への誘い
;--------------------------------------------------
@KOJO_COM_29_603(対象キャラ)
#DIM 対象キャラ
;従業員に誘った時の反応
;現状はコマンド実行したら必ず成功する
;好感度レベル50以上必須

CALL 口上変数初期化

KSTR:(K++) = 

CALL 口上変数表示(対象キャラ, 0)

;解雇時の口上は業務関連イベントの口上を参照



;--------------------------------------------------
;COM604 定住の誘い
;--------------------------------------------------
@KOJO_COM_29_604(対象キャラ)
#DIM 対象キャラ
;定住に誘った時の反応
;実行は好感度レベル50以上必須で、成功は80以上

CALL 口上変数初期化

IF RFLAG:コマンド結果受渡し変数
	;成功
	KSTR:(K++) = 
ELSE
	;失敗
	KSTR:(K++) = 
ENDIF

CALL 口上変数表示(対象キャラ, 0)



