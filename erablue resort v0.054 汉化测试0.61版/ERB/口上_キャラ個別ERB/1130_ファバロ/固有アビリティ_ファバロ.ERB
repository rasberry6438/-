
@固有アビ_1130_1(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名

;レベルなどの条件でアビを強化する場合、アビ名の文字列を条件分岐で変化させる
IF 基礎BATTLE_STATE:キャラ番号:Lv >= 35
	アビ名 = プッシュ＋＋
	消費ＭＰ = 40
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 18
	アビ名 = プッシュ＋
	消費ＭＰ = 25
ELSE
	アビ名 = プッシュ
	消費ＭＰ = 15
ENDIF


;アビ汎用文字列:実行時メッセージ１ = 
;アビ汎用文字列:実行時メッセージ２ = 
;アビ汎用文字列:実行時メッセージ３ = 
;アビ汎用文字列:実行時メッセージ４ = 


SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>
	IF 基礎BATTLE_STATE:キャラ番号:Lv >= 35
		詳細文文字列受け渡し変数 = "敵単体に［5］のアイテムドロップ率上昇効果を与える。"
	ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 18
		詳細文文字列受け渡し変数 = "敵単体に［4］のアイテムドロップ率上昇効果を与える。"
	ELSE
		詳細文文字列受け渡し変数 = "敵単体に［3］のアイテムドロップ率上昇効果を与える。"
	ENDIF
		RETURN 消費ＭＰ
	CASE "アビ効果"
			IF 基礎BATTLE_STATE:キャラ番号:Lv >= 35
		CALL アビ対象選択テンプレート_敵単体
		CALL アビテンプレート_不利効果_トレハン
		CALL アビテンプレート_不利効果_トレハン
		CALL アビテンプレート_不利効果_トレハン
		CALL アビテンプレート_不利効果_トレハン
		CALL アビテンプレート_不利効果_トレハン
			ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 18
		CALL アビ対象選択テンプレート_敵単体
		CALL アビテンプレート_不利効果_トレハン
		CALL アビテンプレート_不利効果_トレハン
		CALL アビテンプレート_不利効果_トレハン
		CALL アビテンプレート_不利効果_トレハン
			ELSE
		CALL アビ対象選択テンプレート_敵単体
		CALL アビテンプレート_不利効果_トレハン
		CALL アビテンプレート_不利効果_トレハン
		CALL アビテンプレート_不利効果_トレハン
	ENDIF
ENDSELECT

@固有アビ_1130_2(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIM 効果数値
#DIMS アビ名

;レベルなどの条件でアビを強化する場合、アビ名の文字列を条件分岐で変化させる
IF 基礎BATTLE_STATE:キャラ番号:Lv >= 26
	アビ名 = イーグル・フライ・フリー＋
	効果数値 = 30
	消費ＭＰ = 70
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 8
	アビ名 = イーグル・フライ・フリー
	効果数値 = 25
	消費ＭＰ = 40
ELSE
	アビ名 = 
ENDIF



;アビ汎用文字列:実行時メッセージ１ = 
;アビ汎用文字列:実行時メッセージ２ = 
;アビ汎用文字列:実行時メッセージ３ = 
;アビ汎用文字列:実行時メッセージ４ = 


SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>敵縦列に［{効果数値}％］（通常枠・3ターン）の暗闇効果を与える。
		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 26
			詳細文文字列受け渡し変数 += @"<br>［{効果数値}％］（Ａ枠・3ターン）の防御力減少効果を与える。"
		ENDIF
		RETURN 消費ＭＰ
	CASE "アビ効果"
	CALL アビ対象選択テンプレート_敵縦列
	アビ汎用変数:効果割合 = 効果数値
	アビ汎用文字列:バフ・デバフ枠 = 暗闇
	アビ汎用文字列:バフ・デバフ対象能力 = 暗闇
	アビ汎用変数:持続ターン = 3
	アビ汎用変数:基礎成功確率 = 80
	CALL アビテンプレート_不利効果_デバフ効果セット
			IF 基礎BATTLE_STATE:キャラ番号:Lv >= 26
	CALL アビ汎用変数文字列リセット
	アビ汎用変数:効果割合 = 効果数値
	アビ汎用文字列:バフ・デバフ枠 = 防御力A
	アビ汎用文字列:バフ・デバフ対象能力 = 防御力
	アビ汎用変数:持続ターン = 3
	アビ汎用変数:基礎成功確率 = 80
	CALL アビテンプレート_不利効果_デバフ効果セット
	ENDIF
ENDSELECT

@固有アビ_1130_3(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIM 効果数値
#DIM スロウ対象保存, 10
#DIMS アビ名
#DIM 攻撃対象

;レベルなどの条件でアビを強化する場合、アビ名の文字列を条件分岐で変化させる
IF 基礎BATTLE_STATE:キャラ番号:Lv >= 36
	アビ名 = ギャンブル・ウィズ・デヴィル＋
	効果数値 = 50
	消費ＭＰ = 120
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 20
	アビ名 = ギャンブル・ウィズ・デヴィル
	効果数値 = 40
	消費ＭＰ = 100
ELSE
	アビ名 = 
ENDIF

;アビ汎用文字列:実行時メッセージ１ = 
;アビ汎用文字列:実行時メッセージ２ = 
;アビ汎用文字列:実行時メッセージ３ = 
;アビ汎用文字列:実行時メッセージ４ = 


SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>ランダムな敵に［攻撃力✕{効果数値}％］の自属性ダメージを8回与える。
		詳細文文字列受け渡し変数 += @"<br>ダメージを与えた敵に［1］のスロウ効果を与える。"
		RETURN 消費ＭＰ
	CASE "アビ効果"
		VARSET スロウ対象保存, -1
		LOCAL:1 = 0
		;ダメージ部分
		FOR LOCAL, 0, 8
			SIF LOCAL != 0
				CALL アビ汎用変数文字列リセット
			CALL アビ対象選択テンプレート_敵ランダムＸ体(1)
			攻撃対象 = アビテンプレート用_対象保存:0
			アビ汎用変数:効果割合 = 効果数値
			CALL アビテンプレート_ダメージ処理_自属性
			IF RESULT && !MATCH(スロウ対象保存, 攻撃対象)
				;スロウ相手を保存しておく
				スロウ対象保存:(LOCAL:1) = 攻撃対象
				LOCAL:1 += 1
			ENDIF
		NEXT
		;スロウ部分
		CALL アビ汎用変数文字列リセット
		FOR LOCAL, 0, LOCAL:1
			CALL アビ対象選択テンプレート_指定(スロウ対象保存:LOCAL, LOCAL)
		NEXT
		アビ汎用変数:効果量 = 1
		アビ汎用変数:基礎成功確率 = 70
		CALL アビテンプレート_不利効果_スロウ
ENDSELECT

@固有アビ_1130_4(ARGS, キャラ番号)
#DIM キャラ番号
#DIM LEVEL
#DIM 対象キャラ
#DIM 消費ＭＰ
#DIMS アビ名
#DIM 効果数値
#DIM 対象数

;レベルなどの条件でアビを強化する場合、アビ名の文字列を条件分岐で変化させる
IF 基礎BATTLE_STATE:キャラ番号:Lv >= 47
	アビ名 = ウィー・バーン＋＋
	消費ＭＰ = 100
	効果数値 = 80
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 31
	アビ名 = ウィー・バーン＋
	消費ＭＰ = 80
	効果数値 = 50
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 23
	アビ名 = ウィー・バーン
	消費ＭＰ = 60
	効果数値 = 40
ELSE
	アビ名 = 
ENDIF



;アビ汎用文字列:実行時メッセージ１ = 
;アビ汎用文字列:実行時メッセージ２ = 
;アビ汎用文字列:実行時メッセージ３ = 
;アビ汎用文字列:実行時メッセージ４ = 


SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>敵全体に［攻撃力✕敵の数✕{効果数値}％］の自属性ダメージを与える。
		RETURN 消費ＭＰ
	CASE "アビ効果"
		対象数 = 0
		FOR LOCAL, 10, 20
			SIF 敵BATTLE_STATE_STR:(LOCAL - 10):エネミー名 == ""
				CONTINUE
			対象数 += 1
		NEXT
		CALL アビ対象選択テンプレート_敵全体_生者のみ
		アビ汎用変数:効果割合 = 効果数値 * MAX(対象数, 1)
		CALL アビテンプレート_ダメージ処理_火属性
ENDSELECT
;----------------------------------------------------------------------------------
;アビリティテンプレート例
;----------------------------------------------------------------------------------
;敵単体に、攻撃力の200%威力で火属性のダメージを与える効果
;----------------------------------------------------------------------------------	
	; CALL アビ対象選択テンプレート_敵単体
	; アビ汎用変数:効果割合 = 200
	; CALL アビテンプレート_ダメージ処理_火属性

;----------------------------------------------------------------------------------
;戦闘不能ではない敵全体に、防御力の300%威力で自属性のダメージを与える効果
;----------------------------------------------------------------------------------	
	; CALL アビ対象選択テンプレート_敵全体_生者のみ
	; アビ汎用変数:効果割合 = 300
	; アビ汎用文字列:攻撃側使用能力値 = 防御力
	; CALL アビテンプレート_ダメージ処理_自属性

;----------------------------------------------------------------------------------
;戦闘不能ではない味方全体に、3ターン持続する30%の攻撃力UPを与える効果
;----------------------------------------------------------------------------------
	; CALL アビ対象選択テンプレート_味方全体_生者のみ
	; アビ汎用変数:効果割合 = 30
	; アビ汎用文字列:バフ・デバフ枠 = 攻撃力A
	; アビ汎用文字列:バフ・デバフ対象能力 = 攻撃力
	; アビ汎用変数:持続ターン = 3
	; CALL アビテンプレート_有利効果_バフ効果セット

;----------------------------------------------------------------------------------
;敵縦列に、3ターン持続する暗闇（攻撃失敗率40%）を与える効果　基礎成功率70％
;----------------------------------------------------------------------------------
	; CALL アビ対象選択テンプレート_敵縦列
	; アビ汎用変数:効果割合 = 40
	; アビ汎用文字列:バフ・デバフ枠 = 暗闇
	; アビ汎用文字列:バフ・デバフ対象能力 = 暗闇
	; アビ汎用変数:持続ターン = 3
	; アビ汎用変数:基礎成功確率 = 70
	; CALL アビテンプレート_不利効果_デバフ効果セット

;----------------------------------------------------------------------------------
;戦闘不能状態の味方単体を蘇生し、回復力の100%威力でHPを回復する効果
;----------------------------------------------------------------------------------	
	; CALL アビ対象選択テンプレート_味方単体_死者のみ
	; アビ汎用変数:効果割合 = 100
	; アビ汎用変数:蘇生可能オプション = 1
	; CALL アビテンプレート_回復処理


;--------------------------------------------------
;戦闘能力の固有処理説明
;--------------------------------------------------
@口上_ステータス画面_固有特性解説_1130(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

;口上と同じ感覚で使う為に書式を統一しているが、ステータス画面で表示されるので
;基本的にWAIT系列は使わないことを推奨

KSTR:(K++) = □ 特性 □-------------------------------------------------------------------------------
KSTR:(K++) = 　
KSTR:(K++) = 　
KSTR:(K++) = 　
KSTR:(K++) = 　

CALL 口上変数表示(対象キャラ, 1)
