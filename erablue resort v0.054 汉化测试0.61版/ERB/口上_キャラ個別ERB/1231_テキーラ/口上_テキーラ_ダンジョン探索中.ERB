;****************************************
;ダンジョン探索中に条件を満たしていた時表示される文章
;****************************************
;・使い方
;「1231」をキャラクター番号に置換し、それぞれの関数に処理を入れる
;****************************************

;--------------------------------------------------
;「仲間と会話」ボタン押下時
;--------------------------------------------------
@KOJO_DUNGEON_仲間と会話_1231(対象キャラ)
#DIM 対象キャラ

;簡単に何度も見られるので、条件分岐やランダム化で複数パターンの登録を推奨

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)


;恋慕
IF TALENT:対象キャラ:恋慕
	SELECTCASE RAND:15
	CASE 0
		KSTR:(K++) = 「跟得上吗？……哈哈，还是更喜欢待在我前面？」
	CASE 1
		KSTR:(K++) = 「掩护交给我就好。你可以按自己喜欢的方式行动」
	CASE 2
		KSTR:(K++) = 「想休息的时候随时告诉我。背你走也可以哦」
	CASE 3
		KSTR:(K++) = 「肚子饿不饿？渴了吗？……啊……总是不由自主就想照顾你」
	CASE 4
		KSTR:(K++) = 「敌人的气息……哈哈，别担心。只要待在我身边就好」
	CASE 5
		KSTR:(K++) = 「交给我来处理的话，全部都能解决哦。……要试试看吗？」
	CASE 6
		KSTR:(K++) = 「……嗯……随时都可以对我撒娇的」
	CASE 7
		KSTR:(K++) = 「需要帮忙吗？尽管说」
	CASE 8
		KSTR:(K++) = 「把手给我。……来，这段路不好走，牵着手走吧」
	CASE 9
		KSTR:(K++) = 「这次探索结束后……之类的话题，等结束后再说吧。现在说不吉利呢」
	CASE 10
		KSTR:(K++) = 「谨遵吩咐。我会护送您到想去的地方」
	CASE 11
		KSTR:(K++) = 「怎么解决魔物？……你……真的想知道？」
	CASE 12
		KSTR:(K++) = 「向导工作也很拿手，这点小事不算什么。任何时候都能成为你的臂膀」
	CASE 13
		KSTR:(K++) = 「放轻松，不会出任何问题的。中途被打扰的话，难得的冒险心情都会受影响吧？」
	CASE 14
		KSTR:(K++) = 「招待客人和战斗其实有很多相似之处……说不定能学到些什么」
	ENDSELECT
;それ以外
ELSE
	SELECTCASE RAND:13
	CASE 0
		KSTR:(K++) = 「当心别走散了哦？」
	CASE 1
		KSTR:(K++) = 「支援就交给我吧。摔倒的话会立刻把你扶起来的」
	CASE 2
		KSTR:(K++) = 「想休息的话随时告诉我」
	CASE 3
		KSTR:(K++) = 「备用干粮还剩下一些，肚子饿就开口哦」
	CASE 4
		KSTR:(K++) = 「没有敌人气息……可以稍微放松下了」
	CASE 5
		KSTR:(K++) = 「遇到困难就交给我吧。总会有办法解决的」
	CASE 6
		KSTR:(K++) = 「嗯……怎么了？在想什么事情吗？」
	CASE 7
		KSTR:(K++) = 「需要帮忙吗？」
	CASE 8
		KSTR:(K++) = 「路不好走要当心。要不要我扶着你？」
	CASE 9
		KSTR:(K++) = 「我的剑……很有意思吧？越是锻炼就越强」
	CASE 10
		KSTR:(K++) = 「全听您的吩咐」
	CASE 11
		KSTR:(K++) = 「随时做好撤退准备吧。只要活着，就有重来的机会」
	CASE 12
		KSTR:(K++) = 「探索也需要点运气……希望能得到期望的结果呢」
	ENDSELECT
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ,,0,,対象キャラ)



;--------------------------------------------------
;固有スキル発動時
;--------------------------------------------------
@KOJO_DUNGEON_固有アビ発動時_1231_YYYY(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ
;「（キャラ名）の（アビ名）！」よりも前に表示される
;汎用アビや衣装アビだと発動しないので注意

;YYYYを固有アビ関数の「@固有アビ_1231_YYYY」のYYYYと同じに変更する
;使用したアビリティの名前は「使用アビ名」に入ってくる

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ, , , , 対象キャラ)

;--------------------------------------------------
;奥義発動時
;--------------------------------------------------
@KOJO_DUNGEON_奥義発動時_1231(対象キャラ, 使用奥義名)
#DIMS 使用奥義名
#DIM 対象キャラ
;「（キャラ名）の奥義：（奥義名）！」よりも前に表示される

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「悪いけど、此処は通らせてもらうよ」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ,,0,,対象キャラ)

;--------------------------------------------------
;チェンバースト発動時
;--------------------------------------------------
@KOJO_DUNGEON_チェンバ発動時_1231(対象キャラ)
#DIM 対象キャラ

;「チェインバースト！」（フルチェイン！）よりも前に表示される
;該当キャラが起点になった時（＝ターンで最初に奥義を撃ったキャラ）しか呼ばれないので注意

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「ついてきて、逸れないように……なんてね！」

;掛け合いの作り方
;ZZZZ = 掛け合い相手のCSVに記載してあるキャラ番号とする
;
; LOCAL:2 = FINDCHARA(NO, ZZZZ)
; IF キャラ隊列検索(LOCAL:2) > -1
; 	KSTR:(K++) = （口上キャラのセリフ）
;
; 	NSTR:(K++) = ++++
;	切り替え名前:0 = %CALLNAME:(LOCAL:2)%
; 	切り替え顔グラリソース:0 = 探索用_{キャラ隊列検索(LOCAL:2)}_顔
;
; 	KSTR:(K++) = （掛け合い相手のセリフ）
; ENDIF
;と記述すると下に一個、掛け合い相手の顔グラと名前が表示されたメッセージ欄を増やせるので、そこで掛け合いを行う
;複数個メッセージ欄を増やす場合、切り替え顔グラリソース:1、切り替え名前:1のように配列番号を１つずつ増やすこと

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ, , , , 対象キャラ)

;--------------------------------------------------
;トドメ時
;--------------------------------------------------
@KOJO_DUNGEON_トドメ時_1231(対象キャラ)
#DIM 対象キャラ

;行動の結果（◯◯は倒れた！など）の後に表示される
;複数攻撃時は一人でも倒していれば表示される

;口上用トドメフラグ には倒した敵の数が入っている
;口上用技名保存 には奥義名・アビ名が入っている
;       通常攻撃の場合は「通常攻撃」、チェンバの場合は「チェインバースト」が入っている

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ, , , , 対象キャラ)

; ;--------------------------------------------------
; ;味方から回復を受けた時
; ;「（キャラ名）のＨＰが」の直後に表示される
; ;複数人回復した場合、ランダムで一人の分が表示される
; ;--------------------------------------------------
; ;（現在未実装）
; @KOJO_DUNGEON_被回復時_1231(対象キャラ)
; #DIM 対象キャラ
; CALL 口上変数初期化
; LOCAL = FINDCHARA(NO, 1231)
; LOCAL:1 = キャラ隊列検索(LOCAL)

; ;回復した側のキャラは「BATTLE_STATE:戦闘行動キャラ:0」でキャラ番号が
; ;「戦闘行動キャラ」で隊列番号が取れる

; KSTR:(K++) = 

; CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;戦闘勝利時
;--------------------------------------------------
@KOJO_DUNGEON_戦闘勝利時_1231(対象キャラ)
#DIM 対象キャラ

;ルピやEXPの取得よりも前に表示される

CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ, , , , 対象キャラ)

;--------------------------------------------------
;全滅時
;--------------------------------------------------
@KOJO_DUNGEON_全滅時_1231(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ, , , , 対象キャラ)

;--------------------------------------------------
;逃走時
;--------------------------------------------------
@KOJO_DUNGEON_逃走時_1231(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ, , , , 対象キャラ)
