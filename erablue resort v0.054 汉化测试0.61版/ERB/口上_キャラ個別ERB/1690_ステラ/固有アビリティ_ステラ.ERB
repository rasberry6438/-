
@固有アビ_1690_1(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名

	アビ名 = 贯界流星
	消費ＭＰ = 50

SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消耗ＭＰ：{消費ＭＰ}<br>敌方全体的攻击力和防御力下降３０％/持续３回合。
		RETURN 消費ＭＰ
	CASE "アビ効果"
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_敵全体_生者のみ
		アビ汎用変数:効果割合 = 30
		アビ汎用文字列:バフ・デバフ枠 = 攻撃力A
		アビ汎用文字列:バフ・デバフ対象能力 = 攻撃力
		アビ汎用変数:持続ターン = 3
		CALL アビテンプレート_不利効果_デバフ効果セット

		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_敵全体_生者のみ
		アビ汎用変数:効果割合 = 30
		アビ汎用文字列:バフ・デバフ枠 = 防御力A
		アビ汎用文字列:バフ・デバフ対象能力 = 防御力
		アビ汎用変数:持続ターン = 3
		CALL アビテンプレート_不利効果_デバフ効果セット
ENDSELECT

@固有アビ_1690_2(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名

	アビ名 = 太阳祝福与锋刃引导
	消費ＭＰ = 50

SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消耗ＭＰ：{消費ＭＰ}<br>我方全体的攻击力和防御力上升３０％/持续３回合。
		RETURN 消費ＭＰ
	CASE "アビ効果"
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_味方全体_生者のみ
		アビ汎用変数:効果割合 = 30
		アビ汎用文字列:バフ・デバフ枠 = 攻撃力A
		アビ汎用文字列:バフ・デバフ対象能力 = 攻撃力
		アビ汎用変数:持続ターン = 3
		CALL アビテンプレート_有利効果_バフ効果セット

		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_味方全体_生者のみ
		アビ汎用変数:効果割合 = 30
		アビ汎用文字列:バフ・デバフ枠 = 防御力A
		アビ汎用文字列:バフ・デバフ対象能力 = 防御力
		アビ汎用変数:持続ターン = 3
		CALL アビテンプレート_有利効果_バフ効果セット
ENDSELECT

@固有アビ_1690_3(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名

	アビ名 = 怀抱之愿
	消費ＭＰ = 50

SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消耗ＭＰ：{消費ＭＰ}<br>我方全体奥义槽增加２０％。
		詳細文文字列受け渡し変数 += "<br>我方全体的奥义值上升量提升２０％/持续３回合。"
		RETURN 消費ＭＰ
	CASE "アビ効果"
		CALL アビ対象選択テンプレート_味方全体_生者のみ
		アビ汎用文字列:バフ・デバフ枠 = ゲージ上昇効率A
		アビ汎用文字列:バフ・デバフ対象能力 = ゲージ上昇効率
		アビ汎用変数:効果割合 = 20
		アビ汎用変数:持続ターン = 3
		CALL アビテンプレート_有利効果_バフ効果セット

		CALL アビ汎用変数文字列リセット
		アビ汎用変数:効果量 = 20
		CALL アビテンプレート_有利効果_奥義ゲージUP
ENDSELECT

@固有通常攻撃後処理_キャラ_1690(全滅フラグ, 連撃数)
#DIM キャラ番号
#DIM 連撃数
#DIM 全滅フラグ
#DIM バフ・デバフ行数
#DIM ステラ隊列

SIF 全滅フラグ
	戦闘中カウント:ステラ隊列:与ヒット数合計 = 0
SIF 全滅フラグ
	RETURN 0

ステラ隊列 = キャラ隊列検索(GETCHARA(1690))

IF 連撃数 == 3
	CALL アビテンプレート用_表示メッセージ変換処理
	アビテンプレート用_アビ名表示済フラグ = 0

	アビ汎用文字列:実行時メッセージ１ = 「嘿」
	アビ汎用文字列:実行時メッセージ２ = 史黛拉的强力翻转！
	CALL アビ汎用変数文字列リセット
	IF 戦闘中カウント:ステラ隊列:0 >= 3
		アビ汎用変数:効果割合 = 50
	ELSEIF 戦闘中カウント:ステラ隊列:0 >= 2
		アビ汎用変数:効果割合 = 40
	ELSEIF 戦闘中カウント:ステラ隊列:0 >= 1
		アビ汎用変数:効果割合 = 30
	ELSE
	ENDIF
		CALL アビ対象選択テンプレート_味方全体_生者のみ
		アビ汎用文字列:バフ・デバフ枠 = 攻撃力A
		アビ汎用文字列:バフ・デバフ対象能力 = 攻撃力
		アビ汎用変数:持続ターン = 1
		CALL アビテンプレート_有利効果_バフ効果セット
	戦闘中カウント:ステラ隊列:0 += 1
	
	;ここで連続パワフリ数を増やしている。
ELSEIF 連撃数 < 3
	戦闘中カウント:ステラ隊列:0 = 0
ENDIF

@固有戦闘開始時処理_キャラ_1690
#DIM パワーフリップ性能増加
#DIM ステラ隊列
#DIM 対象番号
#DIM 効果数値1
#DIM 効果数値2

;リーダー特性

ステラ隊列 = キャラ隊列検索(GETCHARA(1690))

IF !ステラ隊列
	CALL アビ対象選択テンプレート_味方全体_生者のみ
	CALL アビテンプレート_有利効果_ウェポンバースト
ENDIF


IF BATTLE_STATE:ステラ隊列:Lv >= 30
	効果数値1 = 10
ELSEIF BATTLE_STATE:ステラ隊列:Lv >= 10
	効果数値1 = 5
ELSE
ENDIF

IF BATTLE_STATE:ステラ隊列:Lv >= 60
	効果数値1 = 30
ELSEIF BATTLE_STATE:ステラ隊列:Lv >= 40
	効果数値1 = 20
ELSEIF BATTLE_STATE:ステラ隊列:Lv >= 20
	効果数値1 = 10
ELSE
ENDIF

IF BATTLE_STATE:ステラ隊列:Lv >= 10
	CALL アビ対象選択テンプレート_自己のみ
	アビ汎用文字列:適用範囲 = 味方全体
	アビ汎用文字列:バフ・デバフ枠 = 世界穿梭者
	アビ汎用文字列:バフ・デバフ対象能力 = 最大ＨＰ
	アビ汎用変数:効果割合 = 効果数値1
	アビ汎用変数:持続ターン = -1
	アビ汎用変数:消去不可オプション = 1
	アビ汎用変数:特殊表示オプション = 1
	CALL アビテンプレート_有利効果_パッシブバフ効果セット
ENDIF

IF BATTLE_STATE:ステラ隊列:Lv >= 20
	CALL アビ対象選択テンプレート_自己のみ
	アビ汎用文字列:適用範囲 = 味方全体
	IF BATTLE_STATE:ステラ隊列:Lv >= 60
		アビ汎用文字列:バフ・デバフ枠 = 与伙伴同行
	ELSEIF BATTLE_STATE:ステラ隊列:Lv >= 40
		アビ汎用文字列:バフ・デバフ枠 = 与同志同行
	ELSE
		アビ汎用文字列:バフ・デバフ枠 = 与朋友同行
	ENDIF
	アビ汎用文字列:バフ・デバフ対象能力 = 攻撃力
	アビ汎用変数:効果割合 = 効果数値2
	アビ汎用変数:持続ターン = -1
	アビ汎用変数:消去不可オプション = 1
	アビ汎用変数:特殊表示オプション = 1
	CALL アビテンプレート_有利効果_パッシブバフ効果セット
ENDIF

;メッセージ出さない用に保存文字列をリセット
CALL アビテンプレ変数リセット


@バフ・デバフ特殊表示_世界穿梭者(隊列番号, バフ・デバフ行数)
#DIM 隊列番号
#DIM バフ・デバフ行数
#DIM ステラ隊列
ステラ隊列 = キャラ隊列検索(GETCHARA(1690))
VARSET LOCALS

IF BATTLE_STATE:ステラ隊列:Lv >= 30
PRINTFORML 世界穿梭者
PRINTFORML ＨＰ＋１０％
ELSEIF BATTLE_STATE:ステラ隊列:Lv >= 10
PRINTFORML 世界穿梭者
PRINTFORML ＨＰ＋５％
ELSE
ENDIF

@バフ・デバフ特殊表示_与朋友同行(隊列番号, バフ・デバフ行数)
#DIM 隊列番号
#DIM バフ・デバフ行数
#DIM ステラ隊列
ステラ隊列 = キャラ隊列検索(GETCHARA(1690))
PRINTFORML 与朋友同行
PRINTFORML 攻击力＋１０％

@バフ・デバフ特殊表示_与同志同行(隊列番号, バフ・デバフ行数)
#DIM 隊列番号
#DIM バフ・デバフ行数
#DIM ステラ隊列
ステラ隊列 = キャラ隊列検索(GETCHARA(1690))
PRINTFORML 与同志同行
PRINTFORML 攻击力＋２０％

@バフ・デバフ特殊表示_与伙伴同行(隊列番号, バフ・デバフ行数)
#DIM 隊列番号
#DIM バフ・デバフ行数
#DIM ステラ隊列
ステラ隊列 = キャラ隊列検索(GETCHARA(1690))
PRINTFORML 与伙伴同行
PRINTFORML 攻击力＋３０％

;マナボ２表示


;--------------------------------------------------
;戦闘能力画面に表示されるキャラごとの固有処理説明
;--------------------------------------------------
;・使い方
;「XXXX」をキャラクター番号に置換し、それぞれの関数に処理を入れる
;　口上と同じ感覚で使う為に書式を統一しているが、ステータス画面で表示されるので
;　基本的にWAIT系列は使わないことを推奨
;--------------------------------------------------
@口上_ステータス画面_固有特性解説_1690(対象キャラ)
#DIM 対象キャラ

CALL 口上変数初期化
KSTR:(K++) = □ 队长特性：『觅见的宝物』 □----------------------------------------------------------
KSTR:(K++) = 　◆编入队伍一号位时，战斗开始时，全体队友的奥义槽充至１００％。
KSTR:(K++) = 　
KSTR:(K++) = □ 特性：『苍蓝十字鳍翼：辅助』 □-------------------------------------------
KSTR:(K++) = 　三重攻击・奥义发动时，强力翻转：辅助效果生效
KSTR:(K++) = 　◆连续进行三重攻击时，强力翻转的性能提升
KSTR:(K++) = 　
IF 基礎BATTLE_STATE:対象キャラ:Lv >= 30
KSTR:(K++) = □ 特性：『世界穿梭者』 □-------------------------------------------
KSTR:(K++) = 　战斗开始时，我方全体ＨＰ＋１０％
KSTR:(K++) = 　
ELSEIF 基礎BATTLE_STATE:対象キャラ:Lv >= 10
KSTR:(K++) = □ 特性：『世界穿梭者』 □-------------------------------------------
KSTR:(K++) = 　战斗开始时，我方全体ＨＰ＋５％
KSTR:(K++) = 　
ELSE
ENDIF
IF 基礎BATTLE_STATE:対象キャラ:Lv >= 60
	KSTR:(K++) = □ 特性：『与伙伴同行』 □-------------------------------------------
	KSTR:(K++) = 　战斗开始时，我方全体攻击力＋３０％
	KSTR:(K++) = 　
ELSEIF 基礎BATTLE_STATE:対象キャラ:Lv >= 40
	KSTR:(K++) = □ 特性：『与同志同行』 □-------------------------------------------
	KSTR:(K++) = 　战斗开始时，我方全体攻击力＋２０％
	KSTR:(K++) = 　
ELSEIF 基礎BATTLE_STATE:対象キャラ:Lv >= 20
	KSTR:(K++) = □ 特性：『与朋友同行』 □-------------------------------------------
	KSTR:(K++) = 　战斗开始时，我方全体攻击力＋１０％
	KSTR:(K++) = 　
ELSE
ENDIF

CALL 口上変数表示(対象キャラ, 1)


;このへん雑多メモ

;優秀な付き人、百獣の王鍵（全体両面バフ）、獅子族の力（デメリット付き攻撃バフ）
;

;12/26
;うお～～～～～アビ名悩む～～～～～～～
;折角のテオきゅんだから凝ったものにしてあげてえ！効果も凝りてえ！
;こちとらテオきゅん実装と同時にワーフリ復帰してそこから終末まで見届けたからな
;限定テオきゅんもしっかりゲットしてLv100にしたんだからな！！

;12/28
;モンエナキメすぎて無気力になっちゃった

;12/29
;きくうしさんのお陰でパワフリが滅茶苦茶整いました
