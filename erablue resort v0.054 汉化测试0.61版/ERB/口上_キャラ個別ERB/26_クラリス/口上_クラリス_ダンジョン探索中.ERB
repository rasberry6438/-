;--------------------------------------------------
;ダンジョン探索中に条件を満たしていた時表示される文章
;--------------------------------------------------
;・使い方
;「XXXX」をキャラクター番号に置換し、それぞれの関数に処理を入れる
;--------------------------------------------------

;--------------------------------------------------
;「仲間と会話」ボタン押下時
;簡単に何度も見られるので、条件分岐やランダム化で複数パターンの登録を推奨
;--------------------------------------------------
@KOJO_DUNGEON_仲間と会話_26(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)


IF PLAYER == MASTER
	;相手があなたの時
	IF TALENT:対象キャラ:恋慕
		SELECTCASE RAND:6
		CASE 0
			WSTR:(K++) = 「%CALLNAME:MASTER%对炼金术有兴趣吗？」
		CASE 1
			WSTR:(K++) = 「%CALLNAME:MASTER%的老家是什么样子的？」
		CASE 2
			WSTR:(K++) = 「经营度假村是什么感觉？很辛苦吗？」
		CASE 3
			WSTR:(K++) = 「人家的衣服很可爱吧☆可以再多夸几句哦！」
		CASE 4
			WSTR:(K++) = 「平整地面可是我的强项！炼金术很方便吧☆」
		CASE 5
			WSTR:(K++) = 「好嘞☆今天也要打起精神冲呀！」
		ENDSELECT
	ELSE
		SELECTCASE RAND:6
		CASE 0
			WSTR:(K++) = 「那个障碍物啊！可以轰得渣都不剩吗？」
		CASE 1
			WSTR:(K++) = 「今天克拉莉丝酱也是最卡哇的☆美少女炼金术师☆耶咿☆」
		CASE 2
			WSTR:(K++) = 「精细作业什么的完全不行！所以就用华丽的方式解决吧☆」
		CASE 3
			WSTR:(K++) = 「走路不方便的时候啊！就会想把周围都炸飞呢！轰隆一声那种☆」
		CASE 4
			WSTR:(K++) = 「%CALLNAME:MASTER%情绪不高嘛？再兴奋点啦☆」
		CASE 5
			WSTR:(K++) = 「耶咿耶咿！人家是美少女～哼哼哼♪」
		ENDSELECT
	ENDIF
ENDIF
CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ,,0)




;--------------------------------------------------
;戦闘中特定タイミングで表示される文章
;--------------------------------------------------
;固有スキル発動時
;「（キャラ名）の（アビ名）！」よりも前に表示される
;汎用アビや衣装アビだと発動しないので注意
;--------------------------------------------------
@KOJO_DUNGEON_固有アビ発動時_26_1(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ

;YYYYを固有アビ関数の「@固有アビ_26_YYYY」のYYYYと同じに変更する
;使用したアビリティの名前は「使用アビ名」に入ってくる
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)



IF 基礎BATTLE_STATE:対象キャラ:Lv < 20
	LOCAL:1 = RAND:6 + 1
	IF LOCAL:1 <= 3
		KSTR:(K++) = 「这样如何？」
	ELSEIF LOCAL:1 == 4
		KSTR:(K++) = 「要变脆了哦☆」
	ELSEIF LOCAL:1 == 5
		KSTR:(K++) = 「要动手啦！」
	ELSEIF LOCAL:1 == 6
		KSTR:(K++) = 「看招！」
	ENDIF
ELSE
	LOCAL:1 = RAND:6 + 1
	IF LOCAL:1 <= 3
		KSTR:(K++) = 「让你见识人家的力量！！」
	ELSEIF LOCAL:1 == 4
		KSTR:(K++) = 「要变柔软了哦☆」
	ELSEIF LOCAL:1 == 5
		KSTR:(K++) = 「要动手啦！」
	ELSEIF LOCAL:1 == 6
		KSTR:(K++) = 「看招！」
	ENDIF

ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)



@KOJO_DUNGEON_固有アビ発動時_26_2(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ

;YYYYを固有アビ関数の「@固有アビ_26_YYYY」のYYYYと同じに変更する
;使用したアビリティの名前は「使用アビ名」に入ってくる
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)



IF 基礎BATTLE_STATE:対象キャラ:Lv < 27
	LOCAL:1 = RAND:6 + 1
	IF LOCAL:1 <= 3
		KSTR:(K++) = 「轰隆☆」
	ELSEIF LOCAL:1 == 4
		KSTR:(K++) = 「全部轰飞！」
	ELSEIF LOCAL:1 == 5
		KSTR:(K++) = 「稍微破坏一下下☆」
	ELSEIF LOCAL:1 == 6
		KSTR:(K++) = 「看招！」
	ENDIF
ELSE
	LOCAL:1 = RAND:6 + 1
	IF LOCAL:1 <= 3
		KSTR:(K++) = 「轰隆☆」
	ELSEIF LOCAL:1 == 4
		KSTR:(K++) = 「那些这些全都打包轰飞！」
	ELSEIF LOCAL:1 == 5
		KSTR:(K++) = 「好嘞！能破坏的都轰成渣吧！！」
	ELSEIF LOCAL:1 == 6
		KSTR:(K++) = 「全部轰飞全灭啦！！」
	ENDIF
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

@KOJO_DUNGEON_固有アビ発動時_26_3(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ

;YYYYを固有アビ関数の「@固有アビ_26_YYYY」のYYYYと同じに変更する
;使用したアビリティの名前は「使用アビ名」に入ってくる
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)



IF 基礎BATTLE_STATE:対象キャラ:Lv < 25
	LOCAL:1 = RAND:6 + 1
	IF LOCAL:1 <= 3
		KSTR:(K++) = 「来场华丽的破坏吧！」
	ELSEIF LOCAL:1 == 4
		KSTR:(K++) = 「这就是人家的『存在崩坏』！」
	ELSEIF LOCAL:1 == 5
		KSTR:(K++) = 「感觉能破坏掉！要上啰☆」
	ELSEIF LOCAL:1 == 6
		KSTR:(K++) = 「这可是人家的拿手好戏！」
	ENDIF
ELSE
	LOCAL:1 = RAND:6 + 1
	IF LOCAL:1 <= 3
		KSTR:(K++) = 「不会让你逃掉的！」
	ELSEIF LOCAL:1 == 4
		KSTR:(K++) = 「这就是人家的『存在崩坏』！」
	ELSEIF LOCAL:1 == 5
		KSTR:(K++) = 「轰轰烈烈大干一场！要上啰☆」
	ELSEIF LOCAL:1 == 6
		KSTR:(K++) = 「这可是人家的拿手好戏！」
	ENDIF
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)











;--------------------------------------------------
;奥義発動時
;「（キャラ名）の奥義：（奥義名）！」よりも前に表示される
;--------------------------------------------------
@KOJO_DUNGEON_奥義発動時_26(対象キャラ, 使用奥義名)
#DIMS 使用奥義名
#DIM 対象キャラ

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)
LOCAL:1 = RAND:7
	SELECTCASE LOCAL:1
	CASE 0
		KSTR:(K++) = 「轰隆隆！！」
	CASE 1
		KSTR:(K++) = 「要轰轰烈烈上啰☆」
	CASE 2
		KSTR:(K++) = 「没有人家破坏不了的东西！！看招吧☆」
	CASE 3
		KSTR:(K++) = 「让你见识人家的全力！！」
	CASEELSE
		IF 基礎BATTLE_STATE:対象キャラ:Lv < 15
			KSTR:(K++) = 「全部打包轰飞！炼金耀斑！！」
		ELSEIF 基礎BATTLE_STATE:対象キャラ:Lv < 30
			KSTR:(K++) = 「没有人家破坏不了的东西！崩解领域！！」
		ELSE
			KSTR:(K++) = 「这可是人家的杀手锏！领域绝灭！！」
		ENDIF
		
	ENDSELECT
	
	
	
	
CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ,,0)

;--------------------------------------------------
;チェンバースト発動時
;「チェインバースト！」（フルチェイン！）よりも前に表示される
;該当キャラが起点になった時（＝ターンで最初に奥義を撃った）にしか呼ばれないので注意
;--------------------------------------------------
@KOJO_DUNGEON_チェンバ発動時_26(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「要动手啦！！」

;掛け合いの作り方
;ZZZZ = 掛け合い相手のCSVに記載してあるキャラ番号とする
;
; LOCAL:2 = GETCHARA(ZZZZ)
; IF キャラ隊列検索(LOCAL:2) > -1
; 	KSTR:(K++) = （口上キャラのセリフ）
;
; 	NSTR:(K++) = ++++
;	切り替え名前:0 = %CALLNAME:(LOCAL:2)%
; 	切り替え顔グラリソース:0 = 探索用_{キャラ隊列検索(LOCAL:2)}_顔
;
; 	KSTR:(K++) = （掛け合い相手のセリフ）
; ENDIF
;と記述すると下に一個、掛け合い相手の顔グラと名前が表示されたメッセージ欄を増やせるので、そこで掛け合いを行う
;複数個メッセージ欄を増やす場合、切り替え顔グラリソース:1、切り替え名前:1のように配列番号を１つずつ増やすこと

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;トドメ時
;行動の結果（◯◯は倒れた！など）の後に表示される
;複数攻撃時は一人でも倒していれば表示される
;--------------------------------------------------
;口上用トドメフラグ には倒した敵の数が入っている
;口上用技名保存 には奥義名・アビ名が入っている
;       通常攻撃の場合は「通常攻撃」、チェンバの場合は「チェインバースト」が入っている
@KOJO_DUNGEON_トドメ時_26(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「不愧是克拉莉丝酱！最卡哇的美少女炼金术师☆」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

; ;--------------------------------------------------
; ;味方から回復を受けた時
; ;「（キャラ名）のＨＰが」の直後に表示される
; ;複数人回復した場合、ランダムで一人の分が表示される
; ;--------------------------------------------------
; ;（現在未実装）
; @KOJO_DUNGEON_被回復時_26(対象キャラ)
; #DIM 対象キャラ
; CALL 口上変数初期化
; LOCAL = GETCHARA(26)
; LOCAL:1 = キャラ隊列検索(LOCAL)

; ;回復した側のキャラは「BATTLE_STATE:戦闘行動キャラ:キャラ登録番号」でキャラ番号が
; ;「戦闘行動キャラ」で隊列番号が取れる

; KSTR:(K++) = 

; CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;戦闘勝利時
;ルピやEXPの取得よりも前に表示される
;--------------------------------------------------
@KOJO_DUNGEON_戦闘勝利時_26(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「美少女炼金术师克拉莉丝酱的大胜利☆耶☆」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;全滅時
;--------------------------------------------------
@KOJO_DUNGEON_全滅時_26(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「对不起了…真的不行了…」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;逃走時
;--------------------------------------------------
@KOJO_DUNGEON_逃走時_26(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「哎要逃跑？那人家也溜啦！！」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)
