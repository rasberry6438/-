;****************************************
;ダンジョン探索中に条件を満たしていた時表示される文章
;****************************************
;・使い方
;「287」をキャラクター番号に置換し、それぞれの関数に処理を入れる
;****************************************

;--------------------------------------------------
;「仲間と会話」ボタン押下時
;--------------------------------------------------
@KOJO_DUNGEON_仲間と会話_287(対象キャラ)
#DIM 対象キャラ

;簡単に何度も見られるので、条件分岐やランダム化で複数パターンの登録を推奨

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

IF TALENT:TARGET:恋慕
	SELECTCASE RAND:10
		CASE 0 
			KSTR:(K++) = 「在度假村的每一天都很开心呢……多亏了%CALLNAME:MASTER%。」
		CASE 1
			KSTR:(K++) = 「%CALLNAME:MASTER%喜欢冰冷的感觉吗？请诚实地回答我。」
		CASE 2
			KSTR:(K++) = 「……回去之后，想要一起吃冰淇淋。」
		CASE 3
			KSTR:(K++) = 「真是漂亮的景色，在度假村里都见不到呢……能和你一起见证这一切真是太好了。」
		CASE 4
			KSTR:(K++) = 「好热……%CALLNAME:MASTER%没问题吗？」
		CASE 5
			KSTR:(K++) = 「和你在一起的话，马上就会松懈下来呢……我会多注意一点的。」
		CASE 6
			KSTR:(K++) = 「妨碍我的家伙，不可饶恕。」
		CASE 7
			KSTR:(K++) = 「……%CALLNAME:MASTER%，你有看到那孩子吗？」
		CASE 8
			KSTR:(K++) = 「%CALLNAME:MASTER%……好温暖_H_」
		CASE 9
			KSTR:(K++) = 「……谢谢你愿意触碰我，%CALLNAME:MASTER%_H_」
	ENDSELECT
ELSE
	SELECTCASE RAND:10
		CASE 0 
			KSTR:(K++) = 「把大家，都一起冻结起来吧。」
		CASE 1
			KSTR:(K++) = 「……你不讨厌这种冰冷的感觉吗？」
		CASE 2
			KSTR:(K++) = 「……想要冷的东西。像冰淇淋什么的……」
		CASE 3
			KSTR:(K++) = 「……全部都冻起来就好了吧。」
		CASE 4
			KSTR:(K++) = 「好热……一点都不想动。」
		CASE 5
			KSTR:(K++) = 「呼……已经感觉腻了。」
		CASE 6
			KSTR:(K++) = 「妨碍我的家伙，全部冻结。」
		CASE 7
			KSTR:(K++) = 「……那孩子，又擅自飞出去了呢……」
		CASE 8
			KSTR:(K++) = 「%CALLNAME:MASTER%……好温暖。」
		CASE 9
			KSTR:(K++) = 「%CALLNAME:MASTER%……触碰我的时候，你不害怕吗？」
	ENDSELECT
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ,,0,,対象キャラ)



;--------------------------------------------------
;固有スキル発動時
;--------------------------------------------------
@KOJO_DUNGEON_固有アビ発動時_287_1(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ
;「（キャラ名）の（アビ名）！」よりも前に表示される
;汎用アビや衣装アビだと発動しないので注意

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「银冰吐息。」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ, , , , 対象キャラ)


@KOJO_DUNGEON_固有アビ発動時_287_2(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ
;「（キャラ名）の（アビ名）！」よりも前に表示される
;汎用アビや衣装アビだと発動しないので注意

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「……加油。」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ, , , , 対象キャラ)


@KOJO_DUNGEON_固有アビ発動時_287_3(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ
;「（キャラ名）の（アビ名）！」よりも前に表示される
;汎用アビや衣装アビだと発動しないので注意

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「连心都一并冻结。」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ, , , , 対象キャラ)

;--------------------------------------------------
;奥義発動時
;--------------------------------------------------
@KOJO_DUNGEON_奥義発動時_287(対象キャラ, 使用奥義名)
#DIMS 使用奥義名
#DIM 対象キャラ
;「（キャラ名）の奥義：（奥義名）！」よりも前に表示される

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

WSTR:(K++) = 「这就是我的绝对零度……」
KSTR:(K++) = 「静谧纯白。」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ,,0,,対象キャラ)

;--------------------------------------------------
;チェンバースト発動時
;--------------------------------------------------
@KOJO_DUNGEON_チェンバ発動時_287(対象キャラ)
#DIM 対象キャラ

;「チェインバースト！」（フルチェイン！）よりも前に表示される
;該当キャラが起点になった時（＝ターンで最初に奥義を撃ったキャラ）しか呼ばれないので注意

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 

;掛け合いの作り方
;ZZZZ = 掛け合い相手のCSVに記載してあるキャラ番号とする
;
; LOCAL:2 = FINDCHARA(NO, ZZZZ)
; IF キャラ隊列検索(LOCAL:2) > -1
; 	KSTR:(K++) = （口上キャラのセリフ）
;
; 	NSTR:(K++) = ++++
;	切り替え名前:0 = %CALLNAME:(LOCAL:2)%
; 	切り替え顔グラリソース:0 = 探索用_{キャラ隊列検索(LOCAL:2)}_顔
;
; 	KSTR:(K++) = （掛け合い相手のセリフ）
; ENDIF
;と記述すると下に一個、掛け合い相手の顔グラと名前が表示されたメッセージ欄を増やせるので、そこで掛け合いを行う
;複数個メッセージ欄を増やす場合、切り替え顔グラリソース:1、切り替え名前:1のように配列番号を１つずつ増やすこと

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ, , , , 対象キャラ)

;--------------------------------------------------
;トドメ時
;--------------------------------------------------
@KOJO_DUNGEON_トドメ時_287(対象キャラ)
#DIM 対象キャラ

;行動の結果（◯◯は倒れた！など）の後に表示される
;複数攻撃時は一人でも倒していれば表示される

;口上用トドメフラグ には倒した敵の数が入っている
;口上用技名保存 には奥義名・アビ名が入っている
;       通常攻撃の場合は「通常攻撃」、チェンバの場合は「チェインバースト」が入っている

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「你是无法融化我的。」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ, , , , 対象キャラ)

; ;--------------------------------------------------
; ;味方から回復を受けた時
; ;「（キャラ名）のＨＰが」の直後に表示される
; ;複数人回復した場合、ランダムで一人の分が表示される
; ;--------------------------------------------------
; ;（現在未実装）
; @KOJO_DUNGEON_被回復時_287(対象キャラ)
; #DIM 対象キャラ
; CALL 口上変数初期化
; LOCAL = FINDCHARA(NO, 287)
; LOCAL:1 = キャラ隊列検索(LOCAL)

; ;回復した側のキャラは「BATTLE_STATE:戦闘行動キャラ:0」でキャラ番号が
; ;「戦闘行動キャラ」で隊列番号が取れる

; KSTR:(K++) = 「温かい……。」

; CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;戦闘勝利時
;--------------------------------------------------
@KOJO_DUNGEON_戦闘勝利時_287(対象キャラ)
#DIM 対象キャラ

;ルピやEXPの取得よりも前に表示される

CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「嗯……足够了。」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ, , , , 対象キャラ)

;--------------------------------------------------
;全滅時
;--------------------------------------------------
@KOJO_DUNGEON_全滅時_287(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「我……融化了……？」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ, , , , 対象キャラ)

;--------------------------------------------------
;逃走時
;--------------------------------------------------
@KOJO_DUNGEON_逃走時_287(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「……就到此为止吧。」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ, , , , 対象キャラ)
