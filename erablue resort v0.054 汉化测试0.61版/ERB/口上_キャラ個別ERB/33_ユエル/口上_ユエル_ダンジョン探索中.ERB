;--------------------------------------------------
;ダンジョン探索中に条件を満たしていた時表示される文章
;--------------------------------------------------
;・使い方
;「33」をキャラクター番号に置換し、それぞれの関数に処理を入れる
;--------------------------------------------------

;--------------------------------------------------
;「仲間と会話」ボタン押下時
;簡単に何度も見られるので、条件分岐やランダム化で複数パターンの登録を推奨
;--------------------------------------------------
@KOJO_DUNGEON_仲間と会話_33(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

IF CSTR:対象キャラ:スタイル管理文字列 == ""
	STRDATA KSTR:(K++)
		DATA 「ウチの活躍、よう見ててや！」
		DATA 「今日も絶好の探検日和やわ」
		DATA 「あっちの道に行ってみぃへん？」
		DATA 「ウチの尻尾よう動くやろー？うりうりー、捕まえてみー！」
		DATA 「はぐれへんように手ぇ繋いだろか？あはは、冗談やって」
		DATA 「この武器、剣に見えへん？そんなことない？」
	ENDDATA
ELSE
	SELECTCASE RAND:8
		CASE 0
			KSTR:(K++) = 「……あ！ あっちにおもろそうなもんあるで！」
		CASE 1
			WSTR:(K++) = 「困りごとはうちにお任せや♪」
		CASE 2
			KSTR:(K++) = 「この装束、背筋ぴしっとすんなあ」
		CASE 3
			KSTR:(K++) = 「王家ゆかりの地ツアーとかもしてみたいなあ」
		CASE 4
			KSTR:(K++) = 「ソシエのお土産になんか持ってったろ♪」
		CASE 5
			KSTR:(K++) = 「ヨウとコウにも装束作ってあげたいなあ」
		CASE 6
			KSTR:(K++) = 「%CALLNAME:MASTER%、どや？ この装束似合っとるやろ？」
		CASE 7
			KSTR:(K++) = 「%CALLNAME:MASTER%はうちのこと大好きやもんな～♪」
	ENDSELECT
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ,,0)

;--------------------------------------------------
;戦闘中特定タイミングで表示される文章
;--------------------------------------------------
;固有スキル発動時
;「（キャラ名）の（アビ名）！」よりも前に表示される
;汎用アビや衣装アビだと発動しないので注意
;--------------------------------------------------
@KOJO_DUNGEON_固有アビ発動時_33_1(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ

;YYYYを固有アビ関数の「@固有アビ_33_YYYY」のYYYYと同じに変更する
;使用したアビリティの名前は「使用アビ名」に入ってくる
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

IF CSTR:対象キャラ:スタイル管理文字列 == ""
	STRDATA KSTR:(K++)
		DATA 「ウチに任せとき！」
		DATA 「狐火ッ！」
	ENDDATA
ELSE
	KSTR:(K++) = 「燃やし尽くしたる！」
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

@KOJO_DUNGEON_固有アビ発動時_33_2(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

IF CSTR:対象キャラ:スタイル管理文字列 == ""
	KSTR:(K++) = 「お仕置きや！」
ELSE
	KSTR:(K++) = 「いくで！」
	KSTR:(K++) = 「うちの舞で浄化したるで！」
	KSTR:(K++) = 「うちがぜーんぶ守ったる！」
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

@KOJO_DUNGEON_固有アビ発動時_33_3(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

IF CSTR:対象キャラ:スタイル管理文字列 == ""
	KSTR:(K++) = 「まだいける？無理はあかんよ」
ELSE
	KSTR:(K++) = 「逃がすか！」
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

@KOJO_DUNGEON_固有アビ発動時_33_4(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「まだまだこんなもんやないで！」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)
;--------------------------------------------------
;奥義発動時
;「（キャラ名）の奥義：（奥義名）！」よりも前に表示される
;--------------------------------------------------
@KOJO_DUNGEON_奥義発動時_33(対象キャラ, 使用奥義名)
#DIMS 使用奥義名
#DIM 対象キャラ

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

IF CSTR:対象キャラ:スタイル管理文字列 == ""
	KSTR:(K++) = 「行っくでぇー！これがウチの全力や！」
ELSE
	SELECTCASE RAND:2
		CASE 0
			KSTR:(K++) = 「お清めやでぇー！」
		CASE 1
			KSTR:(K++) = 「浄化の焔、存分に見せたるわ！」
	ENDSELECT
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ,,0)

;--------------------------------------------------
;チェンバースト発動時
;「チェインバースト！」（フルチェイン！）よりも前に表示される
;該当キャラが起点になった時（＝ターンで最初に奥義を撃った）にしか呼ばれないので注意
;--------------------------------------------------
@KOJO_DUNGEON_チェンバ発動時_33(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「これで終いや！」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)
LOCAL:2 = GETCHARA(34)
IF キャラ隊列検索(LOCAL:2) > -1


	NSTR:(K++) = ++++
	切り替え名前:1 = %CALLNAME:対象キャラ%
	切り替え顔グラリソース:1 = 探索用_{LOCAL}_顔
	
	KSTR:(K++) = 「ちゅーことで、一緒に踊ろ、ソシエ♪」
	
	NSTR:(K++) = ++++
	切り替え名前:0 = %CALLNAME:(LOCAL:2)%
	切り替え顔グラリソース:0 = 探索用_{キャラ隊列検索(LOCAL:2)}_顔

	KSTR:(K++) = 「うん、ユエルちゃん！」
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;トドメ時
;行動の結果（◯◯は倒れた！など）の後に表示される
;複数攻撃時は一人でも倒していれば表示される
;--------------------------------------------------
;口上用トドメフラグ には倒した敵の数が入っている
;口上用技名保存 には奥義名・アビ名が入っている
;       通常攻撃の場合は「通常攻撃」、チェンバの場合は「チェインバースト」が入っている
@KOJO_DUNGEON_トドメ時_33(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

IF CSTR:対象キャラ:スタイル管理文字列 == ""
	STRDATA KSTR:(K++)
		DATA 「一丁上がりっ！」
		DATA 「まだまだいけるで～！」
		DATA 「コンコ～ン　なんてな♪」
		DATA 「惚れたらあかんで！…なーんてな♪」
		DATA 「ユエルちゃん大活躍やで！」
	ENDDATA
ELSE
	KSTR:(K++) = 「こんなもんやな！」
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

; ;--------------------------------------------------
; ;味方から回復を受けた時
; ;「（キャラ名）のＨＰが」の直後に表示される
; ;複数人回復した場合、ランダムで一人の分が表示される
; ;--------------------------------------------------
; ;（現在未実装）
; @KOJO_DUNGEON_被回復時_33(対象キャラ)
; #DIM 対象キャラ
; CALL 口上変数初期化
; LOCAL = GETCHARA(33)
; LOCAL:1 = キャラ隊列検索(LOCAL)

; ;回復した側のキャラは「BATTLE_STATE:戦闘行動キャラ:キャラ登録番号」でキャラ番号が
; ;「戦闘行動キャラ」で隊列番号が取れる

; KSTR:(K++) = 

; CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;戦闘勝利時
;ルピやEXPの取得よりも前に表示される
;--------------------------------------------------
@KOJO_DUNGEON_戦闘勝利時_33(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

IF CSTR:対象キャラ:スタイル管理文字列 == ""
	KSTR:(K++) = 「ウチの活躍、ちゃんと見てた？」
ELSE
	KSTR:(K++) = 「ユエルちゃん、華麗な大勝利や！」
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;全滅時
;--------------------------------------------------
@KOJO_DUNGEON_全滅時_33(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

IF CSTR:対象キャラ:スタイル管理文字列 == ""
	KSTR:(K++) = 「こんな筈や、なかったのに……」
ELSE
	KSTR:(K++) = 「やって…しもたなあ……」
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;逃走時
;--------------------------------------------------
@KOJO_DUNGEON_逃走時_33(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

IF CSTR:対象キャラ:スタイル管理文字列 == ""
	KSTR:(K++) = 「覚えときや～！」
ELSE
	KSTR:(K++) = 「無理したらあかん！ 退がるで！」
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)
