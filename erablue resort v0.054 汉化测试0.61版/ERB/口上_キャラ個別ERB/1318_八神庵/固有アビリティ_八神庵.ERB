;--------------------------------------------------
;●八神庵口上＠erablue_resort用
;　――固有アビリティ
;--------------------------------------------------

;--------------------------------------------------
;●ライセンス/更新履歴/概要/使用フラグ
;--------------------------------------------------
;　いずれも八神庵口上_readme.txt記載に従う
;--------------------------------------------------

;--------------------------------------------------
;〇アビリティ/奥技性能まとめ
;--------------------------------------------------
;★性能について
;　本家グラブルのリュウとえらぶるのユエルちゃんをベースに作成。
;　構文についてはパチュリーの口上を参考に。（説明文も含む）
;　原作の庵はシリーズ通して「初心者でも扱いやすい強キャラ」を体現したようなキャラクターなので
;　最終的にはそんな感じに調整出来ればいいなぁ……という初心者の願望。
;　闇払いや鬼焼きが全体攻撃なのは仕様です。リュウの。
;　鬼焼きでカウンターが付与されるのは仕様です。リュウの。
;★奥義について
;　当初追加超必殺技の裏参百拾六式・豺華やCLIMAX超必殺技を実装したかったけど
;　よくよく考えてみればKOF97設定の庵なので没。
;　ゲージは3～5本貯められるけどバランス崩壊するのが目に見えているので没。
;　とりあえずEXゲージ仕様という事で。
;--------------------------------------------------

;--------------------------------------------------
;・百八式・闇払い
;　全体攻撃。所謂波動技。庵の必殺技と言えばこれ。（多分）
;　性能はグラブルリュウの波動拳と汎用アビリティのファイアをベースに調整。
;　気軽にポンポン撃てるのをイメージ。
;--------------------------------------------------

@固有アビ_1318_1(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 効果数値
#DIM 消費ＭＰ
#DIMS アビ名

;レベルなどの条件でアビを強化する場合、アビ名の文字列を条件分岐で変化させる
IF 基礎BATTLE_STATE:キャラ番号:Lv >= 16
	アビ名 = 百八式・闇払い・極
	効果数値 = 300
	消費ＭＰ = 30
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 4
	アビ名 = 百八式・闇払い・改
	効果数値 = 250
	消費ＭＰ = 25
ELSE
	アビ名 = 百八式・闇払い
	効果数値 = 200
	消費ＭＰ = 20
ENDIF

SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>敵全体に［攻撃力✕{効果数値}％］の自属性ダメージを与える。
		RETURN 消費ＭＰ
	CASE "アビ効果"
;全体ダメージ処理
	CALL アビ対象選択テンプレート_敵全体_生者のみ
	アビ汎用変数:効果割合 = 効果数値
	CALL アビテンプレート_ダメージ処理_自属性
ENDSELECT

;--------------------------------------------------
;・百式・鬼焼き
;　全体攻撃。所謂昇竜技。
;　同じ必殺技の枠組みなので消費MPは同じ。手抜きとも言う。（調整予定）
;　性能はグラブルリュウの昇竜拳と汎用アビリティの以下略。
;　気軽にポンポン以下略。
;--------------------------------------------------

@固有アビ_1318_2(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 効果数値
#DIM 消費ＭＰ
#DIMS アビ名

;レベルなどの条件でアビを強化する場合、アビ名の文字列を条件分岐で変化させる
IF 基礎BATTLE_STATE:キャラ番号:Lv >= 20
	アビ名 = 百式・鬼焼き・極
	効果数値 = 200
	消費ＭＰ = 30
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 8
	アビ名 = 百式・鬼焼き・改
	効果数値 = 150
	消費ＭＰ = 25
ELSE
	アビ名 = 百式・鬼焼き
	効果数値 = 100
	消費ＭＰ = 20
ENDIF

SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>敵全体に［攻撃力✕{効果数値}％］の自属性ダメージを与える。<br>
		詳細文文字列受け渡し変数 += @"1Tの間、自身に［カウンター］を付与する。"
		RETURN 消費ＭＰ
	CASE "アビ効果"
;全体ダメージ処理
	CALL アビ対象選択テンプレート_敵全体_生者のみ
	アビ汎用変数:効果割合 = 効果数値
	CALL アビテンプレート_ダメージ処理_自属性
;カウンター
	CALL アビ対象選択テンプレート_自己のみ
	アビ汎用文字列:バフ・デバフ枠 = カウンター
	アビ汎用文字列:バフ・デバフ対象能力 = カウンター
	アビ汎用変数:効果割合 = 100
	アビ汎用変数:持続ターン = 2
	アビ汎用変数:消去不可オプション = 1
	CALL アビテンプレート_有利効果_バフ効果セット
ENDSELECT

@固有アビ_1318_3(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名

;--------------------------------------------------
;・裏百八式・八酒杯
;　原作では超必殺技（奥義）だが、技の性質上スキルに回した。
;　改はMAX版をイメージ。極は……何だろ？
;　一応超必殺技なので消費を重めにしてみたがそれでも軽い気がする（調整予定）
;--------------------------------------------------

;初期状態で習得しない場合は以下のようにする
IF 基礎BATTLE_STATE:キャラ番号:Lv >= 36
	アビ名 = 裏百八式・八酒杯・極
	消費ＭＰ = 150
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 24
	アビ名 = 裏百八式・八酒杯・改
	消費ＭＰ = 100
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 12
	アビ名 = 裏百八式・八酒杯
	消費ＭＰ = 75
ELSE
	アビ名 = 
ENDIF


SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>対象に3Tの間[火傷]、［麻痺］を付与する。
		IF アビ名 == "裏百八式・八酒杯・改"
			詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>敵横列に3Tの間[火傷]、［麻痺］を付与する。
		ELSEIF アビ名 == "裏百八式・八酒杯・極"
			詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>敵全体に3Tの間[火傷]、［麻痺］を付与する。
		ENDIF
		RETURN 消費ＭＰ
	CASE "アビ効果"
;ダメージ処理
	CALL アビ対象選択テンプレート_敵単体
		IF アビ名 == "裏百八式・八酒杯・改"
			CALL アビ対象選択テンプレート_敵横列
		ELSEIF アビ名 == "裏百八式・八酒杯・極"
			CALL アビ対象選択テンプレート_敵全体_生者のみ
		ENDIF
;ダメージ処理
		IF アビ名 == "裏百八式・八酒杯"
			CALL アビ対象選択テンプレート_敵単体
		ELSEIF アビ名 == "裏百八式・八酒杯・改"
			CALL アビ対象選択テンプレート_敵横列
		ELSEIF アビ名 == "裏百八式・八酒杯・極"
			CALL アビ対象選択テンプレート_敵全体_生者のみ
		ENDIF
;火傷
	CALL アビ汎用変数文字列リセット
	アビ汎用文字列:バフ・デバフ枠 = 封じの炎
	アビ汎用文字列:バフ・デバフ対象能力 = 火傷
	アビ汎用変数:効果量 = BATTLE_STATE:戦闘行動キャラ:攻撃力 / 3
	アビ汎用変数:持続ターン = 3
	アビ汎用変数:基礎成功確率 = 100
	アビ汎用変数:消去不可オプション = 1
	CALL アビテンプレート_不利効果_デバフ効果セット
;麻痺
	CALL アビ汎用変数文字列リセット
	アビ汎用文字列:バフ・デバフ枠 = 封じの炎2
	アビ汎用文字列:バフ・デバフ対象能力 = 麻痺
	アビ汎用変数:効果割合 = 100
	アビ汎用変数:持続ターン = 3
	アビ汎用変数:基礎成功確率 = 100
	アビ汎用変数:消去不可オプション = 1
	CALL アビテンプレート_不利効果_デバフ効果セット
ENDSELECT

;下の４つの文字列に文章を入れると、対象選択時の文章を変化させることが出来る。
;これらを使わない場合は「誰に使用しますか？」と表示される。		
;アビ汎用文字列:選択時メッセージ１ = 
;アビ汎用文字列:選択時メッセージ２ = 
;アビ汎用文字列:選択時メッセージ３ = 
;アビ汎用文字列:選択時メッセージ４ = 

;下の４つの文字列に文章を入れると、アビ使用時の文章を変化させることが出来る。
;これらを使わない場合は「（キャラ名）の（アビ名）！」と表示される。
;アビ汎用文字列:実行時メッセージ１ = 
;アビ汎用文字列:実行時メッセージ２ = 
;アビ汎用文字列:実行時メッセージ３ = 
;アビ汎用文字列:実行時メッセージ４ = 






;----------------------------------------------------------------------------------
;アビリティテンプレート例
;----------------------------------------------------------------------------------
;敵単体に、攻撃力の200%威力で火属性のダメージを与える効果
;----------------------------------------------------------------------------------	
	; CALL アビ対象選択テンプレート_敵単体
	; アビ汎用変数:効果割合 = 200
	; CALL アビテンプレート_ダメージ処理_火属性

;----------------------------------------------------------------------------------
;戦闘不能ではない敵全体に、防御力の300%威力で自属性のダメージを与える効果
;----------------------------------------------------------------------------------	
	; CALL アビ対象選択テンプレート_敵全体_生者のみ
	; アビ汎用変数:効果割合 = 300
	; アビ汎用文字列:攻撃側使用能力値 = 防御力
	; CALL アビテンプレート_ダメージ処理_自属性

;----------------------------------------------------------------------------------
;戦闘不能ではない味方全体に、3ターン持続する30%の攻撃力UPを与える効果
;----------------------------------------------------------------------------------
	; CALL アビ対象選択テンプレート_味方全体_生者のみ
	; アビ汎用変数:効果割合 = 30
	; アビ汎用文字列:バフ・デバフ枠 = 攻撃力A
	; アビ汎用文字列:バフ・デバフ対象能力 = 攻撃力
	; アビ汎用変数:持続ターン = 3
	; CALL アビテンプレート_有利効果_バフ効果セット

;----------------------------------------------------------------------------------
;敵縦列に、3ターン持続する暗闇（攻撃失敗率40%）を与える効果　基礎成功率70％
;----------------------------------------------------------------------------------
	; CALL アビ対象選択テンプレート_敵縦列
	; アビ汎用変数:効果割合 = 40
	; アビ汎用文字列:バフ・デバフ枠 = 暗闇
	; アビ汎用文字列:バフ・デバフ対象能力 = 暗闇
	; アビ汎用変数:持続ターン = 3
	; アビ汎用変数:基礎成功確率 = 70
	; CALL アビテンプレート_不利効果_デバフ効果セット

;----------------------------------------------------------------------------------
;戦闘不能状態の味方単体を蘇生し、回復力の100%威力でHPを回復する効果
;----------------------------------------------------------------------------------	
	; CALL アビ対象選択テンプレート_味方単体_死者のみ
	; アビ汎用変数:効果割合 = 100
	; アビ汎用変数:蘇生可能オプション = 1
	; CALL アビテンプレート_回復処理


;--------------------------------------------------
;戦闘能力の固有処理説明
;--------------------------------------------------
@口上_ステータス画面_固有特性解説_1318(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

;口上と同じ感覚で使う為に書式を統一しているが、ステータス画面で表示されるので
;基本的にWAIT系列は使わないことを推奨

KSTR:(K++) = □ 特性 □-------------------------------------------------------------------------------
KSTR:(K++) = 　
KSTR:(K++) = 　
KSTR:(K++) = 　
KSTR:(K++) = 　

CALL 口上変数表示(対象キャラ, 1)
