;--------------------------------------------------
;●パチュリー・ノーレッジ口上＠erablue_resort用
;　――非エロ陥落周りの設定を変更するための関数群
;--------------------------------------------------

;--------------------------------------------------
;●ライセンス/更新履歴/概要/使用フラグ
;--------------------------------------------------
;　いずれもパチュリー口上_readme.txt記載に従う
;--------------------------------------------------

;--------------------------------------------------
;基本的に動作は全て共通であり、フレーバー部分を変更出来るのみ
;なお、セフレや恋慕などスケベ陥落している場合は結ぶことができない。
;--------------------------------------------------

;--------------------------------------------------
;取得コマンド名
;--------------------------------------------------
;非エロ陥落を取得する際のコマンド名を入れる
;これだけ別関数なのはFUNCTIONSにする必要があるため
;--------------------------------------------------
@固有非エロ陥落_コマンド名変更_1147(対象キャラ)
#FUNCTIONS
#DIM 対象キャラ

	;デフォルトは「盟友の誓い」
	;空欄で返すとそれになる
	TSTR:コマンド名受渡 '= "盟約を結ぶ"


;--------------------------------------------------
;その他フレーバー変更
;--------------------------------------------------
@固有非エロ陥落_フレーバー変更_1147(対象キャラ, 動作モード)
#DIM 対象キャラ
#DIMS 動作モード

	SELECTCASE 動作モード
		CASE "陥落名"
			;陥落の名称を入力、デフォルト名は「盟友」
			;空欄で返すと自動的に「盟友」になるので、変更したくない場合は空欄のままでよい
			CSTR:対象キャラ:非エロ陥落名称 '= "リゾート付き魔術士"
		CASE "取得コマンド解説"
			;取得コマンドの解説を入力
			;デフォルト解説は以下（見やすいように改行だけしたよ）
			;=============================
			; TSTR:ツールチップ受渡 = <br>■盟友の誓い<br>
			; TSTR:ツールチップ受渡 += "<br>相手と強い信頼関係を結ぶためのコマンド。"
			; TSTR:ツールチップ受渡 += "<br>好感度要素：信頼が一定値以上の時に使用可能。"
			; TSTR:ツールチップ受渡 += "<br>キャラクターによってはコマンド名・取得する素質名が変動する場合がある。"
			; TSTR:ツールチップ受渡 += "<br>キャラクターによっては好感度要素：信頼以外の条件が存在することがある。"
			; TSTR:ツールチップ受渡 += "<br>COMタイプ：日常"
			; TSTR:ツールチップ受渡 += "<br>取得ソース：なし"
			; TSTR:ツールチップ受渡 += "<br>固有の取得経験：なし"
			; TSTR:ツールチップ受渡 += "<br>"
			;=============================

			TSTR:ツールチップ受渡 '= "<br>■盟約を結ぶ"
			TSTR:ツールチップ受渡 += "<br>"
			TSTR:ツールチップ受渡 += "<br>相手と強い信頼関係を結ぶためのコマンド。"
			TSTR:ツールチップ受渡 += "<br>好感度要素：信頼が一定値以上、かつ定住している場合に使用可能。"
			TSTR:ツールチップ受渡 += "<br>パチュリー・ノーレッジを、リゾートの魔術顧問に聘する。"
			TSTR:ツールチップ受渡 += "<br>COMタイプ：日常"
			TSTR:ツールチップ受渡 += "<br>取得ソース：なし"
			TSTR:ツールチップ受渡 += "<br>固有の取得経験：なし"
			TSTR:ツールチップ受渡 += "<br>"


		CASE "コマンド条件"
			;キャラ固有のコマンド実行条件を設定する
			;ここでRETURN 1を返すと他の条件を無視して許可
			;RETURN -1を返すと他の条件を無視して禁止
			;RETURN 0を返すと通常条件の判定に戻す

			;パチュリーが、従業員、定住者、店持ち、その他滞在期間999……のいずれでもない場合、ダメ
			SIF !(TALENT:対象キャラ:従業員 || TALENT:対象キャラ:定住者 || TALENT:対象キャラ:店持ち || CFLAG:対象キャラ:滞在期間 == 999)
				RETURN -1

			;定住しているならあとは通常条件
			RETURN 0
		CASE "実行メッセージ"
			CALL 口上変数初期化
			;取得コマンドを実行した時のメッセージを入力
			;デフォルトメッセージは以下のとおり（ここでなんらかの表示を行った場合、デフォルトメッセージは表示されなくなる）
			;=============================
			; KSTR:(K++) =  %CALLNAME:PLAYER%と%CALLNAME:TARGET%は強い絆で結ばれている……！
			; KSTR:(K++) =  二人は改めて互いの信頼を確かめあった！
			; KSTR:(K++) =  %CALLNAME:TARGET%は［盟友］を得た！
			;=============================

			KSTR:(K++) = _呼び名_は、リゾートや_主人_のことを強く気に入ってくれているようだ……
			KSTR:(K++) = 正式に当リゾートの魔術顧問になってくれないだろうか。
			KSTR:(K++) = きっと引き受けてくれるだろうと考え、提案すると――
			KSTR:(K++) = 　
			KSTR:(K++) = 「いいわよ」
			KSTR:(K++) = 　
			KSTR:(K++) = ――話を切り出した時点で、承諾を頂けてしまった。
			KSTR:(K++) = 引き受けてくれれば多少の謝礼を包むつもりだ、例えば稀覯本の取り寄せなどするつもりだ……と言おうとしていたのだが。
			WSTR:(K++) = 　
			KSTR:(K++) = 「今更阿漕なことをするとは思わないわ。
			KSTR:(K++) = 　_二人称_は、あのeraとか言う存在と同盟していて、思惑はあるみたいだけど――
			KSTR:(K++) = 　――でも、このリゾートの経営については本気みたいだから。
			KSTR:(K++) = 　_一人称_は、_二人称_を信頼していると、そう言っても差し支えはない」
			WSTR:(K++) = 　
			KSTR:(K++) = 「それに、まあ――こちらでの身分を手に入れて、まったく新しい知識を手に入れる足掛かりになるなら、_一人称_としても悪い話じゃないわ。
			KSTR:(K++) = 　まあ……忘れないでほしいのは、_一人称_は、自分からは、あんまり動かないつもりということ――
			KSTR:(K++) = 　_一人称_という外付けの辞書を引くのは、_二人称_なんだから。忘れないように」
			WSTR:(K++) = 　
			KSTR:(K++) = ……なるほど。
			KSTR:(K++) = そういうことなら、その信頼に応えさせていただこう。
			WSTR:(K++) = 　
			KSTR:(K++) = 「ええ。これからよろしく。レミィに戻ってこいって言われたら、ちょっと戻るくらいはするけどね」
			WSTR:(K++) = 　
			KSTR:(K++) = _呼び名_は、そう言って、静かに笑った。
			WSTR:(K++) = 　
			KSTR:(K++) = _主人_と_呼び名_は正式に契約を結んだ！
			KSTR:(K++) = _呼び名_は[リゾート付き魔術士]に着任した！
			WSTR:(K++) = 　

			CALL 口上変数表示(対象キャラ, 0)
	ENDSELECT

