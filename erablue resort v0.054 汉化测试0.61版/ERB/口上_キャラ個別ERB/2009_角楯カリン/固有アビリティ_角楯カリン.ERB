;アビリティ１：火力支援、開始：敵1人に対して攻撃力の223%分のダメージ/さらに50%の確率で、麻痺状態を付与
;アビリティ２：迅速に、正確に：敵横一列に対して、攻撃力の325%分のダメージ
;アビリティ３：広域射撃、開始：敵全体に対して111%分のダメージ
;サポートアビリティ１：精密に、慎重に：奥義発動時、自身の会心率を12%増加
;サポートアビリティ２：後方支援：2ターン一度、ランダムな敵1人に対して攻撃力の118%分のダメージ/対象の現在のHPに比例してダメージが1～3倍に変更
;→「敵BATTLE_STATE」の「ＨＰ」を参照。HP2分の1以下：2倍、HP3分の1以下：3倍のダメージ。

;----------------------------------------------------------------------------------
;アビリティ１処理
;----------------------------------------------------------------------------------	
@固有アビ_2009_1(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM 効果数値
#DIM 成功確率
#DIM 効果ターン

IF 基礎BATTLE_STATE:キャラ番号:Lv >= 24
	アビ名 = 火力支援、開始+
	消費ＭＰ = 60
	効果数値 = 424
	成功確率 = 50
	効果ターン = 3
ELSE
	アビ名 = 火力支援、開始
	消費ＭＰ = 60
	効果数値 = 223
	成功確率 = 50
	効果ターン = 2
ENDIF

SELECTCASE RAND:3
CASE 0
	アビ汎用文字列:実行時メッセージ１ = 「外さない」
CASE 1
	アビ汎用文字列:実行時メッセージ１ = 「私の目からは逃れられない」
CASEELSE
	アビ汎用文字列:実行時メッセージ１ = 「吹っ飛べ！」
ENDSELECT

SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>敵単体に自属性の［攻撃力✕{効果数値}％］ダメージを与える。
		詳細文文字列受け渡し変数 += @"<br>更に確率で麻痺させる［{効果ターン}ターン/{成功確率}％］"
		RETURN 消費ＭＰ
	CASE "アビ効果"
		CALL アビ対象選択テンプレート_敵単体
		アビ汎用変数:効果割合 = 効果数値
		CALL アビテンプレート_ダメージ処理_自属性

		CALL アビ汎用変数文字列リセット
		アビ汎用文字列:バフ・デバフ枠 = 麻痺_火力支援
		アビ汎用文字列:バフ・デバフ対象能力 = 麻痺
		アビ汎用変数:効果割合 = 100
		アビ汎用変数:基礎成功確率 = 成功確率
		アビ汎用変数:持続ターン = 効果ターン
		CALL アビテンプレート_不利効果_デバフ効果セット
ENDSELECT

;----------------------------------------------------------------------------------
;アビリティ２処理
;----------------------------------------------------------------------------------	
@固有アビ_2009_2(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM 効果数値
#DIM 防御力無視割合

IF 基礎BATTLE_STATE:キャラ番号:Lv >= 32
	アビ名 = 迅速に、正確に+
	消費ＭＰ = 80
	効果数値 = 521
	防御力無視割合 = 48
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 12
	アビ名 = 迅速に、正確に
	消費ＭＰ = 80
	効果数値 = 325
	防御力無視割合 = 32
ENDIF

SELECTCASE RAND:3
CASE 0
	アビ汎用文字列:実行時メッセージ１ = 「特に異変は……目標発見！」
CASE 1
	アビ汎用文字列:実行時メッセージ１ = 「今のところは……いや、見つけた！」
CASE 2
	アビ汎用文字列:実行時メッセージ１ = 「目標……捉えた！」
CASE 3
	アビ汎用文字列:実行時メッセージ１ = 「逃がさない……！」
CASE 4
	アビ汎用文字列:実行時メッセージ１ = 「ふっ……！」
CASEELSE
	アビ汎用文字列:実行時メッセージ１ = 「ファイア！」
ENDSELECT

SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>敵横列に自属性の［攻撃力✕{効果数値}％］ダメージを与える。
		詳細文文字列受け渡し変数 += @"<br>このアビリティは相手の防御力を{防御力無視割合}％無視する。"
		RETURN 消費ＭＰ
	CASE "アビ効果"
		CALL アビ対象選択テンプレート_敵横列
		アビ汎用変数:防御無視オプション_割合 = 防御力無視割合
		アビ汎用変数:効果割合 = 効果数値
		CALL アビテンプレート_ダメージ処理_自属性
ENDSELECT

;----------------------------------------------------------------------------------
;アビリティ３処理
;----------------------------------------------------------------------------------	
@固有アビ_2009_3(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM 効果数値
#DIM 防御力無視割合

IF 基礎BATTLE_STATE:キャラ番号:Lv >= 40
	アビ名 = 広域射撃、開始+
	消費ＭＰ = 100
	効果数値 = 192
	防御力無視割合 = 32
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 20
	アビ名 = 広域射撃、開始
	消費ＭＰ = 100
	効果数値 = 111
	防御力無視割合 = 20
ENDIF

SELECTCASE RAND:3
CASE 0
	アビ汎用文字列:実行時メッセージ１ = 「いくぞ！」
CASE 1
	アビ汎用文字列:実行時メッセージ１ = 「全員撃ち落とす！」
CASEELSE
	アビ汎用文字列:実行時メッセージ１ = 「徹甲弾装填！これは痛いぞ……！」
ENDSELECT

SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>敵全体に自属性の［攻撃力✕{効果数値}％］ダメージを与える。
		詳細文文字列受け渡し変数 += @"<br>このアビリティは相手の防御力を{防御力無視割合}％無視する。"
		RETURN 消費ＭＰ
	CASE "アビ効果"
		CALL アビ対象選択テンプレート_敵全体_生者のみ
		アビ汎用変数:防御無視オプション_割合 = 防御力無視割合
		アビ汎用変数:効果割合 = 効果数値
		CALL アビテンプレート_ダメージ処理_自属性
ENDSELECT

;----------------------------------------------------------------------------------
;サポアビ処理
;----------------------------------------------------------------------------------
;サポアビ処理
@固有行動開始時処理_キャラ_2009
#DIM カリン番号
#DIM 隊列番号
#DIM 効果数値１

カリン番号 = GETCHARA(2009)
隊列番号 = キャラ隊列検索(GETCHARA(2009))

;数値設定
IF 陥落チェック(カリン番号)
	効果数値１ = 224
ELSE
	効果数値１ = 118
ENDIF

;2ターンに1度判定
戦闘中カウント:隊列番号:0 += 1
IF 戦闘中カウント:隊列番号:0 % 2 == 0 ;2で割って余りが0だった場合、2ターンと判定
	SELECTCASE RAND:4
	CASE 0
		アビ汎用文字列:実行時メッセージ１ = 「後方支援、開始」
	CASE 1
		アビ汎用文字列:実行時メッセージ１ = 「その傷口に叩き込む」
	CASE 2
		アビ汎用文字列:実行時メッセージ１ = 「狙いを定めて……」
	CASEELSE
		アビ汎用文字列:実行時メッセージ１ = 「泣きっ面に蜂だ！」
	ENDSELECT

	アビテンプレート用_アビ名 = 後方支援

	CALL アビ対象選択テンプレート_敵ランダムＸ体(1)
	IF 敵BATTLE_STATE:(アビテンプレート用_対象保存:0 - 10):ＨＰ < 敵BATTLE_STATE:(アビテンプレート用_対象保存:0 - 10):最大ＨＰ / 3
		;敵ＨＰが3分の1以下の場合、威力3倍
		アビ汎用変数:効果割合 = 効果数値１ * 3
	ELSEIF 敵BATTLE_STATE:(アビテンプレート用_対象保存:0 - 10):ＨＰ < 敵BATTLE_STATE:(アビテンプレート用_対象保存:0 - 10):最大ＨＰ / 2
		;敵ＨＰが2分の1以下の場合、威力2倍
		アビ汎用変数:効果割合 = 効果数値１ * 2
	ELSE
		;敵ＨＰが2分の1以上の場合、通常威力
		アビ汎用変数:効果割合 = 効果数値１
	ENDIF
	CALL アビテンプレート_ダメージ処理_自属性
ENDIF

;--------------------------------------------------
;戦闘能力の固有処理説明
;--------------------------------------------------
@口上_ステータス画面_固有特性解説_2009(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

;口上と同じ感覚で使う為に書式を統一しているが、ステータス画面で表示されるので
;基本的にWAIT系列は使わないことを推奨

KSTR:(K++) = □ 特性：『精密に、慎重に』  □-----------------------------------------------------------
IF 陥落チェック(対象キャラ)
	KSTR:(K++) = 　奥義発動時、自身の会心率を［24％/3T］上昇させる（独自枠）
	KSTR:(K++) = 　
ELSE
	KSTR:(K++) = 　奥義発動時、自身の会心率を［12％/3T］上昇させる（独自枠）
	KSTR:(K++) = 　
ENDIF

KSTR:(K++) = □ 特性：『後方支援』  □-----------------------------------------------------------
IF 陥落チェック(対象キャラ)
	KSTR:(K++) = 　2ターンに1度、ランダムな敵1体に対して自属性の［攻撃力✕224％］ダメージを与える。
	KSTR:(K++) = 　攻撃対象の現在のHPが2分の1以下の場合、ダメージが2倍に上昇する。
	KSTR:(K++) = 　攻撃対象の現在のHPが3分の1以下の場合、ダメージが3倍に上昇する。
	KSTR:(K++) = 　
ELSE
	KSTR:(K++) = 　2ターンに1度、ランダムな敵1体に対して自属性の［攻撃力✕118％］ダメージを与える。
	KSTR:(K++) = 　攻撃対象の現在のHPが2分の1以下の場合、ダメージが2倍に上昇する。
	KSTR:(K++) = 　攻撃対象の現在のHPが3分の1以下の場合、ダメージが3倍に上昇する。
	KSTR:(K++) = 　
ENDIF

CALL 口上変数表示(対象キャラ, 1)
